:: On the Characterization of Modular and Distributive Lattices
::  by Adam Naumowicz
::
:: Received April 3, 1998
:: Copyright (c) 1998 Association of Mizar Users

environ

 vocabulary ORDINAL1, BOOLE, RELAT_2, LATTICE3, ORDERS_1, LATTICES, WAYBEL_0,
      YELLOW_1, CAT_1, FILTER_2, WELLORD1, PRE_TOPC, YELLOW_0, FUNCT_1, SEQM_3,
      RELAT_1, ORDINAL2, MEASURE5, QUANTAL1, FINSET_1, BHSP_3, YELLOW11;
 notation TARSKI, XBOOLE_0, ENUMSET1, SUBSET_1, RELAT_1, FUNCT_1, FUNCT_2,
      PRE_TOPC, STRUCT_0, ORDERS_1, LATTICE3, ORDERS_3, YELLOW_0, YELLOW_1,
      YELLOW_2, WAYBEL_1, LATTICE5, FINSET_1, GROUP_1, WAYBEL_0, ORDINAL1;
 constructors LATTICE3, GROUP_1, ORDERS_3, WAYBEL_1, ENUMSET1;
 clusters STRUCT_0, LATTICE3, YELLOW_0, ORDERS_1, FINSET_1, YELLOW_1, RELSET_1,
      XBOOLE_0;
 requirements NUMERALS, REAL, SUBSET, BOOLE;


begin

reserve x for set;

:: Preliminaries

theorem :: YELLOW11:1
 3 = {0,1,2};

theorem :: YELLOW11:2
 2\1={1};

theorem :: YELLOW11:3
 3\1 = {1,2};

theorem :: YELLOW11:4
 3\2 = {2};

begin:: Main part

theorem :: YELLOW11:5
 for L being antisymmetric reflexive with_infima with_suprema RelStr
 for a,b being Element of L holds a"/\"b = b iff a"\/"b = a;

theorem :: YELLOW11:6
 for L being LATTICE
 for a,b,c being Element of L holds (a"/\"b)"\/"(a"/\"c) <= a"/\"(b"\/"c);

theorem :: YELLOW11:7
 for L being LATTICE
 for a,b,c being Element of L holds a"\/"(b"/\"c) <= (a"\/"b)"/\"(a"\/"c);

theorem :: YELLOW11:8
 for L being LATTICE
 for a,b,c being Element of L holds a <= c implies a"\/"(b"/\"c) <= (a"\/"b)
"/\"c;

definition
 func N_5 -> RelStr equals
:: YELLOW11:def 1
 InclPoset {0, 3 \ 1, 2, 3 \ 2, 3};
end;


registration
 cluster N_5 -> strict reflexive transitive antisymmetric;
correctness by Def1;
 cluster N_5 -> with_infima with_suprema;
correctness
 proof
  set Z = {0, 3 \ 1, 2, 3 \ 2, 3};
  set N = InclPoset Z;
A1: Z <> {} by ENUMSET1:24;
A2:     N is with_suprema
         proof
            now
           let x,y be set;
           assume x in Z & y in Z;
then A3:     (x=0 or x=3\1 or x=2 or x=3\2 or x=3) &
           (y=0 or y=3\1 or y=2 or y=3\2 or y=3) by ENUMSET1:23;
A4:           (3\1) \/ 2 = {0,1,1,2} by Th3,CARD_5:1,ENUMSET1:45
                    .= {1,1,0,2} by ENUMSET1:110
                    .= {1,0,2} by ENUMSET1:71
                    .= {0,1,2} by ENUMSET1:99;
A5:           (3\1) \/ (3\2) = {1,2} by Th3,Th4,ZFMISC_1:14;
             3\1 c= 3 by XBOOLE_1:36;
then A6:           (3\1) \/ 3 = 3 by XBOOLE_1:12;
A7:           2 \/ (3\2) = 2 \/ 3 & 2 c= 3 by CARD_1:56,XBOOLE_1:39;
then A8:           2 \/ 3 = 3 by XBOOLE_1:12;
             3\2 c= 3 by XBOOLE_1:36;
           then (3\2) \/ 3 = 3 by XBOOLE_1:12;
           hence x \/ y in Z by A3,A4,A5,A6,A7,A8,Th1,Th3,ENUMSET1:24;
          end;
          hence thesis by A1,YELLOW_1:11;
         end;
          N is with_infima
         proof
          let x,y be Element of N;
A9:          Z = the carrier of N by YELLOW_1:1;
          thus ex z being Element of N st z <= x & z <= y &
          for z' being Element of N st z' <= x & z' <= y holds z' <= z
          proof
           per cases by A1,A9,ENUMSET1:23;
           suppose
         x = 0 & y = 0;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose
         x = 0 & y = 3\1;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose x = 0 & y = 2;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose x = 0 & y = 3\2;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose x = 0 & y = 3;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose x = 3\1 & y = 0;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose
         x = 3\1 & y = 3\1;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose
A10:        x = 3\1 & y = 2;
             0 in Z by ENUMSET1:24;
           then 0 in the carrier of N by YELLOW_1:1;
           then reconsider z = 0 as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:2;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let z' be Element of N;
             z' is Element of Z by YELLOW_1:1;
then A11:     z'=0 or z'=3\1 or z'=2 or z'=3\2 or z'=3 by A1,ENUMSET1:23;
           assume z' <= x & z' <= y;
then A12:        z' c= 3\1 & z' c= 2 by A1,A10,YELLOW_1:3;
A13:       now
            assume z'= 3\1;
            then 2 in z' & not 2 in 2 by Th3,TARSKI:def 2;
            hence contradiction by A12;
           end;
A14:        now
            assume
            z'= 2;
            then 0 in z' & not 0 in 3\1 by Th3,CARD_5:1,TARSKI:def 2;
            hence contradiction by A12;
           end;
A15:       now
            assume z'= 3\2;
            then 2 in z' & not 2 in 2 by Th4,TARSKI:def 1;
            hence contradiction by A12;
           end;
             now
            assume z'= 3;
            then 2 in z' & not 2 in 2 by Th1,ENUMSET1:14;
            hence contradiction by A12;
           end;
           hence z' <= z by A1,A11,A13,A14,A15,YELLOW_1:3;

           end;
           suppose
A16:        x = 3\1 & y = 3\2;
             (3\1) /\ (3\2) = {2} by Th3,Th4,ZFMISC_1:19;
           then x /\ y in Z by A16,Th4,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose
A17:       x = 3\1 & y = 3;
             (3\1) /\ 3 = (3 /\ 3) \ 1 by XBOOLE_1:49
                    .= 3\1;
           then x /\ y in Z by A17,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose x = 2 & y = 0;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose
A18:       x = 2 & y = 3\1;
             0 in Z by ENUMSET1:24;
           then 0 in the carrier of N by YELLOW_1:1;
           then reconsider z = 0 as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:2;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let z' be Element of N;
             z' is Element of Z by YELLOW_1:1;
then A19:     z'=0 or z'=3\1 or z'=2 or z'=3\2 or z'=3 by A1,ENUMSET1:23;
           assume z' <= x & z' <= y;
then A20:        z' c= 3\1 & z' c= 2 by A1,A18,YELLOW_1:3;
A21:       now
            assume z'= 3\1;
            then 2 in z' & not 2 in 2 by Th3,TARSKI:def 2;
            hence contradiction by A20;
           end;
A22:        now
            assume
            z'= 2;
            then 0 in z' & not 0 in 3\1 by Th3,CARD_5:1,TARSKI:def 2;
            hence contradiction by A20;
           end;
A23:       now
            assume z'= 3\2;
            then 2 in z' & not 2 in 2 by Th4,TARSKI:def 1;
            hence contradiction by A20;
           end;
             now
            assume z'= 3;
            then 2 in z' & not 2 in 2 by Th1,ENUMSET1:14;
            hence contradiction by A20;
           end;
           hence z' <= z by A1,A19,A21,A22,A23,YELLOW_1:3;

           end;
           suppose
        x = 2 & y = 2;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose
A24:       x = 2 & y = 3\2;
             2 misses (3\2) by XBOOLE_1:79;
           then 2 /\ (3\2) = 0 by XBOOLE_0:def 7;
           then x /\ y in Z by A24,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose
A25:       x = 2 & y = 3;
             2 c= 3 by CARD_1:56;
           then 2 /\ 3 = 2 by XBOOLE_1:28;
           then x /\ y in Z by A25,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose x = 3\2 & y = 0;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;
           end;
           suppose
A26:       x = 3\2 & y = 3\1;
             (3\1) /\ (3\2) = {2} by Th3,Th4,ZFMISC_1:19;
           then x /\ y in Z by A26,Th4,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;
           end;
           suppose
A27:       x = 3\2 & y = 2;
             2 misses (3\2) by XBOOLE_1:79;
           then 2 /\ (3\2) = 0 by XBOOLE_0:def 7;
           then x /\ y in Z by A27,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;
           end;
           suppose
        x = 3\2 & y = 3\2;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose
A28:       x = 3\2 & y = 3;
             (3\2) /\ 3 = (3 /\ 3) \2 by XBOOLE_1:49
                    .= 3\2;
           then x /\ y in Z by A28,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;

           end;
           suppose x = 3 & y = 0;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;
           end;
           suppose
A29:       x = 3 & y = 3\1;
             (3\1) /\ 3 = (3 /\ 3) \ 1 by XBOOLE_1:49
                    .= 3\1;
           then x /\ y in Z by A29,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;
           end;
           suppose
A30:       x = 3 & y = 2;
             2 c= 3 by CARD_1:56;
           then 2 /\ 3 = 2 by XBOOLE_1:28;
           then x /\ y in Z by A30,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;
           end;
           suppose
A31:       x = 3 & y = 3\2;
             (3\2) /\ 3 = (3 /\ 3) \2 by XBOOLE_1:49
                    .= 3\2;
           then x /\ y in Z by A31,ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;
           end;
           suppose
        x = 3 & y = 3;
           then x /\ y in Z by ENUMSET1:24;
           then x /\ y in the carrier of N by YELLOW_1:1;
           then reconsider z = x /\ y as Element of N;
           take z;
             z c= x & z c= y by XBOOLE_1:17;
           hence z <= x & z <= y by A1,YELLOW_1:3;
           let w be Element of N;
           assume w <= x & w <= y;
           then w c= x & w c= y by A1,YELLOW_1:3;
           then w c= x /\ y by XBOOLE_1:19;
           hence thesis by A1,YELLOW_1:3;
          end;
          end;
         end;
        hence thesis by A2,Def1;
       end;
end;


definition
 func M_3 -> RelStr equals
:: YELLOW11:def 2
 InclPoset{ 0, 1, 2 \ 1, 3 \ 2, 3 };
end;


registration
 cluster M_3 -> strict reflexive transitive antisymmetric;
correctness by Def2;
 cluster M_3 -> with_infima with_suprema;
correctness
 proof
  set Z = { 0, 1, 2 \ 1, 3 \ 2, 3 };
  set N = InclPoset Z;
A1: Z <> {} by ENUMSET1:24;
A2: N is with_suprema
 proof
  let x,y be Element of N;
A3:  Z = the carrier of N by YELLOW_1:1;
   thus ex z being Element of N st x <= z & y <= z &
        for z' being Element of N st x <= z' & y <= z' holds z <= z'
    proof
     per cases by A1,A3,ENUMSET1:23;
     suppose
    x=0 & y=0;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose x=0 & y=1;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose x=0 & y=2\1;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose x=0 & y=3\2;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose x=0 & y=3;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose x=1 & y=0;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
    x=1 & y=1;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
A4:   x=1 & y=2\1;
       3 in Z by ENUMSET1:24;
     then 3 in the carrier of N by YELLOW_1:1;
     then reconsider z = 3 as Element of N;
     take z;
       x c= z & y c= z
      proof
       thus x c= z
        proof
         let X be set;
         assume X in x; then X=0 by A4,CARD_5:1,TARSKI:def 1;
         hence X in z by Th1,ENUMSET1:14;
        end;
        let X be set;
        assume X in y; then X=1 by A4,Th2,TARSKI:def 1;
        hence X in z by Th1,ENUMSET1:14;
      end;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let z' be Element of N;
       z' is Element of Z by YELLOW_1:1;
     then A5: z'=0 or z'=1 or z'=2\1 or z'=3\2 or z'=3 by A1,ENUMSET1:23;
     assume x <= z' & y <= z';
     then A6:  1 c= z' & 2\1 c= z' by A1,A4,YELLOW_1:3;
A7:  now
      assume A8: z'= 0;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A6,A8;
     end;
A9:  now
      assume A10: z'= 1;
        1 in 2\1 by Th2,TARSKI:def 1;
      then 1 in z' by A6;
      hence contradiction by A10;
     end;
A11: now
      assume A12: z'= 2\1;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A6,A12,Th2,TARSKI:def 1;
     end;
       now
      assume A13: z'= 3\2;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A6,A13,Th4,TARSKI:def 1;
     end;
     hence z <= z' by A1,A5,A7,A9,A11,YELLOW_1:3;

     end;
     suppose
A14:   x=1 & y=3\2;
       3 in Z by ENUMSET1:24;
     then 3 in the carrier of N by YELLOW_1:1;
     then reconsider z = 3 as Element of N;
     take z;
       x c= z & y c= z
      proof
       thus x c= z
        proof
         let X be set;
         assume X in x; then X=0 by A14,CARD_5:1,TARSKI:def 1;
         hence X in z by Th1,ENUMSET1:14;
        end;
        thus thesis by A14,XBOOLE_1:36;
      end;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let z' be Element of N;
       z' is Element of Z by YELLOW_1:1;
     then A15: z'=0 or z'=1 or z'=2\1 or z'=3\2 or z'=3 by A1,ENUMSET1:23;
     assume x <= z' & y <= z';
     then A16:  1 c= z' & 3\2 c= z' by A1,A14,YELLOW_1:3;
A17:  now
      assume A18: z'= 0;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A16,A18;
     end;
A19:  now
      assume A20: z'= 1;
        2 in 3\2 by Th4,TARSKI:def 1;
      hence contradiction by A16,A20,CARD_5:1,TARSKI:def 1;
     end;
A21: now
      assume A22: z'= 2\1;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A16,A22,Th2,TARSKI:def 1;
     end;
       now
      assume A23: z'= 3\2;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A16,A23,Th4,TARSKI:def 1;
     end;
     hence z <= z' by A1,A15,A17,A19,A21,YELLOW_1:3;
     end;
     suppose
A24:   x=1 & y=3;
       1 c= 3
      proof
       let X be set;assume X in 1; then X=0 by CARD_5:1,TARSKI:def 1;
       hence thesis by Th1,ENUMSET1:14;
      end;
     then 1 \/ 3 = 3 by XBOOLE_1:12;
     then x \/ y in Z by A24,ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose x=2\1 & y=0;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
A25:   x=2\1 & y=1;
       3 in Z by ENUMSET1:24;
     then 3 in the carrier of N by YELLOW_1:1;
     then reconsider z = 3 as Element of N;
     take z;
       x c= z & y c= z
      proof
       thus x c= z
        proof
         let X be set;
         assume X in x; then X=1 by A25,Th2,TARSKI:def 1;
         hence X in z by Th1,ENUMSET1:14;
        end;
        let X be set;
        assume X in y; then X=0 by A25,CARD_5:1,TARSKI:def 1;
        hence X in z by Th1,ENUMSET1:14;
      end;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let z' be Element of N;
       z' is Element of Z by YELLOW_1:1;
     then A26: z'=0 or z'=1 or z'=2\1 or z'=3\2 or z'=3 by A1,ENUMSET1:23;
     assume x <= z' & y <= z';
     then A27:  1 c= z' & 2\1 c= z' by A1,A25,YELLOW_1:3;
A28:  now
      assume A29: z'= 0;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A27,A29;
     end;
A30:  now
      assume A31: z'= 1;
        1 in 2\1 by Th2,TARSKI:def 1;
      then 1 in z' by A27;
      hence contradiction by A31;
     end;
A32: now
      assume A33: z'= 2\1;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A27,A33,Th2,TARSKI:def 1;
     end;
       now
      assume A34: z'= 3\2;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A27,A34,Th4,TARSKI:def 1;
     end;
     hence z <= z' by A1,A26,A28,A30,A32,YELLOW_1:3;
     end;
     suppose
    x=2\1 & y=2\1;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
A35:   x=2\1 & y=3\2;
       3 in Z by ENUMSET1:24;
     then 3 in the carrier of N by YELLOW_1:1;
     then reconsider z = 3 as Element of N;
     take z;
       x c= z & y c= z
      proof
       thus x c= z
        proof
         let X be set;
         assume X in x; then X=1 by A35,Th2,TARSKI:def 1;
         hence X in z by Th1,ENUMSET1:14;
        end;
        let X be set;
        assume X in y; then X=2 by A35,Th4,TARSKI:def 1;
        hence X in z by Th1,ENUMSET1:14;
      end;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let z' be Element of N;
       z' is Element of Z by YELLOW_1:1;
     then A36: z'=0 or z'=1 or z'=2\1 or z'=3\2 or z'=3 by A1,ENUMSET1:23;
     assume x <= z' & y <= z';
     then A37:  2\1 c= z' & 3\2 c= z' by A1,A35,YELLOW_1:3;
A38:  now
      assume A39: z'= 0;
        1 in 2\1 by Th2,TARSKI:def 1;
      hence contradiction by A37,A39;
     end;
A40:  now
      assume A41: z'= 1;
        1 in 2\1 by Th2,TARSKI:def 1;
      then 1 in z' by A37;
      hence contradiction by A41;
     end;
A42: now
      assume A43: z'= 2\1;
        2 in 3\2 by Th4,TARSKI:def 1;
      hence contradiction by A37,A43,Th2,TARSKI:def 1;
     end;
       now
      assume A44: z'= 3\2;
        1 in 2\1 by Th2,TARSKI:def 1;
      hence contradiction by A37,A44,Th4,TARSKI:def 1;
     end;
     hence z <= z' by A1,A36,A38,A40,A42,YELLOW_1:3;
     end;
     suppose
A45:   x=2\1 & y=3;
       2\1 c= 3
      proof
       let X be set;assume X in 2\1; then X=1 by Th2,TARSKI:def 1;
       hence thesis by Th1,ENUMSET1:14;
      end;
     then (2\1) \/ 3 = 3 by XBOOLE_1:12;
     then x \/ y in Z by A45,ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose x=3\2 & y=0;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
A46:   x=3\2 & y=1;
       3 in Z by ENUMSET1:24;
     then 3 in the carrier of N by YELLOW_1:1;
     then reconsider z = 3 as Element of N;
     take z;
       x c= z & y c= z
      proof
       thus x c= z by A46,XBOOLE_1:36;
       thus y c= z
        proof
         let X be set;
         assume X in y; then X=0 by A46,CARD_5:1,TARSKI:def 1;
         hence X in z by Th1,ENUMSET1:14;
        end;
      end;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let z' be Element of N;
       z' is Element of Z by YELLOW_1:1;
     then A47: z'=0 or z'=1 or z'=2\1 or z'=3\2 or z'=3 by A1,ENUMSET1:23;
     assume x <= z' & y <= z';
     then A48:  1 c= z' & 3\2 c= z' by A1,A46,YELLOW_1:3;
A49:  now
      assume A50: z'= 0;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A48,A50;
     end;
A51:  now
      assume A52: z'= 1;
        2 in 3\2 by Th4,TARSKI:def 1;
      hence contradiction by A48,A52,CARD_5:1,TARSKI:def 1;
     end;
A53: now
      assume A54: z'= 2\1;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A48,A54,Th2,TARSKI:def 1;
     end;
       now
      assume A55: z'= 3\2;
        0 in 1 by CARD_5:1,TARSKI:def 1;
      hence contradiction by A48,A55,Th4,TARSKI:def 1;
     end;
     hence z <= z' by A1,A47,A49,A51,A53,YELLOW_1:3;
     end;
     suppose
A56:   x=3\2 & y=2\1;
       3 in Z by ENUMSET1:24;
     then 3 in the carrier of N by YELLOW_1:1;
     then reconsider z = 3 as Element of N;
     take z;
       x c= z & y c= z
      proof
       thus x c= z
        proof
         let X be set;
         assume X in x; then X=2 by A56,Th4,TARSKI:def 1;
         hence X in z by Th1,ENUMSET1:14;
        end;
        let X be set;
        assume X in y; then X=1 by A56,Th2,TARSKI:def 1;
        hence X in z by Th1,ENUMSET1:14;
      end;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let z' be Element of N;
       z' is Element of Z by YELLOW_1:1;
     then A57: z'=0 or z'=1 or z'=2\1 or z'=3\2 or z'=3 by A1,ENUMSET1:23;
     assume x <= z' & y <= z';
     then A58:  2\1 c= z' & 3\2 c= z' by A1,A56,YELLOW_1:3;
A59:  now
      assume A60: z'= 0;
        1 in 2\1 by Th2,TARSKI:def 1;
      hence contradiction by A58,A60;
     end;
A61:  now
      assume A62: z'= 1;
        1 in 2\1 by Th2,TARSKI:def 1;
      then 1 in z' by A58;
      hence contradiction by A62;
     end;
A63: now
      assume A64: z'= 2\1;
        2 in 3\2 by Th4,TARSKI:def 1;
      hence contradiction by A58,A64,Th2,TARSKI:def 1;
     end;
       now
      assume A65: z'= 3\2;
        1 in 2\1 by Th2,TARSKI:def 1;
      hence contradiction by A58,A65,Th4,TARSKI:def 1;
     end;
     hence z <= z' by A1,A57,A59,A61,A63,YELLOW_1:3;
     end;
     suppose
    x=3\2 & y=3\2;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
A66:   x=3\2 & y=3;
       3\2 c= 3
      proof
       let X be set;assume X in 3\2; then X=2 by Th4,TARSKI:def 1;
       hence thesis by Th1,ENUMSET1:14;
      end;
     then 3\2 \/ 3 = 3 by XBOOLE_1:12;
     then x \/ y in Z by A66,ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose x=3 & y=0;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
A67:   x=3 & y=1;
       1 c= 3
      proof
       let X be set;assume X in 1; then X=0 by CARD_5:1,TARSKI:def 1;
       hence thesis by Th1,ENUMSET1:14;
      end;
     then 1 \/ 3 = 3 by XBOOLE_1:12;
     then x \/ y in Z by A67,ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
A68:   x=3 & y=2\1;
       2\1 c= 3
      proof
       let X be set;assume X in 2\1; then X=1 by Th2,TARSKI:def 1;
       hence thesis by Th1,ENUMSET1:14;
      end;
     then (2\1) \/ 3 = 3 by XBOOLE_1:12;
     then x \/ y in Z by A68,ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
A69:   x=3 & y=3\2;
       3\2 c= 3
      proof
       let X be set;assume X in 3\2; then X=2 by Th4,TARSKI:def 1;
       hence thesis by Th1,ENUMSET1:14;
      end;
     then 3\2 \/ 3 = 3 by XBOOLE_1:12;
     then x \/ y in Z by A69,ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
     end;
     suppose
    x=3 & y=3;
     then x \/ y in Z by ENUMSET1:24;
     then x \/ y in the carrier of N by YELLOW_1:1;
     then reconsider z = x \/ y as Element of N;
     take z;
       x c= z & y c= z by XBOOLE_1:7;
     hence x <= z & y <= z by A1,YELLOW_1:3;
     let w be Element of N;
     assume x <= w & y <= w;
     then x c= w & y c= w by A1,YELLOW_1:3;
     then x \/ y c= w by XBOOLE_1:8;
     hence thesis by A1,YELLOW_1:3;
    end;
    end;
 end;
      N is with_infima
     proof
        now
       let x,y be set;
       assume x in Z & y in Z;
       then A70: (x=0 or x=1 or x=2\1 or x=3\2 or x=3) &
       (y=0 or y=1 or y=2\1 or y=3\2 or y=3) by ENUMSET1:23;
             1 misses (2\1) by XBOOLE_1:79;
then A71:       1 /\ (2\1) = 0 by XBOOLE_0:def 7;
A72:       1 /\ (3\2) = 0
        proof
           now let x be set;
          assume x in 1 /\ (3\2);
          then x in 1 & x in (3\2) by XBOOLE_0:def 3;
          then x=0 & x=2 & 0<>2 by Th4,CARD_5:1,TARSKI:def 1;
          hence contradiction;
         end;
         hence thesis by XBOOLE_0:def 1;
        end;
         1 c= 3 by CARD_1:56;
then A73:       1 /\ 3 = 1 by XBOOLE_1:28;
A74:       (2\1) /\ (3\2) = 0
        proof
           now let x be set;
          assume x in (2\1) /\ (3\2);
          then x in (2\1) & x in (3\2) by XBOOLE_0:def 3;
          then x=1 & x=2 & 1<>2 by Th2,Th4,TARSKI:def 1;
          hence contradiction;
         end;
         hence thesis by XBOOLE_0:def 1;
        end;
         (2\1) c= 3
        proof
         let x be set;
         assume x in 2\1;
         then x = 1 by Th2,TARSKI:def 1;
         hence thesis by Th1,ENUMSET1:14;
        end;
       then A75:       (2\1) /\ 3 = 2\1 by XBOOLE_1:28;
         (3\2) c= 3 by XBOOLE_1:36;
        then (3\2) /\ 3 = 3\2 by XBOOLE_1:28;
       hence x /\ y in Z by A70,A71,A72,A73,A74,A75,ENUMSET1:24;
      end;
      hence thesis by A1,YELLOW_1:12;
     end;
 hence thesis by A2,Def2;
end;
end;


theorem :: YELLOW11:9
for L being LATTICE holds
(ex K being full Sublattice of L st N_5,K are_isomorphic) iff
(ex a,b,c,d,e being Element of L st
(a<>b & a<>c & a<>d & a<>e & b<>c & b<>d & b<>e & c <>d & c <>e & d<>e &
a"/\"b = a & a"/\"c = a & c"/\"e = c & d"/\"e = d &
  b"/\"c = a & b"/\"d = b & c"/\"d = a & b"\/"c = e & c"\/"d = e));

theorem :: YELLOW11:10
for L being LATTICE holds
(ex K being full Sublattice of L st M_3,K are_isomorphic) iff
ex a,b,c,d,e being Element of L st
(a<>b & a<>c & a<>d & a<>e & b<>c & b<>d & b<>e & c <>d & c <>e & d<>e &
a"/\"b = a & a"/\"c = a & a"/\"d = a & b"/\"e = b & c"/\"e = c & d"/\"e = d &
  b"/\"c = a & b"/\"d = a & c"/\"d = a & b"\/"c = e & b"\/"d = e & c"\/"d = e);

begin:: Modular lattices

definition
 let L be non empty RelStr;
 attr L is modular means
:: YELLOW11:def 3
 for a,b,c being Element of L st a <= c holds a"\/"(b"/\"c) = (a"\/"b)"/\"c;
end;


registration
 cluster distributive -> modular
 (non empty antisymmetric reflexive with_infima RelStr);
 coherence
  proof
   let L be non empty antisymmetric reflexive with_infima RelStr;
   assume
A1: L is distributive;
     now
    let a,b,c be Element of L;
    assume a <= c;
    hence a"\/"(b"/\"c) = (a"/\"c)"\/"(b"/\"c) by YELLOW_0:25
                   .= (a"\/"b)"/\"c by A1,WAYBEL_1:def 3;
   end;
   hence L is modular by Def3;
  end;
end;

theorem :: YELLOW11:11
  for L being LATTICE holds L is modular iff
 not ex K being full Sublattice of L st N_5,K are_isomorphic;

theorem :: YELLOW11:12
  for L being LATTICE st L is modular holds L is distributive iff
 not ex K being full Sublattice of L st M_3,K are_isomorphic;

begin:: Intervals of a lattice

definition
 let L be non empty RelStr;
 let a,b be Element of L;
  func [#a,b#] -> Subset of L means
:: YELLOW11:def 4
 for c being Element of L holds c in it iff a <= c & c <= b;
end;


definition
 let L be non empty RelStr;
 let IT be Subset of L;
  attr IT is interval means
:: YELLOW11:def 5
 ex a,b being Element of L st IT = [#a,b#];
end;


registration
 let L be non empty reflexive transitive RelStr;
 cluster non empty interval -> directed (Subset of L);
 coherence
  proof
   let M be Subset of L;
   assume
A1: M is non empty interval;
   then consider a,b being Element of L such that
A2: M = [#a,b#] by Def5;
   let x,y be Element of L;
   assume
A3: x in M & y in M;
   take b;
   consider z being set such that
A4: z in M by A1,XBOOLE_0:def 1;
   reconsider z as Element of L by A4;
     a <= z & z <= b by A2,A4,Def4;
   then a <= b & b <= b by ORDERS_1:26;
   hence b in M by A2,Def4;
   thus x <= b & y <= b by A2,A3,Def4;
  end;
 cluster non empty interval -> filtered (Subset of L);
 coherence
  proof
   let M be Subset of L;
   assume
A5: M is non empty interval;
   then consider a,b being Element of L such that
A6: M = [#a,b#] by Def5;
   let x,y be Element of L;
   assume
A7: x in M & y in M;
   take a;
   consider z being set such that
A8: z in M by A5,XBOOLE_0:def 1;
   reconsider z as Element of L by A8;
     a <= z & z <= b by A6,A8,Def4;
   then a <= a & a <= b by ORDERS_1:26;
   hence a in M by A6,Def4;
   thus a <= x & a <= y by A6,A7,Def4;
  end;
end;


registration
 let L be non empty RelStr;
 let a,b be Element of L;
 cluster [#a,b#] -> interval;
coherence by Def5;
end;


theorem :: YELLOW11:13
   for L being non empty reflexive transitive RelStr,
 a,b being Element of L holds [#a,b#] = uparrow a /\ downarrow b;

registration
 let L be with_infima Poset;
 let a,b be Element of L;
cluster subrelstr[#a,b#] -> meet-inheriting;
 coherence
  proof
   set ab = subrelstr[#a,b#];
   let x,y be Element of L;
   assume
     x in the carrier of ab & y in the carrier of ab & ex_inf_of {x,y},L;
   then x in [#a,b#] & y in [#a,b#] by YELLOW_0:def 15;
then A1: x <= b & a <= x & a <= y by Def4;
A2: inf {x,y} = x"/\"y by YELLOW_0:40;
   then inf {x,y} <= x & inf {x,y} <= y by YELLOW_0:23;
then A3: inf {x,y} <= b by A1,YELLOW_0:def 2;
     a <= inf {x,y} by A1,A2,YELLOW_0:23;
   then inf {x,y} in [#a,b#] by A3,Def4;
   hence inf {x,y} in the carrier of ab by YELLOW_0:def 15;
   end;
end;


registration
 let L be with_suprema Poset;
 let a,b be Element of L;
cluster subrelstr[#a,b#] -> join-inheriting;
 coherence
  proof
   set ab = subrelstr([#a,b#]);
   let x,y be Element of L; assume
     x in the carrier of ab & y in the carrier of ab & ex_sup_of {x,y},L;
   then x in [#a,b#] & y in [#a,b#] by YELLOW_0:def 15;
then A1: x <= b & y <= b & a <= x & a <= y by Def4;
A2: sup {x,y} = x"\/"y by YELLOW_0:41;
   then x <= sup {x,y} & y <= sup {x,y} by YELLOW_0:22;
then A3: a <= sup {x,y} by A1,YELLOW_0:def 2;
   sup {x,y} <= b by A1,A2,YELLOW_0:22;
   then sup {x,y} in [#a,b#] by A3,Def4;
   hence sup {x,y} in the carrier of ab by YELLOW_0:def 15;
   end;
end;


theorem :: YELLOW11:14
   for L being LATTICE, a,b being Element of L holds
 L is modular implies subrelstr[#b,a"\/"b#],subrelstr[#a"/\"
b,a#] are_isomorphic;

registration
 cluster finite non empty LATTICE;
existence
 proof
  consider s being set;
  set D = {s};
  consider R being Order of D;
  reconsider A = RelStr (#D,R#) as with_infima with_suprema Poset;
  take A;
  thus thesis by GROUP_1:def 13;
 end;
end;


registration
 cluster finite -> lower-bounded Semilattice;
coherence
 proof
  let L be Semilattice;
  defpred P[set] means ex x being Element of L st x is_<=_than $1;
  assume L is finite; then
A1: the carrier of L is finite by GROUP_1:def 13;
A2: P[{}]
    proof
     consider a being Element of L;
     take a;
     let b be Element of L;
     assume b in {};
     hence thesis;
    end;
A3: for x,B being set st x in the carrier of L & B c= the carrier of L & P[B]
     holds P[B \/ {x}]
   proof
    let x,B be set;
    assume that
A4:  x in the carrier of L and
      B c= the carrier of L;
    given a being Element of L such that
A5: a is_<=_than B;
    reconsider y=x as Element of L by A4;
    take b = a"/\"y;
    let c be Element of L;
    assume
A6:    c in B \/ {x};
A7:  now
     assume c in B;
     then a <= c & a"/\"y <= a by A5,LATTICE3:def 8,YELLOW_0:23;
     hence a"/\"y <= c by ORDERS_1:26;
    end;
      now
     assume c in {x};
     then c = y by TARSKI:def 1;
     hence b <= c by YELLOW_0:23;
    end;
    hence thesis by A6,A7,XBOOLE_0:def 2;
   end;
  thus P[the carrier of L] from FINSET_1:sch 2(A1,A2,A3);
 end;
end;


registration
 cluster finite -> complete LATTICE;
coherence
 proof
  let L be LATTICE;
  assume
A1: L is finite;
then A2: the carrier of L is finite by GROUP_1:def 13;
    for x being Subset of L holds ex_sup_of x,L
   proof
    let x be Subset of L;
    per cases;
    suppose
A3:  x = {};
      L is finite LATTICE by A1;
    hence thesis by A3,YELLOW_0:42;
    end;
    suppose
A4: x <> {};
      x is finite by A2,FINSET_1:13;
    hence thesis by A4,YELLOW_0:54;
   end;
   end;
  hence thesis by YELLOW_0:53;
 end;
end;

