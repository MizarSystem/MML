:: Properties of Go-Board - Part III
::  by Jaros{\l}aw Kotowicz and Yatsuka Nakamura
::
:: Received August 24, 1992
:: Copyright (c) 1992 Association of Mizar Users

environ

 vocabularies PRE_TOPC, EUCLID, FINSEQ_1, GOBOARD1, RELAT_1, TOPREAL1,
      FINSEQ_4, BOOLE, MATRIX_1, FUNCT_1, ABSVALUE, ARYTM_1, MCART_1, TREES_1,
      INCSP_1, SEQM_3, ORDINAL2, ARYTM;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, NUMBERS, XCMPLX_0, COMPLEX1,
      NAT_1, FUNCT_1, PARTFUN1, FINSEQ_1, PRE_TOPC, STRUCT_0, MATRIX_1, EUCLID,
      TOPREAL1, GOBOARD1, XXREAL_0;
 constructors PARTFUN1, XXREAL_0, NAT_1, COMPLEX1, TOPREAL1, SEQ_1, GOBOARD1;
 registrations XBOOLE_0, ORDINAL1, RELSET_1, XXREAL_0, XREAL_0, NAT_1,
      MEMBERED, STRUCT_0, EUCLID, INT_1, VALUED_0;
 requirements REAL, NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions TARSKI, TOPREAL1, XBOOLE_0;
 theorems TARSKI, REAL_1, NAT_1, ZFMISC_1, FUNCT_1, FINSEQ_1, ABSVALUE,
      FINSEQ_3, REAL_2, MATRIX_1, EUCLID, TOPREAL1, TOPREAL3, GOBOARD1,
      GOBOARD2, FINSEQ_4, PARTFUN2, INT_1, XBOOLE_0, XBOOLE_1, XREAL_1,
      COMPLEX1, XXREAL_0, PARTFUN1, ORDINAL1, CARD_2, RELAT_1;
 schemes NAT_1, FINSEQ_4, GOBOARD2;

begin

reserve p,p1,p2,q for Point of TOP-REAL 2,
  f,g,g1,g2 for FinSequence of TOP-REAL 2,
  n,m,i,j,k for Element of NAT,
  G for Go-board,
  x for set;

Lm1: now
  let f,k;
  assume
A1: len f=k+1;
  assume k<>0;
  then
A2: 0<k & k<=k+1 by NAT_1:11;
  then 0+1<=k & k<=len f & k+1 <= len f by A1,NAT_1:13;
  then
A3: k in dom f by FINSEQ_3:27;
A4: len (f|k)=k by A1,FINSEQ_1:80,NAT_1:11;
A5: dom(f|k)=Seg len(f|k) by FINSEQ_1:def 3;
  assume
A6: f is unfolded;
  thus f|k is unfolded
  proof
    set f1 = f|k;
    let n be Nat;
    assume
A7: 1<=n & n+2 <= len f1;
    reconsider n as Element of NAT by ORDINAL1:def 13;
    n in dom f1 & n+1 in dom f1 & n+2 in dom f1 & n+1+1=n+(1+1)
    by A7,GOBOARD2:4;
    then
A8: LSeg(f1,n)=LSeg(f,n) & LSeg(f1,n+1)=LSeg(f,n+1) &
    f1/.(n+1)=f/.(n+1) by A3,A4,A5,FINSEQ_4:86,TOPREAL3:24;
    len f1 <= len f by A1,A2,FINSEQ_1:80;
    then n+2 <= len f by A7,XXREAL_0:2;
    hence thesis by A6,A7,A8,TOPREAL1:def 8;
  end;
end;

theorem Th1:
  (for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
  f is one-to-one unfolded s.n.c. special implies
  ex g st g is_sequence_on G & g is one-to-one unfolded s.n.c. special &
  L~f = L~g & f/.1 = g/.1 & f/.len f = g/.len g & len f <= len g
proof
  defpred P[Element of NAT] means for f st len f = $1 &
  (for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
  f is one-to-one unfolded s.n.c. special ex g st g is_sequence_on G &
  g is one-to-one unfolded s.n.c. special &
  L~f=L~g & f/.1=g/.1 & f/.len f=g/.len g & len f<=len g;
A1: P[0]
  proof
    let f such that
A2: len f=0 &
    (for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
    f is one-to-one unfolded s.n.c. special;
    take g=f;
    f= {} by A2,CARD_2:59;
    then for n holds n in dom g & n+1 in dom g implies (
    for m,k,i,j st [m,k] in Indices G & [i,j] in Indices G & g/.n=G*(m,k) &
    g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1) by RELAT_1:60;
    hence thesis by A2,GOBOARD1:def 11;
  end;
A3: for k st P[k] holds P[k+1]
  proof
    let k such that
A4: P[k];
    let f such that
A5: len f=k+1 and
A6: for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j) and
A7: f is one-to-one and
A8: f is unfolded and
A9: f is s.n.c. and
A10: f is special;
    per cases;
    suppose k=0;
      then
A11:  dom f = {1} by A5,FINSEQ_1:4,def 3;
      take g=f;
      now
        let n;
        assume n in dom g & n+1 in dom g;
        then n=1 & n+1=1 by A11,TARSKI:def 1;
        hence for i1,i2,j1,j2 be Element of NAT st [i1,i2] in Indices G &
        [j1,j2] in Indices G &
        g/.n=G*(i1,i2) & g/.(n+1)=G*(j1,j2) holds abs(i1-j1)+abs(i2-j2)=1;
      end;
      hence g is_sequence_on G by A6,GOBOARD1:def 11;
      thus g is one-to-one unfolded s.n.c. special &
      L~f=L~g & f/.1=g/.1 & f/.len f=g/.len g & len f<=len g by A7,A8,A9,A10;
    end;
    suppose
A12:  k<>0;
      then
A13:  0<k & k<=k+1 by NAT_1:11;
      then
A14:  0+1<=k & k<=len f & k+1 <= len f by A5,NAT_1:13;
      then
A15:  k in dom f by FINSEQ_3:27;
A16:  len (f|k)=k by A5,FINSEQ_1:80,NAT_1:11;
A17:  dom(f|k)=Seg len(f|k) by FINSEQ_1:def 3;
A18:  k in Seg k by A14,FINSEQ_1:3;
A19:  1 in Seg k by A14,FINSEQ_1:3;
      set f1=f|k;
A20:  now
        let n;
        assume
A21:    n in dom f1;
        then n in dom f by A15,A16,A17,FINSEQ_4:86;
        then consider i,j such that
A22:    [i,j] in Indices G & f/.n=G*(i,j) by A6;
        take i,j;
        thus [i,j] in Indices G & f1/.n=G*(i,j)
        by A15,A16,A17,A21,A22,FINSEQ_4:86;
      end;
      f1 = f|Seg k by FINSEQ_1:def 15;
      then
A23:  f1 is one-to-one by A7,FUNCT_1:84;
A24:  f1 is unfolded by A5,A8,A12,Lm1;
A25:  f1 is s.n.c. by A9,GOBOARD2:12;
      f1 is special
      proof
        let n be Nat;
        assume
A26:    1<=n & n+1 <= len f1;
        then n in dom f1 & n+1 in dom f1 by GOBOARD2:3;
        then
A27:    f1/.n=f/.n & f1/.(n+1)=f/.(n+1) by A15,A16,A17,FINSEQ_4:86;
        len f1 <=len f by A5,A13,FINSEQ_1:80;
        then n+1 <= len f by A26,XXREAL_0:2;
        hence (f1/.n)`1=(f1/.(n+1))`1 or (f1/.n)`2=(f1/.(n+1))`2
        by A10,A26,A27,TOPREAL1:def 7;
      end;
      then consider g1 such that
A28:  g1 is_sequence_on G and
A29:  g1 is one-to-one and
A30:  g1 is unfolded and
A31:  g1 is s.n.c. and
A32:  g1 is special and
A33:  L~g1=L~f1 and
A34:  g1/.1=f1/.1 and
A35:  g1/.len g1=f1/.len f1 and
A36:  len f1<=len g1 by A4,A16,A20,A23,A24,A25;
A37:  k=1 implies L~g1={} & rng g1 = {f/.k}
      proof
        assume
A38:    k=1;
        hence L~g1={} by A16,A33,TOPREAL1:28;
        then
A39:    (len g1=1 or len g1=0) & 1<=len g1
        by A5,A36,A38,FINSEQ_1:80,TOPREAL1:28;
        then
A40:    len g1 in dom g1 by FINSEQ_3:27;
A41:    g1/.len g1=f/.k by A15,A16,A18,A35,FINSEQ_4:86;
        then f/.k in rng g1 by A40,PARTFUN2:4;
        then
A42:    {f/.k} c= rng g1 by ZFMISC_1:37;
        rng g1 c= {f/.k}
        proof
          let x;
          assume x in rng g1;
          then consider n such that
A43:      n in dom g1 & g1/.n=x by PARTFUN2:4;
          n in Seg len g1 by A43,FINSEQ_1:def 3;
          then n=len g1 by A39,FINSEQ_1:4,TARSKI:def 1;
          hence x in {f/.k} by A41,A43,TARSKI:def 1;
        end;
        hence rng g1={f/.k} by A42,XBOOLE_0:def 10;
      end;
A44:  1<k implies rng g1 c= L~f1
      proof
        assume 1<k;
        then
A45:    1+1<=k by NAT_1:13;
        let x;
        assume x in rng g1;
        then consider n such that
A46:    n in dom g1 & g1/.n=x by PARTFUN2:4;
        thus x in L~f1 by A16,A33,A36,A45,A46,GOBOARD1:16,XXREAL_0:2;
      end;
      consider i1,i2 be Element of NAT such that
A47:  [i1,i2] in Indices G & f/.k=G*(i1,i2) by A6,A15;
      1<=len f by A14,XXREAL_0:2;
      then
A48:  k+1 in dom f by A5,FINSEQ_3:27;
      then consider j1,j2 be Element of NAT such that
A49:  [j1,j2] in Indices G & f/.(k+1)=G*(j1,j2) by A6;
A50:  Indices G = [:dom G,Seg width G:] by MATRIX_1:def 5;
      then
A51:  i1 in dom G & i2 in Seg width G &
      j1 in dom G & j2 in Seg width G by A47,A49,ZFMISC_1:106;
A52:  dom G = Seg len G by FINSEQ_1:def 3;
A53:  (for n st n in dom g1 ex m,k st [m,k] in Indices G & g1/.n=G*(m,k)) &
      for n st n in dom g1 & n+1 in dom g1 holds
      for m,k,i,j st [m,k] in Indices G &
      [i,j] in Indices G & g1/.n = G*(m,k) &
      g1/.(n+1) = G*(i,j) holds abs(m-i)+abs(k-j) = 1 by A28,GOBOARD1:def 11;
      reconsider l1 = Line(G,i1), c1 = Col(G,i2) as FinSequence of TOP-REAL 2;
      set x1 = X_axis(l1), y1 = Y_axis(l1), x2 = X_axis(c1), y2 = Y_axis(c1);
A54:  x1 is constant by A51,GOBOARD1:def 6;
A55:  y1 is increasing by A51,GOBOARD1:def 8;
A56:  x2 is increasing by A51,GOBOARD1:def 9;
A57:  y2 is constant by A51,GOBOARD1:def 7;
A58:  dom x1=Seg len x1 by FINSEQ_1:def 3;
A59:  dom y1=Seg len y1 by FINSEQ_1:def 3;
A60:  len y1=len l1 by GOBOARD1:def 4;
A61:  len x1=len l1 by GOBOARD1:def 3;
A62:  len l1=width G by MATRIX_1:def 8;
      then
A63:  Seg width G = dom l1 by FINSEQ_1:def 3;
A64:  dom x2= Seg len x2 by FINSEQ_1:def 3;
A65:  dom y2=Seg len y2 by FINSEQ_1:def 3;
A66:  len x2=len c1 by GOBOARD1:def 3;
      then
A67:  dom c1 = Seg len x2 by FINSEQ_1:def 3
        .= dom x2 by FINSEQ_1:def 3;
A68:  len y2=len c1 by GOBOARD1:def 4;
A69:  len c1 = len G by MATRIX_1:def 9;
      then
A70:  dom c1 = Seg len G by FINSEQ_1:def 3
        .= dom G by FINSEQ_1:def 3;
      now per cases by A10,A15,A47,A48,A49,GOBOARD2:16;
        suppose
A71:      i1=j1;
          set ppi = G*(i1,i2), pj = G*(i1,j2);
          now per cases by XXREAL_0:1;
            case
A72:          i2>j2;
              then reconsider l=i2-j2 as Element of NAT by INT_1:18;
A73:          now
                let n;
                assume n in Seg l;
                then
A74:            1<=n & n<=l & 0<=j2 by FINSEQ_1:3;
                l<=i2 by XREAL_1:45;

then reconsider w=i2-n as Element of NAT by A74,INT_1:18,XXREAL_0:2;
                0<=n & i2-l<=i2-n by A74,REAL_1:92;
                then i2-n<=i2 & i2<=width G & j2<=w & 1<=j2
                by A51,FINSEQ_1:3,XREAL_1:45;
                then 1<=w & w<=width G by XXREAL_0:2;
                then w in Seg width G by FINSEQ_1:3;
                hence i2-n is Element of NAT & [i1,i2-n] in Indices G &
                i2-n in Seg width G by A50,A51,ZFMISC_1:106;
              end;
              defpred P1[Element of NAT,set] means for m st m=i2-$1
              holds $2=G*(i1,m);
A75:          now
                let n;
                assume n in Seg l;
                then reconsider m=i2-n as Element of NAT by A73;
                take p=G*(i1,m);
                thus P1[n,p];
              end;
              consider g2 such that
A76:          len g2=l & for n st n in Seg l holds P1[n,g2/.n]
              from FINSEQ_4:sch 1(A75);
A77:          dom g2 = Seg l by A76,FINSEQ_1:def 3;
              take g=g1^g2;
              now
                let n;
                assume
A78:            n in dom g2;
                then reconsider m=i2-n as Element of NAT by A73,A77;
                take k=i1,m;
                thus [k,m] in Indices G & g2/.n=G*(k,m) by A73,A76,A77,A78;
              end;
              then
A79:          for n st n in dom g ex i,j st [i,j] in Indices G & g/.n=G*
              (i,j) by A53,GOBOARD1:39;
A80:          now
                let n;
                assume
A81:            n in dom g2 & n+1 in dom g2;
                then
A82:            [i1,i2-n] in Indices G
                & [i1,i2-(n+1)] in Indices G by A73,A77;

reconsider m1=i2-n,m2=i2-(n+1) as Element of NAT by A73,A77,A81;
A83:            g2/.n=G*(i1,m1) & g2/.(n+1)=G*(i1,m2) by A76,A77,A81;
                let l1,l2,l3,l4 be Element of NAT;
                assume
                [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2)
                & g2/.(n+1)=G*(l3,l4);
                then l1=i1 & l2=m1 & l3=i1 & l4=m2 by A82,A83,GOBOARD1:21;

hence abs(l1-l3)+abs(l2-l4)= 0+abs(i2-n-(i2-(n+1))) by ABSVALUE:7
                  .= 1 by ABSVALUE:def 1;
              end;
              now
                let l1,l2,l3,l4 be Element of NAT;
                assume
A84:            [l1,l2] in Indices G & [l3,l4] in Indices G &
                g1/.len g1=G*(l1,l2) &
                g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
                then
A85:            [i1,i2-1] in Indices G &
                f1/.len f1=f/.k by A15,A16,A18,A73,A77,FINSEQ_4:86;
                reconsider m1=i2-1 as Element of NAT by A73,A77,A84;
                g2/.1=G*(i1,m1) by A76,A77,A84;
                then l1=i1 & l2=i2 & l3=i1 & l4=m1
                by A35,A47,A84,A85,GOBOARD1:21;
                hence abs(l1-l3)+abs(l2-l4)=0+abs(i2-(i2-1)) by ABSVALUE:7
                  .=1 by ABSVALUE:def 1;
              end;
              then for n st n in dom g & n+1 in dom g holds
              for m,k,i,j st [m,k] in Indices G & [i,j] in Indices G &
              g/.n=G*(m,k) &

g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A80,GOBOARD1:40;
              hence g is_sequence_on G by A79,GOBOARD1:def 11;

set lk={w where w is Point of TOP-REAL 2: w`1=ppi`1 & pj`2<=w`2 & w`2<=
              ppi`2};
              l1/.i2=l1.i2 & l1/.j2 = l1.j2 by A51,A63,PARTFUN1:def 8;
              then
A86:          l1/.i2=ppi & l1/.j2=pj by A51,MATRIX_1:def 8;
              then
A87:          y1.i2=ppi`2 & y1.j2=pj`2 & x1.i2=ppi`1 & x1.j2 =pj`1 & l=len g2
              by A51,A58,A59,A60,A61,A62,A76,GOBOARD1:def 3,def 4;
              then
A88:          pj`2<ppi`2 & ppi`1=pj`1 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj`2]|

by A51,A54,A55,A58,A59,A60,A61,A62,A72,EUCLID:57,GOBOARD1:def 1,def 2;
A89:          LSeg(f,k)=LSeg(pj,ppi) by A14,A47,A49,A71,TOPREAL1:def 5
                .= lk by A88,TOPREAL3:15;
A90:          LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5;
              now
                let n,m;
                assume
A91:            n in dom g2 & m in dom g2 & n<>m;
                then
A92:            [i1,i2-n] in Indices G& [i1,i2-m] in Indices G by A73,A77;
                reconsider n1=i2-n, m1=i2-m as Element of NAT by A73,A77,A91;
A93:            g2/.n=G*(i1,n1) & g2/.m=G*(i1,m1) by A76,A77,A91;
                assume g2/.n=g2/.m;
                then n1=m1 by A92,A93,GOBOARD1:21;
                hence contradiction by A91;
              end;
              then for n,m st n in dom g2 & m in dom g2 &
              g2/.n = g2/.m holds n = m;
              then
A94:          g2 is one-to-one & dom g2=Seg len g2 by FINSEQ_1:def 3
              ,PARTFUN2:16;
A95:          not f/.k in rng g2
              proof
                assume f/.k in rng g2;
                then consider n such that
A96:            n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
A97:            [i1,i2-n] in Indices G by A73,A76,A94,A96;
                reconsider n1=i2-n as Element of NAT by A73,A76,A94,A96;
                g2/.n=G*(i1,n1) & 0+1<=n by A76,A94,A96,FINSEQ_1:3;
                then n1=i2 & 0<n by A47,A96,A97,GOBOARD1:21;
                hence contradiction;
              end;
A98:          now
                let n,p;
                assume
A99:            n in dom g2 & g2/.n=p;
                then
A100:           P1[n,g2/.n] &

1<=n & n<=len g2& i2-n in Seg width G by A73,A76,A94,FINSEQ_3:27;
                reconsider n1=i2-n as Element of NAT by A73,A77,A99;
                set pn = G*(i1,n1);
                l1/.n1=l1.n1 by A63,A100,PARTFUN1:def 8;
                then
A101:           g2/.n=pn & l1/.n1=pn & 0<=n & i2-len g2<= n1
                by A100,MATRIX_1:def 8,REAL_1:92;
                then
A102:           x1.n1=pn`1 & x1.n1=x1.i2 & y1.n1=pn`2 & n1 <=i2 & j2<=n1

by A51,A54,A58,A59,A60,A61,A62,A76,A100,GOBOARD1:def 2,def 3,def 4,REAL_2:173;
                hence p`1=ppi`1 & pj`2<=p`2 & p`2<=ppi`2
                by A51,A55,A59,A60,A62,A87,A99,A100,A101,GOBOARD2:18;
                dom l1 = Seg len l1 by FINSEQ_1:def 3;
                hence p in rng l1 by A62,A99,A100,A101,PARTFUN2:4;
                n1<i2 by A100,XREAL_1:46;
                hence p`2<ppi`2 by A51,A55,A59,A60,A62,A87,A99,A100,A101,A102,
                GOBOARD1:def 1;
              end;
A103:         now
                let n,m,p,q;
                assume
A104:           n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
                then
A105:           P1[n,g2/.n] & i2-n in Seg width G &
                P1[m,g2/.m] & i2-m in Seg width G by A73,A76,A77;
                reconsider n1=i2-n, m1=i2-m as Element of NAT by A73,A77,A104;
                set pn = G*(i1,n1), pm = G*(i1,m1);
                l1/.n1=l1.n1 & l1/.m1 = l1.m1 by A63,A105,PARTFUN1:def 8;
                then
A106:           g2/.n=pn & l1/.n1=pn & g2/.m=pm & l1/.m1= pm & m1<n1
                by A104,A105,MATRIX_1:def 8,REAL_1:92;

then y1.n1=pn`2 & y1.m1=pm`2 by A59,A60,A62,A105,GOBOARD1:def 4;
                hence q`2<p`2 by A55,A59,A60,A62,A104,A105,A106,GOBOARD1:def 1;
              end;
A107:         rng g2 c= LSeg(f,k)
              proof
                let x;
                assume x in rng g2;
                then consider n such that
A108:           n in dom g2 & g2/.n=x by PARTFUN2:4;
                reconsider n1=i2-n as Element of NAT by A73,A76,A94,A108;
                set pn = G*(i1,n1);
A109:           g2/.n=pn by A76,A94,A108;
                then pn`1=ppi`1 & pj`2<=pn`2 & pn`2<=ppi`2 by A98,A108;
                hence x in LSeg(f,k) by A89,A108,A109;
              end;
              rng g1 /\ rng g2 = {}
              proof consider x being Element of rng g1 /\ rng g2;
                assume not thesis;
                then
A110:           x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
                now per cases by A14,REAL_1:def 5;
                  suppose k=1;
                    hence contradiction by A37,A95,A110,TARSKI:def 1;
                  end;
                  suppose 1<k;
                    then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
                    by A5,A8,A9,A44,A107,A110,GOBOARD2:9,XBOOLE_0:def 3;
                    hence contradiction by A95,A110,TARSKI:def 1;
                  end;
                end;
                hence contradiction;
              end;
              then rng g1 misses rng g2 by XBOOLE_0:def 7;
              hence g is one-to-one by A29,A94,FINSEQ_3:98;
A111:         for n st 1<=n & n+2 <= len g2 holds
              LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
              proof
                let n;
                assume
A112:           1<=n & n+2 <= len g2;
                then
A113:           n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
                then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
                g2/.(n+2) in rng g2 by PARTFUN2:4;
                then
A114:           g2/.n in lk & g2/.(n+1) in lk & g2/.(n+2) in lk by A89,A107;
                then consider u be Point of TOP-REAL 2 such that
A115:           g2/.n=u & u`1=ppi`1 & pj`2<=u`2 & u`2<=ppi`2;
                consider u1 be Point of TOP-REAL 2 such that
A116:           g2/.(n+1)=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2 by A114;
                consider u2 be Point of TOP-REAL 2 such that
A117:           g2/.(n+2)=u2 & u2`1=ppi`1 & pj`2<=u2`2 & u2`2<=ppi`2 by A114;
                set lg = {w where w is Point of TOP-REAL 2:
                w`1=ppi`1 & u2`2<=w`2 & w`2<=u`2};
A118:           n+(1+1) = n+1+1;
                n+1 <= n+2 by XREAL_1:8;
                then n+1 <= len g2 by A112,XXREAL_0:2;
                then
A119:           LSeg(g2,n)=LSeg(u,u1) by A112,A115,A116,TOPREAL1:def 5;
                1 <= n+1 by NAT_1:11;
                then
A120:           LSeg(g2,n+1)=LSeg(u1,u2) by A112,A116,A117,A118,TOPREAL1:def 5;
                n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:13;
                then
A121:           u2`2<u1`2 & u1`2<u`2 by A103,A113,A115,A116,A117;
                then
A122:           u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2 ]| by A116,EUCLID:57;

then LSeg(g2/.n,g2/.(n+2))=lg by A115,A117,A121,TOPREAL3:15,XXREAL_0:2;
                hence thesis by A115,A116,A117,A119,A120,A122,TOPREAL1:14;
              end;
              thus g is unfolded
              proof
                let n be Nat;
                assume
A123:           1<=n & n+2 <= len g;
                then
A124:           n+1+1<=len g;
A125:           1 <= n+1 by NAT_1:11;
A126:           n<=n+1 & n+1<=n+1+1 by NAT_1:11;
                then
A127:           n+1 <= len g by A123,XXREAL_0:2;
A128:           n+(1+1)=n+1+1;
A129:           len g=len g1+len g2 by FINSEQ_1:35;
                n+2-len g1 = n-len g1 +2;
                then
A130:           n-len g1 + 2 <= len g2 by A123,A129,XREAL_1:22;
A131:           n+1+1 = n+(1+1);
                per cases;
                suppose
A132:             n+2 <= len g1;

then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
                  by A123,GOBOARD2:4;
                  then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
                  g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
                  hence thesis by A30,A123,A132,TOPREAL1:def 8;
                end;
                suppose len g1 < n+2;
                  then len g1+1<=n+2 by NAT_1:13;
                  then
A133:             len g1<=n+2-1 by XREAL_1:21;
                  now per cases;
                    suppose
A134:                 len g1=n+1;
                      now
                        assume
A135:                   k=1;
                        1<len g1 by A123,A134,NAT_1:13;
                        then 1+1<=len g1 by NAT_1:13;
                        hence contradiction by A37,A135,TOPREAL1:29;
                      end;
                      then
A136:                 1<k & LSeg(g1,n) c= L~f1
                      by A14,A33,REAL_1:def 5,TOPREAL3:26;
                      then
A137:                 L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                      1<=n+1 by NAT_1:11;
                      then
A138:                 n in dom g1 & n+1 in dom g1
                      by A123,A126,A134,FINSEQ_3:27;
                      then
A139:                 LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
A140:                 g/.(n+1)=f1/.len f1 by A35,A134,A138,FINSEQ_4:83
                        .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A141:                 1<=len g-len g1 by A124,A134,XREAL_1:21;
                      then
A142:                 g/.(n+2)=g2/.1 by A128,A129,A134,GOBOARD2:5;
                      1 in dom g2 by A129,A141,FINSEQ_3:27;
                      then
A143:                 g2/.1 in rng g2 by PARTFUN2:4;
                      then g2/.1 in lk by A89,A107;
                      then consider u1 be Point of TOP-REAL 2 such that
A144:                 g2/.1=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2;
                      ppi in LSeg(ppi,pj) by TOPREAL1:6;
                      then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1
                      )

by A90,A107,A123,A125,A131,A140,A142,A143,A144,TOPREAL1:12,def 5;
                      then
A145:                 LSeg(g,n) /\ LSeg(g,n+1) c= {g /.(n+1)}
                      by A47,A136,A137,A139,A140,XBOOLE_1:27;
                      g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                      by A123,A125,A127,A131,TOPREAL1:27;

then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;

then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
                      hence thesis by A145,XBOOLE_0:def 10;
                    end;
                    suppose len g1<>n+1;
                      then len g1<n+1 by A133,REAL_1:def 5;
                      then
A146:                 len g1<=n by NAT_1:13;

then reconsider n1=n-len g1 as Element of NAT by INT_1:18;
                      now per cases;
                        suppose
A147:                     len g1=n;
                          1<=len g1 by A14,A16,A36,XXREAL_0:2;
                          then len g1 in dom g1 by FINSEQ_3:27;
                          then
A148:                     g/.n=f1/.len f1 by A35,A147,FINSEQ_4:83
                            .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                          1 <= len g2 by A127,A129,A147,XREAL_1:8;
                          then
A149:                     g/.(n+1)=g2/.1 by A147,GOBOARD2:5;
                          2 <= len g2 by A123,A129,A147,XREAL_1:8;
                          then
A150:                     g/.(n+2)=g2/.2 by A147,GOBOARD2:5;
A151:                     0+2<=len g2 by A123,A129,A147,XREAL_1:8;
                          then 1<=len g2 by XXREAL_0:2;
                          then
A152:                     1 in dom g2 & 2 in dom g2 by A151,FINSEQ_3:27;
                          then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                          then
A153:                     g2/.1 in lk & g2/.2 in lk by A89,A107;
                          then consider u1 be Point of TOP-REAL 2 such that
A154:                     g2/.1=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2;
                          consider u2 be Point of TOP-REAL 2 such that
A155:                     g2

/.2=u2 & u2`1=ppi`1 & pj`2<=u2`2 & u2`2<=ppi`2 by A153;
A156:                     u2`2<u1`2 by A103,A152,A154,A155;
                          then
A157:                     u2`2<=u1`2 & u2`2<ppi `2 & u2=|[u2`1,u2`2]|
                          by A154,EUCLID:57,XXREAL_0:2;
                          set lg = {w where w is Point of TOP-REAL 2 :
                          w`1=ppi`1 & u2`2<=w`2 & w`2<=ppi`2};
A158:                     u1 in lg by A154,A156;
A159:                     LSeg(g,n)=LSeg(ppi,u1)
                          by A123,A127,A148,A149,A154,TOPREAL1:def 5;
A160:                     LSeg(g,n+1)=LSeg(u1,u2)
                          by A123,A125,A131,A149,A150,A154,A155,TOPREAL1:def 5;
                          LSeg(ppi,g2/.2)=lg by A88,A155,A157,TOPREAL3:15;

hence thesis by A149,A154,A155,A158,A159,A160,TOPREAL1:14;
                        end;
                        suppose len g1<>n;
                          then
A161:                     len g1<n by A146,REAL_1:def 5;
                          n1 + len g1 = n;
                          then
A162:                     LSeg(g,n)=LSeg(g2,n1) by A127,A161,GOBOARD2:10;
A163:                     len g1<n+1 by A126,A161,XXREAL_0:2;
A164:                     len g1+1<=n by A161,NAT_1:13;
A165:                     n+1 = n1+1+len g1;
                          n1 + 1 + len g1 = n + 1;
                          then
A166:                     n1+1 <= len g2 by A127,A129,XREAL_1:8;
A167:                     LSeg
                          (g,n+1)=LSeg(g2,n1+1) by A124,A163,A165,GOBOARD2:10;
A168:                     g/.(n+1)=g2/.(n1+1) by A165,A166,GOBOARD2:5,NAT_1:11;
                          1<=n1 by A164,XREAL_1:21;
                          hence thesis by A111,A130,A162,A167,A168;
                        end;
                      end;
                      hence thesis;
                    end;
                  end;
                  hence thesis;
                end;
              end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
              m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
              proof
                let n,m;
                assume that
A169:           m>n+1 and
A170:           n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
A171:           LSeg(g2,n) /\ LSeg(g2,m) <> {};
A172:           1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
                len g2 by A170,FINSEQ_3:27;
                reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
                as Point of TOP-REAL 2;
                set lp = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                p2`2<=w`2 & w`2<=p1`2},
                lq = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                q2`2<=w`2 & w`2<=q1`2};
                m<m+1 & n<n+1 by NAT_1:13;
                then
A173:           p2`2<p1`2 & q2`2<q1`2 & p1`1=ppi`1 & p2`1= ppi`1 & q1`1=
                ppi`1 & q2`1=ppi`1 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
                p2=|[p2`1,p2`2]| &
                q2=|[q2`1,q2`2]| by A98,A103,A170,EUCLID:57;
A174:           LSeg(g2,n) = LSeg(p2,p1) by A172,TOPREAL1:def 5
                  .=lp by A173,TOPREAL3:15;
A175:           LSeg(g2,m) = LSeg(q2,q1) by A172,TOPREAL1:def 5
                  .=lq by A173,TOPREAL3:15;
                consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
A176:           x in LSeg(g2,n) & x in LSeg(g2,m) by A171,XBOOLE_0:def 3;
                then
A177:           ex tn be Point of TOP-REAL 2
                st tn=x & tn`1=ppi`1 & p2`2<=tn`2 & tn`2<=p1`2 by A174;
A178:           ex tm be Point of TOP-REAL 2 st
                tm=x & tm`1=ppi`1 & q2`2<=tm`2 & tm`2<=q1`2 by A175,A176;
                q1`2<p2`2 by A103,A169,A170;
                hence contradiction by A177,A178,XXREAL_0:2;
              end;
              then
A179:         g2 is s.n.c. by GOBOARD2:6;
A180:         L~g2 c= LSeg(f,k)
              proof
                set ls={LSeg(g2,m): 1<=m & m+1 <= len g2};
                let x;
                assume x in L~g2;
                then consider X be set such that
A181:           x in X & X in ls by TARSKI:def 4;
                consider m such that
A182:           X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A181;
                m in dom g2 & m+1 in dom g2 by A182,GOBOARD2:3;
                then
A183:           g2/.m in rng g2 & g2/.(m+1) in rng g2 by PARTFUN2:4;
                reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
A184:           LSeg(q1,q2) c= LSeg(ppi,pj) by A90,A107,A183,TOPREAL1:12;
                LSeg(g2,m)=LSeg(q1,q2) by A182,TOPREAL1:def 5;
                hence thesis by A90,A181,A182,A184;
              end;
A185:         not f/.k in L~g2
              proof
                set ls={LSeg(g2,m): 1<=m & m+1 <= len g2};
                assume f/.k in L~g2;
                then consider X be set such that
A186:           f/.k in X & X in ls by TARSKI:def 4;
                consider m such that
A187:           X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A186;
A188:           m in dom g2 & m+1 in dom g2 & m<m+1
                by A187,GOBOARD2:3,NAT_1:13;
                reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
                set lq={w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                q2`2<=w`2 & w`2<=q1`2};
A189:           q1`1=ppi`1 & q2`1=ppi`1 & q2`2<q1`2 & q1=|[q1`1,q1`2]|
                & q2=|[q2`1,q2`2]| by A98,A103,A188,EUCLID:57;
                LSeg(g2,m)=LSeg(q2,q1) by A187,TOPREAL1:def 5
                  .=lq by A189,TOPREAL3:15;

then ex p st p=f/.k & p`1=ppi`1 & q2`2<=p`2 & p`2<=q1`2 by A186,A187;
                hence contradiction by A47,A98,A188;
              end;
A190:         L~g1 /\ L~g2 = {}
              proof
                per cases;
                suppose k=1;
                  hence thesis by A37;
                end;
                suppose k<>1;
                  then 1<k by A14,REAL_1:def 5;
                  then L~g1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,A33,GOBOARD2:9;
                  then
A191:             L~g1 /\ L~g2 c= {f/.k} by A180,XBOOLE_1:26;
                  now consider x being Element of L~g1 /\ L~g2;
                    assume L~g1 /\ L~g2 <> {};

then x in {f/.k} & x in L~g2 by A191,TARSKI:def 3,XBOOLE_0:def 3;
                    hence contradiction by A185,TARSKI:def 1;
                  end;
                  hence thesis;
                end;
              end;
              for n,m st m>n+1 & n in dom g & n+1 in dom g &
              m in dom g & m+1 in dom g holds LSeg(g,n) misses LSeg(g,m)
              proof
                let n,m;
                assume that
A192:           m>n+1 and
A193:           n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
A194:           1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
                m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
                by A193,FINSEQ_1:35,FINSEQ_3:27,NAT_1:11;
                set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
                l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
                j2+1<=i2 by A72,NAT_1:13;
                then
A195:           1<=l by XREAL_1:21;
                then
A196:           1 in dom g2 by A76,FINSEQ_3:27;
                reconsider qq=g2/.1 as Point of TOP-REAL 2;
                set ql={z where z is Point of TOP-REAL 2: z`1=ppi`1 &
                qq`2<=z`2 & z`2<=ppi`2};
A197:           1<=len g1 by A14,A16,A36,XXREAL_0:2;

then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
                then
A198:           g/.len g1=g1/.len g1 by FINSEQ_4:83
                  .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
A199:           len g1<len g1 +1 & len g1+1<=len g
                by A76,A194,A195,NAT_1:13,XREAL_1:9;
A200:           g/.(len g1+1)=qq by A76,A195,GOBOARD2:5;
A201:           qq`1=ppi`1 & pj`2<=qq`2 & qq`2<ppi`2 & qq=|[qq`1,qq`2]|
                by A98,A196,EUCLID:57;
A202:           LSeg
                (g,len g1)=LSeg(qq,ppi) by A197,A198,A199,A200,TOPREAL1:def 5
                  .= ql by A88,A201,TOPREAL3:15;
A203:           n+1<=m+1 by A192,A194,XXREAL_0:2;
                now per cases;
                  suppose
A204:               m+1<=len g1;
                    then
A205:               m<=len g1 & n+1<=len g1 by A194,A203,XXREAL_0:2;
                    then n<=len g1 by A194,XXREAL_0:2;

then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
                    by A194,A204,A205,FINSEQ_3:27;

then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m) by TOPREAL3:25;
                    hence thesis by A31,A192,TOPREAL1:def 9;
                  end;
                  suppose len g1<m+1;
                    then
A206:               len g1<=m by NAT_1:13;
                    then reconsider m1=m-len g1 as Element of NAT by INT_1:18;
                    now per cases;
                      suppose
A207:                   m=len g1;
                        now
                          assume
A208:                     k=1;
                          1<len g1 by A192,A194,A207,XXREAL_0:2;
                          then 1+1<=len g1 by NAT_1:13;
                          hence contradiction by A37,A208,TOPREAL1:29;
                        end;
                        then 1<k by A14,REAL_1:def 5;
                        then
A209:                   L~f1 /\ LSeg(f,k) ={f/.k} by A5,A8,A9,GOBOARD2:9;
                        n<=len g1 by A192,A194,A207,XXREAL_0:2;
                        then
A210:                   n in dom g1 & n+1 in dom g1
                        by A192,A194,A207,FINSEQ_3:27;
                        then
A211:                   LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                        then LSeg(g,n) in l1 by A192,A194,A207;
                        then
A212:                   LSeg(g,n) c= L~f1 by A33,ZFMISC_1:92;
                        LSeg(g,m) c= LSeg(f,k)
                        proof
                          let x;
                          assume x in LSeg(g,m);
                          then consider px be Point of TOP-REAL 2 such that
A213:                     px=x & px`1=ppi`1 & qq`2<=px`2 & px`2<=
                          ppi`2 by A202,A207;
                          pj`2<=px`2 by A201,A213,XXREAL_0:2;
                          hence thesis by A89,A213;
                        end;
                        then
A214:                   LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                        by A209,A212,XBOOLE_1:27;
                        now consider x being Element of LSeg(g,n) /\ LSeg(g,m);
                          assume LSeg(g,n)/\ LSeg(g,m)<>{};
                          then
A215:                     x in LSeg(g,n) & x in {f/.k}
                          by A214,TARSKI:def 3,XBOOLE_0:def 3;
                          then
A216:                     x=f/.k by TARSKI:def 1;
                          f/.k=g1/.len g1 by A15,A16,A18,A35,FINSEQ_4:86;
                          hence contradiction

by A29,A30,A31,A192,A207,A210,A211,A215,A216,GOBOARD2:7;
                        end;
                        hence thesis by XBOOLE_0:def 7;
                      end;
                      suppose m<>len g1;
                        then
A217:                   len g1<m & m+1 = m1+1 +len g1 by A206,REAL_1:def 5;
                        m = m1+len g1;
                        then
A218:                   LSeg(g,m)=LSeg(g2,m1) by A194,A217,GOBOARD2:10;
                        m1+1<=len g2 & len g1+1<=
                        m by A194,A217,NAT_1:13,XREAL_1:8;
                        then
A219:                   1<=m1 & m1+1 <= len g2 by XREAL_1:21;
                        then LSeg(g,m) in l2 by A218;
                        then
A220:                   LSeg(g,m) c= L~g2 by ZFMISC_1:92;
                        now per cases;
                          suppose
A221:                       n+1<=len g1;
                            then n<=len g1 by A194,XXREAL_0:2;

then n in dom g1 & n+1 in dom g1 by A194,A221,FINSEQ_3:27;
                            then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                            then LSeg(g,n) in l1 by A194,A221;
                            then LSeg(g,n) c= L~g1 by ZFMISC_1:92;

then LSeg(g,n) /\ LSeg(g,m) = {} by A190,A220,XBOOLE_1:3,27;
                            hence thesis by XBOOLE_0:def 7;
                          end;
                          suppose len g1<n+1;
                            then
A222:                       len g1<=n by NAT_1:13;

then reconsider n1=n-len g1 as Element of NAT by INT_1:18;
A223:                       n - len g1 + 1 = n + 1 - len g1;
A224:                       n = n1 + len g1;
                            now per cases;
                              suppose
A225:                           len g1=n;

now consider x being Element of LSeg(g,n) /\ LSeg(g,m );
                                  assume LSeg(g,n) /\ LSeg(g,m)<>{};
                                  then
A226:                             x in LSeg(g,n) & x in LSeg(g,m)
                                  by XBOOLE_0:def 3;
                                  then
A227:                             ex qx be Point of TOP-REAL 2 st

qx=x & qx`1=ppi`1 & qq`2<=qx`2 & qx`2<=ppi`2 by A202,A225;
A228:                             m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                                  by A219,GOBOARD2:3,NAT_1:13;
                                  reconsider q1=g2/.m1, q2=g2/.(m1+1)
                                  as Point of TOP-REAL 2;

set q1l={v where v is Point of TOP-REAL 2: v`1=ppi`1 & q2`2<=v`2 & v`2<=q1`2};
A229:                             q1

`1=ppi`1 & q2`1=ppi`1 & q2`2<q1`2 & q1=|[q1`1,q1`2]|&
                                  q2=|[q2`1,q2`2]| by A98,A103,A228,EUCLID:57;
                                  m1 > n1 + 1 & n1 + 1 >=
                                  1 by A192,A223,NAT_1:11,XREAL_1:11;
                                  then
A230:                             m1 > 1 by XXREAL_0:2;

LSeg(g2,m1)=LSeg(q2,q1) by A219,TOPREAL1:def 5
                                    .=q1l by A229,TOPREAL3:15;
                                  then
A231:                             ex qy be Point of TOP-REAL 2 st

qy=x & qy`1=ppi`1 & q2`2<=qy`2 & qy`2<=q1`2 by A218,A226;
                                  q1`2 < qq`2 by A103,A196,A228,A230;
                                  hence contradiction by A227,A231,XXREAL_0:2;
                                end;
                                hence thesis by XBOOLE_0:def 7;
                              end;
                              suppose n<>len g1;
                                then len g1<n by A222,REAL_1:def 5;
                                then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                                by A192,A194,A223,A224,GOBOARD2:10,XREAL_1:11;
                                hence thesis by A179,A218,TOPREAL1:def 9;
                              end;
                            end;
                            hence thesis;
                          end;
                        end;
                        hence thesis;
                      end;
                    end;
                    hence thesis;
                  end;
                end;
                hence thesis;
              end;
              hence g is s.n.c. by GOBOARD2:6;
A232:         g2 is special
              proof
                let n be Nat;
                set p = g2/.n, q = g2/.(n+1);
                assume 1<=n & n+1 <= len g2;
                then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
                then p`1=ppi`1 & q`1=ppi`1 by A98;
                hence p`1=q`1 or p`2=q`2;
              end;
              now
                set p=g1/.len g1, q=g2/.1;
                j2+1<=i2 by A72,NAT_1:13;
                then 1<=l by XREAL_1:21;
                then 1 in dom g2 by A77,FINSEQ_1:3;
                then q`1=ppi`1 by A98;
                hence p`1=q`1 or p`2=q`2 by A15,A16,A18,A35,A47,FINSEQ_4:86;
              end;
              hence g is special by A32,A232,GOBOARD2:13;
              thus L~g=L~f
              proof
                set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
                lf = {LSeg(f,j): 1<=j & j+1 <= len f};
A233:           len g = len g1 + len g2 by FINSEQ_1:35;
A234:           now
                  let j;
                  assume
A235:             len g1<=j & j<=len g;
                  then reconsider w = j-len g1 as Element of NAT by INT_1:18;
                  let p such that
A236:             p=g/.j;
                  now per cases;
                    suppose
A237:                 j=len g1;
                      1<=len g1 by A14,A16,A36,XXREAL_0:2;
                      then len g1 in dom g1 by FINSEQ_3:27;
                      then
A238:                 g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
                        .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
                      hence p`1=G*(i1,i2)`1 by A236,A237;

thus G*(i1,j2)`2<=p`2 & p`2<=G*(i1,i2)`2 by A51,A55,A59,A60,A62,A72,A87,A236
                      ,A237,A238,GOBOARD1:def 1;
                      dom l1 = Seg len l1 by FINSEQ_1:def 3;

hence p in rng l1 by A51,A62,A86,A236,A237,A238,PARTFUN2:4;
                    end;
                    suppose j<>len g1;
                      then len g1 < j by A235,REAL_1:def 5;
                      then len g1 + 1<=j by NAT_1:13;
                      then
A239:                 1<=w & w<=len g2 by A233,A235,XREAL_1:21,22;
                      w + len g1 = j;
                      then
A240:                 g/.j=g2/.w by A239,GOBOARD2:5;
                      w in dom g2 by A239,FINSEQ_3:27;
                      hence p`1=ppi`1 & pj`2<=p`2 & p`2<=
                      ppi`2 & p in rng l1 by A98,A236,A240;
                    end;
                  end;
                  hence p`1=ppi`1 & pj`2<=p`2 & p`2<=ppi`2 & p in rng l1;
                end;
                thus L~g c= L~f
                proof
                  let x;
                  assume x in L~g;
                  then consider X be set such that
A241:             x in X & X in lg by TARSKI:def 4;
                  consider i such that
A242:             X=LSeg(g,i) & 1<=i & i+1 <= len g by A241;
                  per cases;
                  suppose
A243:               i+1 <= len g1;
                    then i<=i+1 & i+1<=len g1 by NAT_1:11;

then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A242,XXREAL_0:2;
                    then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
                    then X=LSeg(g1,i) by A242,TOPREAL3:25;
                    then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A242,A243;

then x in L~f1 & L~f1 c= L~f by A33,A241,TARSKI:def 4,TOPREAL3:27;
                    hence thesis;
                  end;
                  suppose
A244:               i+1 > len g1;
                    then
A245:               len g1<=i & i<=i+1 & i+1<=len g by A242,NAT_1:13;
A246:               1<=i+1 & len g1<=i+1 & i<=len g by A242,A244,NAT_1:13;
                    reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
A247:               q1`1=ppi`1 & pj`2<=q1`2 & q1`2<=ppi`2 & q2`1=ppi`1 & pj`2<=
                    q2`2 & q2`2<=ppi`2 by A234,A245,A246;
                    then
A248:               q1=|[q1`1,q1`2]| & q2=|[q1`1,q2`2 ]| by EUCLID:57;
A249:               LSeg(g,i)=LSeg(q2,q1) by A242,TOPREAL1:def 5;
                    now per cases by XXREAL_0:1;
                      suppose q1`2>q2`2;

then LSeg(g,i)={p2: p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2}
                        by A248,A249,TOPREAL3:15;
                        then consider p2 such that
A250:                   p2
                        =x & p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2 by A241,A242;
                        pj`2<=p2`2 & p2`2<=ppi`2 by A247,A250,XXREAL_0:2;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A247,A250;
                        hence thesis by TARSKI:def 4;
                      end;
                      suppose q1`2=q2`2;
                        then LSeg(g,i)={q1} by A248,A249,TOPREAL1:7;
                        then x=q1 by A241,A242,TARSKI:def 1;
                        then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A247;
                        hence thesis by TARSKI:def 4;
                      end;
                      suppose q1`2<q2`2;

then LSeg(g,i)= {p1: p1`1=q1`1 & q1`2<=p1`2 & p1`2<=q2`2}
                        by A248,A249,TOPREAL3:15;
                        then consider p2 such that
A251:                   p2
                        =x & p2`1=q1`1 & q1`2<=p2`2 & p2`2<=q2`2 by A241,A242;
                        pj`2<=p2`2 & p2`2<=ppi`2 by A247,A251,XXREAL_0:2;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A247,A251;
                        hence thesis by TARSKI:def 4;
                      end;
                    end;
                    hence thesis;
                  end;
                end;
                let x;
                assume x in L~f;
                then
A252:           x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
                per cases by A252,XBOOLE_0:def 2;
                suppose x in L~f1;
                  then x in L~g1 & L~g1 c= L~g by A33,GOBOARD2:11;
                  hence x in L~g;
                end;
                suppose x in LSeg(f,k);
                  then consider p1 such that
A253:             p1=x & p1`1=ppi`1 & pj`2<=p1`2 & p1`2<=ppi`2 by A89;
                  defpred P2[Nat] means
                  len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`2>=p1`2;
A254:             now
                    reconsider n=len g1 as Nat;
                    take n;
                    thus P2[n]
                    proof
                      thus len g1<=n & n<=len g by A233,REAL_2:173;
                      let q such that
A255:                 q=g/.n;
                      1<=len g1 by A14,A16,A36,XXREAL_0:2;
                      then len g1 in dom g1 by FINSEQ_3:27;
                      then q=f1/.len f1 by A35,A255,FINSEQ_4:83
                        .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
                      hence p1`2<=q`2 by A253;
                    end;
                  end;
A256:             for n be Nat holds P2[n] implies n<=len g;
                  consider ma be Nat such that
A257:             P2[ma] & for n be Nat st P2[n] holds n<=ma from NAT_1:sch 6
                  (A256,A254);
                  reconsider ma as Element of NAT by ORDINAL1:def 13;
                  now per cases;
                    suppose
A258:                 ma=len g;
                      j2+1<=i2 by A72,NAT_1:13;
                      then
A259:                 1<=l & l=len g2 by A76,XREAL_1:21;
                      then
A260:                 l in dom g2 & i2-l=j2 by FINSEQ_3:27;
                      then
A261:                 g/.ma=g2/.l by A76,A233,A258,FINSEQ_4:84
                        .= pj by A76,A77,A260;
                      then p1`2<=pj`2 by A257;
                      then
A262:                 p1`2=pj`2 by A253,XXREAL_0:1;
A263:                 ma-1<=len g & len g1+1<=ma
                      by A233,A258,A259,XREAL_1:9,45;
                      then
A264:                 len g1<=ma-1 & 0<=len g1 by XREAL_1:21;
                      then 0+1<=ma by XREAL_1:21;
                      then reconsider m1=ma-1 as Element of NAT by INT_1:18;
                      1<=len g1 by A14,A16,A36,XXREAL_0:2;
                      then
A265:                 1<=m1 by A264,XXREAL_0:2;
                      reconsider q=g/.m1 as Point of TOP-REAL 2;
A266:                 q`1=ppi`1 & pj`2<=q`2 & q=|[q`1,q`2]| & m1+1=ma
                      by A234,A263,A264,EUCLID:57;
                      then
A267:                 LSeg(g,m1)=LSeg(pj,q) by A258,A261,A265,TOPREAL1:def 5;

set lq={e where e is Point of TOP-REAL 2: e`1=ppi`1 & pj`2<=e`2 & e`2<=q`2};
                      LSeg(g,m1)=lq by A88,A266,A267,TOPREAL3:15;
                      then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
                      by A253,A258,A262,A265,A266;
                      hence x in L~g by A253,TARSKI:def 4;
                    end;
                    suppose ma<>len g;
                      then ma<len g by A257,REAL_1:def 5;
                      then
A268:                 ma+1<=len g & k<=ma & ma<=ma+1
                      by A16,A36,A257,NAT_1:13,XXREAL_0:2;
A269:                 1<=ma & len g1<=ma+1 by A14,A16,A36,A257,NAT_1:13;

reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
A270:                 p1`2<=qa`2 by A257;
A271:                 now
                        assume p1`2<=qa1`2;
                        then for q holds q=g/.(ma+1) implies p1`2<=q`2;
                        then ma+1<=ma by A257,A268,A269;
                        hence contradiction by REAL_2:174;
                      end;
                      then
A272:                 qa1`2<qa`2 & qa1`2<=p1`2 & p1 `2<=qa`2 &

qa`1=ppi`1 & qa1 `1 = ppi`1 by A234,A257,A268,A269,A270,XXREAL_0:2;
                      set lma = {p2: p2`1=ppi`1 & qa1`2<=p2`2 & p2`2<=qa`2};
A273:                 qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                      LSeg(g,ma)=LSeg(qa1,qa) by A268,A269,TOPREAL1:def 5
                        .= lma by A272,A273,TOPREAL3:15;

then x in LSeg(g,ma) & LSeg(g,ma) in lg by A253,A268,A269,A270,A271;
                      hence x in L~g by TARSKI:def 4;
                    end;
                  end;
                  hence x in L~g;
                end;
              end;
              1<=len g1 by A14,A16,A36,XXREAL_0:2;
              then 1 in dom g1 by FINSEQ_3:27;
              hence g/.1=f1/.1 by A34,FINSEQ_4:83
                .=f/.1 by A15,A19,FINSEQ_4:86;
              j2+1<=i2 by A72,NAT_1:13;
              then
A274:         1<=l by XREAL_1:21;
              then
A275:         l in dom g2 & len g=len g1 + len g2 & len g2 = l
              by A77,FINSEQ_1:3,35,def 3;
              reconsider m1=i2-l as Element of NAT;
              thus g/.len g=g2/.l by A275,FINSEQ_4:84
                .=G*(i1,m1) by A76,A77,A275
                .=f/.len f by A5,A49,A71;
              thus len f<=len g by A5,A16,A36,A274,A275,XREAL_1:9;
            end;
            case
A276:         i2=j2;
              k<>k+1;
              hence contradiction by A7,A15,A47,A48,A49,A71,A276,PARTFUN2:17;
            end;
            case
A277:         i2<j2;
              then reconsider l=j2-i2 as Element of NAT by INT_1:18;
              deffunc F(Element of NAT) = G*(i1,i2+$1);
              consider g2 such that
A278:         len g2=l & for n st n in dom g2 holds g2/.n=F(n) from
              GOBOARD2:sch 1;
              take g=g1^g2;
A279:         now
                let n;
                assume n in Seg l;
                then
A280:           1<=n & n<=l by FINSEQ_1:3;
                then n<=n+i2 & i2+n<=l+i2 by NAT_1:11,XREAL_1:9;
                then n<=i2+n & i2+n<=j2 & j2<=width G by A51,FINSEQ_1:3;
                then 1<=i2+n & i2+n<=width G by A280,XXREAL_0:2;
                hence i2+n in Seg width G by FINSEQ_1:3;
                hence [i1,i2+n] in Indices G by A50,A51,ZFMISC_1:106;
              end;
A281:         dom g2 = Seg len g2 by FINSEQ_1:def 3;
              now
                let n such that
A282:           n in dom g2;
                take m=i1,k=i2+n;
                thus [m,k] in Indices G & g2/.n=G*(m,k) by A278,A279,A281,A282;
              end;
              then
A283:         for n st n in dom g ex i,j st [i,j] in Indices G &
              g/.n=G*(i,j) by A53,GOBOARD1:39;
A284:         now
                let n;
                assume n in dom g2 & n+1 in dom g2;
                then
A285:           g2/.n=G*(i1,i2+n) & [i1,i2+n] in Indices G &
                g2/.(n+1)=G*(i1,i2+(n+1)) &
                [i1,i2+(n+1)] in Indices G by A278,A279,A281;
                let l1,l2,l3,l4 be Element of NAT;
                assume
                [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2)
                & g2/.(n+1)=G*(l3,l4);
                then l1=i1 & l2=i2+n & l3=i1 & l4=i2+(n+1) by A285,GOBOARD1:21;

hence abs(l1-l3)+abs(l2-l4)= 0+abs(i2+n-(i2+(n+1))) by ABSVALUE:7
                  .= abs(-1)
                  .= abs(1) by COMPLEX1:138
                  .= 1 by ABSVALUE:def 1;
              end;
              now
                let l1,l2,l3,l4 be Element of NAT;
                assume
A286:           [

l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,l2) &
                g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
                then g2/.1=G*
                (i1,i2+1) & [i1,i2+1] in Indices G & f1/.len f1=f/.k
                by A15,A16,A18,A278,A279,A281,FINSEQ_4:86;

then l1=i1 & l2=i2 & l3=i1 & l4=i2+1 by A35,A47,A286,GOBOARD1:21;
                hence abs(l1-l3)+abs(l2-l4)=0+abs(i2-(i2+1)) by ABSVALUE:7
                  .=abs(i2-i2+-1)
                  .=abs(1) by COMPLEX1:138
                  .=1 by ABSVALUE:def 1;
              end;
              then for n st n in dom g & n+1 in dom g holds
              for m,k,i,j st [m,k] in Indices G &
              [i,j] in Indices G & g/.n=G*(m,k) &

g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A284,GOBOARD1:40;
              hence g is_sequence_on G by A283,GOBOARD1:def 11;
              set

lk={w where w is Point of TOP-REAL 2: w`1=ppi`1 & ppi`2<=w`2 & w`2<= pj`2};
              l1/.i2=l1.i2 & l1/.j2=l1.j2 by A51,A63,PARTFUN1:def 8;
              then
A287:         l1/.i2=ppi & l1/.j2=pj by A51,MATRIX_1:def 8;
              then
A288:         y1.i2=ppi`2 & y1.j2=pj`2 & x1.i2=ppi`1 & x1.j2 =pj`1
              by A51,A58,A59,A60,A61,A62,GOBOARD1:def 3,def 4;
              then
A289:         ppi`2<pj`2 & ppi`1=pj`1 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj
              `2]|

by A51,A54,A55,A58,A59,A60,A61,A62,A277,EUCLID:57,GOBOARD1:def 1,def 2;
A290:         LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5
                .= lk by A289,TOPREAL3:15;
A291:         LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5;
              now
                let n,m;
                assume
A292:           n in dom g2 & m in dom g2 & n<>m;
                then
A293:           g2/.n=G*(i1,i2+n) & g2/.m=G*(i1,i2+m) & [ i1,i2+n] in
                Indices G & [i1,i2+m] in Indices G by A278,A279,A281;
                assume g2/.n=g2/.m;
                then i2+n=i2+m by A293,GOBOARD1:21;
                hence contradiction by A292;
              end;
              then for n,m st n in dom g2 & m in dom g2 &
              g2/.n = g2/.m holds n = m;
              then
A294:         g2 is one-to-one by PARTFUN2:16;
A295:         not f/.k in rng g2
              proof
                assume f/.k in rng g2;
                then consider n such that
A296:           n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
                dom g2 = Seg len g2 by FINSEQ_1:def 3;
                then g2/.n=G*(i1,i2+n) & [i1,i2+n] in Indices G
                by A278,A279,A296;
                then i2+n=i2 & 0<n by A47,A296,FINSEQ_3:27,GOBOARD1:21;
                hence contradiction;
              end;
A297:         now
                let n,p;
                assume
A298:           n in dom g2 & g2/.n=p;
                then
A299:           g2/.n=G*(i1,i2+n) & 1<=n & n<=len g2
                & i2+n in Seg width G by A278,A279,A281,FINSEQ_1:3;
                set n1=i2+n;
                set pn = G*(i1,n1);
                l1/.n1=l1.n1 by A63,A299,PARTFUN1:def 8;
                then
A300:           g2/.n=pn & l1/.n1=pn & 0<=n & n1<=i2+len g2
                by A299,MATRIX_1:def 8,XREAL_1:9;
                then
A301:           x1.n1=pn`1 & x1.n1=x1.i2 & y1.n1=pn`2 & n1 <=j2 & i2<=n1

by A51,A54,A58,A59,A60,A61,A62,A278,A299,GOBOARD1:def 2,def 3,def 4,REAL_2:173;
                hence p`1=ppi`1 & ppi`2<=p`2 & p`2<=pj`2
                by A51,A55,A59,A60,A62,A288,A298,A299,GOBOARD2:18;
                dom l1 = Seg len l1 by FINSEQ_1:def 3;
                hence p in rng l1 by A62,A298,A299,A300,PARTFUN2:4;
                i2<n1 by A299,REAL_2:174;
                hence p`2>ppi`2 by A51,A55,A59,A60,A62,A288,A298,A299,A301,
                GOBOARD1:def 1;
              end;
A302:         now
                let n,m,p,q;
                assume
A303:           n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
                then
A304:           g2/.n=G*(i1,i2+n) & i2+n in Seg width G &
                g2/.m=G*(i1,i2+m) & i2+m in Seg width G by A278,A279,A281;
                set n1=i2+n, m1=i2+m;
                set pn = G*(i1,n1), pm = G*(i1,m1);
                l1/.n1=l1.n1 & l1/.m1 = l1.m1 by A63,A304,PARTFUN1:def 8;
                then
A305:           l1/.n1=pn & l1/.m1=pm & n1<m1
                by A303,A304,MATRIX_1:def 8,XREAL_1:10;

then y1.n1=pn`2 & y1.m1=pm`2 by A59,A60,A62,A304,GOBOARD1:def 4;
                hence p`2<q`2 by A55,A59,A60,A62,A303,A304,A305,GOBOARD1:def 1;
              end;
A306:         rng g2 c= LSeg(f,k)
              proof
                let x;
                assume x in rng g2;
                then consider n such that
A307:           n in dom g2 & g2/.n=x by PARTFUN2:4;
A308:           g2/.n=G*(i1,i2+n) by A278,A307;
                set pn = G*(i1,(i2+n));
                pn`1=ppi`1 & ppi`2<=pn`2 & pn`2<=pj`2 by A297,A307,A308;
                hence x in LSeg(f,k) by A290,A307,A308;
              end;
              rng g1 /\ rng g2 = {}
              proof consider x being Element of rng g1 /\ rng g2;
                assume not thesis;
                then
A309:           x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
                now per cases by A14,REAL_1:def 5;
                  suppose k=1;
                    hence contradiction by A37,A295,A309,TARSKI:def 1;
                  end;
                  suppose 1<k;
                    then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
                    by A5,A8,A9,A44,A306,A309,GOBOARD2:9,XBOOLE_0:def 3;
                    hence contradiction by A295,A309,TARSKI:def 1;
                  end;
                end;
                hence contradiction;
              end;
              then rng g1 misses rng g2 by XBOOLE_0:def 7;
              hence g is one-to-one by A29,A294,FINSEQ_3:98;
A310:         for n st 1<=n & n+2 <= len g2 holds
              LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
              proof
                let n;
                assume
A311:           1<=n & n+2 <= len g2;
                then
A312:           n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
                then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
                g2/.(n+2) in rng g2 by PARTFUN2:4;
                then
A313:           g2/.n in lk & g2/.(n+1) in lk & g2/.(n+2) in lk by A290,A306;
                then consider u be Point of TOP-REAL 2 such that
A314:           g2/.n=u & u`1=ppi`1 & ppi`2<=u`2 & u`2<=pj`2;
                consider u1 be Point of TOP-REAL 2 such that
A315:           g2/.(n+1)=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2 by A313;
                consider u2 be Point of TOP-REAL 2 such that
A316:           g2/.(n+2)=u2 & u2`1=ppi`1 & ppi`2<=u2`2 & u2`2<=pj`2 by A313;
                set lg = {w where w is Point of TOP-REAL 2:
                w`1=ppi`1 & u`2<=w`2 & w`2<=u2`2};
A317:           1<= n+1 by NAT_1:11;
A318:           n+1+1 = n+(1+1);
                n+1 <= n+2 by XREAL_1:8;
                then n+1 <= len g2 by A311,XXREAL_0:2;
                then
A319:           LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg( u1,u2) &
                LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
                by A311,A314,A315,A316,A317,A318,TOPREAL1:def 5;
                n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:13;
                then
A320:           u1`2<u2`2 & u`2<u1`2 by A302,A312,A314,A315,A316;
                then
A321:           u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2 ]| by A315,EUCLID:57;

then LSeg(g2/.n,g2/.(n+2))=lg by A314,A316,A320,TOPREAL3:15,XXREAL_0:2;
                hence thesis by A315,A319,A321,TOPREAL1:14;
              end;
              thus g is unfolded
              proof
                let n be Nat;
                assume
A322:           1<=n & n+2 <= len g;
                then
A323:           n+1+1<=len g;
A324:           1<= n+1 by NAT_1:11;
A325:           n<=n+1 & n+1<=n+1+1 by NAT_1:11;
                then
A326:           n+1 <= len g by A322,XXREAL_0:2;
A327:           n+(1+1)=n+1+1;
A328:           len g=len g1+len g2 by FINSEQ_1:35;
                n+2-len g1 = n-len g1 +2;
                then
A329:           n-len g1 + 2 <= len g2 by A322,A328,XREAL_1:22;
                per cases;
                suppose
A330:             n+2 <= len g1;

then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
                  by A322,GOBOARD2:4;
                  then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
                  g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
                  hence thesis by A30,A322,A330,TOPREAL1:def 8;
                end;
                suppose len g1 < n+2;
                  then len g1+1<=n+2 by NAT_1:13;
                  then
A331:             len g1<=n+2-1 by XREAL_1:21;
                  now per cases;
                    suppose
A332:                 len g1=n+1;
                      now
                        assume
A333:                   k=1;
                        1<len g1 by A322,A332,NAT_1:13;
                        then 1+1<=len g1 by NAT_1:13;
                        hence contradiction by A37,A333,TOPREAL1:29;
                      end;
                      then
A334:                 1<k & LSeg(g1,n) c= L~f1
                      by A14,A33,REAL_1:def 5,TOPREAL3:26;
                      then
A335:                 L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                      1<=n+1 by NAT_1:11;
                      then
A336:                 n
                      in dom g1 & n+1 in dom g1 by A322,A325,A332,FINSEQ_3:27;
                      then
A337:                 LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
A338:                 g/.(n+1)=f1/.len f1 by A35,A332,A336,FINSEQ_4:83
                        .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A339:                 1<=len g-len g1 by A323,A332,XREAL_1:21;
                      then
A340:                 g/.(n+2)=g2/.1 by A327,A328,A332,GOBOARD2:5;
                      1 in dom g2 by A328,A339,FINSEQ_3:27;
                      then
A341:                 g2/.1 in rng g2 by PARTFUN2:4;
                      then g2/.1 in lk by A290,A306;
                      then consider u1 be Point of TOP-REAL 2 such that
A342:                 g2/.1=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2;
                      ppi in LSeg(ppi,pj) by TOPREAL1:6;
                      then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1
                      )

by A291,A306,A322,A324,A327,A338,A340,A341,A342,TOPREAL1:12,def 5;
                      then
A343:                 LSeg(g,n) /\ LSeg(g,n+1) c= {g /.(n+1)}
                      by A47,A334,A335,A337,A338,XBOOLE_1:27;
                      g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                      by A322,A324,A326,A327,TOPREAL1:27;

then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;

then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
                      hence thesis by A343,XBOOLE_0:def 10;
                    end;
                    suppose len g1<>n+1;
                      then len g1<n+1 by A331,REAL_1:def 5;
                      then
A344:                 len g1<=n by NAT_1:13;

then reconsider n1=n-len g1 as Element of NAT by INT_1:18;
                      now per cases;
                        suppose
A345:                     len g1=n;
                          1<=len g1 by A14,A16,A36,XXREAL_0:2;
                          then len g1 in dom g1 by FINSEQ_3:27;
                          then
A346:                     g/.n=f1/.len f1 by A35,A345,FINSEQ_4:83
                            .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A347:                     2 <= len g2 by A322,A328,A345,XREAL_1:8;
                          then 1 <= len g2 by XXREAL_0:2;
                          then
A348:                     g/.(n+1)=g2/.1 by A345,GOBOARD2:5;
A349:                     g/.(n+2)=g2/.2 by A345,A347,GOBOARD2:5;
                          1<=len g2 by A347,XXREAL_0:2;
                          then
A350:                     1 in dom g2 & 2 in dom g2 by A347,FINSEQ_3:27;
                          then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                          then
A351:                     g2/.1 in lk & g2/.2 in lk by A290,A306;
                          then consider u1 be Point of TOP-REAL 2 such that
A352:                     g2/.1=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2;
                          consider u2 be Point of TOP-REAL 2 such that
A353:                     g2

/.2=u2 & u2`1=ppi`1 & ppi`2<=u2`2 & u2`2<=pj`2 by A351;
A354:                     u1`2<u2`2 by A302,A350,A352,A353;
                          then
A355:                     u1`2<=u2`2 & ppi`2<u2 `2 & u2=|[u2`1,u2`2]|
                          by A352,EUCLID:57,XXREAL_0:2;
                          set lg = {w where w is Point of TOP-REAL 2 :
                          w`1=ppi`1 & ppi`2<=w`2 & w`2<=u2`2};
A356:                     u1 in lg by A352,A354;
A357:                     LSeg(g,n)=LSeg(ppi,u1) & LSeg(g,n+1)=LSeg(u1,u2)

by A322,A324,A326,A327,A346,A348,A349,A352,A353,TOPREAL1:def 5;

u1 in LSeg(ppi,u2) by A289,A353,A355,A356,TOPREAL3:15;
                          hence thesis by A348,A352,A357,TOPREAL1:14;
                        end;
                        suppose len g1<>n;
                          then
A358:                     len g1<n by A344,REAL_1:def 5;
                          n1 + len g1 = n;
                          then
A359:                     LSeg(g,n)=LSeg(g2,n1) by A326,A358,GOBOARD2:10;
A360:                     len g1<n+1 by A325,A358,XXREAL_0:2;
A361:                     len g1+1<=n by A358,NAT_1:13;
A362:                     n1+1+len g1 = n+1;
A363:                     1<=n1+1 by NAT_1:11;
                          n1+1<=len g2 by A326,A328,A362,XREAL_1:8;

then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                          by A323,A360,A361,A362,A363,GOBOARD2:5,10,XREAL_1:21;
                          hence thesis by A310,A329,A359;
                        end;
                      end;
                      hence thesis;
                    end;
                  end;
                  hence thesis;
                end;
              end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
              m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
              proof
                let n,m;
                assume that
A364:           m>n+1 and
A365:           n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
A366:           LSeg(g2,n) /\ LSeg(g2,m) <> {};
A367:           1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
                len g2 by A365,FINSEQ_3:27;
                reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
                as Point of TOP-REAL 2;
                set lp = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                p1`2<=w`2 & w`2<=p2`2},
                lq = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                q1`2<=w`2 & w`2<=q2`2};
                m<m+1 & n<n+1 by NAT_1:13;
                then
A368:           p1`2<p2`2 & q1`2<q2`2 & p1`1=ppi`1 & p2`1= ppi`1 & q1`1=
                ppi`1 & q2`1=ppi`1 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
                p2=|[p2`1,p2`2]| &
                q2=|[q2`1,q2`2]| by A297,A302,A365,EUCLID:57;
A369:           LSeg(g2,n) = LSeg(p1,p2) by A367,TOPREAL1:def 5
                  .=lp by A368,TOPREAL3:15;
A370:           LSeg(g2,m) = LSeg(q1,q2) by A367,TOPREAL1:def 5
                  .=lq by A368,TOPREAL3:15;
                consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
A371:           x in LSeg(g2,n) & x in LSeg(g2,m) by A366,XBOOLE_0:def 3;
                then
A372:           ex tn be Point of TOP-REAL 2 st
                tn=x & tn`1=ppi`1 & p1`2<=tn`2 & tn`2<=p2`2 by A369;
A373:           ex tm be Point of TOP-REAL 2 st
                tm=x & tm`1=ppi`1 & q1`2<=tm`2 & tm`2<=q2`2 by A370,A371;
                p2`2<q1`2 by A302,A364,A365;
                hence contradiction by A372,A373,XXREAL_0:2;
              end;
              then
A374:         g2 is s.n.c. by GOBOARD2:6;
A375:         L~g2 c= LSeg(f,k)
              proof
                set ls={LSeg(g2,m): 1<=m & m+1 <= len g2};
                let x;
                assume x in L~g2;
                then consider X be set such that
A376:           x in X & X in ls by TARSKI:def 4;
                consider m such that
A377:           X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A376;
                m in dom g2 & m+1 in dom g2 by A377,GOBOARD2:3;
                then
A378:           g2/.m in rng g2 & g2/.(m+1) in rng g2 by PARTFUN2:4;
                reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
A379:           LSeg(q1,q2) c= LSeg(ppi,pj) by A291,A306,A378,TOPREAL1:12;
                LSeg(g2,m)=LSeg(q1,q2) by A377,TOPREAL1:def 5;
                hence thesis by A291,A376,A377,A379;
              end;
A380:         not f/.k in L~g2
              proof
                set ls={LSeg(g2,m): 1<=m & m+1 <= len g2};
                assume f/.k in L~g2;
                then consider X be set such that
A381:           f/.k in X & X in ls by TARSKI:def 4;
                consider m such that
A382:           X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A381;
A383:           m in dom g2 & m+1 in dom g2 &
                m<m+1 by A382,GOBOARD2:3,NAT_1:13;
                reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
                set lq={w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                q1`2<=w`2 & w`2<=q2`2};
A384:           q1`1=ppi`1 & q2`1=ppi`1 & q1`2<q2`2 & q1=|[q1`1,q1`2]|
                & q2=|[q2`1,q2`2]| by A297,A302,A383,EUCLID:57;
                LSeg(g2,m)=LSeg(q1,q2) by A382,TOPREAL1:def 5
                  .=lq by A384,TOPREAL3:15;

then ex p st p=f/.k & p`1=ppi`1 & q1`2<=p`2 & p`2<=q2`2 by A381,A382;
                hence contradiction by A47,A297,A383;
              end;
A385:         L~g1 /\ L~g2 = {}
              proof
                per cases;
                suppose k=1;
                  hence thesis by A37;
                end;
                suppose k<>1;
                  then 1<k by A14,REAL_1:def 5;
                  then L~g1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,A33,GOBOARD2:9;
                  then
A386:             L~g1 /\ L~g2 c= {f/.k} by A375,XBOOLE_1:26;
                  now consider x being Element of L~g1 /\ L~g2;
                    assume L~g1 /\ L~g2 <> {};

then x in {f/.k} & x in L~g2 by A386,TARSKI:def 3,XBOOLE_0:def 3;
                    hence contradiction by A380,TARSKI:def 1;
                  end;
                  hence thesis;
                end;
              end;
              for n,m st m>n+1 & n in dom g &
              n+1 in dom g & m in dom g & m+1 in dom g
              holds LSeg(g,n) misses LSeg(g,m)
              proof
                let n,m;
                assume that
A387:           m>n+1 and
A388:           n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
A389:           1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
                m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
                by A388,FINSEQ_1:35,FINSEQ_3:27,NAT_1:11;
                set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
                l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
                i2+1<=j2 by A277,NAT_1:13;
                then
A390:           1<=l by XREAL_1:21;
                then
A391:           1 in dom g2 by A278,FINSEQ_3:27;
                reconsider qq=g2/.1 as Point of TOP-REAL 2;
                set ql={z where z is Point of TOP-REAL 2: z`1=ppi`1 &
                ppi`2<=z`2 & z`2<=qq`2};
A392:           1<=len g1 by A14,A16,A36,XXREAL_0:2;

then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
                then
A393:           g/.len g1=g1/.len g1 by FINSEQ_4:83
                  .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
A394:           len g1<len g1 +1 & len g1+1<=len g
                by A278,A389,A390,NAT_1:13,XREAL_1:9;
A395:           g/.(len g1+1)=qq by A278,A390,GOBOARD2:5;
A396:           qq`1=ppi`1 & qq`2<=pj`2 & qq`2>ppi`2 & qq=|[qq`1,qq`2]|
                by A297,A391,EUCLID:57;
A397:           LSeg
                (g,len g1)=LSeg(ppi,qq) by A392,A393,A394,A395,TOPREAL1:def 5
                  .= ql by A289,A396,TOPREAL3:15;
A398:           n+1<=m+1 by A387,A389,XXREAL_0:2;
                now per cases;
                  suppose
A399:               m+1<=len g1;
                    then
A400:               m<=len g1 & n+1<=len g1 by A389,A398,XXREAL_0:2;
                    then n<=len g1 by A389,XXREAL_0:2;

then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
                    by A389,A399,A400,FINSEQ_3:27;
                    then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m)
                    by TOPREAL3:25;
                    hence thesis by A31,A387,TOPREAL1:def 9;
                  end;
                  suppose len g1<m+1;
                    then
A401:               len g1<=m by NAT_1:13;
                    then reconsider m1=m-len g1 as Element of NAT by INT_1:18;
                    now per cases;
                      suppose
A402:                   m=len g1;
                        now
                          assume
A403:                     k=1;
                          1<len g1 by A387,A389,A402,XXREAL_0:2;
                          then 1+1<=len g1 by NAT_1:13;
                          hence contradiction by A37,A403,TOPREAL1:29;
                        end;
                        then 1<k by A14,REAL_1:def 5;
                        then
A404:                   L~f1 /\ LSeg(f,k) ={f/.k} by A5,A8,A9,GOBOARD2:9;
                        n<=len g1 by A387,A389,A402,XXREAL_0:2;
                        then
A405:                   n in dom g1 & n+1 in dom g1
                        by A387,A389,A402,FINSEQ_3:27;
                        then
A406:                   LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                        then LSeg(g,n) in l1 by A387,A389,A402;
                        then
A407:                   LSeg(g,n) c= L~f1 by A33,ZFMISC_1:92;
                        LSeg(g,m) c= LSeg(f,k)
                        proof
                          let x;
                          assume x in LSeg(g,m);
                          then consider px be Point of TOP-REAL 2 such that
A408:                     px

=x & px`1=ppi`1 & ppi`2<=px`2 & px`2<= qq`2 by A397,A402;
                          pj`2>=px`2 by A396,A408,XXREAL_0:2;
                          hence thesis by A290,A408;
                        end;
                        then
A409:                   LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                        by A404,A407,XBOOLE_1:27;
                        now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                          assume LSeg(g,n)/\ LSeg(g,m)<>{};
                          then
A410:                     x in LSeg(g,n) & x in {f/.k}
                          by A409,TARSKI:def 3,XBOOLE_0:def 3;
                          then
A411:                     x=f/.k by TARSKI:def 1;
                          f/.k=g1/.len g1 by A15,A16,A18,A35,FINSEQ_4:86;

hence contradiction by A29,A30,A31,A387,A402,A405,A406,A410,A411,GOBOARD2:7;
                        end;
                        hence thesis by XBOOLE_0:def 7;
                      end;
                      suppose m<>len g1;
                        then
A412:                   len g1<m & m+1=m1+1+len g1 by A401,REAL_1:def 5;
                        m = m1+len g1;
                        then
A413:                   LSeg(g,m)=LSeg(g2,m1) by A389,A412,GOBOARD2:10;
                        m1+1<=len g2 & len g1+1<=
                        m by A389,A412,NAT_1:13,XREAL_1:8;
                        then
A414:                   1<=m1 & m1+1 <= len g2 by XREAL_1:21;
                        then LSeg(g,m) in l2 by A413;
                        then
A415:                   LSeg(g,m) c= L~g2 by ZFMISC_1:92;
                        now per cases;
                          suppose
A416:                       n+1<=len g1;
                            then n<=len g1 by A389,XXREAL_0:2;

then n in dom g1 & n+1 in dom g1 by A389,A416,FINSEQ_3:27;
                            then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                            then LSeg(g,n) in l1 by A389,A416;
                            then LSeg(g,n) c= L~g1 by ZFMISC_1:92;

then LSeg(g,n) /\ LSeg(g,m) = {} by A385,A415,XBOOLE_1:3,27;
                            hence thesis by XBOOLE_0:def 7;
                          end;
                          suppose len g1<n+1;
                            then
A417:                       len g1<=n by NAT_1:13;

then reconsider n1=n-len g1 as Element of NAT by INT_1:18;
A418:                       n - len g1 + 1 = n + 1 - len g1;
A419:                       n = n1 + len g1;
                            now per cases;
                              suppose
A420:                           len g1=n;
                                now consider x being
                                  Element of LSeg(g,n) /\ LSeg(g,m);
                                  assume LSeg(g,n) /\ LSeg(g,m)<>{};
                                  then
A421:                             x

in LSeg(g,n) & x in LSeg(g,m) by XBOOLE_0:def 3;
                                  then
A422:                             ex qx be Point of TOP-REAL 2 st
                                  qx=x & qx`1=ppi`1 & ppi`2<=qx`2 & qx`2<=qq`2
                                  by A397,A420;
A423:                             m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                                  by A414,GOBOARD2:3,NAT_1:13;
                                  reconsider q1=g2/.m1, q2=g2/.(m1+1)
                                  as Point of TOP-REAL 2;

set q1l={v where v is Point of TOP-REAL 2: v`1=ppi`1 & q1`2<=v`2 & v`2<=q2`2};
A424:                             q1

`1=ppi`1 & q2`1=ppi`1 & q1`2<q2`2 & q1=|[q1`1,q1`2]|&
                                  q2=|[q2`1,q2`2]| by A297,A302,A423,EUCLID:57;
                                  m1 > n1 + 1 & n1 + 1 >=
                                  1 by A387,A418,NAT_1:11,XREAL_1:11;
                                  then
A425:                             m1 > 1 by XXREAL_0:2;

LSeg(g2,m1)=LSeg(q1,q2) by A414,TOPREAL1:def 5
                                    .=q1l by A424,TOPREAL3:15;
                                  then
A426:                             ex qy be Point of TOP-REAL 2 st

qy=x & qy`1=ppi`1 & q1`2<=qy`2 & qy`2<=q2`2 by A413,A421;
                                  qq`2 < q1`2 by A302,A391,A423,A425;
                                  hence contradiction by A422,A426,XXREAL_0:2;
                                end;
                                hence thesis by XBOOLE_0:def 7;
                              end;
                              suppose n<>len g1;
                                then len g1<n by A417,REAL_1:def 5;
                                then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                                by A387,A389,A418,A419,GOBOARD2:10,XREAL_1:11;
                                hence thesis by A374,A413,TOPREAL1:def 9;
                              end;
                            end;
                            hence thesis;
                          end;
                        end;
                        hence thesis;
                      end;
                    end;
                    hence thesis;
                  end;
                end;
                hence thesis;
              end;
              hence g is s.n.c. by GOBOARD2:6;
A427:         g2 is special
              proof
                let n be Nat;
                set p = g2/.n, q = g2/.(n+1);
                assume 1<=n & n+1 <= len g2;
                then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
                then p`1=ppi`1 & q`1=ppi`1 by A297;
                hence p`1=q`1 or p`2=q`2;
              end;
              now
                set p=g1/.len g1, q=g2/.1;
                i2+1<=j2 by A277,NAT_1:13;
                then 1<=l by XREAL_1:21;
                then 1 in dom g2 by A278,FINSEQ_3:27;
                then q`1=ppi`1 by A297;
                hence p`1=q`1 or p`2=q`2 by A15,A16,A18,A35,A47,FINSEQ_4:86;
              end;
              hence g is special by A32,A427,GOBOARD2:13;
              thus L~g=L~f
              proof
                set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
                lf = {LSeg(f,j): 1<=j & j+1 <= len f};
A428:           len g = len g1 + len g2 by FINSEQ_1:35;
A429:           now
                  let j;
                  assume
A430:             len g1<=j & j<=len g;
                  then reconsider w = j-len g1 as Element of NAT by INT_1:18;
                  let p such that
A431:             p=g/.j;
                  per cases;
                  suppose
A432:               j=len g1;
                    1<=len g1 by A14,A16,A36,XXREAL_0:2;
                    then len g1 in dom g1 by FINSEQ_3:27;
                    then
A433:               g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
                      .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
                    hence p`1=G*(i1,i2)`1 by A431,A432;
                    thus G*(i1,i2)`2<=p`2 & p`2<=G*

(i1,j2)`2 by A51,A55,A59,A60,A62,A277,A288,A431,A432,A433,GOBOARD1:def 1;
                    dom l1 = Seg len l1 by FINSEQ_1:def 3;

hence p in rng l1 by A51,A62,A287,A431,A432,A433,PARTFUN2:4;
                  end;
                  suppose j<>len g1;
                    then
A434:               len g1 < j by A430,REAL_1:def 5;
A435:               j = w + len g1;
                    len g1 + 1<=j by A434,NAT_1:13;
                    then
A436:               1<=w & w<=len g2 by A428,A430,XREAL_1:21,22;
                    then
A437:               g/.j=g2/.w by A435,GOBOARD2:5;
                    w in dom g2 by A436,FINSEQ_3:27;
                    hence p`1=ppi`1 & ppi`2<=p`2 & p`2<=
                    pj`2 & p in rng l1 by A297,A431,A437;
                  end;
                end;
                thus L~g c= L~f
                proof
                  let x;
                  assume x in L~g;
                  then consider X be set such that
A438:             x in X & X in lg by TARSKI:def 4;
                  consider i such that
A439:             X=LSeg(g,i) & 1<=i & i+1 <= len g by A438;
                  per cases;
                  suppose
A440:               i+1 <= len g1;
                    then i<=i+1 & i+1<=len g1 by NAT_1:11;

then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A439,XXREAL_0:2;
                    then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
                    then X=LSeg(g1,i) by A439,TOPREAL3:25;
                    then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A439,A440;

then x in L~f1 & L~f1 c= L~f by A33,A438,TARSKI:def 4,TOPREAL3:27;
                    hence thesis;
                  end;
                  suppose
A441:               i+1 > len g1;
                    then
A442:               len g1<=i & i<=i+1 & i+1<=len g by A439,NAT_1:13;
A443:               1<=i+1 & len g1<=i+1 & i<=len g by A439,A441,NAT_1:13;
                    reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
A444:               q1

`1=ppi`1 & ppi`2<=q1`2 & q1`2<=pj`2 & q2`1=ppi`1 & ppi`2<= q2`2 &
                    q2`2<=pj`2 by A429,A442,A443;
                    then
A445:               q1=|[q1`1,q1`2]| & q2=|[q1`1,q2`2 ]| by EUCLID:57;
A446:               LSeg(g,i)=LSeg(q2,q1) by A439,TOPREAL1:def 5;
                    now per cases by XXREAL_0:1;
                      suppose q1`2>q2`2;

then LSeg(g,i)={p2: p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2}
                        by A445,A446,TOPREAL3:15;
                        then consider p2 such that
A447:                   p2
                        =x & p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2 by A438,A439;
                        ppi`2<=p2`2 & p2`2<=pj`2 by A444,A447,XXREAL_0:2;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A290,A444,A447;
                        hence thesis by TARSKI:def 4;
                      end;
                      suppose q1`2=q2`2;
                        then LSeg(g,i)={q1} by A445,A446,TOPREAL1:7;
                        then x=q1 by A438,A439,TARSKI:def 1;
                        then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A290,A444;
                        hence thesis by TARSKI:def 4;
                      end;
                      suppose q1`2<q2`2;

then LSeg(g,i)= {p1: p1`1=q1`1 & q1`2<=p1`2 & p1`2<=q2`2}
                        by A445,A446,TOPREAL3:15;
                        then consider p2 such that
A448:                   p2
                        =x & p2`1=q1`1 & q1`2<=p2`2 & p2`2<=q2`2 by A438,A439;
                        ppi`2<=p2`2 & p2`2<=pj`2 by A444,A448,XXREAL_0:2;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A290,A444,A448;
                        hence thesis by TARSKI:def 4;
                      end;
                    end;
                    hence thesis;
                  end;
                end;
                let x;
                assume x in L~f;
                then
A449:           x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
                now per cases by A449,XBOOLE_0:def 2;
                  suppose x in L~f1;
                    then x in L~g1 & L~g1 c= L~g by A33,GOBOARD2:11;
                    hence x in L~g;
                  end;
                  suppose x in LSeg(f,k);
                    then consider p1 such that
A450:               p1=x & p1`1=ppi`1 & ppi`2<=p1`2 & p1`2<=pj`2 by A290;
                    defpred P2[Nat] means
                    len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`2<=p1`2;
A451:               now reconsider n=len g1 as Nat;
                      take n;
                      thus P2[n]
                      proof
                        thus len g1<=n & n<=len g by A428,REAL_2:173;
                        let q such that
A452:                   q=g/.n;
                        1<=len g1 by A14,A16,A36,XXREAL_0:2;
                        then len g1 in dom g1 by FINSEQ_3:27;
                        then q=f1/.len f1 by A35,A452,FINSEQ_4:83
                          .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
                        hence q`2<=p1`2 by A450;
                      end;
                    end;
A453:               for n be Nat holds P2[n] implies n<=len g;
                    consider ma be Nat such that
A454:               P2[ma] & for n be Nat st P2[n] holds n<=ma from NAT_1:sch 6
                    (A453,A451);
                    reconsider ma as Element of NAT by ORDINAL1:def 13;
                    now per cases;
                      suppose
A455:                   ma=len g;
                        i2+1<=j2 by A277,NAT_1:13;
                        then
A456:                   1<=l by XREAL_1:21;
                        then
A457:                   l in dom g2 & i2+l=j2 by A278,FINSEQ_3:27;
                        then
A458:                   g/.ma=g2/.l by A278,A428,A455,FINSEQ_4:84
                          .= pj by A278,A457;
                        then pj`2<=p1`2 by A454;
                        then
A459:                   p1`2=pj`2 by A450,XXREAL_0:1;
A460:                   ma-1<=len g & len g1+1<=ma
                        by A278,A428,A455,A456,XREAL_1:9,45;
                        then
A461:                   len g1<=ma-1 & 0<=len g1 by XREAL_1:21;
                        then 0+1<=ma by XREAL_1:21;
                        then reconsider m1=ma-1 as Element of NAT by INT_1:18;
                        1<=len g1 by A14,A16,A36,XXREAL_0:2;
                        then
A462:                   1<=m1 by A461,XXREAL_0:2;
                        reconsider q=g/.m1 as Point of TOP-REAL 2;
A463:                   q`1=ppi`1 & q`2<=pj`2 & q=|[q`1,q`2]| & m1+1=ma
                        by A429,A460,A461,EUCLID:57;
                        then
A464:                   LSeg(g,m1)=LSeg(q,pj)
                        by A455,A458,A462,TOPREAL1:def 5;

set lq={e where e is Point of TOP-REAL 2: e`1=ppi`1 & q`2<=e`2 & e`2<=pj`2};
                        LSeg(g,m1)=lq by A289,A463,A464,TOPREAL3:15;
                        then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
                        by A450,A455,A459,A462,A463;
                        hence x in L~g by A450,TARSKI:def 4;
                      end;
                      suppose ma<>len g;
                        then ma<len g by A454,REAL_1:def 5;
                        then
A465:                   ma+1<=len g & k<=ma & ma<= ma+1
                        by A16,A36,A454,NAT_1:13,XXREAL_0:2;
A466:                   1<=ma & len g1<=ma+1 by A14,A16,A36,A454,NAT_1:13;

reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
A467:                   qa`2<=p1`2 by A454;
A468:                   now
                          assume qa1`2<=p1`2;
                          then for q holds q=g/.(ma+1) implies q`2<=p1`2;
                          then ma+1<=ma by A454,A465,A466;
                          hence contradiction by REAL_2:174;
                        end;
                        then
A469:                   qa`2<qa1`2 & qa`2<=p1`2 & p1`2<=qa1`2 &
                        qa`1=ppi`1 & qa1 `1 = ppi`1
                        by A429,A454,A465,A466,A467,XXREAL_0:2;
                        set lma = {p2: p2`1=ppi`1 & qa`2<=p2`2 & p2`2<=qa1`2};
A470:                   qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                        LSeg(g,ma)=LSeg(qa,qa1) by A465,A466,TOPREAL1:def 5
                          .= lma by A469,A470,TOPREAL3:15;

then x in LSeg(g,ma) & LSeg(g,ma) in lg by A450,A465,A466,A467,A468;
                        hence x in L~g by TARSKI:def 4;
                      end;
                    end;
                    hence x in L~g;
                  end;
                end;
                hence x in L~g;
              end;
              1<=len g1 by A14,A16,A36,XXREAL_0:2;
              then 1 in dom g1 by FINSEQ_3:27;
              hence g/.1=f1/.1 by A34,FINSEQ_4:83
                .=f/.1 by A15,A19,FINSEQ_4:86;
              i2+1<=j2 by A277,NAT_1:13;
              then
A471:         1<=l by XREAL_1:21;
              then
A472:         l in dom g2 & len g=len g1 + l by A278,FINSEQ_1:35,FINSEQ_3:27;
              hence g/.len g=g2/.l by FINSEQ_4:84
                .=G*(i1,i2+l) by A278,A472
                .=f/.len f by A5,A49,A71;
              thus len f<=len g by A5,A16,A36,A471,A472,XREAL_1:9;
            end;
          end;
          hence thesis;
        end;
        suppose
A473:     i2=j2;
          set ppi = G*(i1,i2), pj = G*(j1,i2);
          now per cases by XXREAL_0:1;
            case
A474:         i1>j1;
              then reconsider l=i1-j1 as Element of NAT by INT_1:18;
A475:         now
                let n;
                assume n in Seg l;
                then
A476:           1<=n & n<=l & 0<=j1 by FINSEQ_1:3;
                l<=i1 by XREAL_1:45;

then reconsider w=i1-n as Element of NAT by A476,INT_1:18,XXREAL_0:2;
                0<=n & i1-l<=i1-n by A476,REAL_1:92;
                then i1-n<=i1 & i1<=len G & j1<=w & 1<=j1
                by A51,FINSEQ_3:27,XREAL_1:45;
                then 1<=w & w<=len G by XXREAL_0:2;
                then w in dom G by FINSEQ_3:27;

hence i1-n is Element of NAT & [i1-n,i2] in Indices G & i1-n in dom G
                by A50,A51,ZFMISC_1:106;
              end;
              defpred P1[Element of NAT,set] means for m st m=i1-$1
              holds $2=G*(m,i2);
A477:         now
                let n;
                assume n in Seg l;
                then reconsider m=i1-n as Element of NAT by A475;
                take p=G*(m,i2);
                thus P1[n,p];
              end;
              consider g2 such that
A478:         len g2 = l & for n st n in Seg l holds P1[n,g2/.n]
              from FINSEQ_4:sch 1(A477);
A479:         dom g2=Seg l by A478,FINSEQ_1:def 3;
              take g=g1^g2;
              now
                let n;
                assume
A480:           n in dom g2;
                then reconsider m=i1-n as Element of NAT by A475,A479;
                take m,k=i2;
                thus [m,k] in Indices G & g2/.n=G*(m,k) by A475,A478,A479,A480;
              end;
              then
A481:         for n st n in dom g ex i,j st [i,j] in Indices G &
              g/.n=G*(i,j) by A53,GOBOARD1:39;
A482:         now
                let n;
                assume
A483:           n in dom g2 & n+1 in dom g2;
                then
A484:           [i1-n,i2] in Indices G
                & [i1-(n+1),i2] in Indices G by A475,A479;

reconsider m1=i1-n,m2=i1-(n+1) as Element of NAT by A475,A479,A483;
A485:           g2/.n=G*(m1,i2) & g2/.(n+1)=G*(m2,i2) by A478,A479,A483;
                let l1,l2,l3,l4 be Element of NAT;
                assume
                [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2)
                & g2/.(n+1)=G*(l3,l4);
                then l1=m1 & l2=i2 & l3=m2 & l4=i2 by A484,A485,GOBOARD1:21;

hence abs(l1-l3)+abs(l2-l4)= abs(i1-n-(i1-(n+1)))+0 by ABSVALUE:7
                  .= 1 by ABSVALUE:def 1;
              end;
              now
                let l1,l2,l3,l4 be Element of NAT;
                assume
A486:           [

l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,l2) &
                g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
                then
A487:           [i1-1,i2] in Indices G
                & f1/.len f1=f/.k by A15,A16,A18,A475,A479,FINSEQ_4:86;
                reconsider m1=i1-1 as Element of NAT by A475,A479,A486;
                g2/.1=G*(m1,i2) by A478,A479,A486;
                then l1=i1 & l2=i2 & l3=m1 & l4=i2
                by A35,A47,A486,A487,GOBOARD1:21;
                hence abs(l1-l3)+abs(l2-l4)=abs(i1-(i1-1))+0 by ABSVALUE:7
                  .=1 by ABSVALUE:def 1;
              end;
              then for n st n in dom g & n+1 in dom g holds
              for m,k,i,j st [m,k] in Indices G &
              [i,j] in Indices G & g/.n=G*(m,k) &

g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A482,GOBOARD1:40;
              hence g is_sequence_on G by A481,GOBOARD1:def 11;
              set

lk={w where w is Point of TOP-REAL 2: w`2=ppi`2 & pj`1<=w`1 & w`1<= ppi`1};
              c1/.i1=c1.i1 & c1/.j1=c1.j1 by A51,A70,PARTFUN1:def 8;
              then
A488:         c1/.i1=ppi & c1/.j1=pj by A51,MATRIX_1:def 9;
              then
A489:         y2.i1=ppi`2 & y2.j1=pj`2 & x2.i1=ppi`1 & x2.j1 =pj`1 & len g2 =l
              by A51,A52,A64,A65,A66,A68,A69,A478,GOBOARD1:def 3,def 4;
              then
A490:         pj`1<ppi`1 & ppi`2=pj`2 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj
              `2]|

by A51,A52,A56,A57,A64,A65,A66,A68,A69,A474,EUCLID:57,GOBOARD1:def 1,def 2;
A491:         LSeg(f,k)=LSeg(pj,ppi) by A14,A47,A49,A473,TOPREAL1:def 5
                .= lk by A490,TOPREAL3:16;
A492:         LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A473,TOPREAL1:def 5;
              now
                let n,m;
                assume
A493:           n in dom g2 & m in dom g2 & n<>m;
                then
A494:           [i1-n,i2] in Indices G& [i1-m,i2] in Indices G by A475,A479;

reconsider n1=i1-n, m1=i1-m as Element of NAT by A475,A479,A493;
A495:           g2/.n=G*(n1,i2) & g2/.m=G*(m1,i2) by A478,A479,A493;
                assume g2/.n=g2/.m;
                then n1=m1 by A494,A495,GOBOARD1:21;
                hence contradiction by A493;
              end;
              then for n,m st n in dom g2 & m in dom g2 &
              g2/.n = g2/.m holds n = m;
              then
A496:         g2
              is one-to-one & Seg len g2=dom g2 by FINSEQ_1:def 3,PARTFUN2:16;
A497:         not f/.k in rng g2
              proof
                assume f/.k in rng g2;
                then consider n such that
A498:           n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
A499:           [i1-n,i2] in Indices G by A475,A478,A496,A498;
                reconsider n1=i1-n as Element of NAT by A475,A478,A496,A498;
                g2/.n=G*(n1,i2) & 0+1<=n by A478,A496,A498,FINSEQ_1:3;
                then n1=i1 & 0<n by A47,A498,A499,GOBOARD1:21;
                hence contradiction;
              end;
A500:         now
                let n,p;
                assume
A501:           n in dom g2 & g2/.n=p;
                then
A502:           P1[n,g2/.n] &
                1<=n & n<=len g2& i1-n in dom G by A475,A478,A496,FINSEQ_1:3;
                reconsider n1=i1-n as Element of NAT by A475,A479,A501;
                set pn = G*(n1,i2);
                c1/.n1=c1.n1 by A70,A502,PARTFUN1:def 8;
                then
A503:           g2/.n=pn & c1/.n1=pn & 0<=n & i1-len g2<= n1
                by A502,MATRIX_1:def 9,REAL_1:92;
                then
A504:           y2.n1=pn`2 & y2.n1=y2.i1 & x2.n1=pn`1 & n1 <=i1 & j1<=n1

by A51,A52,A57,A64,A65,A66,A68,A69,A478,A502,GOBOARD1:def 2,def 3,def 4
                ,REAL_2:173;
                hence p`2=ppi`2 & pj`1<=p`1 & p`1<=ppi`1
                by A51,A52,A56,A64,A66,A69,A489,A501,A502,A503,GOBOARD2:18;
                thus p in rng c1 by A70,A501,A502,A503,PARTFUN2:4;
                n1<i1 by A502,XREAL_1:46;
                hence p`1<ppi`1

by A51,A52,A56,A64,A66,A69,A489,A501,A502,A503,A504,GOBOARD1:def 1;
              end;
A505:         now
                let n,m,p,q;
                assume
A506:           n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
                then
A507:           P1[n,g2/.n] & i1-n in dom G &
                P1[m,g2/.m] & i1-m in dom G by A475,A478,A479;

reconsider n1=i1-n, m1=i1-m as Element of NAT by A475,A479,A506;
                set pn = G*(n1,i2), pm = G*(m1,i2);
                c1/.n1=c1.n1 & c1/.m1 = c1.m1 by A70,A507,PARTFUN1:def 8;
                then
A508:           g2/.n=pn & c1/.n1=pn & g2/.m=pm & c1/.m1= pm & m1<n1
                by A506,A507,MATRIX_1:def 9,REAL_1:92;
                then x2.n1=pn`1 & x2.m1=pm`1 by A67,A70,A507,GOBOARD1:def 3;
                hence q`1<p`1 by A56,A67,A70,A506,A507,A508,GOBOARD1:def 1;
              end;
A509:         rng g2 c= LSeg(f,k)
              proof
                let x;
                assume x in rng g2;
                then consider n such that
A510:           n in dom g2 & g2/.n=x by PARTFUN2:4;
                reconsider n1=i1-n as Element of NAT by A475,A478,A496,A510;
                set pn = G*(n1,i2);
A511:           g2/.n=pn by A478,A496,A510;
                then pn`2=ppi`2 & pj`1<=pn`1 & pn`1<=ppi`1 by A500,A510;
                hence x in LSeg(f,k) by A491,A510,A511;
              end;
              rng g1 /\ rng g2 = {}
              proof consider x being Element of rng g1 /\ rng g2;
                assume not thesis;
                then
A512:           x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
                now per cases by A14,REAL_1:def 5;
                  suppose k=1;
                    hence contradiction by A37,A497,A512,TARSKI:def 1;
                  end;
                  suppose 1<k;
                    then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
                    by A5,A8,A9,A44,A509,A512,GOBOARD2:9,XBOOLE_0:def 3;
                    hence contradiction by A497,A512,TARSKI:def 1;
                  end;
                end;
                hence contradiction;
              end;
              then rng g1 misses rng g2 by XBOOLE_0:def 7;
              hence g is one-to-one by A29,A496,FINSEQ_3:98;
A513:         for n st 1<=n & n+2 <= len g2 holds
              LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
              proof
                let n;
                assume
A514:           1<=n & n+2 <= len g2;
                then
A515:           n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
                then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
                g2/.(n+2) in rng g2 by PARTFUN2:4;
                then
A516:           g2/.n in lk & g2/.(n+1) in lk & g2/.(n+2) in lk by A491,A509;
                then consider u be Point of TOP-REAL 2 such that
A517:           g2/.n=u & u`2=ppi`2 & pj`1<=u`1 & u`1<=ppi`1;
                consider u1 be Point of TOP-REAL 2 such that
A518:           g2/.(n+1)=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1 by A516;
                consider u2 be Point of TOP-REAL 2 such that
A519:           g2/.(n+2)=u2 & u2`2=ppi`2 & pj`1<=u2`1 & u2`1<=ppi`1 by A516;
                set lg = {w where w is Point of TOP-REAL 2:
                w`2=ppi`2 & u2`1<=w`1 & w`1<=u`1};
A520:           1<= n+1 by NAT_1:11;
A521:           n+1+1 = n+(1+1);
                n+1 <= n+2 by XREAL_1:8;
                then n+1 <= len g2 by A514,XXREAL_0:2;
                then
A522:           LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg( u1,u2) &
                LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
                by A514,A517,A518,A519,A520,A521,TOPREAL1:def 5;
                n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:13;
                then
A523:           u2`1<u1`1 & u1`1<u`1 by A505,A515,A517,A518,A519;
                then
A524:           u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2 ]| by A518,EUCLID:57;

then LSeg(g2/.n,g2/.(n+2))=lg by A517,A519,A523,TOPREAL3:16,XXREAL_0:2;
                hence thesis by A518,A522,A524,TOPREAL1:14;
              end;
              thus g is unfolded
              proof
                let n be Nat;
                assume
A525:           1<=n & n+2 <= len g;
                then
A526:           n+1+1<=len g;
A527:           1 <= n+1 by NAT_1:11;
A528:           n<=n+1 & n+1<=n+1+1 by NAT_1:11;
                then
A529:           n+1 <= len g by A525,XXREAL_0:2;
A530:           n+(1+1)=n+1+1;
A531:           len g=len g1+len g2 by FINSEQ_1:35;
                n+2-len g1 = n-len g1 +2;
                then
A532:           n-len g1 + 2 <= len g2 by A525,A531,XREAL_1:22;
                per cases;
                suppose
A533:             n+2 <= len g1;

then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
                  by A525,GOBOARD2:4;
                  then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
                  g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
                  hence thesis by A30,A525,A533,TOPREAL1:def 8;
                end;
                suppose len g1 < n+2;
                  then len g1+1<=n+2 by NAT_1:13;
                  then
A534:             len g1<=n+2-1 by XREAL_1:21;
                  thus thesis
                  proof per cases;
                    suppose
A535:                 len g1=n+1;
                      now
                        assume
A536:                   k=1;
                        1<len g1 by A525,A535,NAT_1:13;
                        then 1+1<=len g1 by NAT_1:13;
                        hence contradiction by A37,A536,TOPREAL1:29;
                      end;
                      then
A537:                 1<k & LSeg(g1,n) c= L~f1
                      by A14,A33,REAL_1:def 5,TOPREAL3:26;
                      then
A538:                 L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                      1<=n+1 by NAT_1:11;
                      then
A539:                 n in dom g1 & n+1 in dom g1
                      by A525,A528,A535,FINSEQ_3:27;
                      then
A540:                 LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
A541:                 g/.(n+1)=f1/.len f1 by A35,A535,A539,FINSEQ_4:83
                        .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                      1 <= len g2 by A525,A530,A531,A535,XREAL_1:8;
                      then
A542:                 g/.(n+2)=g2/.1 by A530,A535,GOBOARD2:5;
                      1<=len g-len g1 by A526,A535,XREAL_1:21;
                      then 1 in dom g2 by A531,FINSEQ_3:27;
                      then
A543:                 g2/.1 in rng g2 by PARTFUN2:4;
                      then g2/.1 in lk by A491,A509;
                      then consider u1 be Point of TOP-REAL 2 such that
A544:                 g2/.1=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1;
                      ppi in LSeg(ppi,pj) by TOPREAL1:6;
                      then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1
                      )

by A492,A509,A525,A527,A530,A541,A542,A543,A544,TOPREAL1:12,def 5;
                      then
A545:                 LSeg(g,n) /\ LSeg(g,n+1) c= {g /.(n+1)}
                      by A47,A537,A538,A540,A541,XBOOLE_1:27;
                      g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                      by A525,A527,A529,A530,TOPREAL1:27;

then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;

then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
                      hence thesis by A545,XBOOLE_0:def 10;
                    end;
                    suppose len g1<>n+1;
                      then len g1<n+1 by A534,REAL_1:def 5;
                      then
A546:                 len g1<=n by NAT_1:13;

then reconsider n1=n-len g1 as Element of NAT by INT_1:18;
                      thus thesis
                      proof per cases;
                        suppose
A547:                     len g1=n;
                          1<=len g1 by A14,A16,A36,XXREAL_0:2;
                          then len g1 in dom g1 by FINSEQ_3:27;
                          then
A548:                     g/.n=f1/.len f1 by A35,A547,FINSEQ_4:83
                            .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A549:                     2 <= len g2 by A525,A531,A547,XREAL_1:8;
                          then 1<= len g2 by XXREAL_0:2;
                          then
A550:                     g/.(n+1)=g2/.1 by A547,GOBOARD2:5;
A551:                     g/.(n+2)=g2/.2 by A547,A549,GOBOARD2:5;
                          1<=len g2 by A549,XXREAL_0:2;
                          then
A552:                     1 in dom g2 & 2 in dom g2 by A549,FINSEQ_3:27;
                          then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                          then
A553:                     g2/.1 in lk & g2/.2 in lk by A491,A509;
                          then consider u1 be Point of TOP-REAL 2 such that
A554:                     g2/.1=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1;
                          consider u2 be Point of TOP-REAL 2 such that
A555:                     g2

/.2=u2 & u2`2=ppi`2 & pj`1<=u2`1 & u2`1<=ppi`1 by A553;
A556:                     u2`1<u1`1 by A505,A552,A554,A555;
                          then
A557:                     u2`1<=u1`1 & u2`1<ppi `1 & u2=|[u2`1,u2`2]|
                          by A554,EUCLID:57,XXREAL_0:2;
                          set lg = {w where w is Point of TOP-REAL 2 :
                          w`2=ppi`2 & u2`1<=w`1 & w`1<=ppi`1};
A558:                     u1 in lg by A554,A556;
A559:                     LSeg

(ppi,g2/.2)=LSeg(ppi,u2) & LSeg(g,n)=LSeg(ppi,u1) & LSeg(g,n+1)=LSeg(u1,u2)

by A525,A527,A529,A530,A548,A550,A551,A554,A555,TOPREAL1:def 5;
                          LSeg(ppi,g2/.2)=lg by A490,A555,A557,TOPREAL3:16;
                          hence thesis by A550,A554,A558,A559,TOPREAL1:14;
                        end;
                        suppose len g1<>n;
                          then
A560:                     len g1<n by A546,REAL_1:def 5;
                          n1 + len g1 = n;
                          then
A561:                     LSeg(g,n)=LSeg(g2,n1) by A529,A560,GOBOARD2:10;
A562:                     len g1<n+1 by A528,A560,XXREAL_0:2;
A563:                     len g1+1<=n by A560,NAT_1:13;
A564:                     n+1 = n1+1+len g1;
A565:                     1<=n1+1 by NAT_1:11;
                          n1 + 1 + len g1 = n + 1;
                          then n1+1 <= len g2 by A529,A531,XREAL_1:8;

then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                          by A526,A562,A563,A564,A565,GOBOARD2:5,10,XREAL_1:21;
                          hence thesis by A513,A532,A561;
                        end;
                      end;
                    end;
                  end;
                end;
              end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
              m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
              proof
                let n,m;
                assume that
A566:           m>n+1 and
A567:           n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
A568:           LSeg(g2,n) /\ LSeg(g2,m) <> {};
A569:           1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
                len g2 by A567,FINSEQ_3:27;
                reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
                as Point of TOP-REAL 2;
                set lp = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                p2`1<=w`1 & w`1<=p1`1},
                lq = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                q2`1<=w`1 & w`1<=q1`1};
                m<m+1 & n<n+1 by NAT_1:13;
                then
A570:           p2`1<p1`1 & q2`1<q1`1 & p1`2=ppi`2 & p2`2= ppi`2 & q1`2=
                ppi`2 & q2`2=ppi`2 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
                p2=|[p2`1,p2`2]| &
                q2=|[q2`1,q2`2]| by A500,A505,A567,EUCLID:57;
A571:           LSeg(g2,n) = LSeg(p2,p1) by A569,TOPREAL1:def 5
                  .=lp by A570,TOPREAL3:16;
A572:           LSeg(g2,m) = LSeg(q2,q1) by A569,TOPREAL1:def 5
                  .=lq by A570,TOPREAL3:16;
                consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
A573:           x in LSeg(g2,n) & x in LSeg(g2,m) by A568,XBOOLE_0:def 3;
                then
A574:           ex tn be Point of TOP-REAL 2 st
                tn=x & tn`2=ppi`2 & p2`1<=tn`1 & tn`1<=p1`1 by A571;
A575:           ex tm be Point of TOP-REAL 2 st
                tm=x & tm`2=ppi`2 & q2`1<=tm`1 & tm`1<=q1`1 by A572,A573;
                q1`1<p2`1 by A505,A566,A567;
                hence contradiction by A574,A575,XXREAL_0:2;
              end;
              then
A576:         g2 is s.n.c. by GOBOARD2:6;
A577:         L~g2 c= LSeg(f,k)
              proof
                set ls={LSeg(g2,m): 1<=m & m+1 <= len g2};
                let x;
                assume x in L~g2;
                then consider X be set such that
A578:           x in X & X in ls by TARSKI:def 4;
                consider m such that
A579:           X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A578;
                m in dom g2 & m+1 in dom g2 by A579,GOBOARD2:3;
                then
A580:           g2/.m in rng g2 & g2/.(m+1) in rng g2 by PARTFUN2:4;
                reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
A581:           LSeg(q1,q2) c= LSeg(ppi,pj) by A492,A509,A580,TOPREAL1:12;
                LSeg(g2,m)=LSeg(q1,q2) by A579,TOPREAL1:def 5;
                hence thesis by A492,A578,A579,A581;
              end;
A582:         not f/.k in L~g2
              proof
                set ls={LSeg(g2,m): 1<=m & m+1 <= len g2};
                assume f/.k in L~g2;
                then consider X be set such that
A583:           f/.k in X & X in ls by TARSKI:def 4;
                consider m such that
A584:           X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A583;
A585:           m in dom g2 & m+1 in dom g2 &
                m<m+1 by A584,GOBOARD2:3,NAT_1:13;
                reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
                set lq={w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                q2`1<=w`1 & w`1<=q1`1};
A586:           q1`2=ppi`2 & q2`2=ppi`2 & q2`1<q1`1 & q1=|[q1`1,q1`2]|
                & q2=|[q2`1,q2`2]| by A500,A505,A585,EUCLID:57;
                LSeg(g2,m)=LSeg(q2,q1) by A584,TOPREAL1:def 5
                  .=lq by A586,TOPREAL3:16;

then ex p st p=f/.k & p`2=ppi`2 & q2`1<=p`1 & p`1<=q1`1 by A583,A584;
                hence contradiction by A47,A500,A585;
              end;
A587:         L~g1 /\ L~g2 = {}
              proof
                per cases;
                suppose k=1;
                  hence thesis by A37;
                end;
                suppose k<>1;
                  then 1<k by A14,REAL_1:def 5;
                  then L~g1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,A33,GOBOARD2:9;
                  then
A588:             L~g1 /\ L~g2 c= {f/.k} by A577,XBOOLE_1:26;
                  now consider x being Element of L~g1 /\ L~g2;
                    assume L~g1 /\ L~g2 <> {};

then x in {f/.k} & x in L~g2 by A588,TARSKI:def 3,XBOOLE_0:def 3;
                    hence contradiction by A582,TARSKI:def 1;
                  end;
                  hence thesis;
                end;
              end;
              for n,m st m>n+1 & n in dom g & n+1 in dom g &
              m in dom g & m+1 in dom g holds LSeg(g,n) misses LSeg(g,m)
              proof
                let n,m;
                assume that
A589:           m>n+1 and
A590:           n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
A591:           1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
                m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
                by A590,FINSEQ_1:35,FINSEQ_3:27,NAT_1:11;
                set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
                l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
                j1+1<=i1 by A474,NAT_1:13;
                then
A592:           1<=l by XREAL_1:21;
                then
A593:           1 in dom g2 by A478,FINSEQ_3:27;
                reconsider qq=g2/.1 as Point of TOP-REAL 2;
                set ql={z where z is Point of TOP-REAL 2: z`2=ppi`2 &
                qq`1<=z`1 & z`1<=ppi`1};
A594:           1<=len g1 by A14,A16,A36,XXREAL_0:2;

then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
                then
A595:           g/.len g1=g1/.len g1 by FINSEQ_4:83
                  .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
A596:           len g1<len g1 +1 & len g1+1<=len g
                by A478,A591,A592,NAT_1:13,XREAL_1:9;
A597:           g/.(len g1+1)=qq by A478,A592,GOBOARD2:5;
A598:           qq`2=ppi`2 & pj`1<=qq`1 & qq`1<ppi`1 & qq=|[qq`1,qq`2]|
                by A500,A593,EUCLID:57;
A599:           LSeg
                (g,len g1)=LSeg(qq,ppi) by A594,A595,A596,A597,TOPREAL1:def 5
                  .= ql by A490,A598,TOPREAL3:16;
A600:           n+1<=m+1 by A589,A591,XXREAL_0:2;
                now per cases;
                  suppose
A601:               m+1<=len g1;
                    then
A602:               m<=len g1 & n+1<=len g1 by A591,A600,XXREAL_0:2;
                    then n<=len g1 by A591,XXREAL_0:2;

then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
                    by A591,A601,A602,FINSEQ_3:27;
                    then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m)
                    by TOPREAL3:25;
                    hence thesis by A31,A589,TOPREAL1:def 9;
                  end;
                  suppose len g1<m+1;
                    then
A603:               len g1<=m by NAT_1:13;
                    then reconsider m1=m-len g1 as Element of NAT by INT_1:18;
                    now per cases;
                      suppose
A604:                   m=len g1;
                        now
                          assume
A605:                     k=1;
                          1<len g1 by A589,A591,A604,XXREAL_0:2;
                          then 1+1<=len g1 by NAT_1:13;
                          hence contradiction by A37,A605,TOPREAL1:29;
                        end;
                        then 1<k by A14,REAL_1:def 5;
                        then
A606:                   L~f1 /\ LSeg(f,k) ={f/.k} by A5,A8,A9,GOBOARD2:9;
                        n<=len g1 by A589,A591,A604,XXREAL_0:2;
                        then
A607:                   n in dom g1 & n+1 in dom g1
                        by A589,A591,A604,FINSEQ_3:27;
                        then
A608:                   LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                        then LSeg(g,n) in l1 by A589,A591,A604;
                        then
A609:                   LSeg(g,n) c= L~f1 by A33,ZFMISC_1:92;
                        LSeg(g,m) c= LSeg(f,k)
                        proof
                          let x;
                          assume x in LSeg(g,m);
                          then consider px be Point of TOP-REAL 2 such that
A610:                     px=x & px`2=ppi`2 & qq`1<=px`1 & px`1<=
                          ppi`1 by A599,A604;
                          pj`1<=px`1 by A598,A610,XXREAL_0:2;
                          hence thesis by A491,A610;
                        end;
                        then
A611:                   LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                        by A606,A609,XBOOLE_1:27;
                        now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                          assume LSeg(g,n)/\ LSeg(g,m)<>{};
                          then
A612:                     x in LSeg(g,n) & x in {f/.k}
                          by A611,TARSKI:def 3,XBOOLE_0:def 3;
                          then
A613:                     x=f/.k by TARSKI:def 1;
                          f/.k=g1/.len g1 by A15,A16,A18,A35,FINSEQ_4:86;
                          hence contradiction

by A29,A30,A31,A589,A604,A607,A608,A612,A613,GOBOARD2:7;
                        end;
                        hence thesis by XBOOLE_0:def 7;
                      end;
                      suppose m<>len g1;
                        then
A614:                   len g1<m & m+1=m1+1+len g1 by A603,REAL_1:def 5;
                        m = m1+len g1;
                        then
A615:                   LSeg(g,m)=LSeg(g2,m1) by A591,A614,GOBOARD2:10;
                        m1+1<=len g2 & len g1+1<=
                        m by A591,A614,NAT_1:13,XREAL_1:8;
                        then
A616:                   1<=m1 & m1+1 <= len g2 by XREAL_1:21;
                        then LSeg(g,m) in l2 by A615;
                        then
A617:                   LSeg(g,m) c= L~g2 by ZFMISC_1:92;
                        now per cases;
                          suppose
A618:                       n+1<=len g1;
                            then n<=len g1 by A591,XXREAL_0:2;

then n in dom g1 & n+1 in dom g1 by A591,A618,FINSEQ_3:27;
                            then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                            then LSeg(g,n) in l1 by A591,A618;
                            then LSeg(g,n) c= L~g1 by ZFMISC_1:92;

then LSeg(g,n) /\ LSeg(g,m) = {} by A587,A617,XBOOLE_1:3,27;
                            hence thesis by XBOOLE_0:def 7;
                          end;
                          suppose len g1<n+1;
                            then
A619:                       len g1<=n by NAT_1:13;

then reconsider n1=n-len g1 as Element of NAT by INT_1:18;
A620:                       n - len g1 + 1 = n + 1 - len g1;
A621:                       n = n1 + len g1;
                            now per cases;
                              suppose
A622:                           len g1=n;
                                now consider x being
                                  Element of LSeg(g,n) /\ LSeg(g,m);
                                  assume LSeg(g,n) /\ LSeg(g,m)<>{};
                                  then
A623:                             x in LSeg(g,n) & x in LSeg(g,m)
                                  by XBOOLE_0:def 3;
                                  then
A624:                             ex qx be Point of TOP-REAL 2 st
                                  qx=x & qx`2=ppi`2 & qq`1<=qx`1 & qx`1<=
                                  ppi`1 by A599,A622;
A625:                             m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                                  by A616,GOBOARD2:3,NAT_1:13;
                                  reconsider q1=g2/.m1, q2=g2/.(m1+1)
                                  as Point of TOP-REAL 2;

set q1l={v where v is Point of TOP-REAL 2: v`2=ppi`2 & q2`1<=v`1 & v`1<=q1`1};
A626:                             q1

`2=ppi`2 & q2`2=ppi`2 & q2`1<q1`1 & q1=|[q1`1,q1`2]|&
                                  q2=|[q2`1,q2`2]| by A500,A505,A625,EUCLID:57;
                                  m1 > n1 + 1 & n1 + 1 >=
                                  1 by A589,A620,NAT_1:11,XREAL_1:11;
                                  then
A627:                             m1 > 1 by XXREAL_0:2;

LSeg(g2,m1)=LSeg(q2,q1) by A616,TOPREAL1:def 5
                                    .=q1l by A626,TOPREAL3:16;
                                  then
A628:                             ex qy be Point of TOP-REAL 2 st
                                  qy=x & qy`2=ppi`2 & q2`1<=qy`1 & qy`1<=
                                  q1`1 by A615,A623;
                                  q1`1 < qq`1 by A505,A593,A625,A627;
                                  hence contradiction by A624,A628,XXREAL_0:2;
                                end;
                                hence thesis by XBOOLE_0:def 7;
                              end;
                              suppose n<>len g1;
                                then len g1<n by A619,REAL_1:def 5;
                                then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                                by A589,A591,A620,A621,GOBOARD2:10,XREAL_1:11;
                                hence thesis by A576,A615,TOPREAL1:def 9;
                              end;
                            end;
                            hence thesis;
                          end;
                        end;
                        hence thesis;
                      end;
                    end;
                    hence thesis;
                  end;
                end;
                hence thesis;
              end;
              hence g is s.n.c. by GOBOARD2:6;
A629:         g2 is special
              proof
                let n be Nat;
                set p = g2/.n, q = g2/.(n+1);
                assume 1<=n & n+1 <= len g2;
                then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
                then p`2=ppi`2 & q`2=ppi`2 by A500;
                hence p`1=q`1 or p`2=q`2;
              end;
              now
                set p=g1/.len g1, q=g2/.1;
                j1+1<=i1 by A474,NAT_1:13;
                then 1<=l by XREAL_1:21;
                then 1 in dom g2 by A479,FINSEQ_1:3;
                then q`2=ppi`2 by A500;
                hence p`1=q`1 or p`2=q`2 by A15,A16,A18,A35,A47,FINSEQ_4:86;
              end;
              hence g is special by A32,A629,GOBOARD2:13;
              thus L~g=L~f
              proof
                set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
                lf = {LSeg(f,j): 1<=j & j+1 <= len f};
A630:           len g = len g1 + len g2 by FINSEQ_1:35;
A631:           now
                  let j;
                  assume
A632:             len g1<=j & j<=len g;
                  then reconsider w = j-len g1 as Element of NAT by INT_1:18;
                  let p such that
A633:             p=g/.j;
                  per cases;
                  suppose
A634:               j=len g1;
                    1<=len g1 by A14,A16,A36,XXREAL_0:2;
                    then len g1 in dom g1 by FINSEQ_3:27;
                    then
A635:               g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
                      .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
                    hence p`2=G*(i1,i2)`2 by A633,A634;
                    thus G*(j1,i2)`1<=p`1 & p`1<=G*

(i1,i2)`1 by A51,A52,A56,A64,A66,A69,A474,A489,A633,A634,A635,GOBOARD1:def 1;
                    Seg len c1 = dom c1 by FINSEQ_1:def 3;

hence p in rng c1 by A51,A52,A69,A488,A633,A634,A635,PARTFUN2:4;
                  end;
                  suppose j<>len g1;
                    then
A636:               len g1 < j by A632,REAL_1:def 5;
A637:               j = w + len g1;
                    len g1 + 1<=j by A636,NAT_1:13;
                    then
A638:               1<=w & w<=len g2 by A630,A632,XREAL_1:21,22;
                    then
A639:               g/.j=g2/.w by A637,GOBOARD2:5;
                    w in dom g2 by A638,FINSEQ_3:27;
                    hence p`2=ppi`2 & pj`1<=p`1 & p`1<=
                    ppi`1 & p in rng c1 by A500,A633,A639;
                  end;
                end;
                thus L~g c= L~f
                proof
                  let x;
                  assume x in L~g;
                  then consider X be set such that
A640:             x in X & X in lg by TARSKI:def 4;
                  consider i such that
A641:             X=LSeg(g,i) & 1<=i & i+1 <= len g by A640;
                  per cases;
                  suppose
A642:               i+1 <= len g1;
                    then i<=i+1 & i+1<=len g1 by NAT_1:11;

then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A641,XXREAL_0:2;
                    then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
                    then X=LSeg(g1,i) by A641,TOPREAL3:25;
                    then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A641,A642;

then x in L~f1 & L~f1 c= L~f by A33,A640,TARSKI:def 4,TOPREAL3:27;
                    hence thesis;
                  end;
                  suppose
A643:               i+1 > len g1;
                    then
A644:               len g1<=i & i<=i+1 & i+1<=len g by A641,NAT_1:13;
A645:               1<=i+1 & len g1<=i+1 & i<=len g by A641,A643,NAT_1:13;
                    reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
A646:               q1`2=ppi`2 & pj`1<=q1`1 & q1`1<=ppi`1 & q2`2=ppi`2 & pj`1<=
                    q2`1 & q2`1<=ppi`1 by A631,A644,A645;
                    then
A647:               q1=|[q1`1,q1`2]| & q2=|[q2`1,q1`2 ]| by EUCLID:57;
A648:               LSeg(g,i)=LSeg(q2,q1) by A641,TOPREAL1:def 5;
                    now per cases by XXREAL_0:1;
                      suppose q1`1>q2`1;

then LSeg(g,i)={p2: p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1}
                        by A647,A648,TOPREAL3:16;
                        then consider p2 such that
A649:                   p2
                        =x & p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1 by A640,A641;
                        pj`1<=p2`1 & p2`1<=ppi`1 by A646,A649,XXREAL_0:2;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A491,A646,A649;
                        hence thesis by TARSKI:def 4;
                      end;
                      suppose q1`1=q2`1;
                        then LSeg(g,i)={q1} by A647,A648,TOPREAL1:7;
                        then x=q1 by A640,A641,TARSKI:def 1;
                        then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A491,A646;
                        hence thesis by TARSKI:def 4;
                      end;
                      suppose q1`1<q2`1;

then LSeg(g,i)= {p1: p1`2=q1`2 & q1`1<=p1`1 & p1`1<=q2`1}
                        by A647,A648,TOPREAL3:16;
                        then consider p2 such that
A650:                   p2
                        =x & p2`2=q1`2 & q1`1<=p2`1 & p2`1<=q2`1 by A640,A641;
                        pj`1<=p2`1 & p2`1<=ppi`1 by A646,A650,XXREAL_0:2;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A491,A646,A650;
                        hence thesis by TARSKI:def 4;
                      end;
                    end;
                    hence thesis;
                  end;
                end;
                let x;
                assume x in L~f;
                then
A651:           x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
                per cases by A651,XBOOLE_0:def 2;
                suppose x in L~f1;
                  then x in L~g1 & L~g1 c= L~g by A33,GOBOARD2:11;
                  hence x in L~g;
                end;
                suppose x in LSeg(f,k);
                  then consider p1 such that
A652:             p1=x & p1`2=ppi`2 & pj`1<=p1`1 & p1`1<=ppi`1 by A491;
                  defpred P2[Nat] means
                  len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`1>=p1`1;
A653:             now
                    reconsider n=len g1 as Nat;
                    take n;
                    thus P2[n]
                    proof
                      thus len g1<=n & n<=len g by A630,REAL_2:173;
                      let q such that
A654:                 q=g/.n;
                      1<=len g1 by A14,A16,A36,XXREAL_0:2;
                      then len g1 in dom g1 by FINSEQ_3:27;
                      then q=f1/.len f1 by A35,A654,FINSEQ_4:83
                        .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
                      hence p1`1<=q`1 by A652;
                    end;
                  end;
A655:             for n be Nat holds P2[n] implies n<=len g;
                  consider ma be Nat such that
A656:             P2[ma] & for n be Nat st P2[n] holds n<=ma from NAT_1:sch 6
                  (A655,A653);
                  reconsider ma as Element of NAT by ORDINAL1:def 13;
                  now per cases;
                    suppose
A657:                 ma=len g;
                      j1+1<=i1 by A474,NAT_1:13;
                      then
A658:                 1<=l & l=len g2 by A478,XREAL_1:21;
                      then
A659:                 l in dom g2 & i1-l=j1 by FINSEQ_3:27;
                      then
A660:                 g/.ma=g2/.l by A478,A630,A657,FINSEQ_4:84
                        .= pj by A478,A479,A659;
                      then p1`1<=pj`1 by A656;
                      then
A661:                 p1`1=pj`1 by A652,XXREAL_0:1;
A662:                 ma-1<=len g & len g1+1<=ma
                      by A630,A657,A658,XREAL_1:9,45;
                      then
A663:                 len g1<=ma-1 & 0<=len g1 by XREAL_1:21;
                      then 0+1<=ma by XREAL_1:21;
                      then reconsider m1=ma-1 as Element of NAT by INT_1:18;
                      1<=len g1 by A14,A16,A36,XXREAL_0:2;
                      then
A664:                 1<=m1 by A663,XXREAL_0:2;
                      reconsider q=g/.m1 as Point of TOP-REAL 2;
A665:                 q`2=ppi`2 & pj`1<=q`1 & q=|[q`1,q`2]| & m1+1=ma
                      by A631,A662,A663,EUCLID:57;
                      then
A666:                 LSeg(g,m1)=LSeg(pj,q) by A657,A660,A664,TOPREAL1:def 5;

set lq={e where e is Point of TOP-REAL 2: e`2=ppi`2 & pj`1<=e`1 & e`1<=q`1};
                      LSeg(g,m1)=lq by A490,A665,A666,TOPREAL3:16;
                      then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
                      by A652,A657,A661,A664,A665;
                      hence x in L~g by A652,TARSKI:def 4;
                    end;
                    suppose ma<>len g;
                      then ma<len g by A656,REAL_1:def 5;
                      then
A667:                 ma+1<=len g & k<=ma & ma<=ma+1
                      by A16,A36,A656,NAT_1:13,XXREAL_0:2;
A668:                 1<=ma & len g1<=ma+1 by A14,A16,A36,A656,NAT_1:13;

reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
A669:                 p1`1<=qa`1 by A656;
A670:                 now
                        assume p1`1<=qa1`1;
                        then for q holds q=g/.(ma+1) implies p1`1<=q`1;
                        then ma+1<=ma by A656,A667,A668;
                        hence contradiction by REAL_2:174;
                      end;
                      then
A671:                 qa1`1<qa`1 & qa1`1<=p1`1 & p1 `1<=qa`1 &
                      qa`2=ppi`2 & qa1 `2 = ppi`2
                      by A631,A656,A667,A668,A669,XXREAL_0:2;
                      set lma = {p2: p2`2=ppi`2 & qa1`1<=p2`1 & p2`1<=qa`1};
A672:                 qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                      LSeg(g,ma)=LSeg(qa1,qa) by A667,A668,TOPREAL1:def 5
                        .= lma by A671,A672,TOPREAL3:16;

then x in LSeg(g,ma) & LSeg(g,ma) in lg by A652,A667,A668,A669,A670;
                      hence x in L~g by TARSKI:def 4;
                    end;
                  end;
                  hence x in L~g;
                end;
              end;
              1<=len g1 by A14,A16,A36,XXREAL_0:2;
              then 1 in dom g1 by FINSEQ_3:27;
              hence g/.1=f1/.1 by A34,FINSEQ_4:83
                .=f/.1 by A15,A19,FINSEQ_4:86;
              j1+1<=i1 by A474,NAT_1:13;
              then
A673:         1<=l by XREAL_1:21;
              then
A674:         l in dom g2 & len g=len g1 + len g2 & len g2 = l
              by A479,FINSEQ_1:3,35,def 3;
              reconsider m1=i1-l as Element of NAT;
              thus g/.len g=g2/.l by A674,FINSEQ_4:84
                .=G*(m1,i2) by A478,A479,A674
                .=f/.len f by A5,A49,A473;
              thus len f<=len g by A5,A16,A36,A673,A674,XREAL_1:9;
            end;
            case
A675:         i1=j1;
              k<>k+1;
              hence contradiction by A7,A15,A47,A48,A49,A473,A675,PARTFUN2:17;
            end;
            case
A676:         i1<j1;
              then reconsider l=j1-i1 as Element of NAT by INT_1:18;
              deffunc F(Element of NAT) = G*(i1+$1,i2);
              consider g2 such that
A677:         len g2 = l & for n st n in dom g2 holds g2/.n = F(n)
              from GOBOARD2:sch 1;
A678:         Seg l = dom g2 by A677,FINSEQ_1:def 3;
              take g=g1^g2;
A679:         now
                let n;
                assume n in Seg l;
                then
A680:           1<=n & n<=l by FINSEQ_1:3;
                then n<=n+i1 & i1+n<=l+i1 by NAT_1:11,XREAL_1:9;
                then n<=i1+n & i1+n<=j1 & j1<=len G by A51,FINSEQ_3:27;
                then 1<=i1+n & i1+n<=len G by A680,XXREAL_0:2;
                hence i1+n in dom G by FINSEQ_3:27;
                hence [i1+n,i2] in Indices G by A50,A51,ZFMISC_1:106;
              end;
A681:         Seg len g2 = dom g2 by FINSEQ_1:def 3;
              now
                let n such that
A682:           n in dom g2;
                take m=i1+n,k=i2;
                thus [m,k] in Indices G & g2/.n=G*(m,k) by A677,A679,A681,A682;
              end;
              then
A683:         for n st n in dom g ex i,j st [i,j] in Indices G &
              g/.n=G*(i,j) by A53,GOBOARD1:39;
A684:         now
                let n;
                assume n in dom g2 & n+1 in dom g2;
                then
A685:           g2/.n=G*(i1+n,i2) & [i1+n,i2] in Indices G &
                g2/.(n+1)=G*(i1+(n+1),i2) & [i1+(n+1),i2] in Indices G
                by A677,A679,A681;
                let l1,l2,l3,l4 be Element of NAT;
                assume
                [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2)
                & g2/.(n+1)=G*(l3,l4);
                then l1=i1+n & l2=i2 & l3=i1+(n+1) & l4=i2 by A685,GOBOARD1:21;

hence abs(l1-l3)+abs(l2-l4)= abs(i1+n-(i1+(n+1)))+0 by ABSVALUE:7
                  .= abs(-1)
                  .= abs(1) by COMPLEX1:138
                  .= 1 by ABSVALUE:def 1;
              end;
              now
                let l1,l2,l3,l4 be Element of NAT;
                assume
A686:           [l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,
                l2) & g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
                then g2/.1=G*
                (i1+1,i2) & [i1+1,i2] in Indices G & f1/.len f1=f/.k
                by A15,A16,A18,A677,A679,A681,FINSEQ_4:86;

then l1=i1 & l2=i2 & l3=i1+1 & l4=i2 by A35,A47,A686,GOBOARD1:21;
                hence abs(l1-l3)+abs(l2-l4)=abs(i1-(i1+1))+0 by ABSVALUE:7
                  .=abs(i1-i1+-1)
                  .=abs(1) by COMPLEX1:138
                  .=1 by ABSVALUE:def 1;
              end;
              then for n st n in dom g & n+1 in dom g holds
              for m,k,i,j st [m,k] in Indices G &
              [i,j] in Indices G & g/.n=G*(m,k) &

g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A684,GOBOARD1:40;
              hence g is_sequence_on G by A683,GOBOARD1:def 11;
              set

lk={w where w is Point of TOP-REAL 2: w`2=ppi`2 & ppi`1<=w`1 & w`1<= pj`1};
              c1/.i1=c1.i1 & c1/.j1=c1.j1 by A51,A70,PARTFUN1:def 8;
              then
A687:         c1/.i1=ppi & c1/.j1=pj by A51,MATRIX_1:def 9;
              then
A688:         y2.i1=ppi`2 & y2.j1=pj`2 & x2.i1=ppi`1 & x2.j1 =pj`1
              by A51,A64,A65,A66,A67,A68,A70,GOBOARD1:def 3,def 4;
              then
A689:         ppi`1<pj`1 & ppi`2=pj`2 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj`2]|

by A51,A56,A57,A64,A65,A66,A67,A68,A70,A676,EUCLID:57,GOBOARD1:def 1,def 2;
A690:         LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A473,TOPREAL1:def 5
                .= lk by A689,TOPREAL3:16;
A691:         LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A473,TOPREAL1:def 5;
              now
                let n,m;
                assume
A692:           n in dom g2 & m in dom g2 & n<>m;
                then
A693:           g2/.n=G*(i1+n,i2) & g2/.m=G*(i1+m,i2) & [ i1+n,i2] in
                Indices G & [i1+m,i2] in Indices G by A677,A679,A681;
                assume g2/.n=g2/.m;
                then i1+n=i1+m by A693,GOBOARD1:21;
                hence contradiction by A692;
              end;
              then for n,m st n in dom g2 & m in dom g2 &
              g2/.n = g2/.m holds n = m;
              then
A694:         g2 is one-to-one by PARTFUN2:16;
A695:         not f/.k in rng g2
              proof
                assume f/.k in rng g2;
                then consider n such that
A696:           n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
                g2/.n=G*(i1+n,i2) & [i1+n,i2] in Indices G
                by A677,A678,A679,A696;
                then i1+n=i1 & 0<n by A47,A696,FINSEQ_3:27,GOBOARD1:21;
                hence contradiction;
              end;
A697:         now
                let n,p;
                assume
A698:           n in dom g2 & g2/.n=p;
                then
A699:           g2/.n=G*(i1+n,i2) & 1<=n & n<=len g2 & i1+ n in dom G
                by A677,A679,A681,FINSEQ_3:27;
                set n1=i1+n;
                set pn = G*(n1,i2);
                c1/.n1=c1.n1 by A70,A699,PARTFUN1:def 8;
                then
A700:           g2/.n=pn & c1/.n1=pn & 0<=n & n1<=i1+len g2
                by A699,MATRIX_1:def 9,XREAL_1:9;
                then
A701:           y2.n1=pn`2 & y2.n1=y2.i1 & x2.n1=pn`1 & n1 <=j1 & i1<=n1

by A51,A57,A64,A65,A66,A67,A68,A70,A677,A699,GOBOARD1:def 2,def 3,def 4
                ,REAL_2:173;
                hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=pj`1
                by A51,A56,A67,A70,A688,A698,A699,GOBOARD2:18;
                thus p in rng c1 by A70,A698,A699,A700,PARTFUN2:4;
                i1<n1 by A699,REAL_2:174;

hence p`1>ppi`1 by A51,A56,A67,A70,A688,A698,A699,A701,GOBOARD1:def 1;
              end;
A702:         now
                let n,m,p,q;
                assume
A703:           n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
                then
A704:           g2/.n=G*(i1+n,i2) & i1+n in dom G &
                g2/.m=G*(i1+m,i2) & i1+m in dom G by A677,A679,A681;
                set n1=i1+n, m1=i1+m;
                set pn = G*(n1,i2), pm = G*(m1,i2);
                c1/.n1=c1.n1 & c1/.m1 = c1.m1 by A70,A704,PARTFUN1:def 8;
                then
A705:           c1/.n1=pn & c1/.m1=pm & n1<m1
                by A703,A704,MATRIX_1:def 9,XREAL_1:10;
                then x2.n1=pn`1 & x2.m1=pm`1 by A67,A70,A704,GOBOARD1:def 3;
                hence p`1<q`1 by A56,A67,A70,A703,A704,A705,GOBOARD1:def 1;
              end;
A706:         rng g2 c= LSeg(f,k)
              proof
                let x;
                assume x in rng g2;
                then consider n such that
A707:           n in dom g2 & g2/.n=x by PARTFUN2:4;
A708:           g2/.n=G*(i1+n,i2) by A677,A707;
                set pn = G*((i1+n),i2);
                pn`2=ppi`2 & ppi`1<=pn`1 & pn`1<=pj`1 by A697,A707,A708;
                hence x in LSeg(f,k) by A690,A707,A708;
              end;
              rng g1 /\ rng g2 = {}
              proof consider x being Element of rng g1 /\ rng g2;
                assume not thesis;
                then
A709:           x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
                now per cases by A14,REAL_1:def 5;
                  suppose k=1;
                    hence contradiction by A37,A695,A709,TARSKI:def 1;
                  end;
                  suppose 1<k;
                    then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
                    by A5,A8,A9,A44,A706,A709,GOBOARD2:9,XBOOLE_0:def 3;
                    hence contradiction by A695,A709,TARSKI:def 1;
                  end;
                end;
                hence contradiction;
              end;
              then rng g1 misses rng g2 by XBOOLE_0:def 7;
              hence g is one-to-one by A29,A694,FINSEQ_3:98;
A710:         for n st 1<=n & n+2 <= len g2 holds
              LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
              proof
                let n;
                assume
A711:           1<=n & n+2 <= len g2;
                then
A712:           n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
                then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
                g2/.(n+2) in rng g2 by PARTFUN2:4;
                then
A713:           g2/.n in lk & g2/.(n+1) in lk & g2/.(n+2) in lk by A690,A706;
                then consider u be Point of TOP-REAL 2 such that
A714:           g2/.n=u & u`2=ppi`2 & ppi`1<=u`1 & u`1<=pj`1;
                consider u1 be Point of TOP-REAL 2 such that
A715:           g2/.(n+1)=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1 by A713;
                consider u2 be Point of TOP-REAL 2 such that
A716:           g2/.(n+2)=u2 & u2`2=ppi`2 & ppi`1<=u2`1 & u2`1<=pj`1 by A713;
                set lg = {w where w is Point of TOP-REAL 2:
                w`2=ppi`2 & u`1<=w`1 & w`1<=u2`1};
A717:           1<= n+1 by NAT_1:11;
A718:           n+1+1 = n+(1+1);
                n+1 <= n+2 by XREAL_1:8;
                then n+1 <= len g2 by A711,XXREAL_0:2;
                then
A719:           LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg( u1,u2) &
                LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
                by A711,A714,A715,A716,A717,A718,TOPREAL1:def 5;
                n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:13;
                then
A720:           u1`1<u2`1 & u`1<u1`1 by A702,A712,A714,A715,A716;
                then
A721:           u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2 ]| by A715,EUCLID:57;

then LSeg(g2/.n,g2/.(n+2))=lg by A714,A716,A720,TOPREAL3:16,XXREAL_0:2;
                hence thesis by A715,A719,A721,TOPREAL1:14;
              end;
              thus g is unfolded
              proof
                let n be Nat;
                assume
A722:           1<=n & n+2 <= len g;
                then
A723:           n+1+1<=len g;
A724:           1<= n+1 by NAT_1:11;
A725:           n<=n+1 & n+1<=n+1+1 by NAT_1:11;
                then
A726:           n+1 <= len g by A722,XXREAL_0:2;
A727:           n+(1+1)=n+1+1;
A728:           len g=len g1+len g2 by FINSEQ_1:35;
                n+2-len g1 = n-len g1 +2;
                then
A729:           n-len g1 + 2 <= len g2 by A722,A728,XREAL_1:22;
                per cases;
                suppose
A730:             n+2 <= len g1;

then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
                  by A722,GOBOARD2:4;
                  then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
                  g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
                  hence thesis by A30,A722,A730,TOPREAL1:def 8;
                end;
                suppose len g1 < n+2;
                  then len g1+1<=n+2 by NAT_1:13;
                  then
A731:             len g1<=n+2-1 by XREAL_1:21;
                  now per cases;
                    suppose
A732:                 len g1=n+1;
                      now
                        assume
A733:                   k=1;
                        1<len g1 by A722,A732,NAT_1:13;
                        then 1+1<=len g1 by NAT_1:13;
                        hence contradiction by A37,A733,TOPREAL1:29;
                      end;
                      then
A734:                 1<k & LSeg(g1,n) c= L~f1
                      by A14,A33,REAL_1:def 5,TOPREAL3:26;
                      then
A735:                 L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                      1<=n+1 by NAT_1:11;
                      then
A736:                 n in dom g1 & n+1 in dom g1
                      by A722,A725,A732,FINSEQ_3:27;
                      then
A737:                 LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
A738:                 g/.(n+1)=f1/.len f1 by A35,A732,A736,FINSEQ_4:83
                        .= ppi by A15,A16,A18,A47,FINSEQ_4:86;

n+2 = 1+len g1 & 1 <= len g2 by A722,A727,A728,A732,XREAL_1:8;
                      then
A739:                 g/.(n+2)=g2/.1 by GOBOARD2:5;
                      1<=len g-len g1 by A723,A732,XREAL_1:21;
                      then 1 in dom g2 by A728,FINSEQ_3:27;
                      then
A740:                 g2/.1 in rng g2 by PARTFUN2:4;
                      then g2/.1 in lk by A690,A706;
                      then consider u1 be Point of TOP-REAL 2 such that
A741:                 g2/.1=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1;
                      ppi in LSeg(ppi,pj) by TOPREAL1:6;
                      then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1
                      )

by A691,A706,A722,A724,A727,A738,A739,A740,A741,TOPREAL1:12,def 5;
                      then
A742:                 LSeg(g,n) /\ LSeg(g,n+1) c= {g /.(n+1)}
                      by A47,A734,A735,A737,A738,XBOOLE_1:27;
                      g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                      by A722,A724,A726,A727,TOPREAL1:27;

then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;

then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
                      hence thesis by A742,XBOOLE_0:def 10;
                    end;
                    suppose len g1<>n+1;
                      then len g1<n+1 by A731,REAL_1:def 5;
                      then
A743:                 len g1<=n by NAT_1:13;

then reconsider n1=n-len g1 as Element of NAT by INT_1:18;
                      now per cases;
                        suppose
A744:                     len g1=n;
                          1<=len g1 by A14,A16,A36,XXREAL_0:2;
                          then len g1 in dom g1 by FINSEQ_3:27;
                          then
A745:                     g/.n=f1/.len f1 by A35,A744,FINSEQ_4:83
                            .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A746:                     2 <= len g2 by A722,A728,A744,XREAL_1:8;
                          then 1 <= len g2 by XXREAL_0:2;
                          then
A747:                     g/.(n+1)=g2/.1 by A744,GOBOARD2:5;
A748:                     g/.(n+2)=g2/.2 by A744,A746,GOBOARD2:5;
                          1<=len g2 by A746,XXREAL_0:2;
                          then
A749:                     1 in dom g2 & 2 in dom g2 by A746,FINSEQ_3:27;
                          then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                          then
A750:                     g2/.1 in lk & g2/.2 in lk by A690,A706;
                          then consider u1 be Point of TOP-REAL 2 such that
A751:                     g2/.1=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1;
                          consider u2 be Point of TOP-REAL 2 such that
A752:                     g2

/.2=u2 & u2`2=ppi`2 & ppi`1<=u2`1 & u2`1<=pj`1 by A750;
A753:                     u1`1<u2`1 by A702,A749,A751,A752;
                          then
A754:                     u1`1<=u2`1 & ppi`1<u2 `1 & u2=|[u2`1,u2`2]|
                          by A751,EUCLID:57,XXREAL_0:2;
                          set lg = {w where w is Point of TOP-REAL 2 :
                          w`2=ppi`2 & ppi`1<=w`1 & w`1<=u2`1};
A755:                     u1 in lg by A751,A753;
A756:                     LSeg(g,n)=LSeg(ppi,u1) & LSeg(g,n+1)=LSeg(u1,u2)

by A722,A724,A726,A727,A745,A747,A748,A751,A752,TOPREAL1:def 5;

u1 in LSeg(ppi,u2) by A689,A752,A754,A755,TOPREAL3:16;
                          hence thesis by A747,A751,A756,TOPREAL1:14;
                        end;
                        suppose len g1<>n;
                          then
A757:                     len g1<n by A743,REAL_1:def 5;
                          n1 + len g1 = n;
                          then
A758:                     LSeg(g,n)=LSeg(g2,n1) by A726,A757,GOBOARD2:10;
A759:                     len g1<n+1 by A725,A757,XXREAL_0:2;
A760:                     len g1+1<=n by A757,NAT_1:13;
A761:                     n+1 = n1+1+len g1;
A762:                     1<=n1+1 by NAT_1:11;
                          n1+1<=len g2 by A726,A728,A761,XREAL_1:8;

then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                          by A723,A759,A760,A761,A762,GOBOARD2:5,10,XREAL_1:21;
                          hence thesis by A710,A729,A758;
                        end;
                      end;
                      hence thesis;
                    end;
                  end;
                  hence thesis;
                end;
              end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
              m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
              proof
                let n,m;
                assume that
A763:           m>n+1 and
A764:           n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
A765:           LSeg(g2,n) /\ LSeg(g2,m) <> {};
A766:           1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
                len g2 by A764,FINSEQ_3:27;
                reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
                as Point of TOP-REAL 2;
                set lp = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                p1`1<=w`1 & w`1<=p2`1},
                lq = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                q1`1<=w`1 & w`1<=q2`1};
                m<m+1 & n<n+1 by NAT_1:13;
                then
A767:           p1`1<p2`1 & q1`1<q2`1 & p1`2=ppi`2 & p2`2= ppi`2 & q1`2=
                ppi`2 & q2`2=ppi`2 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
                p2=|[p2`1,p2`2]| &
                q2=|[q2`1,q2`2]| by A697,A702,A764,EUCLID:57;
A768:           LSeg(g2,n) = LSeg(p1,p2) by A766,TOPREAL1:def 5
                  .=lp by A767,TOPREAL3:16;
A769:           LSeg(g2,m) = LSeg(q1,q2) by A766,TOPREAL1:def 5
                  .=lq by A767,TOPREAL3:16;
                consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
A770:           x in LSeg(g2,n) & x in LSeg(g2,m) by A765,XBOOLE_0:def 3;
                then
A771:           ex tn be Point of TOP-REAL 2 st
                tn=x & tn`2=ppi`2 & p1`1<=tn`1 & tn`1<=p2`1 by A768;
A772:           ex tm be Point of TOP-REAL 2 st
                tm=x & tm`2=ppi`2 & q1`1<=tm`1 & tm`1<=q2`1 by A769,A770;
                p2`1<q1`1 by A702,A763,A764;
                hence contradiction by A771,A772,XXREAL_0:2;
              end;
              then
A773:         g2 is s.n.c. by GOBOARD2:6;
A774:         L~g2 c= LSeg(f,k)
              proof
                set ls={LSeg(g2,m): 1<=m & m+1 <= len g2};
                let x;
                assume x in L~g2;
                then consider X be set such that
A775:           x in X & X in ls by TARSKI:def 4;
                consider m such that
A776:           X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A775;
                m in dom g2 & m+1 in dom g2 by A776,GOBOARD2:3;
                then
A777:           g2/.m in rng g2 & g2/.(m+1) in rng g2 by PARTFUN2:4;
                reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
A778:           LSeg(q1,q2) c= LSeg(ppi,pj) by A691,A706,A777,TOPREAL1:12;
                LSeg(g2,m)=LSeg(q1,q2) by A776,TOPREAL1:def 5;
                hence thesis by A691,A775,A776,A778;
              end;
A779:         not f/.k in L~g2
              proof
                set ls={LSeg(g2,m): 1<=m & m+1 <= len g2};
                assume f/.k in L~g2;
                then consider X be set such that
A780:           f/.k in X & X in ls by TARSKI:def 4;
                consider m such that
A781:           X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A780;
A782:           m in dom g2 & m+1 in dom g2 & m<m+1
                by A781,GOBOARD2:3,NAT_1:13;
                reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
                set lq={w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                q1`1<=w`1 & w`1<=q2`1};
A783:           q1`2=ppi`2 & q2`2=ppi`2 & q1`1<q2`1 & q1=|[q1`1,q1`2]|
                & q2=|[q2`1,q2`2]| by A697,A702,A782,EUCLID:57;
                LSeg(g2,m)=LSeg(q1,q2) by A781,TOPREAL1:def 5
                  .=lq by A783,TOPREAL3:16;

then ex p st p=f/.k & p`2=ppi`2 & q1`1<=p`1 & p`1<=q2`1 by A780,A781;
                hence contradiction by A47,A697,A782;
              end;
A784:         L~g1 /\ L~g2 = {}
              proof per cases;
                suppose k=1;
                  hence thesis by A37;
                end;
                suppose k<>1;
                  then 1<k by A14,REAL_1:def 5;
                  then L~g1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,A33,GOBOARD2:9;
                  then
A785:             L~g1 /\ L~g2 c= {f/.k} by A774,XBOOLE_1:26;
                  now consider x being Element of L~g1 /\ L~g2;
                    assume L~g1 /\ L~g2 <> {};

then x in {f/.k} & x in L~g2 by A785,TARSKI:def 3,XBOOLE_0:def 3;
                    hence contradiction by A779,TARSKI:def 1;
                  end;
                  hence thesis;
                end;
              end;
              for n,m st m>n+1 & n in dom g & n+1 in dom g &
              m in dom g & m+1 in dom g holds LSeg(g,n) misses LSeg(g,m)
              proof
                let n,m;
                assume that
A786:           m>n+1 and
A787:           n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
A788:           1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
                m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
                by A787,FINSEQ_1:35,FINSEQ_3:27,NAT_1:11;
                set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
                l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
                i1+1<=j1 by A676,NAT_1:13;
                then
A789:           1<=l by XREAL_1:21;
                then
A790:           1 in dom g2 by A677,FINSEQ_3:27;
                reconsider qq=g2/.1 as Point of TOP-REAL 2;
                set ql={z where z is Point of TOP-REAL 2: z`2=ppi`2 &
                ppi`1<=z`1 & z`1<=qq`1};
A791:           1<=len g1 by A14,A16,A36,XXREAL_0:2;

then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
                then
A792:           g/.len g1=g1/.len g1 by FINSEQ_4:83
                  .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
A793:           len g1<len g1 +1 & len g1+1<=len g
                by A677,A788,A789,NAT_1:13,XREAL_1:9;
A794:           g/.(len g1+1)=qq by A677,A789,GOBOARD2:5;
A795:           qq`2=ppi`2 & qq`1<=pj`1 & qq`1>ppi`1 & qq=|[qq`1,qq`2]|
                by A697,A790,EUCLID:57;
A796:           LSeg(g,len g1)=LSeg(ppi,qq)
                by A791,A792,A793,A794,TOPREAL1:def 5
                  .= ql by A689,A795,TOPREAL3:16;
A797:           n+1<=m+1 by A786,A788,XXREAL_0:2;
                now per cases;
                  suppose
A798:               m+1<=len g1;
                    then
A799:               m<=len g1 & n+1<=len g1 by A788,A797,XXREAL_0:2;
                    then n<=len g1 by A788,XXREAL_0:2;

then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
                    by A788,A798,A799,FINSEQ_3:27;

then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m) by TOPREAL3:25;
                    hence thesis by A31,A786,TOPREAL1:def 9;
                  end;
                  suppose len g1<m+1;
                    then
A800:               len g1<=m by NAT_1:13;
                    then reconsider m1=m-len g1 as Element of NAT by INT_1:18;
                    now per cases;
                      suppose
A801:                   m=len g1;
                        now
                          assume
A802:                     k=1;
                          1<len g1 by A786,A788,A801,XXREAL_0:2;
                          then 1+1<=len g1 by NAT_1:13;
                          hence contradiction by A37,A802,TOPREAL1:29;
                        end;
                        then 1<k by A14,REAL_1:def 5;
                        then
A803:                   L~f1 /\ LSeg(f,k) ={f/.k} by A5,A8,A9,GOBOARD2:9;
                        n<=len g1 by A786,A788,A801,XXREAL_0:2;
                        then
A804:                   n in dom g1 & n+1 in dom g1
                        by A786,A788,A801,FINSEQ_3:27;
                        then
A805:                   LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                        then LSeg(g,n) in l1 by A786,A788,A801;
                        then
A806:                   LSeg(g,n) c= L~f1 by A33,ZFMISC_1:92;
                        LSeg(g,m) c= LSeg(f,k)
                        proof
                          let x;
                          assume x in LSeg(g,m);
                          then consider px be Point of TOP-REAL 2 such that
A807:                     px

=x & px`2=ppi`2 & ppi`1<=px`1 & px`1<=qq`1 by A796,A801;
                          pj`1>=px`1 by A795,A807,XXREAL_0:2;
                          hence thesis by A690,A807;
                        end;
                        then
A808:                   LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                        by A803,A806,XBOOLE_1:27;
                        now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                          assume LSeg(g,n)/\ LSeg(g,m)<>{};
                          then
A809:                     x in LSeg(g,n) & x in {f/.k}
                          by A808,TARSKI:def 3,XBOOLE_0:def 3;
                          then
A810:                     x=f/.k by TARSKI:def 1;
                          f/.k=g1/.len g1 by A15,A16,A18,A35,FINSEQ_4:86;

hence contradiction by A29,A30,A31,A786,A801,A804,A805,A809,A810,GOBOARD2:7;
                        end;
                        hence thesis by XBOOLE_0:def 7;
                      end;
                      suppose m<>len g1;
                        then
A811:                   len g1<m & m+1=m1+1+len g1 by A800,REAL_1:def 5;
                        m = m1+len g1;
                        then
A812:                   LSeg(g,m)=LSeg(g2,m1) by A788,A811,GOBOARD2:10;
                        m1+1<=len g2 & len g1+1<=
                        m by A788,A811,NAT_1:13,XREAL_1:8;
                        then
A813:                   1<=m1 & m1+1 <= len g2 by XREAL_1:21;
                        then LSeg(g,m) in l2 by A812;
                        then
A814:                   LSeg(g,m) c= L~g2 by ZFMISC_1:92;
                        now per cases;
                          suppose
A815:                       n+1<=len g1;
                            then n<=len g1 by A788,XXREAL_0:2;

then n in dom g1 & n+1 in dom g1 by A788,A815,FINSEQ_3:27;
                            then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                            then LSeg(g,n) in l1 by A788,A815;
                            then LSeg(g,n) c= L~g1 by ZFMISC_1:92;

then LSeg(g,n) /\ LSeg(g,m) = {} by A784,A814,XBOOLE_1:3,27;
                            hence thesis by XBOOLE_0:def 7;
                          end;
                          suppose len g1<n+1;
                            then
A816:                       len g1<=n by NAT_1:13;

then reconsider n1=n-len g1 as Element of NAT by INT_1:18;
A817:                       n - len g1 + 1 = n + 1 - len g1;
A818:                       n = n1 + len g1;
                            now per cases;
                              suppose
A819:                           len g1=n;
                                now consider x being
                                  Element of LSeg(g,n) /\ LSeg(g,m);
                                  assume LSeg(g,n) /\ LSeg(g,m)<>{};
                                  then
A820:                             x in LSeg(g,n) & x in LSeg(g,m)
                                  by XBOOLE_0:def 3;
                                  then
A821:                             ex qx be Point of TOP-REAL 2 st
                                  qx=x & qx`2=ppi`2 & ppi`1<=qx`1 & qx`1<=qq`1
                                  by A796,A819;
A822:                             m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                                  by A813,GOBOARD2:3,NAT_1:13;
                                  reconsider q1=g2/.m1, q2=g2/.(m1+1)
                                  as Point of TOP-REAL 2;

set q1l={v where v is Point of TOP-REAL 2: v`2=ppi`2 & q1`1<=v`1 & v`1<=q2`1};
A823:                             q1

`2=ppi`2 & q2`2=ppi`2 & q1`1<q2`1 & q1=|[q1`1,q1 `2]|&
                                  q2=|[q2`1,q2`2]| by A697,A702,A822,EUCLID:57;
                                  m1 > n1 + 1 & n1 + 1 >=
                                  1 by A786,A817,NAT_1:11,XREAL_1:11;
                                  then
A824:                             m1 > 1 by XXREAL_0:2;

LSeg(g2,m1)=LSeg(q1,q2) by A813,TOPREAL1:def 5
                                    .=q1l by A823,TOPREAL3:16;
                                  then
A825:                             ex qy be Point of TOP-REAL 2 st
                                  qy=x & qy`2=ppi`2 & q1`1<=qy`1 & qy`1<=q2`1
                                  by A812,A820;
                                  qq`1<q1`1 by A702,A790,A822,A824;
                                  hence contradiction by A821,A825,XXREAL_0:2;
                                end;
                                hence thesis by XBOOLE_0:def 7;
                              end;
                              suppose n<>len g1;
                                then len g1<n by A816,REAL_1:def 5;
                                then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                                by A786,A788,A817,A818,GOBOARD2:10,XREAL_1:11;
                                hence thesis by A773,A812,TOPREAL1:def 9;
                              end;
                            end;
                            hence thesis;
                          end;
                        end;
                        hence thesis;
                      end;
                    end;
                    hence thesis;
                  end;
                end;
                hence thesis;
              end;
              hence g is s.n.c. by GOBOARD2:6;
A826:         g2 is special
              proof
                let n be Nat;
                set p = g2/.n, q = g2/.(n+1);
                assume 1<=n & n+1 <= len g2;
                then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
                then p`2=ppi`2 & q`2=ppi`2 by A697;
                hence p`1=q`1 or p`2=q`2;
              end;
              now
                set p=g1/.len g1, q=g2/.1;
                i1+1<=j1 by A676,NAT_1:13;
                then 1<=l by XREAL_1:21;
                then 1 in dom g2 by A677,FINSEQ_3:27;
                then q`2=ppi`2 by A697;
                hence p`1=q`1 or p`2=q`2 by A15,A16,A18,A35,A47,FINSEQ_4:86;
              end;
              hence g is special by A32,A826,GOBOARD2:13;
              thus L~g=L~f
              proof
                set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
                lf = {LSeg(f,j): 1<=j & j+1 <= len f};
A827:           len g = len g1 + len g2 by FINSEQ_1:35;
A828:           now
                  let j;
                  assume
A829:             len g1<=j & j<=len g;
                  then reconsider w = j-len g1 as Element of NAT by INT_1:18;
                  let p such that
A830:             p=g/.j;
                  now per cases;
                    suppose
A831:                 j=len g1;
                      1<=len g1 by A14,A16,A36,XXREAL_0:2;
                      then len g1 in dom g1 by FINSEQ_3:27;
                      then
A832:                 g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
                        .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
                      hence p`2=G*(i1,i2)`2 by A830,A831;
                      thus G*(i1,i2)`1<=p`1 & p`1<=G*

(j1,i2)`1 by A51,A56,A67,A70,A676,A688,A830,A831,A832,GOBOARD1:def 1;

thus p in rng c1 by A51,A70,A687,A830,A831,A832,PARTFUN2:4;
                    end;
                    suppose j<>len g1;
                      then
A833:                 len g1 < j by A829,REAL_1:def 5;
A834:                 j = w + len g1;
                      len g1 + 1 <= j by A833,NAT_1:13;
                      then
A835:                 1<=w & w<=len g2 by A827,A829,XREAL_1:21,22;
                      then
A836:                 g/.j=g2/.w by A834,GOBOARD2:5;
                      w in dom g2 by A835,FINSEQ_3:27;
                      hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=
                      pj`1 & p in rng c1 by A697,A830,A836;
                    end;
                  end;
                  hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=pj`1 & p in rng c1;
                end;
                thus L~g c= L~f
                proof
                  let x;
                  assume x in L~g;
                  then consider X be set such that
A837:             x in X & X in lg by TARSKI:def 4;
                  consider i such that
A838:             X=LSeg(g,i) & 1<=i & i+1 <= len g by A837;
                  now per cases;
                    suppose
A839:                 i+1 <= len g1;
                      then i<=i+1 & i+1<=len g1 by NAT_1:11;

then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A838,XXREAL_0:2;
                      then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
                      then X=LSeg(g1,i) by A838,TOPREAL3:25;

then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A838,A839;

then x in L~f1 & L~f1 c= L~f by A33,A837,TARSKI:def 4,TOPREAL3:27;
                      hence thesis;
                    end;
                    suppose
A840:                 i+1 > len g1;
                      then
A841:                 len g1<=i & i<=i+1 & i+1<=len g by A838,NAT_1:13;
A842:                 1<=i+1 & len g1<=i+1 & i<=len g by A838,A840,NAT_1:13;
                      reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
A843:                 q1`2=ppi`2 & ppi`1<=q1`1 & q1`1<=pj`1 & q2`2=ppi`2 &
                      ppi`1<= q2`1 & q2`1<=pj`1 by A828,A841,A842;
                      then
A844:                 q1=|[q1`1,q1`2]| & q2=|[q2`1, q1`2]| by EUCLID:57;
A845:                 LSeg(g,i)=LSeg(q2,q1) by A838,TOPREAL1:def 5;
                      now per cases by XXREAL_0:1;
                        suppose q1`1>q2`1;

then LSeg(g,i)={p2: p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1}
                          by A844,A845,TOPREAL3:16;
                          then consider p2 such that
A846:                     p2

=x & p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1 by A837,A838;
                          ppi`1<=p2`1 & p2`1<=pj`1 by A843,A846,XXREAL_0:2;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A690,A843,A846;
                          hence thesis by TARSKI:def 4;
                        end;
                        suppose q1`1=q2`1;
                          then LSeg(g,i)={q1} by A844,A845,TOPREAL1:7;
                          then x=q1 by A837,A838,TARSKI:def 1;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A690,A843;
                          hence thesis by TARSKI:def 4;
                        end;
                        suppose q1`1<q2`1;

then LSeg(g,i)= {p1: p1`2=q1`2 & q1`1<=p1`1 & p1`1<=q2`1}
                          by A844,A845,TOPREAL3:16;
                          then consider p2 such that
A847:                     p2

=x & p2`2=q1`2 & q1`1<=p2`1 & p2`1<=q2`1 by A837,A838;
                          ppi`1<=p2`1 & p2`1<=pj`1 by A843,A847,XXREAL_0:2;

then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A690,A843,A847;
                          hence thesis by TARSKI:def 4;
                        end;
                      end;
                      hence thesis;
                    end;
                  end;
                  hence thesis;
                end;
                let x;
                assume x in L~f;
                then
A848:           x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
                now per cases by A848,XBOOLE_0:def 2;
                  suppose x in L~f1;
                    then x in L~g1 & L~g1 c= L~g by A33,GOBOARD2:11;
                    hence x in L~g;
                  end;
                  suppose x in LSeg(f,k);
                    then consider p1 such that
A849:               p1=x & p1`2=ppi`2 & ppi`1<=p1`1 & p1`1<=pj`1 by A690;
                    defpred P2[Nat] means
                    len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`1<=p1`1;
A850:               now
                      reconsider n=len g1 as Nat;
                      take n;
                      thus P2[n]
                      proof
                        thus len g1<=n & n<=len g by A827,REAL_2:173;
                        let q such that
A851:                   q=g/.n;
                        1<=len g1 by A14,A16,A36,XXREAL_0:2;
                        then len g1 in dom g1 by FINSEQ_3:27;
                        then q=f1/.len f1 by A35,A851,FINSEQ_4:83
                          .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
                        hence q`1<=p1`1 by A849;
                      end;
                    end;
A852:               for n be Nat holds P2[n] implies n<=len g;
                    consider ma be Nat such that
A853:               P2[ma] & for n be Nat st P2[n] holds n<=ma from NAT_1:sch 6
                    (A852,A850);
                    reconsider ma as Element of NAT by ORDINAL1:def 13;
                    now per cases;
                      suppose
A854:                   ma=len g;
                        i1+1<=j1 by A676,NAT_1:13;
                        then
A855:                   1<=l by XREAL_1:21;
                        then
A856:                   l in dom g2 & i1+l=j1 by A677,FINSEQ_3:27;
                        then
A857:                   g/.ma=g2/.l by A677,A827,A854,FINSEQ_4:84
                          .= pj by A677,A856;
                        then pj`1<=p1`1 by A853;
                        then
A858:                   p1`1=pj`1 by A849,XXREAL_0:1;
A859:                   ma-1<=len g & len g1+1<=ma
                        by A677,A827,A854,A855,XREAL_1:9,45;
                        then
A860:                   len g1<=ma-1 & 0<=len g1 by XREAL_1:21;
                        then 0+1<=ma by XREAL_1:21;
                        then reconsider m1=ma-1 as Element of NAT by INT_1:18;
                        1<=len g1 by A14,A16,A36,XXREAL_0:2;
                        then
A861:                   1<=m1 by A860,XXREAL_0:2;
                        reconsider q=g/.m1 as Point of TOP-REAL 2;
A862:                   q`2=ppi`2 & q`1<=pj`1 & q=|[q`1,q`2]| & m1+1=ma
                        by A828,A859,A860,EUCLID:57;
                        then
A863:                   LSeg(g,m1)=LSeg(q,pj)
                        by A854,A857,A861,TOPREAL1:def 5;

set lq={e where e is Point of TOP-REAL 2: e`2=ppi`2 & q`1<=e`1 & e`1<=pj`1};
                        LSeg(g,m1)=lq by A689,A862,A863,TOPREAL3:16;
                        then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
                        by A849,A854,A858,A861,A862;
                        hence x in L~g by A849,TARSKI:def 4;
                      end;
                      suppose ma<>len g;
                        then ma<len g by A853,REAL_1:def 5;
                        then
A864:                   ma+1<=len g & k<=ma & ma<= ma+1
                        by A16,A36,A853,NAT_1:13,XXREAL_0:2;
A865:                   1<=ma & len g1<=ma+1 by A14,A16,A36,A853,NAT_1:13;

reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
A866:                   qa`1<=p1`1 by A853;
A867:                   now
                          assume qa1`1<=p1`1;
                          then for q holds q=g/.(ma+1) implies q`1<=p1`1;
                          then ma+1<=ma by A853,A864,A865;
                          hence contradiction by REAL_2:174;
                        end;
                        then
A868:                   qa`1<qa1`1 & qa`1<=p1`1 & p1`1<=qa1`1 &

qa`2=ppi`2 & qa1 `2 = ppi`2 by A828,A853,A864,A865,A866,XXREAL_0:2;
                        set lma = {p2: p2`2=ppi`2 & qa`1<=p2`1 & p2`1<=qa1`1};
A869:                   qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                        LSeg(g,ma)=LSeg(qa,qa1) by A864,A865,TOPREAL1:def 5
                          .= lma by A868,A869,TOPREAL3:16;

then x in LSeg(g,ma) & LSeg(g,ma) in lg by A849,A864,A865,A866,A867;
                        hence x in L~g by TARSKI:def 4;
                      end;
                    end;
                    hence x in L~g;
                  end;
                end;
                hence x in L~g;
              end;
              1<=len g1 by A14,A16,A36,XXREAL_0:2;
              then 1 in dom g1 by FINSEQ_3:27;
              hence g/.1=f1/.1 by A34,FINSEQ_4:83
                .=f/.1 by A15,A19,FINSEQ_4:86;
              i1+1<=j1 by A676,NAT_1:13;
              then
A870:         1<=l by XREAL_1:21;
              then
A871:         l in dom g2 & len g=len g1 + l by A677,FINSEQ_1:35,FINSEQ_3:27;
              hence g/.len g=g2/.l by FINSEQ_4:84
                .=G*(i1+l,i2) by A677,A871
                .=f/.len f by A5,A49,A473;
              thus len f<=len g by A5,A16,A36,A870,A871,XREAL_1:9;
            end;
          end;
          hence thesis;
        end;
      end;
      hence thesis;
    end;
  end;
  for k holds P[k] from NAT_1:sch 1(A1,A3);
  hence thesis;
end;

theorem
  (for n st n in dom f ex i,j st [i,j] in Indices G &
  f/.n=G*(i,j)) & f is_S-Seq implies
  ex g st g is_sequence_on G & g is_S-Seq & L~f = L~g & f/.1 = g/.1 &
  f/.len f = g/.len g & len f<=len g
proof
  assume that
A1: for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j) and
A2: f is_S-Seq;
A3: f is one-to-one & 2<=len f & f is unfolded s.n.c. special
  by A2,TOPREAL1:def 10;
  then consider g such that
A4: g is_sequence_on G and
A5: g is one-to-one unfolded s.n.c. special &
  L~f = L~g & f/.1 = g/.1 & f/.len f = g/.len g & len f <= len g by A1,Th1;
  take g;
  thus g is_sequence_on G by A4;
  2<=len g by A3,A5,XXREAL_0:2;
  hence g is_S-Seq by A5,TOPREAL1:def 10;
  thus thesis by A5;
end;

