:: Properties of Go-Board - Part III
::  by Jaros{\l}aw Kotowicz and Yatsuka Nakamura
::
:: Received August 24, 1992
:: Copyright (c) 1992 Association of Mizar Users

environ

 vocabularies PRE_TOPC, EUCLID, FINSEQ_1, GOBOARD1, RELAT_1, TOPREAL1,
      FINSEQ_4, BOOLE, MATRIX_1, FUNCT_1, ABSVALUE, ARYTM_1, MCART_1, TREES_1,
      INCSP_1, SEQM_3, ORDINAL2, TARSKI;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, XCMPLX_0, XREAL_0, NAT_1,
      COMPLEX1, RELAT_1, FUNCT_1, FINSEQ_1, PRE_TOPC, FINSEQ_4,
      STRUCT_0, MATRIX_1, EUCLID, TOPREAL1, GOBOARD1;
 constructors SEQM_3, NAT_1, TOPREAL1, GOBOARD1, FINSEQ_4, MEMBERED, REAL_1,
      COMPLEX1;
 registrations RELSET_1, STRUCT_0, EUCLID, INT_1, XREAL_0, MEMBERED, ORDINAL2;
 requirements REAL, NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions TARSKI, TOPREAL1, XBOOLE_0;
 theorems TARSKI, REAL_1, NAT_1, ZFMISC_1, FUNCT_1, FINSEQ_1, ABSVALUE,
      FINSEQ_3, REAL_2, MATRIX_1, EUCLID, TOPREAL1, TOPREAL3, GOBOARD1,
      GOBOARD2, FINSEQ_4, PARTFUN2, INT_1, XBOOLE_0, XBOOLE_1, XCMPLX_1,
      XREAL_1, COMPLEX1;
 schemes NAT_1, GOBOARD1, GOBOARD2;

begin

 reserve p,p1,p2,q for Point of TOP-REAL 2,
         f,g,g1,g2 for FinSequence of TOP-REAL 2,
         n,m,i,j,k for Nat,
         G for Go-board,
         x for set;

Lm1:
now let f,k;
    assume A1: len f=k+1;
    assume k<>0;
    then A2: 0<k & k<=k+1 by NAT_1:29;
    then 0+1<=k & k<=len f & k+1 <= len f by A1,NAT_1:38;
then A3: k in dom f by FINSEQ_3:27;
A4: len (f|k)=k by A1,A2,FINSEQ_1:80;
A5: dom(f|k)=Seg len(f|k) by FINSEQ_1:def 3;
   assume A6:f is unfolded;
  thus f|k is unfolded
   proof set f1 = f|k;
   let n; assume
A7: 1<=n & n+2 <= len f1;
    then n in dom f1 & n+1 in dom f1 & n+2 in dom f1 & n+1+1=n+(1+1)
       by GOBOARD2:4;
then A8: LSeg(f1,n)=LSeg(f,n) & LSeg(f1,n+1)=LSeg(f,n+1) &
     f1/.(n+1)=f/.(n+1) by A3,A4,A5,FINSEQ_4:86,TOPREAL3:24;
     len f1 <= len f by A1,A2,FINSEQ_1:80;
  then n+2 <= len f by A7,XREAL_1:2;
  hence LSeg(f1,n) /\ LSeg(f1,n+1)={f1/.(n+1)} by A6,A7,A8,TOPREAL1:def 8;
 end;
end;

theorem Th1:
(for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
 f is one-to-one unfolded s.n.c. special
implies
ex g st g is_sequence_on G & g is one-to-one unfolded s.n.c. special &
 L~f = L~g & f/.1 = g/.1 & f/.len f = g/.len g & len f <= len g
proof
defpred P[Nat] means for f st len f = $1 &
 (for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
  f is one-to-one unfolded s.n.c. special
 ex g st g is_sequence_on G &
  g is one-to-one unfolded s.n.c. special &
  L~f=L~g & f/.1=g/.1 & f/.len f=g/.len g & len f<=len g;
A1: P[0]
 proof let f such that
  A2: len f=0 &
  (for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
  f is one-to-one unfolded s.n.c. special;
  take g=f;
     f= {} by A2,FINSEQ_1:25;
   then for n holds n in dom g & n+1 in dom g implies (
    for m,k,i,j st [m,k] in Indices G & [i,j] in Indices G & g/.n=G*(m,k) &
       g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1) by FINSEQ_1:26;
  hence thesis by A2,GOBOARD1:def 11;
 end;
A3: for k st P[k] holds P[k+1]
 proof let k such that
  A4: P[k];
  let f such that
A5: len f=k+1 and
A6: for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j) and
A7: f is one-to-one and
A8: f is unfolded and
A9: f is s.n.c. and
A10: f is special;
   per cases;
   suppose k=0;
    then A11: dom f = {1} by A5,FINSEQ_1:4,def 3;
    take g=f;
        now let n; assume
         n in dom g & n+1 in dom g;
      then n=1 & n+1=1 by A11,TARSKI:def 1;
      hence for i1,i2,j1,j2 be Nat st [i1,i2] in Indices G &
      [j1,j2] in Indices G &
       g/.n=G*(i1,i2) & g/.(n+1)=G*(j1,j2) holds abs(i1-j1)+abs(i2-j2)=1;
     end;
    hence g is_sequence_on G by A6,GOBOARD1:def 11;
    thus g is one-to-one unfolded s.n.c. special &
     L~f=L~g & f/.1=g/.1 & f/.len f=g/.len g & len f<=len g by A7,A8,A9,A10;
   end;
   suppose A12: k<>0;
    then A13: 0<k & k<=k+1 by NAT_1:29;
    then A14: 0+1<=k & k<=len f & k+1 <= len f by A5,NAT_1:38;
then A15: k in dom f by FINSEQ_3:27;
A16: len (f|k)=k by A5,A13,FINSEQ_1:80;
A17: dom(f|k)=Seg len(f|k) by FINSEQ_1:def 3;
A18: k in Seg k by A14,FINSEQ_1:3;
A19: 1 in Seg k by A14,FINSEQ_1:3;
    set f1=f|k;
    A20: now let n; assume A21: n in dom f1;
       then n in dom f by A15,A16,A17,FINSEQ_4:86;
      then consider i,j such that
      A22: [i,j] in Indices G & f/.n=G*(i,j) by A6;
      take i,j;
      thus [i,j] in Indices G & f1/.n=G*(i,j)
       by A15,A16,A17,A21,A22,FINSEQ_4:86;
     end;
       f1 = f|Seg k by FINSEQ_1:def 15;
    then A23: f1 is one-to-one by A7,FUNCT_1:84;
    A24: f1 is unfolded by A5,A8,A12,Lm1;
    A25: f1 is s.n.c. by A9,GOBOARD2:12;
       f1 is special
     proof let n; assume
      A26: 1<=n & n+1 <= len f1;
      then n in dom f1 & n+1 in dom f1 by GOBOARD2:3;
      then A27: f1/.n=f/.n & f1/.(n+1)=f/.(n+1) by A15,A16,A17,FINSEQ_4:86;
         len f1 <=len f by A5,A13,FINSEQ_1:80;
      then n+1 <= len f by A26,XREAL_1:2;
      hence (f1/.n)`1=(f1/.(n+1))`1 or (f1/.n)`2=(f1/.(n+1))`2
       by A10,A26,A27,TOPREAL1:def 7;
     end;
    then consider g1 such that
A28: g1 is_sequence_on G and
A29: g1 is one-to-one and
A30: g1 is unfolded and
A31: g1 is s.n.c. and
A32: g1 is special and
A33: L~g1=L~f1 and
A34: g1/.1=f1/.1 and
A35: g1/.len g1=f1/.len f1 and
A36: len f1<=len g1 by A4,A16,A20,A23,A24,A25;
    A37: k=1 implies L~g1={} & rng g1 = {f/.k}
     proof assume A38: k=1;
      hence L~g1={} by A16,A33,TOPREAL1:28;
then A39:  (len g1=1 or len g1=0) & 1<=len g1
           by A5,A36,A38,FINSEQ_1:80,TOPREAL1:28;
then A40:  len g1 in dom g1 by FINSEQ_3:27;
      A41: g1/.len g1=f/.k by A15,A16,A18,A35,FINSEQ_4:86;
      then f/.k in rng g1 by A40,PARTFUN2:4;
      then A42: {f/.k} c= rng g1 by ZFMISC_1:37;
         rng g1 c= {f/.k}
       proof let x; assume x in rng g1; then consider n such that
        A43: n in dom g1 & g1/.n=x by PARTFUN2:4;
           n in Seg len g1 by A43,FINSEQ_1:def 3;
        then n=len g1 by A39,FINSEQ_1:4,TARSKI:def 1;
        hence x in {f/.k} by A41,A43,TARSKI:def 1;
       end;
      hence rng g1={f/.k} by A42,XBOOLE_0:def 10;
     end;
    A44: 1<k implies rng g1 c= L~f1
     proof assume 1<k; then 1+1<=k by NAT_1:38;
      then A45: 2<=len g1 by A16,A36,XREAL_1:2;
      let x; assume x in rng g1;
      then consider n such that
      A46: n in dom g1 & g1/.n=x by PARTFUN2:4;
      thus x in L~f1 by A33,A45,A46,GOBOARD1:16;
     end;
    consider i1,i2 be Nat such that
    A47: [i1,i2] in Indices G & f/.k=G*(i1,i2) by A6,A15;
       1<=len f by A14,XREAL_1:2;
    then A48: k+1 in dom f by A5,FINSEQ_3:27;
    then consider j1,j2 be Nat such that
    A49: [j1,j2] in Indices G & f/.(k+1)=G*(j1,j2) by A6;
    A50: Indices G = [:dom G,Seg width G:] by MATRIX_1:def 5;
    then A51: i1 in dom G & i2 in Seg width G &
        j1 in dom G & j2 in Seg width G by A47,A49,ZFMISC_1:106;
    A52:dom G = Seg len G by FINSEQ_1:def 3;
    A53: (for n st n in dom g1 ex m,k st [m,k] in Indices G &
    g1/.n=G*(m,k)) &
    for n st n in dom g1 & n+1 in dom g1 holds
     for m,k,i,j st [m,k] in Indices G &
     [i,j] in Indices G & g1/.n = G*(m,k) &
      g1/.(n+1) = G*(i,j) holds abs(m-i)+abs(k-j) = 1 by A28,GOBOARD1:def 11;
    reconsider l1 = Line(G,i1), c1 = Col(G,i2) as FinSequence of TOP-REAL 2;
    set x1 = X_axis(l1), y1 = Y_axis(l1),
        x2 = X_axis(c1), y2 = Y_axis(c1);
A54:  x1 is constant by A51,GOBOARD1:def 6;
A55:  y1 is increasing by A51,GOBOARD1:def 8;
A56:  x2 is increasing by A51,GOBOARD1:def 9;
A57:  y2 is constant by A51,GOBOARD1:def 7;
A58: dom x1=Seg len x1 by FINSEQ_1:def 3;
A59: dom y1=Seg len y1 by FINSEQ_1:def 3;
A60: len y1=len l1 by GOBOARD1:def 4;
A61: len x1=len l1 by GOBOARD1:def 3;
A62: len l1=width G by MATRIX_1:def 8;
then A63:Seg width G = dom l1 by FINSEQ_1:def 3;
A64: dom x2= Seg len x2 by FINSEQ_1:def 3;
A65: dom y2=Seg len y2 by FINSEQ_1:def 3;
A66: len x2=len c1 by GOBOARD1:def 3;
then A67: dom c1 = Seg len x2 by FINSEQ_1:def 3
            .= dom x2 by FINSEQ_1:def 3;
A68: len y2=len c1 by GOBOARD1:def 4;
A69: len c1 = len G by MATRIX_1:def 9;
then A70: dom c1 = Seg len G by FINSEQ_1:def 3
           .= dom G by FINSEQ_1:def 3;
        now per cases by A10,A15,A47,A48,A49,GOBOARD2:16;
     suppose A71: i1=j1;
      set ppi = G*(i1,i2), pj = G*(i1,j2);
          now per cases by XREAL_1:1;
       case A72: i2>j2;
        then reconsider l=i2-j2 as Nat by INT_1:18;
        A73: now let n; assume n in Seg l;
          then A74: 1<=n & n<=l & 0<=j2 by FINSEQ_1:3;
          l<=i2 by XREAL_1:45;
          then n<=i2 by A74,XREAL_1:2;
          then reconsider w=i2-n as Nat by INT_1:18;
             0<=n & i2-l<=i2-n by A74,REAL_1:92;
          then i2-n<=i2 & i2<=width G & j2<=w & 1<=j2
            by A51,FINSEQ_1:3,XREAL_1:45;
          then 1<=w & w<=width G by XREAL_1:2;
          then w in Seg width G by FINSEQ_1:3;
          hence i2-n is Nat & [i1,i2-n] in Indices G & i2-n in Seg width G
          by A50,A51,ZFMISC_1:106;
         end;
        defpred P1[Nat,set] means for m st m=i2-$1 holds $2=G*(i1,m);
        A75: now let n; assume n in Seg l;
          then reconsider m=i2-n as Nat by A73;
          take p=G*(i1,m);
          thus P1[n,p];
         end;
        consider g2 such that
        A76: len g2=l & for n st n in Seg l holds P1[n,g2/.n]
         from GOBOARD1:sch 1(A75);
A77:    dom g2 = Seg l by A76,FINSEQ_1:def 3;
        take g=g1^g2;
            now let n; assume A78: n in dom g2;
          then reconsider m=i2-n as Nat by A73,A77;
          take k=i1,m;
          thus [k,m] in Indices G & g2/.n=G*(k,m) by A73,A76,A77,A78;
         end;
        then A79: for n st n in dom g ex i,j st [i,j] in Indices G & g/.n=G*
             (i,j) by A53,GOBOARD1:39;
        A80: now let n; assume
A81:      n in dom g2 & n+1 in dom g2;
          then A82: [i1,i2-n] in Indices G
           & [i1,i2-(n+1)] in Indices G by A73,A77;
          reconsider m1=i2-n ,m2=i2-(n+1) as Nat by A73,A77,A81;
          A83: g2/.n=G*(i1,m1) & g2/.(n+1)=G*(i1,m2) by A76,A77,A81;
          let l1,l2,l3,l4 be Nat; assume
             [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2) &
           g2/.(n+1)=G*(l3,l4);
           then l1=i1 & l2=m1 & l3=i1 & l4=m2 by A82,A83,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)= 0+abs(i2-n-(i2-(n+1))) by ABSVALUE:7
           .= 1 by ABSVALUE:def 1;
         end;
         now let l1,l2,l3,l4 be Nat; assume
          A84: [l1,l2] in Indices G & [l3,l4] in Indices G &
          g1/.len g1=G*(l1,l2) &
          g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
          then A85: [i1,i2-1] in Indices G &
          f1/.len f1=f/.k by A15,A16,A18,A73,A77,FINSEQ_4:86;
          reconsider m1=i2-1 as Nat by A73,A77,A84;
             g2/.1=G*(i1,m1) by A76,A77,A84;
           then l1=i1 & l2=i2 & l3=i1 & l4=m1
            by A35,A47,A84,A85,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)=0+abs(i2-(i2-1)) by ABSVALUE:7
          .=1 by ABSVALUE:def 1;
         end;
        then for n st n in dom g & n+1 in dom g holds
         for m,k,i,j st [m,k] in Indices G & [i,j] in Indices G &
         g/.n=G*(m,k) &
          g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A80,GOBOARD1:40;
        hence g is_sequence_on G by A79,GOBOARD1:def 11;
     set lk={w where w is Point of TOP-REAL 2: w`1=ppi`1 & pj`2<=w`2 & w`2<=
ppi`2};
           l1/.i2=l1.i2 & l1/.j2 = l1.j2 by A51,A63,FINSEQ_4:def 4;
        then A86: l1/.i2=ppi & l1/.j2=pj by A51,MATRIX_1:def 8;
        then A87: y1.i2=ppi`2 & y1.j2=pj`2 & x1.i2=ppi`1 & x1.j2=pj`1 & l=len
g2
          by A51,A58,A59,A60,A61,A62,A76,GOBOARD1:def 3,def 4;
   then A88: pj`2<ppi`2 & ppi`1=pj`1 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj`2]|
        by A51,A54,A55,A58,A59,A60,A61,A62,A72,EUCLID:57,GOBOARD1:def 1,def 2;
        A89: LSeg(f,k)=LSeg(pj,ppi) by A14,A47,A49,A71,TOPREAL1:def 5
        .= lk by A88,TOPREAL3:15;
        A90: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5;
            now let n,m; assume
          A91: n in dom g2 & m in dom g2 & n<>m;
          then A92: [i1,i2-n] in Indices G& [i1,i2-m] in Indices G by A73,A77;
          reconsider n1=i2-n, m1=i2-m as Nat by A73,A77,A91;
          A93: g2/.n=G*(i1,n1) & g2/.m=G*(i1,m1) by A76,A77,A91;
          assume g2/.n=g2/.m;
          then n1=m1 by A92,A93,GOBOARD1:21;
          hence contradiction by A91;
         end;
         then for n,m st n in dom g2 & m in dom g2 &
         g2/.n = g2/.m holds n = m;
then A94:     g2 is one-to-one & dom g2=Seg len g2 by FINSEQ_1:def 3
,PARTFUN2:16;
        A95: not f/.k in rng g2
         proof assume f/.k in rng g2;
          then consider n such that
          A96: n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
          A97: [i1,i2-n] in Indices G by A73,A76,A94,A96;
          reconsider n1=i2-n as Nat by A73,A76,A94,A96;
             g2/.n=G*(i1,n1) & 0+1<=n by A76,A94,A96,FINSEQ_1:3;
           then n1=i2 & 0<n by A47,A96,A97,GOBOARD1:21;
          hence contradiction;
         end;
        A98: now let n,p; assume
          A99: n in dom g2 & g2/.n=p;
          then A100: P1[n,g2/.n] &
          1<=n & n<=len g2& i2-n in Seg width G by A73,A76,A94,FINSEQ_3:27;
          reconsider n1=i2-n as Nat by A73,A77,A99;
          set pn = G*(i1,n1);
             l1/.n1=l1.n1 by A63,A100,FINSEQ_4:def 4;
          then A101: g2/.n=pn & l1/.n1=pn & 0<=n & i2-len g2<=n1
            by A100,MATRIX_1:def 8,REAL_1:92;
          then A102: x1.n1=pn`1 & x1.n1=x1.i2 & y1.n1=pn`2 & n1<=i2 & j2<=n1
           by A51,A54,A58,A59,A60,A61,A62,A76,A100,GOBOARD1:def 2,def 3,def 4
,REAL_2:173;
          hence p`1=ppi`1 & pj`2<=p`2 & p`2<=ppi`2
            by A51,A55,A59,A60,A62,A87,A99,A100,A101,GOBOARD2:18;
             dom l1 = Seg len l1 by FINSEQ_1:def 3;
          hence p in rng l1
          by A62,A99,A100,A101,PARTFUN2:4;  0<n by A100;
          then n1<i2 by XREAL_1:46;
          hence p`2<ppi`2 by A51,A55,A59,A60,A62,A87,A99,A100,A101,A102,
GOBOARD1:def 1;
         end;
        A103: now let n,m,p,q; assume
          A104: n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
          then A105: P1[n,g2/.n] & i2-n in Seg width G &
              P1[m,g2/.m] & i2-m in Seg width G by A73,A76,A77;
          reconsider n1=i2-n, m1=i2-m as Nat by A73,A77,A104;
          set pn = G*(i1,n1), pm = G*(i1,m1);
             l1/.n1=l1.n1 & l1/.m1 = l1.m1 by A63,A105,FINSEQ_4:def 4;
          then A106: g2/.n=pn & l1/.n1=pn & g2/.m=pm & l1/.m1=pm & m1<n1
            by A104,A105,MATRIX_1:def 8,REAL_1:92;
          then y1.n1=pn`2 & y1.m1=pm`2 by A59,A60,A62,A105,GOBOARD1:def 4;
          hence q`2<p`2 by A55,A59,A60,A62,A104,A105,A106,GOBOARD1:def 1;
         end;
        A107: rng g2 c= LSeg(f,k)
         proof let x; assume x in rng g2;
          then consider n such that
          A108: n in dom g2 & g2/.n=x by PARTFUN2:4;
          reconsider n1=i2-n as Nat by A73,A76,A94,A108;
          set pn = G*(i1,n1);
          A109: g2/.n=pn by A76,A94,A108;
          then pn`1=ppi`1 & pj`2<=pn`2 & pn`2<=ppi`2 by A98,A108;
          hence x in LSeg(f,k) by A89,A108,A109;
         end;
           rng g1 /\ rng g2 = {}
         proof consider x being Element of rng g1 /\ rng g2;
          assume not thesis;
          then A110: x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
              now per cases by A14,REAL_1:def 5;
           suppose k=1;
            hence contradiction by A37,A95,A110,TARSKI:def 1;
           end;
           suppose 1<k;
            then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A44,A107,A110,GOBOARD2:9,XBOOLE_0:def 3;
            hence contradiction by A95,A110,TARSKI:def 1;
           end;
           end;
          hence contradiction;
         end;
        then rng g1 misses rng g2 by XBOOLE_0:def 7;
        hence g is one-to-one by A29,A94,FINSEQ_3:98;
        A111: for n st 1<=n & n+2 <= len g2 holds
             LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
         proof let n; assume
          A112: 1<=n & n+2 <= len g2;
          then A113: n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
          then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
          g2/.(n+2) in rng g2 by PARTFUN2:4;
then A114: g2/.n in lk & g2/.(n+1) in lk & g2/.(n+2) in lk by A89,A107;
          then consider u be Point of TOP-REAL 2 such that
          A115: g2/.n=u & u`1=ppi`1 & pj`2<=u`2 & u`2<=ppi`2;
          consider u1 be Point of TOP-REAL 2 such that
          A116: g2/.(n+1)=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2 by A114;
          consider u2 be Point of TOP-REAL 2 such that
          A117: g2/.(n+2)=u2 & u2`1=ppi`1 & pj`2<=u2`2 & u2`2<=ppi`2 by A114;
          set lg = {w where w is Point of TOP-REAL 2:
                     w`1=ppi`1 & u2`2<=w`2 & w`2<=u`2};
          A118: n+(1+1) = n+1+1;
             n+1 <= n+2 by XREAL_1:8;
           then n+1 <= len g2 by A112,XREAL_1:2;
then A119:      LSeg(g2,n)=LSeg(u,u1) by A112,A115,A116,TOPREAL1:def 5;
             1 <= n+1 by NAT_1:29;
then A120:      LSeg(g2,n+1)=LSeg(u1,u2) by A112,A116,A117,A118,TOPREAL1:def 5;
             n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:38;
          then A121: u2`2<u1`2 & u1`2<u`2 by A103,A113,A115,A116,A117;
          then A122: u2`2<=u1`2 & u1`2<=u`2 & u2`2<u`2 by XREAL_1:2;
          A123: u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2]| by A116,A121,
EUCLID:57;
          then LSeg(g2/.n,g2/.(n+2))=lg by A115,A117,A122,TOPREAL3:15;
          hence thesis by A115,A116,A117,A119,A120,A123,TOPREAL1:14;
         end;
        thus g is unfolded
         proof let n; assume
          A124: 1<=n & n+2 <= len g;
then A125:     n+1+1<=len g;
          A126: 1 <= n+1 by NAT_1:29;
          A127: n<=n+1 & n+1<=n+1+1 by NAT_1:29;
then A128:      n+1 <= len g by A124,XREAL_1:2;
A129:      n+(1+1)=n+1+1;
A130:      len g=len g1+len g2 by FINSEQ_1:35;
              n+2-len g1 = n-len g1 +2;
          then A131: n-len g1 + 2 <= len g2 by A124,A130,XREAL_1:22;
A132:       n+1+1 = n+(1+1);
           per cases;
           suppose A133: n+2 <= len g1;
        then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
              by A124,GOBOARD2:4;
            then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
            g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
            hence thesis by A30,A124,A133,TOPREAL1:def 8;
           end;
           suppose len g1 < n+2;
            then len g1+1<=n+2 by NAT_1:38;
            then A134: len g1<=n+2-1 by XREAL_1:21;
                now per cases;
             suppose A135: len g1=n+1;
                  now assume A136: k=1;
                   1<len g1 by A124,A135,NAT_1:38;
                then 1+1<=len g1 by NAT_1:38;
                hence contradiction by A37,A136,TOPREAL1:29;
               end;
              then A137: 1<k & LSeg(g1,n) c= L~f1
                 by A14,A33,REAL_1:def 5,TOPREAL3:26;
              then A138: L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                 1<=n+1 by NAT_1:29;
              then A139: n in dom g1 & n+1 in dom g1
              by A124,A127,A135,FINSEQ_3:27;
              then A140: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
              A141: g/.(n+1)=f1/.len f1 by A35,A135,A139,FINSEQ_4:83
              .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                A142: 1<=len g-len g1 by A125,A135,XREAL_1:21;
              then A143: g/.(n+2)=g2/.1 by A129,A130,A135,GOBOARD2:5;
                 1 in dom g2 by A130,A142,FINSEQ_3:27;
              then A144: g2/.1 in rng g2 by PARTFUN2:4;
              then g2/.1 in lk by A89,A107;
              then consider u1 be Point of TOP-REAL 2 such that
              A145: g2/.1=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2;
                 ppi in LSeg(ppi,pj) by TOPREAL1:6;
              then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1)
                by A90,A107,A124,A126,A132,A141,A143,A144,A145,TOPREAL1:12
,def 5;
              then A146: LSeg(g,n) /\ LSeg(g,n+1) c= {g/.(n+1)}
               by A47,A137,A138,A140,A141,XBOOLE_1:27;
                 g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                by A124,A126,A128,A132,TOPREAL1:27;
              then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;
              then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
              hence thesis by A146,XBOOLE_0:def 10;
             end;
             suppose len g1<>n+1; then len g1<n+1 by A134,REAL_1:def 5;
              then A147: len g1<=n by NAT_1:38;
              then reconsider n1=n-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A148: len g1=n;
                   1<=len g1 by A14,A16,A36,XREAL_1:2;
                then len g1 in dom g1 by FINSEQ_3:27;
                then A149: g/.n=f1/.len f1 by A35,A148,FINSEQ_4:83
                .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                   1 <= len g2 by A128,A130,A148,XREAL_1:8;
                then A150: g/.(n+1)=g2/.1 by A148,GOBOARD2:5;
                   2 <= len g2 by A124,A130,A148,XREAL_1:8;
                then A151: g/.(n+2)=g2/.2 by A148,GOBOARD2:5;
                A152: 0+2<=len g2 by A124,A130,A148,XREAL_1:8;
                then 1<=len g2 by XREAL_1:2;
                then A153: 1 in dom g2 & 2 in dom g2 by A152,FINSEQ_3:27;
                then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                then A154: g2/.1 in lk & g2/.2 in lk by A89,A107;
                then consider u1 be Point of TOP-REAL 2 such that
                A155: g2/.1=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2;
                consider u2 be Point of TOP-REAL 2 such that
          A156: g2/.2=u2 & u2`1=ppi`1 & pj`2<=u2`2 & u2`2<=ppi`2 by A154;
                A157: u2`2<u1`2 by A103,A153,A155,A156;
                then A158: u2`2<=u1`2 & u2`2<ppi`2 & u2=|[u2`1,u2`2]|
                  by A155,XREAL_1:2,EUCLID:57;
                set lg = {w where w is Point of TOP-REAL 2 :
                          w`1=ppi`1 & u2`2<=w`2 & w`2<=ppi`2};
                A159: u1 in lg by A155,A157;
A160:            LSeg(g,n)=LSeg(ppi,u1)
                 by A124,A128,A149,A150,A155,TOPREAL1:def 5;
A161:            LSeg(g,n+1)=LSeg(u1,u2)
                 by A124,A126,A132,A150,A151,A155,A156,TOPREAL1:def 5;
                   LSeg(ppi,g2/.2)=lg by A88,A156,A158,TOPREAL3:15;
                hence thesis by A150,A155,A156,A159,A160,A161,TOPREAL1:14;
               end;
               suppose len g1<>n;
then A162:              len g1<n by A147,REAL_1:def 5;
              n1 + len g1 = n;
then A163:            LSeg(g,n)=LSeg(g2,n1) by A128,A162,GOBOARD2:10;
A164:            len g1<n+1 by A127,A162,XREAL_1:2;
A165:            len g1+1<=n by A162,NAT_1:38;
A166:            n+1 = n1+1+len g1;
A167:             1<=n1+1 by NAT_1:29;
                   n1 + 1 + len g1 = n + 1;
then A168:              n1+1 <= len g2 by A128,A130,XREAL_1:8;
A169:             LSeg(g,n+1)=LSeg(g2,n1+1) by A125,A164,A166,GOBOARD2:10;
A170:             g/.(n+1)=g2/.(n1+1) by A166,A167,A168,GOBOARD2:5;
                   1<=n1 by A165,XREAL_1:21;
                hence thesis by A111,A131,A163,A169,A170;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
         end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
           m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
         proof let n,m; assume that
          A171: m>n+1 and
          A172: n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
          A173: LSeg(g2,n) /\ LSeg(g2,m) <> {};
          A174: 1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
 len g2 by A172,FINSEQ_3:27;
          reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
           as Point of TOP-REAL 2;
          set lp = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                         p2`2<=w`2 & w`2<=p1`2},
              lq = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                         q2`2<=w`2 & w`2<=q1`2};
              m<m+1 & n<n+1 by NAT_1:38;
           then A175: p2`2<p1`2 & q2`2<q1`2 & p1`1=ppi`1 & p2`1=ppi`1 & q1`1=
ppi`1 &
           q2`1=ppi`1 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
           p2=|[p2`1,p2`2]| &
           q2=|[q2`1,q2`2]| by A98,A103,A172,EUCLID:57;
           A176: LSeg(g2,n) = LSeg(p2,p1) by A174,TOPREAL1:def 5
           .=lp by A175,TOPREAL3:15;
           A177: LSeg(g2,m) = LSeg(q2,q1) by A174,TOPREAL1:def 5
           .=lq by A175,TOPREAL3:15;
           consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
           A178: x in LSeg(g2,n) & x in LSeg(g2,m) by A173,XBOOLE_0:def 3;
then A179:         ex tn be Point of TOP-REAL 2
               st tn=x & tn`1=ppi`1 & p2`2<=tn`2 & tn`2<=p1`2 by A176;
A180:         ex tm be Point of TOP-REAL 2 st
              tm=x & tm`1=ppi`1 & q2`2<=tm`2 & tm`2<=q1`2 by A177,A178;
               q1`2<p2`2 by A103,A171,A172;
            hence contradiction by A179,A180,XREAL_1:2;
         end;
then A181:    g2 is s.n.c. by GOBOARD2:6;
        A182: L~g2 c= LSeg(f,k)
         proof
          set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; let x; assume
             x in L~g2; then x in union ls;
          then consider X be set such that
          A183: x in X & X in ls by TARSKI:def 4;
          consider m such that
          A184: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A183;
              m in dom g2 & m+1 in dom g2 by A184,GOBOARD2:3;
          then A185: g2/.m in rng g2 & g2/.(m+1) in rng g2 by PARTFUN2:4;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          A186: LSeg(q1,q2) c= LSeg(ppi,pj) by A90,A107,A185,TOPREAL1:12;
             LSeg(g2,m)=LSeg(q1,q2) by A184,TOPREAL1:def 5;
          hence thesis by A90,A183,A184,A186;
         end;
        A187: not f/.k in L~g2
         proof set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; assume
             f/.k in L~g2; then f/.k in union ls;
          then consider X be set such that
          A188: f/.k in X & X in ls by TARSKI:def 4;
          consider m such that
          A189: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A188;
          A190: m in dom g2 & m+1 in dom g2 & m<m+1
          by A189,GOBOARD2:3,NAT_1:38;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          set lq={w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                       q2`2<=w`2 & w`2<=q1`2};
          A191: q1`1=ppi`1 & q2`1=ppi`1 & q2`2<q1`2 & q1=|[q1`1,q1`2]|
          & q2=|[q2`1,q2`2]| by A98,A103,A190,EUCLID:57;
             LSeg(g2,m)=LSeg(q2,q1) by A189,TOPREAL1:def 5
          .=lq by A191,TOPREAL3:15;
          then ex p st p=f/.k & p`1=ppi`1 & q2`2<=p`2 & p`2<=q1`2 by A188,A189
;
          hence contradiction by A47,A98,A190;
         end;
        A192: L~g1 /\ L~g2 = {}
         proof
           per cases;
           suppose k=1; hence thesis by A37;
           end;
           suppose k<>1; then 1<k by A14,REAL_1:def 5;
            then L~g1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,A33,GOBOARD2:9;
            then A193: L~g1 /\ L~g2 c= {f/.k} by A182,XBOOLE_1:26;
                now consider x being Element of L~g1 /\ L~g2;
              assume L~g1 /\ L~g2 <> {};
              then x in {f/.k} & x in L~g2 by A193,TARSKI:def 3,XBOOLE_0:def 3
;
              hence contradiction by A187,TARSKI:def 1;
             end;
            hence thesis;
         end;
         end;
           for n,m st m>n+1 & n in dom g & n+1 in dom g &
        m in dom g & m+1 in dom g holds LSeg(g,n) misses LSeg(g,m)
         proof let n,m; assume that
          A194: m>n+1 and
          A195: n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
          A196: 1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
          m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
            by A195,FINSEQ_1:35,FINSEQ_3:27,NAT_1:29;
          set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
              l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
             j2+1<=i2 by A72,NAT_1:38;
          then A197: 1<=l by XREAL_1:21;
          then A198: 1 in dom g2 by A76,FINSEQ_3:27;
          reconsider qq=g2/.1 as Point of TOP-REAL 2;
          set ql={z where z is Point of TOP-REAL 2: z`1=ppi`1 &
                     qq`2<=z`2 & z`2<=ppi`2};
          A199: 1<=len g1 by A14,A16,A36,XREAL_1:2;
           then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
          then A200: g/.len g1=g1/.len g1 by FINSEQ_4:83
             .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
          A201: len g1<len g1 +1 & len g1+1<=len g
            by A76,A196,A197,NAT_1:38,XREAL_1:9;
          A202: g/.(len g1+1)=qq by A76,A197,GOBOARD2:5;
          A203: qq`1=ppi`1 & pj`2<=qq`2 & qq`2<ppi`2 & qq=|[qq`1,qq`2]|
           by A98,A198,EUCLID:57;
    A204: LSeg(g,len g1)=LSeg(qq,ppi) by A199,A200,A201,A202,TOPREAL1:def 5
           .= ql by A88,A203,TOPREAL3:15;
            A205: n+1<=m+1 by A194,A196,XREAL_1:2;
                now per cases;
             suppose A206: m+1<=len g1;
              then A207: m<=len g1 & n+1<=len g1 by A196,A205,XREAL_1:2;
              then n<=len g1 by A196,XREAL_1:2;
              then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
               by A196,A206,A207,FINSEQ_3:27;
              then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m) by TOPREAL3:25;
              hence thesis by A31,A194,TOPREAL1:def 9;
             end;
             suppose len g1<m+1;
              then A208: len g1<=m by NAT_1:38;
              then reconsider m1=m-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A209: m=len g1;
                    now assume A210: k=1;
                     1<len g1 by A194,A196,A209,XREAL_1:2;
                  then 1+1<=len g1 by NAT_1:38;
                  hence contradiction by A37,A210,TOPREAL1:29;
                 end;
                then 1<k by A14,REAL_1:def 5;
                then A211: L~f1 /\ LSeg(f,k) ={f/.k}
                 by A5,A8,A9,GOBOARD2:9;
                   n<=len g1 by A194,A196,A209,XREAL_1:2;
                then A212: n in dom g1 & n+1 in dom g1
                by A194,A196,A209,FINSEQ_3:27;
                then A213: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                then LSeg(g,n) in l1 by A194,A196,A209;
                then A214: LSeg(g,n) c= L~f1 by A33,ZFMISC_1:92;
                   LSeg(g,m) c= LSeg(f,k)
                 proof let x; assume x in LSeg(g,m);
                  then consider px be Point of TOP-REAL 2 such that
                  A215: px=x & px`1=ppi`1 & qq`2<=px`2 & px`2<=
ppi`2 by A204,A209;
                     pj`2<=px`2 by A203,A215,XREAL_1:2;
                  hence thesis by A89,A215;
                 end;
                then A216: LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                 by A211,A214,XBOOLE_1:27;
                    now consider x being Element of LSeg(g,n) /\ LSeg(g,m);
                  assume LSeg(g,n)/\ LSeg(g,m)<>{};
                  then A217: x in LSeg(g,n) & x in {f/.k}
                  by A216,TARSKI:def 3,XBOOLE_0:def 3;
                  then A218: x=f/.k by TARSKI:def 1;
                     f/.k=g1/.len g1 by A15,A16,A18,A35,FINSEQ_4:86;
                  hence contradiction
                  by A29,A30,A31,A194,A209,A212,A213,A217,A218,GOBOARD2:7;
                 end;
                hence thesis by XBOOLE_0:def 7;
               end;
               suppose
              m<>len g1;
                then A219: len g1<m & m+1 = m1+1 +len g1
                 by A208,REAL_1:def 5;
                   m = m1+len g1;
                then A220: LSeg(g,m)=LSeg(g2,m1) by A196,A219,GOBOARD2:10;
                   m1+1<=len g2 & len g1+1<=
m by A196,A219,NAT_1:38,XREAL_1:8;
                then A221: 1<=m1 & m1+1 <= len g2 by XREAL_1:21;
                then LSeg(g,m) in l2 by A220;
                then A222: LSeg(g,m) c= L~g2 by ZFMISC_1:92;
                    now per cases;
                 suppose A223: n+1<=len g1;
                  then n<=len g1 by A196,XREAL_1:2;
                  then n in dom g1 & n+1 in dom g1 by A196,A223,FINSEQ_3:27;
                   then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                  then LSeg(g,n) in l1 by A196,A223;
                  then LSeg(g,n) c= L~g1 by ZFMISC_1:92;
                  then LSeg(g,n) /\ LSeg(g,m) c= {} by A192,A222,XBOOLE_1:27;
                  then LSeg(g,n) /\ LSeg(g,m) = {} by XBOOLE_1:3;
                  hence thesis by XBOOLE_0:def 7;
                 end;
                 suppose len g1<n+1;
                  then A224: len g1<=n by NAT_1:38;
                  then reconsider n1=n-len g1 as Nat by INT_1:18;
A225:               n - len g1 + 1 = n + 1 - len g1;
A226:               n = n1 + len g1;
                      now per cases;
                   suppose A227: len g1=n;
                        now consider x being Element of LSeg(g,n) /\ LSeg(g,m);
                      assume LSeg(g,n) /\ LSeg(g,m)<>{};
                      then A228: x in LSeg(g,n) & x in LSeg(g,m)
                      by XBOOLE_0:def 3;
then A229:                      ex qx be Point of TOP-REAL 2 st
               qx=x & qx`1=ppi`1 & qq`2<=qx`2 & qx`2<=ppi`2 by A204,A227;
                      A230: m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                        by A221,GOBOARD2:3,NAT_1:38;
                      reconsider q1=g2/.m1, q2=g2/.(m1+1)
                       as Point of TOP-REAL 2;
                      set q1l={v where v is Point of TOP-REAL 2: v`1=ppi`1 &
                                 q2`2<=v`2 & v`2<=q1`2};
A231: q1`1=ppi`1 & q2`1=ppi`1 & q2`2<q1`2 & q1=|[q1`1,q1`2]|&
                      q2=|[q2`1,q2`2]| by A98,A103,A230,EUCLID:57;
                         m1 > n1 + 1 & n1 + 1 >=
 1 by A194,A225,NAT_1:29,XREAL_1:11;
then A232:                   m1 > 1 by XREAL_1:2;
                         LSeg(g2,m1)=LSeg(q2,q1) by A221,TOPREAL1:def 5
                      .=q1l by A231,TOPREAL3:15;
then A233:                      ex qy be Point of TOP-REAL 2 st
 qy=x & qy`1=ppi`1 & q2`2<=qy`2 & qy`2<=q1`2 by A220,A228;
                         q1`2 < qq`2 by A103,A198,A230,A232;
                      hence contradiction by A229,A233,XREAL_1:2;
                     end;
                    hence thesis by XBOOLE_0:def 7;
                   end;
                   suppose n<>len g1;
                    then len g1<n by A224,REAL_1:def 5;
                    then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                     by A194,A196,A225,A226,GOBOARD2:10,XREAL_1:11;
                    hence thesis by A181,A220,TOPREAL1:def 9;
                   end;
                   end;
                  hence thesis;
                 end;
                 end;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
        hence g is s.n.c. by GOBOARD2:6;
        A234: g2 is special
         proof let n;
         set p = g2/.n, q = g2/.(n+1);
         assume 1<=n & n+1 <= len g2;
          then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
          then p`1=ppi`1 & q`1=ppi`1 by A98;
          hence p`1=q`1 or p`2=q`2;
         end;
            now set p=g1/.len g1, q=g2/.1;
             j2+1<=i2 by A72,NAT_1:38;
          then 1<=l by XREAL_1:21;
          then 1 in dom g2 by A77,FINSEQ_1:3;
           then q`1=ppi`1 by A98;
          hence p`1=q`1 or p`2=q`2
           by A15,A16,A18,A35,A47,FINSEQ_4:86;
         end;
        hence g is special by A32,A234,GOBOARD2:13;
        thus L~g=L~f
         proof
          set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
              lf = {LSeg(f,j): 1<=j & j+1 <= len f};
          A235: len g = len g1 + len g2 by FINSEQ_1:35;
          A236: now let j; assume
            A237: len g1<=j & j<=len g;
            then reconsider w = j-len g1 as Nat by INT_1:18;
            let p such that
            A238: p=g/.j;
                now per cases;
             suppose A239: j=len g1;
                 1<=len g1 by A14,A16,A36,XREAL_1:2;
              then len g1 in dom g1 by FINSEQ_3:27;
              then A240: g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
              .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
              hence p`1=G*(i1,i2)`1 by A238,A239;
              thus G*(i1,j2)`2<=p`2 & p`2<=G*(i1,i2)`2 by A51,A55,A59,A60,A62
,A72,A87,A238,A239,A240,GOBOARD1:def 1;
                  dom l1 = Seg len l1 by FINSEQ_1:def 3;
              hence p in rng l1 by A51,A62,A86,A238,A239,A240,PARTFUN2:4;
             end;
             suppose j<>len g1;
           then len g1 < j by A237,REAL_1:def 5;
then len g1 + 1<=j by NAT_1:38;
then A241:           1<=w & w<=len g2 by A235,A237,XREAL_1:21,XREAL_1:22;
              w + len g1 = j;
              then A242: g/.j=g2/.w by A241,GOBOARD2:5;
                 w in dom g2 by A241,FINSEQ_3:27;
              hence p`1=ppi`1 & pj`2<=p`2 & p`2<=
ppi`2 & p in rng l1 by A98,A238,A242;
             end;
             end;
            hence p`1=ppi`1 & pj`2<=p`2 & p`2<=ppi`2 & p in rng l1;
           end;
          thus L~g c= L~f
           proof let x; assume x in L~g;
            then x in union lg;
            then consider X be set such that
            A243: x in X & X in lg by TARSKI:def 4;
            consider i such that
            A244: X=LSeg(g,i) & 1<=i & i+1 <= len g by A243;
             per cases;
             suppose A245: i+1 <= len g1;
              then i<=i+1 & i+1<=len g1 by NAT_1:29;
              then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A244,XREAL_1:2;
              then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
              then X=LSeg(g1,i) by A244,TOPREAL3:25;
              then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A244,A245;
              then x in union {LSeg(g1,j): 1<=j & j+1 <= len g1}
                by A243,TARSKI:def 4;
              then x in L~f1 & L~f1 c= L~f by A33,TOPREAL3:27;
              hence thesis;
             end;
             suppose A246: i+1 > len g1;
              then A247: len g1<=i & i<=i+1 & i+1<=len g by A244,NAT_1:38;
              A248: 1<=i+1 & len g1<=i+1 & i<=len g by A244,A246,NAT_1:38;
              reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
              A249: q1`1=ppi`1 & pj`2<=q1`2 & q1`2<=ppi`2 & q2`1=ppi`1 & pj`2<=
q2`2 &
                  q2`2<=ppi`2 by A236,A247,A248;
              then A250: q1=|[q1`1,q1`2]| & q2=|[q1`1,q2`2]| by EUCLID:57;
              A251: LSeg(g,i)=LSeg(q2,q1) by A244,TOPREAL1:def 5;
                  now per cases by XREAL_1:1;
               suppose q1`2>q2`2;
                then LSeg(g,i)={p2: p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2}
                  by A250,A251,TOPREAL3:15;
                then consider p2 such that
                A252: p2=x & p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2 by A243,A244;
                   pj`2<=p2`2 & p2`2<=ppi`2 by A249,A252,XREAL_1:2;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A249,A252;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               suppose q1`2=q2`2;
                then LSeg(g,i)={q1} by A250,A251,TOPREAL1:7;
                then x=q1 by A243,A244,TARSKI:def 1;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A249;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               suppose q1`2<q2`2;
                then LSeg(g,i)= {p1: p1`1=q1`1 & q1`2<=p1`2 & p1`2<=q2`2}
                  by A250,A251,TOPREAL3:15;
                then consider p2 such that
                A253: p2=x & p2`1=q1`1 & q1`2<=p2`2 & p2`2<=q2`2 by A243,A244;
                   pj`2<=p2`2 & p2`2<=ppi`2 by A249,A253,XREAL_1:2;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A249,A253;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               end;
              hence thesis;
           end;
           end;
          let x; assume x in L~f;
          then A254: x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
           per cases by A254,XBOOLE_0:def 2;
           suppose x in L~f1; then x in L~g1 & L~g1 c= L~g
            by A33,GOBOARD2:11;
            hence x in L~g;
           end;
           suppose x in LSeg(f,k);
            then consider p1 such that
            A255: p1=x & p1`1=ppi`1 & pj`2<=p1`2 & p1`2<=ppi`2 by A89;
            defpred P2[Nat] means
            len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`2>=p1`2;
            A256: now
              take n=len g1;
              thus P2[n]
              proof
               thus len g1<=n & n<=len g by A235,REAL_2:173;
               let q such that
               A257: q=g/.n;
                  1<=len g1 by A14,A16,A36,XREAL_1:2;
               then len g1 in dom g1 by FINSEQ_3:27;
               then q=f1/.len f1 by A35,A257,FINSEQ_4:83
               .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
               hence p1`2<=q`2 by A255;
              end;
             end;
            A258: for n holds P2[n] implies n<=len g;
            consider ma be Nat such that
            A259: P2[ma] & for n st P2[n] holds n<=ma from NAT_1:sch 6
(A258,A256);
                now per cases;
             suppose A260: ma=len g;
                 j2+1<=i2 by A72,NAT_1:38;
              then A261: 1<=l & l=len g2 by A76,XREAL_1:21;
              then A262: l in dom g2 & i2-l=j2 by FINSEQ_3:27;
              then A263: g/.ma=g2/.l by A76,A235,A260,FINSEQ_4:84
               .= pj by A76,A77,A262;
              then p1`2<=pj`2 by A259;
              then A264: p1`2=pj`2 by A255,XREAL_1:1;
              A265: ma-1<=len g & len g1+1<=ma
                by A235,A260,A261,XREAL_1:45,XREAL_1:9;
              then A266: len g1<=ma-1 & 0<=len g1 by XREAL_1:21;
then A267:           0+1<=ma by XREAL_1:21;
              reconsider m1=ma-1 as Nat by A267,INT_1:18;
                 1<=len g1 by A14,A16,A36,XREAL_1:2;
              then A268: 1<=m1 by A266,XREAL_1:2;
              reconsider q=g/.m1 as Point of TOP-REAL 2;
              A269: q`1=ppi`1 & pj`2<=q`2 & q=|[q`1,q`2]| & m1+1=ma
               by A236,A265,A266,EUCLID:57;
              then A270: LSeg(g,m1)=LSeg(pj,q)
               by A260,A263,A268,TOPREAL1:def 5;
              set lq={e where e is Point of TOP-REAL 2: e`1=ppi`1 & pj`2<=e`2 &
                      e`2<=q`2};
              LSeg(g,m1)=lq by A88,A269,A270,TOPREAL3:15;
              then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
              by A255,A260,A264,A268,A269;
              then x in union lg by A255,TARSKI:def 4;
              hence x in L~g;
             end;
             suppose ma<>len g;
              then ma<len g by A259,REAL_1:def 5;
              then A271: ma+1<=len g & k<=ma & ma<=ma+1
                by A16,A36,A259,XREAL_1:2,NAT_1:38;
              then A272: 1<=ma & len g1<=ma+1 by A14,A259,XREAL_1:2;
              reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
              A273: p1`2<=qa`2 by A259;
               A274: now assume p1`2<=qa1`2;
                 then for q holds q=g/.(ma+1) implies p1`2<=q`2;
                then ma+1<=ma by A259,A271,A272;
                hence contradiction by REAL_2:174;
               end;
              then A275: qa1`2<qa`2 & qa1`2<=p1`2 & p1`2<=qa`2 &
        qa`1=ppi`1 & qa1 `1 = ppi`1 by A236,A259,A271,A272,A273,XREAL_1:2;
              set lma = {p2: p2`1=ppi`1 & qa1`2<=p2`2 & p2`2<=qa`2};
              A276: qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                 LSeg(g,ma)=LSeg(qa1,qa) by A271,A272,TOPREAL1:def 5
              .= lma by A275,A276,TOPREAL3:15;
              then x in LSeg(g,ma) & LSeg(g,ma) in lg by A255,A271,A272,A273
,A274;
              then x in union lg by TARSKI:def 4;
              hence x in L~g;
             end;
             end;
            hence x in L~g;
         end;
         end;
           1<=len g1 by A14,A16,A36,XREAL_1:2;
        then 1 in dom g1 by FINSEQ_3:27;
        hence g/.1=f1/.1 by A34,FINSEQ_4:83
        .=f/.1 by A15,A19,FINSEQ_4:86;
           j2+1<=i2 by A72,NAT_1:38;
        then A277: 1<=l by XREAL_1:21;
         then A278: l in dom g2 & len g=len g1 + len g2 & len g2 = l
         by A77,FINSEQ_1:3,35,def 3;
         reconsider m1=i2-l as Nat;
         thus g/.len g=g2/.l by A278,FINSEQ_4:84
         .=G*(i1,m1) by A76,A77,A278
         .=f/.len f by A5,A49,A71;
         thus len f<=len g by A5,A16,A36,A277,A278,XREAL_1:9;
       end;
       case A279: i2=j2;
           k<>k+1;
        hence contradiction by A7,A15,A47,A48,A49,A71,A279,PARTFUN2:17;
       end;
       case A280: i2<j2;
        then reconsider l=j2-i2 as Nat by INT_1:18;
        deffunc F(Nat) = G*(i1,i2+$1);
        consider g2 such that
        A281: len g2=l & for n st n in dom g2 holds g2/.n=F(n) from
GOBOARD2:sch 1;
        take g=g1^g2;
        A282: now let n; assume n in Seg l;
          then A283: 1<=n & n<=l by FINSEQ_1:3;
          then n<=n+i2 & i2+n<=l+i2 by NAT_1:29,XREAL_1:9;
          then n<=i2+n & i2+n<=j2 & j2<=width G
           by A51,FINSEQ_1:3;
          then 1<=i2+n & i2+n<=width G by A283,XREAL_1:2;
          hence i2+n in Seg width G by FINSEQ_1:3;
          hence [i1,i2+n] in Indices G by A50,A51,ZFMISC_1:106;
         end;
        A284: dom g2 = Seg len g2 by FINSEQ_1:def 3;
            now let n such that A285: n in dom g2;
          take m=i1,k=i2+n;
          thus [m,k] in Indices G & g2/.n=G*(m,k) by A281,A282,A284,A285;
         end;
        then A286: for n st n in dom g ex i,j st [i,j] in Indices G &
        g/.n=G*(i,j) by A53,GOBOARD1:39;
        A287: now let n; assume
             n in dom g2 & n+1 in dom g2;
          then A288: g2/.n=G*(i1,i2+n) & [i1,i2+n] in Indices G &
          g2/.(n+1)=G*(i1,i2+(n+1)) &
          [i1,i2+(n+1)] in Indices G by A281,A282,A284;
          let l1,l2,l3,l4 be Nat; assume
             [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2) &
          g2/.(n+1)=G*(l3,l4);
           then l1=i1 & l2=i2+n & l3=i1 & l4=i2+(n+1) by A288,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)= 0+abs(i2+n-(i2+(n+1))) by ABSVALUE:7
          .= abs(-1)
          .= abs(1) by COMPLEX1:138
          .= 1 by ABSVALUE:def 1;
         end;
         now let l1,l2,l3,l4 be Nat; assume
A289: [l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,l2) &
          g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
          then g2/.1=G*
(i1,i2+1) & [i1,i2+1] in Indices G & f1/.len f1=f/.k
            by A15,A16,A18,A281,A282,A284,FINSEQ_4:86;
           then l1=i1 & l2=i2 & l3=i1 & l4=i2+1 by A35,A47,A289,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)=0+abs(i2-(i2+1)) by ABSVALUE:7
          .=abs(i2-i2+-1)
          .=abs(1) by COMPLEX1:138
          .=1 by ABSVALUE:def 1;
         end;
        then for n st n in dom g & n+1 in dom g holds
         for m,k,i,j st [m,k] in Indices G &
         [i,j] in Indices G & g/.n=G*(m,k) &
          g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A287,GOBOARD1:40;
        hence g is_sequence_on G by A286,GOBOARD1:def 11;
        set
        lk={w where w is Point of TOP-REAL 2: w`1=ppi`1 & ppi`2<=w`2 & w`2<=
pj`2};
           l1/.i2=l1.i2 & l1/.j2=l1.j2 by A51,A63,FINSEQ_4:def 4;
        then A290: l1/.i2=ppi & l1/.j2=pj by A51,MATRIX_1:def 8;
        then A291: y1.i2=ppi`2 & y1.j2=pj`2 & x1.i2=ppi`1 & x1.j2=pj`1
          by A51,A58,A59,A60,A61,A62,GOBOARD1:def 3,def 4;
        then A292: ppi`2<pj`2 & ppi`1=pj`1 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj
`2]|
        by A51,A54,A55,A58,A59,A60,A61,A62,A280,EUCLID:57,GOBOARD1:def 1,def 2;
        A293: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5
        .= lk by A292,TOPREAL3:15;
        A294: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5;
            now let n,m; assume
          A295: n in dom g2 & m in dom g2 & n<>m;
          then A296: g2/.n=G*(i1,i2+n) & g2/.m=G*(i1,i2+m) & [i1,i2+n] in
Indices G &
          [i1,i2+m] in Indices G by A281,A282,A284;
          assume g2/.n=g2/.m;
          then i2+n=i2+m by A296,GOBOARD1:21;
          hence contradiction by A295;
         end;
         then for n,m st n in dom g2 & m in dom g2 &
         g2/.n = g2/.m holds n = m;
        then A297: g2 is one-to-one by PARTFUN2:16;
        A298: not f/.k in rng g2
         proof assume f/.k in rng g2;
          then consider n such that
          A299: n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
         dom g2 = Seg len g2 by FINSEQ_1:def 3;
          then A300: g2/.n=G*(i1,i2+n) & [i1,i2+n] in Indices G
            by A281,A282,A299;
             0+1<=n by A299,FINSEQ_3:27;
           then i2+n=i2 & 0<n by A47,A299,A300,GOBOARD1:21;
          hence contradiction;
         end;
        A301: now let n,p; assume
          A302: n in dom g2 & g2/.n=p;
          then A303: g2/.n=G*(i1,i2+n) & 1<=n & n<=len g2
& i2+n in Seg width G by A281,A282,A284,FINSEQ_1:3;
          set n1=i2+n;
          set pn = G*(i1,n1);
             l1/.n1=l1.n1 by A63,A303,FINSEQ_4:def 4;
          then A304: g2/.n=pn & l1/.n1=pn & 0<=n & n1<=i2+len g2
            by A303,MATRIX_1:def 8,XREAL_1:9;
          then A305: x1.n1=pn`1 & x1.n1=x1.i2 & y1.n1=pn`2 & n1<=j2 & i2<=n1
           by A51,A54,A58,A59,A60,A61,A62,A281,A303,GOBOARD1:def 2,def 3,def 4
,REAL_2:173;
          hence p`1=ppi`1 & ppi`2<=p`2 & p`2<=pj`2
            by A51,A55,A59,A60,A62,A291,A302,A303,GOBOARD2:18;
              dom l1 = Seg len l1 by FINSEQ_1:def 3;
          hence p in rng l1
          by A62,A302,A303,A304,PARTFUN2:4;  0<n by A303;
          then i2<n1 by REAL_2:174;
          hence p`2>ppi`2 by A51,A55,A59,A60,A62,A291,A302,A303,A305,
GOBOARD1:def 1;
         end;
        A306: now let n,m,p,q; assume
          A307: n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
          then A308: g2/.n=G*(i1,i2+n) & i2+n in Seg width G &
              g2/.m=G*(i1,i2+m) & i2+m in Seg width G by A281,A282,A284;
          set n1=i2+n, m1=i2+m;
          set pn = G*(i1,n1),
              pm = G*(i1,m1);
             l1/.n1=l1.n1 & l1/.m1 = l1.m1 by A63,A308,FINSEQ_4:def 4;
          then A309: l1/.n1=pn & l1/.m1=pm & n1<m1
            by A307,A308,MATRIX_1:def 8,XREAL_1:10;
          then y1.n1=pn`2 & y1.m1=pm`2 by A59,A60,A62,A308,GOBOARD1:def 4;
          hence p`2<q`2 by A55,A59,A60,A62,A307,A308,A309,GOBOARD1:def 1;
         end;
        A310: rng g2 c= LSeg(f,k)
         proof let x; assume x in rng g2;
          then consider n such that
          A311: n in dom g2 & g2/.n=x by PARTFUN2:4;
          A312: g2/.n=G*(i1,i2+n) by A281,A311;
          set pn = G*(i1,(i2+n));
             pn`1=ppi`1 & ppi`2<=pn`2 & pn`2<=pj`2 by A301,A311,A312;
          hence x in LSeg(f,k) by A293,A311,A312;
         end;
           rng g1 /\ rng g2 = {}
         proof consider x being Element of rng g1 /\ rng g2;
          assume not thesis;
          then A313: x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
              now per cases by A14,REAL_1:def 5;
           suppose k=1;
            hence contradiction by A37,A298,A313,TARSKI:def 1;
           end;
           suppose 1<k;
            then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A44,A310,A313,GOBOARD2:9,XBOOLE_0:def 3;
            hence contradiction by A298,A313,TARSKI:def 1;
           end;
           end;
          hence contradiction;
         end;
        then rng g1 misses rng g2 by XBOOLE_0:def 7;
        hence g is one-to-one by A29,A297,FINSEQ_3:98;
        A314: for n st 1<=n & n+2 <= len g2 holds
             LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
         proof let n; assume
          A315: 1<=n & n+2 <= len g2;
          then A316: n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
          then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
          g2/.(n+2) in rng g2 by PARTFUN2:4;
          then A317: g2/.n in lk & g2/.(n+1) in lk &
          g2/.(n+2) in lk by A293,A310;
          then consider u be Point of TOP-REAL 2 such that
          A318: g2/.n=u & u`1=ppi`1 & ppi`2<=u`2 & u`2<=pj`2;
          consider u1 be Point of TOP-REAL 2 such that
          A319: g2/.(n+1)=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2 by A317;
          consider u2 be Point of TOP-REAL 2 such that
          A320: g2/.(n+2)=u2 & u2`1=ppi`1 & ppi`2<=u2`2 & u2`2<=pj`2 by A317;
          set lg = {w where w is Point of TOP-REAL 2:
                     w`1=ppi`1 & u`2<=w`2 & w`2<=u2`2};
          A321: 1<= n+1 by NAT_1:29;
          A322: n+1+1 = n+(1+1);
             n+1 <= n+2 by XREAL_1:8;
          then n+1 <= len g2 by A315,XREAL_1:2;
          then A323: LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg(u1,u2) &
          LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
           by A315,A318,A319,A320,A321,A322,TOPREAL1:def 5;
             n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:38;
          then A324: u1`2<u2`2 & u`2<u1`2 by A306,A316,A318,A319,A320;
          then A325: u1`2<=u2`2 & u`2<=u1`2 & u`2<u2`2 by XREAL_1:2;
          A326: u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2]| by A319,A324,
EUCLID:57;
          then LSeg(g2/.n,g2/.(n+2))=lg by A318,A320,A325,TOPREAL3:15;
          hence thesis by A319,A323,A326,TOPREAL1:14;
         end;
        thus g is unfolded
         proof let n; assume
          A327: 1<=n & n+2 <= len g;
then A328:           n+1+1<=len g;
          A329: 1<= n+1 by NAT_1:29;
          A330: n<=n+1 & n+1<=n+1+1 by NAT_1:29;
then A331:      n+1 <= len g by A327,XREAL_1:2;
A332:      n+(1+1)=n+1+1;
A333:      len g=len g1+len g2 by FINSEQ_1:35;
              n+2-len g1 = n-len g1 +2;
          then A334: n-len g1 + 2 <= len g2 by A327,A333,XREAL_1:22;
           per cases;
           suppose A335: n+2 <= len g1;
          then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
              by A327,GOBOARD2:4;
            then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
            g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
            hence thesis by A30,A327,A335,TOPREAL1:def 8;
           end;
           suppose len g1 < n+2;
            then len g1+1<=n+2 by NAT_1:38;
            then A336: len g1<=n+2-1 by XREAL_1:21;
                now per cases;
             suppose A337: len g1=n+1;
                  now assume A338: k=1;
                   1<len g1 by A327,A337,NAT_1:38;
                then 1+1<=len g1 by NAT_1:38;
                hence contradiction by A37,A338,TOPREAL1:29;
               end;
              then A339: 1<k & LSeg(g1,n) c= L~f1
                 by A14,A33,REAL_1:def 5,TOPREAL3:26;
              then A340: L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                 1<=n+1 by NAT_1:29;
        then A341: n in dom g1 & n+1 in dom g1 by A327,A330,A337,FINSEQ_3:27;
              then A342: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
              A343: g/.(n+1)=f1/.len f1
               by A35,A337,A341,FINSEQ_4:83
              .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                A344: 1<=len g-len g1 by A328,A337,XREAL_1:21;
              then A345: g/.(n+2)=g2/.1 by A332,A333,A337,GOBOARD2:5;
                 1 in dom g2 by A333,A344,FINSEQ_3:27;
              then A346: g2/.1 in rng g2 by PARTFUN2:4;
              then g2/.1 in lk by A293,A310;
              then consider u1 be Point of TOP-REAL 2 such that
              A347: g2/.1=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2;
                 ppi in LSeg(ppi,pj) by TOPREAL1:6;
              then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1)
                by A294,A310,A327,A329,A332,A343,A345,A346,A347,TOPREAL1:12
,def 5;
              then A348: LSeg(g,n) /\ LSeg(g,n+1) c= {g/.(n+1)}
               by A47,A339,A340,A342,A343,XBOOLE_1:27;
                 g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                by A327,A329,A331,A332,TOPREAL1:27;
              then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;
              then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
              hence thesis by A348,XBOOLE_0:def 10;
             end;
             suppose len g1<>n+1; then len g1<n+1 by A336,REAL_1:def 5;
              then A349: len g1<=n by NAT_1:38;
              then reconsider n1=n-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A350: len g1=n;
                   1<=len g1 by A14,A16,A36,XREAL_1:2;
                then len g1 in dom g1 by FINSEQ_3:27;
                then A351: g/.n=f1/.len f1 by A35,A350,FINSEQ_4:83
                .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A352:             2 <= len g2 by A327,A333,A350,XREAL_1:8;
                then 1 <= len g2 by XREAL_1:2;
                then A353: g/.(n+1)=g2/.1 by A350,GOBOARD2:5;
                A354: g/.(n+2)=g2/.2 by A350,A352,GOBOARD2:5;
                    1<=len g2 by A352,XREAL_1:2;
                then A355: 1 in dom g2 & 2 in dom g2 by A352,FINSEQ_3:27;
                then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                then A356: g2/.1 in lk & g2/.2 in lk by A293,A310;
                then consider u1 be Point of TOP-REAL 2 such that
                A357: g2/.1=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2;
                consider u2 be Point of TOP-REAL 2 such that
          A358: g2/.2=u2 & u2`1=ppi`1 & ppi`2<=u2`2 & u2`2<=pj`2 by A356;
                A359: u1`2<u2`2 by A306,A355,A357,A358;
                then A360: u1`2<=u2`2 & ppi`2<u2`2 & u2=|[u2`1,u2`2]|
                  by A357,XREAL_1:2,EUCLID:57;
                set lg = {w where w is Point of TOP-REAL 2 :
                          w`1=ppi`1 & ppi`2<=w`2 & w`2<=u2`2};
                A361: u1 in lg by A357,A359;
                A362: LSeg(g,n)=LSeg(ppi,u1) & LSeg(g,n+1)=LSeg(u1,u2)
               by A327,A329,A331,A332,A351,A353,A354,A357,A358,TOPREAL1:def 5;
                   u1 in LSeg(ppi,u2) by A292,A358,A360,A361,TOPREAL3:15;
                hence thesis by A353,A357,A362,TOPREAL1:14;
               end;
               suppose len g1<>n;
then A363:              len g1<n by A349,REAL_1:def 5;
                   n1 + len g1 = n;
then A364:            LSeg(g,n)=LSeg(g2,n1) by A331,A363,GOBOARD2:10;
A365:            len g1<n+1 by A330,A363,XREAL_1:2;
A366:            len g1+1<=n by A363,NAT_1:38;
A367:             n1+1+len g1 = n+1;
A368:             1<=n1+1 by NAT_1:29;
                   n1+1<=len g2 by A331,A333,A367,XREAL_1:8;
                then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                  by A328,A365,A366,A367,A368,GOBOARD2:5,10,XREAL_1:21;
                hence thesis by A314,A334,A364;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
         end;
            for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
         m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
         proof let n,m; assume that
          A369: m>n+1 and
          A370: n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
          A371: LSeg(g2,n) /\ LSeg(g2,m) <> {};
          A372: 1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
 len g2 by A370,FINSEQ_3:27;
          reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
           as Point of TOP-REAL 2;
          set lp = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                         p1`2<=w`2 & w`2<=p2`2},
              lq = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                         q1`2<=w`2 & w`2<=q2`2};
              m<m+1 & n<n+1 by NAT_1:38;
           then A373: p1`2<p2`2 & q1`2<q2`2 & p1`1=ppi`1 & p2`1=ppi`1 & q1`1=
ppi`1 &
           q2`1=ppi`1 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
           p2=|[p2`1,p2`2]| &
           q2=|[q2`1,q2`2]| by A301,A306,A370,EUCLID:57;
           A374: LSeg(g2,n) = LSeg(p1,p2) by A372,TOPREAL1:def 5
           .=lp by A373,TOPREAL3:15;
           A375: LSeg(g2,m) = LSeg(q1,q2) by A372,TOPREAL1:def 5
           .=lq by A373,TOPREAL3:15;
           consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
           A376: x in LSeg(g2,n) & x in LSeg(g2,m) by A371,XBOOLE_0:def 3;
then A377:           ex tn be Point of TOP-REAL 2 st
 tn=x & tn`1=ppi`1 & p1`2<=tn`2 & tn`2<=p2`2 by A374;
A378:           ex tm be Point of TOP-REAL 2 st
 tm=x & tm`1=ppi`1 & q1`2<=tm`2 & tm`2<=q2`2 by A375,A376;
               p2`2<q1`2 by A306,A369,A370;
            hence contradiction by A377,A378,XREAL_1:2;
         end;
then A379:    g2 is s.n.c. by GOBOARD2:6;
        A380: L~g2 c= LSeg(f,k)
         proof
          set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; let x; assume
             x in L~g2; then x in union ls;
          then consider X be set such that
          A381: x in X & X in ls by TARSKI:def 4;
          consider m such that
          A382: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A381;
              m in dom g2 & m+1 in dom g2 by A382,GOBOARD2:3;
          then A383: g2/.m in rng g2 & g2/.(m+1) in rng g2
           by PARTFUN2:4;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          A384: LSeg(q1,q2) c= LSeg(ppi,pj) by A294,A310,A383,TOPREAL1:12;
             LSeg(g2,m)=LSeg(q1,q2) by A382,TOPREAL1:def 5;
          hence thesis by A294,A381,A382,A384;
         end;
        A385: not f/.k in L~g2
         proof set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; assume
             f/.k in L~g2; then f/.k in union ls;
          then consider X be set such that
          A386: f/.k in X & X in ls by TARSKI:def 4;
          consider m such that
          A387: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A386;
          A388: m in dom g2 & m+1 in dom g2 &
          m<m+1 by A387,GOBOARD2:3,NAT_1:38;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          set lq={w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                       q1`2<=w`2 & w`2<=q2`2};
          A389: q1`1=ppi`1 & q2`1=ppi`1 & q1`2<q2`2 & q1=|[q1`1,q1`2]|
          & q2=|[q2`1,q2`2]| by A301,A306,A388,EUCLID:57;
             LSeg(g2,m)=LSeg(q1,q2) by A387,TOPREAL1:def 5
          .=lq by A389,TOPREAL3:15;
          then ex p st p=f/.k & p`1=ppi`1 & q1`2<=p`2 & p`2<=q2`2 by A386,A387
;
          hence contradiction by A47,A301,A388;
         end;
        A390: L~g1 /\ L~g2 = {}
         proof
           per cases;
           suppose k=1; hence thesis by A37;
           end;
           suppose k<>1; then 1<k by A14,REAL_1:def 5;
            then L~g1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,A33,GOBOARD2:9;
            then A391: L~g1 /\ L~g2 c= {f/.k} by A380,XBOOLE_1:26;
                now consider x being Element of L~g1 /\ L~g2;
              assume L~g1 /\ L~g2 <> {};
              then x in {f/.k} & x in L~g2 by A391,TARSKI:def 3,XBOOLE_0:def 3
;
              hence contradiction by A385,TARSKI:def 1;
             end;
            hence thesis;
         end;
         end;
           for n,m st m>n+1 & n in dom g &
        n+1 in dom g & m in dom g & m+1 in dom g
         holds LSeg(g,n) misses LSeg(g,m)
         proof let n,m; assume that
          A392: m>n+1 and
          A393: n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
          A394: 1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
          m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
            by A393,FINSEQ_1:35,FINSEQ_3:27,NAT_1:29;
          set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
              l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
             i2+1<=j2 by A280,NAT_1:38;
          then A395: 1<=l by XREAL_1:21;
          then A396: 1 in dom g2 by A281,FINSEQ_3:27;
          reconsider qq=g2/.1 as Point of TOP-REAL 2;
          set ql={z where z is Point of TOP-REAL 2: z`1=ppi`1 &
                     ppi`2<=z`2 & z`2<=qq`2};
          A397: 1<=len g1 by A14,A16,A36,XREAL_1:2;
           then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
          then A398: g/.len g1=g1/.len g1 by FINSEQ_4:83
             .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
          A399: len g1<len g1 +1 & len g1+1<=len g
            by A281,A394,A395,NAT_1:38,XREAL_1:9;
          A400: g/.(len g1+1)=qq by A281,A395,GOBOARD2:5;
          A401: qq`1=ppi`1 & qq`2<=pj`2 & qq`2>ppi`2 & qq=|[qq`1,qq`2]|
           by A301,A396,EUCLID:57;
    A402: LSeg(g,len g1)=LSeg(ppi,qq) by A397,A398,A399,A400,TOPREAL1:def 5
           .= ql by A292,A401,TOPREAL3:15;
            A403: n+1<=m+1 by A392,A394,XREAL_1:2;
                now per cases;
             suppose A404: m+1<=len g1;
              then A405: m<=len g1 & n+1<=len g1 by A394,A403,XREAL_1:2;
              then n<=len g1 by A394,XREAL_1:2;
              then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
               by A394,A404,A405,FINSEQ_3:27;
              then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m)
               by TOPREAL3:25;
              hence thesis by A31,A392,TOPREAL1:def 9;
             end;
             suppose len g1<m+1;
              then A406: len g1<=m by NAT_1:38;
              then reconsider m1=m-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A407: m=len g1;
                    now assume A408: k=1;
                     1<len g1 by A392,A394,A407,XREAL_1:2;
                  then 1+1<=len g1 by NAT_1:38;
                  hence contradiction by A37,A408,TOPREAL1:29;
                 end;
                then 1<k by A14,REAL_1:def 5;
                then A409: L~f1 /\ LSeg(f,k) ={f/.k} by A5,A8,A9,GOBOARD2:9;
                   n<=len g1 by A392,A394,A407,XREAL_1:2;
                then A410: n in dom g1 & n+1 in dom g1
                by A392,A394,A407,FINSEQ_3:27;
                then A411: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                then LSeg(g,n) in l1 by A392,A394,A407;
                then A412: LSeg(g,n) c= L~f1 by A33,ZFMISC_1:92;
                   LSeg(g,m) c= LSeg(f,k)
                 proof let x; assume x in LSeg(g,m);
                  then consider px be Point of TOP-REAL 2 such that
          A413: px=x & px`1=ppi`1 & ppi`2<=px`2 & px`2<= qq`2 by A402,A407;
                     pj`2>=px`2 by A401,A413,XREAL_1:2;
                  hence thesis by A293,A413;
                 end;
                then A414: LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                 by A409,A412,XBOOLE_1:27;
                    now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                  assume LSeg(g,n)/\ LSeg(g,m)<>{};
                  then A415: x in LSeg(g,n) & x in {f/.k}
                  by A414,TARSKI:def 3,XBOOLE_0:def 3;
                  then A416: x=f/.k by TARSKI:def 1;
                     f/.k=g1/.len g1 by A15,A16,A18,A35,FINSEQ_4:86;
                  hence contradiction by A29,A30,A31,A392,A407,A410,A411,A415
,A416,GOBOARD2:7;
                 end;
                hence thesis by XBOOLE_0:def 7;
               end;
               suppose
              m<>len g1;
                then A417: len g1<m & m+1=m1+1+len g1
                 by A406,REAL_1:def 5;
                   m = m1+len g1;
                then A418: LSeg(g,m)=LSeg(g2,m1) by A394,A417,GOBOARD2:10;
                   m1+1<=len g2 & len g1+1<=
m by A394,A417,NAT_1:38,XREAL_1:8;
                then A419: 1<=m1 & m1+1 <= len g2 by XREAL_1:21;
                then LSeg(g,m) in l2 by A418;
                then A420: LSeg(g,m) c= L~g2 by ZFMISC_1:92;
                    now per cases;
                 suppose A421: n+1<=len g1;
                  then n<=len g1 by A394,XREAL_1:2;
                  then n in dom g1 & n+1 in dom g1 by A394,A421,FINSEQ_3:27;
                   then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                  then LSeg(g,n) in l1 by A394,A421;
                  then LSeg(g,n) c= L~g1 by ZFMISC_1:92;
                  then LSeg(g,n) /\ LSeg(g,m) c= {} by A390,A420,XBOOLE_1:27;
                  then LSeg(g,n) /\ LSeg(g,m) = {} by XBOOLE_1:3;
                  hence thesis by XBOOLE_0:def 7;
                 end;
                 suppose len g1<n+1;
                  then A422: len g1<=n by NAT_1:38;
                  then reconsider n1=n-len g1 as Nat by INT_1:18;
A423:               n - len g1 + 1 = n + 1 - len g1;
A424:               n = n1 + len g1;
                      now per cases;
                   suppose A425: len g1=n;
                        now consider x being
                      Element of LSeg(g,n) /\ LSeg(g,m);
                      assume LSeg(g,n) /\ LSeg(g,m)<>{};
                then A426: x in LSeg(g,n) & x in LSeg(g,m) by XBOOLE_0:def 3;
then A427:                      ex qx be Point of TOP-REAL 2 st
                      qx=x & qx`1=ppi`1 & ppi`2<=qx`2 & qx`2<=qq`2
                      by A402,A425;
                      A428: m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                        by A419,GOBOARD2:3,NAT_1:38;
                      reconsider q1=g2/.m1, q2=g2/.(m1+1)
                       as Point of TOP-REAL 2;
                      set q1l={v where v is Point of TOP-REAL 2: v`1=ppi`1 &
                      q1`2<=v`2 & v`2<=q2`2};
A429: q1`1=ppi`1 & q2`1=ppi`1 & q1`2<q2`2 & q1=|[q1`1,q1`2]|&
                      q2=|[q2`1,q2`2]| by A301,A306,A428,EUCLID:57;
                         m1 > n1 + 1 & n1 + 1 >=
 1 by A392,A423,NAT_1:29,XREAL_1:11;
then A430:                   m1 > 1 by XREAL_1:2;
                         LSeg(g2,m1)=LSeg(q1,q2) by A419,TOPREAL1:def 5
                      .=q1l by A429,TOPREAL3:15;
then A431:                      ex qy be Point of TOP-REAL 2 st
 qy=x & qy`1=ppi`1 & q1`2<=qy`2 & qy`2<=q2`2 by A418,A426;
                         qq`2 < q1`2 by A306,A396,A428,A430;
                      hence contradiction by A427,A431,XREAL_1:2;
                     end;
                    hence thesis by XBOOLE_0:def 7;
                   end;
                   suppose n<>len g1;
                    then len g1<n by A422,REAL_1:def 5;
                    then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                     by A392,A394,A423,A424,GOBOARD2:10,XREAL_1:11;
                    hence thesis by A379,A418,TOPREAL1:def 9;
                   end;
                   end;
                  hence thesis;
                 end;
                 end;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
        hence g is s.n.c. by GOBOARD2:6;
        A432: g2 is special
         proof let n;
          set p = g2/.n, q = g2/.(n+1);
         assume 1<=n & n+1 <= len g2;
          then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
          then p`1=ppi`1 & q`1=ppi`1 by A301;
          hence p`1=q`1 or p`2=q`2;
         end;
            now
          set p=g1/.len g1, q=g2/.1;
             i2+1<=j2 by A280,NAT_1:38;
          then 1<=l by XREAL_1:21;
          then 1 in dom g2 by A281,FINSEQ_3:27;
           then q`1=ppi`1 by A301;
          hence p`1=q`1 or p`2=q`2 by A15,A16,A18,A35,A47,FINSEQ_4:86;
         end;
        hence g is special by A32,A432,GOBOARD2:13;
        thus L~g=L~f
         proof
          set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
              lf = {LSeg(f,j): 1<=j & j+1 <= len f};
          A433: len g = len g1 + len g2 by FINSEQ_1:35;
          A434: now let j; assume
            A435: len g1<=j & j<=len g;
            then reconsider w = j-len g1 as Nat by INT_1:18;
            let p such that
            A436: p=g/.j;
             per cases;
             suppose A437: j=len g1;
                 1<=len g1 by A14,A16,A36,XREAL_1:2;
              then len g1 in dom g1 by FINSEQ_3:27;
              then A438: g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
              .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
              hence p`1=G*(i1,i2)`1 by A436,A437;
              thus G*(i1,i2)`2<=p`2 & p`2<=G*
(i1,j2)`2 by A51,A55,A59,A60,A62,A280,A291,A436,A437,A438,GOBOARD1:def 1;
                  dom l1 = Seg len l1 by FINSEQ_1:def 3;
              hence p in rng l1 by A51,A62,A290,A436,A437,A438,PARTFUN2:4;
             end;
             suppose j<>len g1;
then A439:           len g1 < j by A435,REAL_1:def 5;
A440:           j = w + len g1;
                  len g1 + 1<=j by A439,NAT_1:38;
then A441:           1<=w & w<=len g2 by A433,A435,XREAL_1:21,XREAL_1:22;
then A442:          g/.j=g2/.w by A440,GOBOARD2:5;
                 w in dom g2 by A441,FINSEQ_3:27;
              hence p`1=ppi`1 & ppi`2<=p`2 & p`2<=
              pj`2 & p in rng l1 by A301,A436,A442;
           end;
           end;
          thus L~g c= L~f
           proof let x; assume x in L~g;
            then x in union lg;
            then consider X be set such that
            A443: x in X & X in lg by TARSKI:def 4;
            consider i such that
            A444: X=LSeg(g,i) & 1<=i & i+1 <= len g by A443;
             per cases;
             suppose A445: i+1 <= len g1;
              then i<=i+1 & i+1<=len g1 by NAT_1:29;
              then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A444,XREAL_1:2;
              then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
              then X=LSeg(g1,i) by A444,TOPREAL3:25;
              then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A444,A445;
              then x in union {LSeg(g1,j): 1<=j & j+1 <= len g1}
                by A443,TARSKI:def 4;
              then x in L~f1 & L~f1 c= L~f by A33,TOPREAL3:27;
              hence thesis;
             end;
             suppose A446: i+1 > len g1;
              then A447: len g1<=i & i<=i+1 & i+1<=len g by A444,NAT_1:38;
              A448: 1<=i+1 & len g1<=i+1 & i<=len g by A444,A446,NAT_1:38;
              reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
        A449: q1`1=ppi`1 & ppi`2<=q1`2 & q1`2<=pj`2 & q2`1=ppi`1 & ppi`2<=
q2`2 &
                  q2`2<=pj`2 by A434,A447,A448;
              then A450: q1=|[q1`1,q1`2]| & q2=|[q1`1,q2`2]| by EUCLID:57;
              A451: LSeg(g,i)=LSeg(q2,q1) by A444,TOPREAL1:def 5;
                  now per cases by XREAL_1:1;
               suppose q1`2>q2`2;
                then LSeg(g,i)={p2: p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2}
                  by A450,A451,TOPREAL3:15;
                then consider p2 such that
                A452: p2=x & p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2 by A443,A444;
                   ppi`2<=p2`2 & p2`2<=pj`2 by A449,A452,XREAL_1:2;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A293,A449,A452;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               suppose q1`2=q2`2;
                then LSeg(g,i)={q1} by A450,A451,TOPREAL1:7;
                then x=q1 by A443,A444,TARSKI:def 1;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A293,A449;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               suppose q1`2<q2`2;
                then LSeg(g,i)= {p1: p1`1=q1`1 & q1`2<=p1`2 & p1`2<=q2`2}
                  by A450,A451,TOPREAL3:15;
                then consider p2 such that
                A453: p2=x & p2`1=q1`1 & q1`2<=p2`2 & p2`2<=q2`2 by A443,A444;
                   ppi`2<=p2`2 & p2`2<=pj`2 by A449,A453,XREAL_1:2;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A293,A449,A453;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               end;
              hence thesis;
           end;
           end;
          let x; assume x in L~f;
          then A454: x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
              now per cases by A454,XBOOLE_0:def 2;
           suppose x in L~f1; then x in L~g1 & L~g1 c= L~g
            by A33,GOBOARD2:11;
            hence x in L~g;
           end;
           suppose x in LSeg(f,k);
            then consider p1 such that
            A455: p1=x & p1`1=ppi`1 & ppi`2<=p1`2 & p1`2<=pj`2 by A293;
            defpred P2[Nat] means
            len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`2<=p1`2;
            A456: now take n=len g1;
              thus P2[n]
              proof
               thus len g1<=n & n<=len g by A433,REAL_2:173;
               let q such that
               A457: q=g/.n;
                  1<=len g1 by A14,A16,A36,XREAL_1:2;
               then len g1 in dom g1 by FINSEQ_3:27;
               then q=f1/.len f1
                by A35,A457,FINSEQ_4:83
               .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
               hence q`2<=p1`2 by A455;
              end;
             end;
            A458: for n holds P2[n] implies n<=len g;
            consider ma be Nat such that
            A459: P2[ma] & for n st P2[n] holds n<=ma from NAT_1:sch 6
(A458,A456);
                now per cases;
             suppose A460: ma=len g;
                 i2+1<=j2 by A280,NAT_1:38;
              then A461: 1<=l by XREAL_1:21;
              then A462: l in dom g2 & i2+l=j2 by A281,FINSEQ_3:27;
              then A463: g/.ma=g2/.l by A281,A433,A460,FINSEQ_4:84
               .= pj by A281,A462;
              then pj`2<=p1`2 by A459;
              then A464: p1`2=pj`2 by A455,XREAL_1:1;
              A465: ma-1<=len g & len g1+1<=ma
                by A281,A433,A460,A461,XREAL_1:45,XREAL_1:9;
              then A466: len g1<=ma-1 & 0<=len g1 by XREAL_1:21;
then A467:           0+1<=ma by XREAL_1:21;
              reconsider m1=ma-1 as Nat by A467,INT_1:18;
                 1<=len g1 by A14,A16,A36,XREAL_1:2;
              then A468: 1<=m1 by A466,XREAL_1:2;
              reconsider q=g/.m1 as Point of TOP-REAL 2;
              A469: q`1=ppi`1 & q`2<=pj`2 & q=|[q`1,q`2]| & m1+1=ma
               by A434,A465,A466,EUCLID:57;
              then A470: LSeg(g,m1)=LSeg(q,pj)
               by A460,A463,A468,TOPREAL1:def 5;
              set lq={e where e is Point of TOP-REAL 2: e`1=ppi`1 & q`2<=e`2 &
                      e`2<=pj`2};
              LSeg(g,m1)=lq by A292,A469,A470,TOPREAL3:15;
              then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
              by A455,A460,A464,A468,A469;
              then x in union lg by A455,TARSKI:def 4;
              hence x in L~g;
             end;
             suppose ma<>len g;
              then ma<len g by A459,REAL_1:def 5;
              then A471: ma+1<=len g & k<=ma & ma<=ma+1
                by A16,A36,A459,XREAL_1:2,NAT_1:38;
              then A472: 1<=ma & len g1<=ma+1 by A14,A459,XREAL_1:2;
              reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
              A473: qa`2<=p1`2 by A459;
               A474: now assume qa1`2<=p1`2;
                 then for q holds q=g/.(ma+1) implies q`2<=p1`2;
                then ma+1<=ma by A459,A471,A472;
                hence contradiction by REAL_2:174;
               end;
              then A475: qa`2<qa1`2 & qa`2<=p1`2 & p1`2<=qa1`2 &
              qa`1=ppi`1 & qa1 `1 = ppi`1
              by A434,A459,A471,A472,A473,XREAL_1:2;
              set lma = {p2: p2`1=ppi`1 & qa`2<=p2`2 & p2`2<=qa1`2};
              A476: qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                 LSeg(g,ma)=LSeg(qa,qa1) by A471,A472,TOPREAL1:def 5
              .= lma by A475,A476,TOPREAL3:15;
              then x in LSeg(g,ma) & LSeg(g,ma) in lg by A455,A471,A472,A473
,A474;
              then x in union lg by TARSKI:def 4;
              hence x in L~g;
             end;
             end;
            hence x in L~g;
           end;
           end;
          hence x in L~g;
         end;
           1<=len g1 by A14,A16,A36,XREAL_1:2;
        then 1 in dom g1 by FINSEQ_3:27;
        hence g/.1=f1/.1 by A34,FINSEQ_4:83
        .=f/.1 by A15,A19,FINSEQ_4:86;
           i2+1<=j2 by A280,NAT_1:38;
        then A477: 1<=l by XREAL_1:21;
        then A478: l in dom g2 & len g=len g1 + l by A281,FINSEQ_1:35
,FINSEQ_3:27;
        hence g/.len g=g2/.l by FINSEQ_4:84
        .=G*(i1,i2+l) by A281,A478
        .=f/.len f by A5,A49,A71;
        thus len f<=len g by A5,A16,A36,A477,A478,XREAL_1:9;
        end;
        end;
       hence thesis;
     end;
     suppose A479: i2=j2;
      set ppi = G*(i1,i2), pj = G*(j1,i2);
          now per cases by XREAL_1:1;
       case A480: i1>j1;
        then reconsider l=i1-j1 as Nat by INT_1:18;
        A481: now let n; assume n in Seg l;
          then A482: 1<=n & n<=l & 0<=j1 by FINSEQ_1:3;
          l<=i1 by XREAL_1:45;
          then n<=i1 by A482,XREAL_1:2;
          then reconsider w=i1-n as Nat by INT_1:18;
             0<=n & i1-l<=i1-n by A482,REAL_1:92;
          then i1-n<=i1 & i1<=len G & j1<=w & 1<=j1
            by A51,FINSEQ_3:27,XREAL_1:45;
          then 1<=w & w<=len G by XREAL_1:2;
          then w in dom G by FINSEQ_3:27;
          hence i1-n is Nat & [i1-n,i2] in Indices G & i1-n in dom G
            by A50,A51,ZFMISC_1:106;
         end;
        defpred P1[Nat,set] means for m st m=i1-$1 holds $2=G*(m,i2);
        A483: now let n; assume n in Seg l;
          then reconsider m=i1-n as Nat by A481;
          take p=G*(m,i2);
          thus P1[n,p];
         end;
        consider g2 such that
        A484: len g2 = l & for n st n in Seg l holds P1[n,g2/.n]
         from GOBOARD1:sch 1(A483);
A485:     dom g2=Seg l by A484,FINSEQ_1:def 3;
        take g=g1^g2;
            now let n; assume A486: n in dom g2;
          then reconsider m=i1-n as Nat by A481,A485;
          take m,k=i2;
          thus [m,k] in Indices G & g2/.n=G*(m,k) by A481,A484,A485,A486;
         end;
        then A487: for n st n in dom g ex i,j st [i,j] in Indices G &
        g/.n=G*(i,j) by A53,GOBOARD1:39;
        A488: now let n; assume
A489:          n in dom g2 & n+1 in dom g2;
          then A490: [i1-n,i2] in Indices G
           & [i1-(n+1),i2] in Indices G by A481,A485;
          reconsider m1=i1-n ,m2=i1-(n+1) as Nat by A481,A485,A489;
          A491: g2/.n=G*(m1,i2) & g2/.(n+1)=G*(m2,i2) by A484,A485,A489;
          let l1,l2,l3,l4 be Nat; assume
             [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2) &
           g2/.(n+1)=G*(l3,l4);
           then l1=m1 & l2=i2 & l3=m2 & l4=i2 by A490,A491,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)= abs(i1-n-(i1-(n+1)))+0 by ABSVALUE:7
           .= 1 by ABSVALUE:def 1;
         end;
         now let l1,l2,l3,l4 be Nat; assume
A492: [l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,l2) &
          g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
          then A493: [i1-1,i2] in Indices G
           & f1/.len f1=f/.k by A15,A16,A18,A481,A485,FINSEQ_4:86;
          reconsider m1=i1-1 as Nat by A481,A485,A492;
             g2/.1=G*(m1,i2) by A484,A485,A492;
           then l1=i1 & l2=i2 & l3=m1 & l4=i2
            by A35,A47,A492,A493,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)=abs(i1-(i1-1))+0 by ABSVALUE:7
          .=1 by ABSVALUE:def 1;
         end;
        then for n st n in dom g & n+1 in dom g holds
         for m,k,i,j st [m,k] in Indices G &
         [i,j] in Indices G & g/.n=G*(m,k) &
          g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A488,GOBOARD1:40;
        hence g is_sequence_on G by A487,GOBOARD1:def 11;
        set
        lk={w where w is Point of TOP-REAL 2: w`2=ppi`2 & pj`1<=w`1 & w`1<=
ppi`1};
           c1/.i1=c1.i1 & c1/.j1=c1.j1 by A51,A70,FINSEQ_4:def 4;
        then A494: c1/.i1=ppi & c1/.j1=pj by A51,MATRIX_1:def 9;
        then A495: y2.i1=ppi`2 & y2.j1=pj`2 & x2.i1=ppi`1 & x2.j1=pj`1 & len g2
=l
          by A51,A52,A64,A65,A66,A68,A69,A484,GOBOARD1:def 3,def 4;
        then A496: pj`1<ppi`1 & ppi`2=pj`2 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj
`2]|
        by A51,A52,A56,A57,A64,A65,A66,A68,A69,A480,EUCLID:57,GOBOARD1:def 1
,def 2;
        A497: LSeg(f,k)=LSeg(pj,ppi) by A14,A47,A49,A479,TOPREAL1:def 5
        .= lk by A496,TOPREAL3:16;
        A498: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A479,TOPREAL1:def 5;
            now let n,m; assume
          A499: n in dom g2 & m in dom g2 & n<>m;
          then A500: [i1-n,i2] in Indices G& [i1-m,i2] in Indices G by A481
,A485;
          reconsider n1=i1-n, m1=i1-m as Nat by A481,A485,A499;
          A501: g2/.n=G*(n1,i2) & g2/.m=G*(m1,i2) by A484,A485,A499;
          assume g2/.n=g2/.m;
          then n1=m1 by A500,A501,GOBOARD1:21;
          hence contradiction by A499;
         end;
         then for n,m st n in dom g2 & m in dom g2 &
         g2/.n = g2/.m holds n = m;
then A502: g2 is one-to-one & Seg len g2=dom g2 by FINSEQ_1:def 3,PARTFUN2:16;
        A503: not f/.k in rng g2
         proof assume f/.k in rng g2;
          then consider n such that
          A504: n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
          A505: [i1-n,i2] in Indices G
            by A481,A484,A502,A504;
          reconsider n1=i1-n as Nat by A481,A484,A502,A504;
             g2/.n=G*(n1,i2) & 0+1<=n by A484,A502,A504,FINSEQ_1:3;
           then n1=i1 & 0<n by A47,A504,A505,GOBOARD1:21;
          hence contradiction;
         end;
        A506: now let n,p; assume
          A507: n in dom g2 & g2/.n=p;
          then A508: P1[n,g2/.n] &
          1<=n & n<=len g2& i1-n in dom G by A481,A484,A502,FINSEQ_1:3;
          reconsider n1=i1-n as Nat by A481,A485,A507;
          set pn = G*(n1,i2);
             c1/.n1=c1.n1 by A70,A508,FINSEQ_4:def 4;
          then A509: g2/.n=pn & c1/.n1=pn & 0<=n & i1-len g2<=n1
            by A508,MATRIX_1:def 9,REAL_1:92;
          then A510: y2.n1=pn`2 & y2.n1=y2.i1 & x2.n1=pn`1 & n1<=i1 & j1<=n1
           by A51,A52,A57,A64,A65,A66,A68,A69,A484,A508,GOBOARD1:def 2,def 3
,def 4,REAL_2:173;
          hence p`2=ppi`2 & pj`1<=p`1 & p`1<=ppi`1
            by A51,A52,A56,A64,A66,A69,A495,A507,A508,A509,GOBOARD2:18;
          thus p in rng c1 by A70,A507,A508,A509,PARTFUN2:4;
             0<n by A508;
          then n1<i1 by XREAL_1:46;
          hence p`1<ppi`1
           by A51,A52,A56,A64,A66,A69,A495,A507,A508,A509,A510,GOBOARD1:def 1;
         end;
        A511: now let n,m,p,q; assume
          A512: n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
          then A513: P1[n,g2/.n] & i1-n in dom G &
              P1[m,g2/.m] & i1-m in dom G by A481,A484,A485;
          reconsider n1=i1-n, m1=i1-m as Nat by A481,A485,A512;
          set pn = G*(n1,i2), pm = G*(m1,i2);
             c1/.n1=c1.n1 & c1/.m1 = c1.m1 by A70,A513,FINSEQ_4:def 4;
          then A514: g2/.n=pn & c1/.n1=pn & g2/.m=pm & c1/.m1=pm & m1<n1
            by A512,A513,MATRIX_1:def 9,REAL_1:92;
          then x2.n1=pn`1 & x2.m1=pm`1 by A67,A70,A513,GOBOARD1:def 3;
          hence q`1<p`1 by A56,A67,A70,A512,A513,A514,GOBOARD1:def 1;
         end;
        A515: rng g2 c= LSeg(f,k)
         proof let x; assume x in rng g2;
          then consider n such that
          A516: n in dom g2 & g2/.n=x by PARTFUN2:4;
          reconsider n1=i1-n as Nat by A481,A484,A502,A516;
          set pn = G*(n1,i2);
          A517: g2/.n=pn by A484,A502,A516;
          then pn`2=ppi`2 & pj`1<=pn`1 & pn`1<=ppi`1 by A506,A516;
          hence x in LSeg(f,k) by A497,A516,A517;
         end;
           rng g1 /\ rng g2 = {}
         proof consider x being Element of rng g1 /\ rng g2;
          assume not thesis;
          then A518: x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
              now per cases by A14,REAL_1:def 5;
           suppose k=1;
            hence contradiction by A37,A503,A518,TARSKI:def 1;
           end;
           suppose 1<k;
            then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A44,A515,A518,GOBOARD2:9,XBOOLE_0:def 3;
            hence contradiction by A503,A518,TARSKI:def 1;
           end;
           end;
          hence contradiction;
         end;
        then rng g1 misses rng g2 by XBOOLE_0:def 7;
        hence g is one-to-one
         by A29,A502,FINSEQ_3:98;
        A519: for n st 1<=n & n+2 <= len g2 holds
             LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
         proof let n; assume
          A520: 1<=n & n+2 <= len g2;
          then A521: n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
          then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
          g2/.(n+2) in rng g2 by PARTFUN2:4;
          then A522: g2/.n in lk & g2/.(n+1) in lk &
          g2/.(n+2) in lk by A497,A515;
          then consider u be Point of TOP-REAL 2 such that
          A523: g2/.n=u & u`2=ppi`2 & pj`1<=u`1 & u`1<=ppi`1;
          consider u1 be Point of TOP-REAL 2 such that
          A524: g2/.(n+1)=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1 by A522;
          consider u2 be Point of TOP-REAL 2 such that
          A525: g2/.(n+2)=u2 & u2`2=ppi`2 & pj`1<=u2`1 & u2`1<=ppi`1 by A522;
          set lg = {w where w is Point of TOP-REAL 2:
                     w`2=ppi`2 & u2`1<=w`1 & w`1<=u`1};
          A526: 1<= n+1 by NAT_1:29;
          A527: n+1+1 = n+(1+1);
             n+1 <= n+2 by XREAL_1:8;
          then n+1 <= len g2 by A520,XREAL_1:2;
          then A528: LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg(u1,u2) &
          LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
           by A520,A523,A524,A525,A526,A527,TOPREAL1:def 5;
             n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:38;
          then A529: u2`1<u1`1 & u1`1<u`1 by A511,A521,A523,A524,A525;
          then A530: u2`1<=u1`1 & u1`1<=u`1 & u2`1<u`1 by XREAL_1:2;
          A531: u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2]| by A524,A529,
EUCLID:57;
          then LSeg(g2/.n,g2/.(n+2))=lg by A523,A525,A530,TOPREAL3:16;
          hence thesis by A524,A528,A531,TOPREAL1:14;
         end;
        thus g is unfolded
         proof let n; assume
          A532: 1<=n & n+2 <= len g;
then A533:           n+1+1<=len g;
          A534: 1 <= n+1 by NAT_1:29;
          A535: n<=n+1 & n+1<=n+1+1 by NAT_1:29;
then A536:      n+1 <= len g by A532,XREAL_1:2;
A537:      n+(1+1)=n+1+1;
A538:      len g=len g1+len g2 by FINSEQ_1:35;
              n+2-len g1 = n-len g1 +2;
          then A539: n-len g1 + 2 <= len g2 by A532,A538,XREAL_1:22;
           per cases;
           suppose A540: n+2 <= len g1;
        then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
              by A532,GOBOARD2:4;
            then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
            g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
            hence thesis by A30,A532,A540,TOPREAL1:def 8;
           end;
           suppose len g1 < n+2;
            then len g1+1<=n+2 by NAT_1:38;
            then A541: len g1<=n+2-1 by XREAL_1:21;
             thus thesis
             proof per cases;
             suppose A542: len g1=n+1;
                  now assume A543: k=1;
                   1<len g1 by A532,A542,NAT_1:38;
                then 1+1<=len g1 by NAT_1:38;
                hence contradiction by A37,A543,TOPREAL1:29;
               end;
              then A544: 1<k & LSeg(g1,n) c= L~f1
                 by A14,A33,REAL_1:def 5,TOPREAL3:26;
              then A545: L~f1 /\ LSeg(f,k)={f/.k}
               by A5,A8,A9,GOBOARD2:9;
                 1<=n+1 by NAT_1:29;
              then A546: n in dom g1 & n+1 in dom g1
              by A532,A535,A542,FINSEQ_3:27;
              then A547: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
              A548: g/.(n+1)=f1/.len f1
               by A35,A542,A546,FINSEQ_4:83
              .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                 1 <= len g2 by A532,A537,A538,A542,XREAL_1:8;
              then A549: g/.(n+2)=g2/.1 by A537,A542,GOBOARD2:5;
                 1<=len g-len g1 by A533,A542,XREAL_1:21;
              then 1 in dom g2 by A538,FINSEQ_3:27;
              then A550: g2/.1 in rng g2 by PARTFUN2:4;
              then g2/.1 in lk by A497,A515;
              then consider u1 be Point of TOP-REAL 2 such that
              A551: g2/.1=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1;
                 ppi in LSeg(ppi,pj) by TOPREAL1:6;
              then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1)
                by A498,A515,A532,A534,A537,A548,A549,A550,A551,TOPREAL1:12
,def 5;
              then A552: LSeg(g,n) /\ LSeg(g,n+1) c= {g/.(n+1)}
               by A47,A544,A545,A547,A548,XBOOLE_1:27;
                 g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                by A532,A534,A536,A537,TOPREAL1:27;
              then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;
              then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
              hence thesis by A552,XBOOLE_0:def 10;
             end;
             suppose len g1<>n+1; then len g1<n+1 by A541,REAL_1:def 5;
              then A553: len g1<=n by NAT_1:38;
              then reconsider n1=n-len g1 as Nat by INT_1:18;
              thus thesis
               proof per cases;
               suppose A554: len g1=n;
                   1<=len g1 by A14,A16,A36,XREAL_1:2;
                then len g1 in dom g1 by FINSEQ_3:27;
                then A555: g/.n=f1/.len f1 by A35,A554,FINSEQ_4:83
                .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A556:             2 <= len g2 by A532,A538,A554,XREAL_1:8;
                then 1<= len g2 by XREAL_1:2;
                then A557: g/.(n+1)=g2/.1 by A554,GOBOARD2:5;
                A558: g/.(n+2)=g2/.2 by A554,A556,GOBOARD2:5;
                   1<=len g2 by A556,XREAL_1:2;
                then A559: 1 in dom g2 & 2 in dom g2 by A556,FINSEQ_3:27;
                then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                then A560: g2/.1 in lk & g2/.2 in lk by A497,A515;
                then consider u1 be Point of TOP-REAL 2 such that
                A561: g2/.1=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1;
                consider u2 be Point of TOP-REAL 2 such that
                A562:
                g2/.2=u2 & u2`2=ppi`2 & pj`1<=u2`1 & u2`1<=ppi`1 by A560;
                A563: u2`1<u1`1 by A511,A559,A561,A562;
                then A564: u2`1<=u1`1 & u2`1<ppi`1 & u2=|[u2`1,u2`2]|
                  by A561,XREAL_1:2,EUCLID:57;
                set lg = {w where w is Point of TOP-REAL 2 :
                          w`2=ppi`2 & u2`1<=w`1 & w`1<=ppi`1};
                A565: u1 in lg by A561,A563;
          A566: LSeg(ppi,g2/.2)=LSeg(ppi,u2) & LSeg(g,n)=LSeg(ppi,u1) &
                LSeg(g,n+1)=LSeg(u1,u2)
               by A532,A534,A536,A537,A555,A557,A558,A561,A562,TOPREAL1:def 5;
                   LSeg(ppi,g2/.2)=lg by A496,A562,A564,TOPREAL3:16;
                hence thesis by A557,A561,A565,A566,TOPREAL1:14;
               end;
               suppose len g1<>n;
then A567:              len g1<n by A553,REAL_1:def 5;
                   n1 + len g1 = n;
then A568:            LSeg(g,n)=LSeg(g2,n1) by A536,A567,GOBOARD2:10;
A569:            len g1<n+1 by A535,A567,XREAL_1:2;
A570:            len g1+1<=n by A567,NAT_1:38;
A571:            n+1 = n1+1+len g1;
A572:             1<=n1+1 by NAT_1:29;
                 n1 + 1 + len g1 = n + 1;
                then n1+1 <= len g2 by A536,A538,XREAL_1:8;
                then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                  by A533,A569,A570,A571,A572,GOBOARD2:5,10,XREAL_1:21;
                hence thesis by A519,A539,A568;
               end;
               end;
             end;
             end;
         end;
         end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
           m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
         proof let n,m; assume that
          A573: m>n+1 and
          A574: n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
          A575: LSeg(g2,n) /\ LSeg(g2,m) <> {};
          A576: 1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
 len g2 by A574,FINSEQ_3:27;
          reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
           as Point of TOP-REAL 2;
          set lp = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                         p2`1<=w`1 & w`1<=p1`1},
              lq = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                         q2`1<=w`1 & w`1<=q1`1};
              m<m+1 & n<n+1 by NAT_1:38;
           then A577: p2`1<p1`1 & q2`1<q1`1 & p1`2=ppi`2 & p2`2=ppi`2 & q1`2=
ppi`2 &
           q2`2=ppi`2 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
           p2=|[p2`1,p2`2]| &
           q2=|[q2`1,q2`2]| by A506,A511,A574,EUCLID:57;
           A578: LSeg(g2,n) = LSeg(p2,p1) by A576,TOPREAL1:def 5
           .=lp by A577,TOPREAL3:16;
           A579: LSeg(g2,m) = LSeg(q2,q1) by A576,TOPREAL1:def 5
           .=lq by A577,TOPREAL3:16;
           consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
           A580: x in LSeg(g2,n) & x in LSeg(g2,m) by A575,XBOOLE_0:def 3;
then A581:           ex tn be Point of TOP-REAL 2 st
               tn=x & tn`2=ppi`2 & p2`1<=tn`1 & tn`1<=p1`1 by A578;
A582:           ex tm be Point of TOP-REAL 2 st
               tm=x & tm`2=ppi`2 & q2`1<=tm`1 & tm`1<=q1`1 by A579,A580;
               q1`1<p2`1 by A511,A573,A574;
            hence contradiction by A581,A582,XREAL_1:2;
         end;
then A583:    g2 is s.n.c. by GOBOARD2:6;
        A584: L~g2 c= LSeg(f,k)
         proof
          set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; let x; assume
             x in L~g2; then x in union ls;
          then consider X be set such that
          A585: x in X & X in ls by TARSKI:def 4;
          consider m such that
          A586: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A585;
              m in dom g2 & m+1 in dom g2 by A586,GOBOARD2:3;
          then A587: g2/.m in rng g2 & g2/.(m+1) in rng g2
           by PARTFUN2:4;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          A588: LSeg(q1,q2) c= LSeg(ppi,pj) by A498,A515,A587,TOPREAL1:12;
             LSeg(g2,m)=LSeg(q1,q2) by A586,TOPREAL1:def 5;
          hence thesis by A498,A585,A586,A588;
         end;
        A589: not f/.k in L~g2
         proof set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; assume
             f/.k in L~g2; then f/.k in union ls;
          then consider X be set such that
          A590: f/.k in X & X in ls by TARSKI:def 4;
          consider m such that
          A591: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A590;
          A592: m in dom g2 & m+1 in dom g2 &
          m<m+1 by A591,GOBOARD2:3,NAT_1:38;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          set lq={w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                       q2`1<=w`1 & w`1<=q1`1};
          A593: q1`2=ppi`2 & q2`2=ppi`2 & q2`1<q1`1 & q1=|[q1`1,q1`2]|
          & q2=|[q2`1,q2`2]| by A506,A511,A592,EUCLID:57;
             LSeg(g2,m)=LSeg(q2,q1) by A591,TOPREAL1:def 5
          .=lq by A593,TOPREAL3:16;
          then ex p st p=f/.k & p`2=ppi`2 & q2`1<=p`1 & p`1<=q1`1 by A590,A591
;
          hence contradiction by A47,A506,A592;
         end;
        A594: L~g1 /\ L~g2 = {}
         proof
           per cases;
           suppose k=1; hence thesis by A37;
           end;
           suppose k<>1; then 1<k by A14,REAL_1:def 5;
            then L~g1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A33,GOBOARD2:9;
            then A595: L~g1 /\ L~g2 c= {f/.k} by A584,XBOOLE_1:26;
                now consider x being Element of L~g1 /\ L~g2;
              assume L~g1 /\ L~g2 <> {};
              then x in {f/.k} & x in L~g2 by A595,TARSKI:def 3,XBOOLE_0:def 3
;
              hence contradiction by A589,TARSKI:def 1;
             end;
            hence thesis;
         end;
         end;
           for n,m st m>n+1 & n in dom g & n+1 in dom g &
        m in dom g & m+1 in dom g
         holds LSeg(g,n) misses LSeg(g,m)
         proof let n,m; assume that
          A596: m>n+1 and
          A597: n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
          A598: 1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
          m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
            by A597,FINSEQ_1:35,FINSEQ_3:27,NAT_1:29;
          set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
              l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
             j1+1<=i1 by A480,NAT_1:38;
          then A599: 1<=l by XREAL_1:21;
          then A600: 1 in dom g2 by A484,FINSEQ_3:27;
          reconsider qq=g2/.1 as Point of TOP-REAL 2;
          set ql={z where z is Point of TOP-REAL 2: z`2=ppi`2 &
                     qq`1<=z`1 & z`1<=ppi`1};
          A601: 1<=len g1 by A14,A16,A36,XREAL_1:2;
           then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
          then A602: g/.len g1=g1/.len g1 by FINSEQ_4:83
             .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
          A603: len g1<len g1 +1 & len g1+1<=len g
            by A484,A598,A599,NAT_1:38,XREAL_1:9;
          A604: g/.(len g1+1)=qq by A484,A599,GOBOARD2:5;
          A605: qq`2=ppi`2 & pj`1<=qq`1 & qq`1<ppi`1 & qq=|[qq`1,qq`2]|
           by A506,A600,EUCLID:57;
    A606: LSeg(g,len g1)=LSeg(qq,ppi) by A601,A602,A603,A604,TOPREAL1:def 5
           .= ql by A496,A605,TOPREAL3:16;
            A607: n+1<=m+1 by A596,A598,XREAL_1:2;
                now per cases;
             suppose A608: m+1<=len g1;
              then A609: m<=len g1 & n+1<=len g1 by A598,A607,XREAL_1:2;
              then n<=len g1 by A598,XREAL_1:2;
              then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
               by A598,A608,A609,FINSEQ_3:27;
              then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m)
               by TOPREAL3:25;
              hence thesis by A31,A596,TOPREAL1:def 9;
             end;
             suppose len g1<m+1;
              then A610: len g1<=m by NAT_1:38;
              then reconsider m1=m-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A611: m=len g1;
                    now assume A612: k=1;
                     1<len g1 by A596,A598,A611,XREAL_1:2;
                  then 1+1<=len g1 by NAT_1:38;
                  hence contradiction by A37,A612,TOPREAL1:29;
                 end;
                then 1<k by A14,REAL_1:def 5;
                then A613: L~f1 /\ LSeg(f,k) ={f/.k}
                 by A5,A8,A9,GOBOARD2:9;
                   n<=len g1 by A596,A598,A611,XREAL_1:2;
                then A614: n in dom g1 & n+1 in dom g1
                by A596,A598,A611,FINSEQ_3:27;
                then A615: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                then LSeg(g,n) in l1 by A596,A598,A611;
                then A616: LSeg(g,n) c= L~f1
                 by A33,ZFMISC_1:92;
                   LSeg(g,m) c= LSeg(f,k)
                 proof let x; assume x in LSeg(g,m);
                  then consider px be Point of TOP-REAL 2 such that
                  A617: px=x & px`2=ppi`2 & qq`1<=px`1 & px`1<=
ppi`1 by A606,A611;
                     pj`1<=px`1 by A605,A617,XREAL_1:2;
                  hence thesis by A497,A617;
                 end;
                then A618: LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                 by A613,A616,XBOOLE_1:27;
                    now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                  assume
                   LSeg(g,n)/\ LSeg(g,m)<>{};
                  then A619: x in LSeg(g,n) & x in {f/.k}
                  by A618,TARSKI:def 3,XBOOLE_0:def 3;
                  then A620: x=f/.k by TARSKI:def 1;
                     f/.k=g1/.len g1
                   by A15,A16,A18,A35,FINSEQ_4:86;
                  hence contradiction
                  by A29,A30,A31,A596,A611,A614,A615,A619,A620,GOBOARD2:7;
                 end;
                hence thesis by XBOOLE_0:def 7;
               end;
               suppose
              m<>len g1;
                then A621: len g1<m & m+1=m1+1+len g1
                 by A610,REAL_1:def 5;
                   m = m1+len g1;
                then A622: LSeg(g,m)=LSeg(g2,m1) by A598,A621,GOBOARD2:10;
                   m1+1<=len g2 & len g1+1<=
m by A598,A621,NAT_1:38,XREAL_1:8;
                then A623: 1<=m1 & m1+1 <= len g2 by XREAL_1:21;
                then LSeg(g,m) in l2 by A622;
                then A624: LSeg(g,m) c= L~g2 by ZFMISC_1:92;
                    now per cases;
                 suppose A625: n+1<=len g1;
                  then n<=len g1 by A598,XREAL_1:2;
                  then n in dom g1 & n+1 in dom g1 by A598,A625,FINSEQ_3:27;
                   then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                  then LSeg(g,n) in l1 by A598,A625;
                  then LSeg(g,n) c= L~g1 by ZFMISC_1:92;
                  then LSeg(g,n) /\ LSeg(g,m) c= {} by A594,A624,XBOOLE_1:27;
                  then LSeg(g,n) /\ LSeg(g,m) = {} by XBOOLE_1:3;
                  hence thesis by XBOOLE_0:def 7;
                 end;
                 suppose len g1<n+1;
                  then A626: len g1<=n by NAT_1:38;
                  then reconsider n1=n-len g1 as Nat by INT_1:18;
A627:               n - len g1 + 1 = n + 1 - len g1;
A628:               n = n1 + len g1;
                      now per cases;
                   suppose A629: len g1=n;
                        now consider x being
                      Element of LSeg(g,n) /\ LSeg(g,m);
                      assume
                       LSeg(g,n) /\ LSeg(g,m)<>{};
                      then A630: x in LSeg(g,n) & x in LSeg(g,m)
                      by XBOOLE_0:def 3;
then A631:                    ex qx be Point of TOP-REAL 2 st
                         qx=x & qx`2=ppi`2 & qq`1<=qx`1 & qx`1<=
ppi`1 by A606,A629;
                      A632: m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                        by A623,GOBOARD2:3,NAT_1:38;
                      reconsider q1=g2/.m1, q2=g2/.(m1+1)
                       as Point of TOP-REAL 2;
                      set q1l={v where v is Point of TOP-REAL 2: v`2=ppi`2 &
                                 q2`1<=v`1 & v`1<=q1`1};
A633:       q1`2=ppi`2 & q2`2=ppi`2 & q2`1<q1`1 & q1=|[q1`1,q1`2]|&
                      q2=|[q2`1,q2`2]| by A506,A511,A632,EUCLID:57;
                         m1 > n1 + 1 & n1 + 1 >=
 1 by A596,A627,NAT_1:29,XREAL_1:11;
then A634:                   m1 > 1 by XREAL_1:2;
                         LSeg(g2,m1)=LSeg(q2,q1) by A623,TOPREAL1:def 5
                      .=q1l by A633,TOPREAL3:16;
then A635:                      ex qy be Point of TOP-REAL 2 st
                          qy=x & qy`2=ppi`2 & q2`1<=qy`1 & qy`1<=
q1`1 by A622,A630;
                         q1`1 < qq`1 by A511,A600,A632,A634;
                      hence contradiction by A631,A635,XREAL_1:2;
                     end;
                    hence thesis by XBOOLE_0:def 7;
                   end;
                   suppose n<>len g1;
                    then len g1<n by A626,REAL_1:def 5;
                    then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                     by A596,A598,A627,A628,GOBOARD2:10,XREAL_1:11;
                    hence thesis by A583,A622,TOPREAL1:def 9;
                   end;
                   end;
                  hence thesis;
                 end;
                 end;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
        hence g is s.n.c. by GOBOARD2:6;
        A636: g2 is special
        proof let n;
         set p = g2/.n, q = g2/.(n+1);
        assume
              1<=n & n+1 <= len g2;
          then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
          then p`2=ppi`2 & q`2=ppi`2 by A506;
          hence p`1=q`1 or p`2=q`2;
         end;
            now
          set p=g1/.len g1, q=g2/.1;
             j1+1<=i1 by A480,NAT_1:38;
          then 1<=l by XREAL_1:21;
          then 1 in dom g2 by A485,FINSEQ_1:3;
           then q`2=ppi`2 by A506;
          hence p`1=q`1 or p`2=q`2
           by A15,A16,A18,A35,A47,FINSEQ_4:86;
         end;
        hence g is special by A32,A636,GOBOARD2:13;
        thus L~g=L~f
         proof
          set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
              lf = {LSeg(f,j): 1<=j & j+1 <= len f};
          A637: len g = len g1 + len g2 by FINSEQ_1:35;
          A638: now let j; assume
            A639: len g1<=j & j<=len g;
            then reconsider w = j-len g1 as Nat by INT_1:18;
            let p such that
            A640: p=g/.j;
             per cases;
             suppose A641: j=len g1;
                 1<=len g1 by A14,A16,A36,XREAL_1:2;
              then len g1 in dom g1 by FINSEQ_3:27;
              then A642: g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
              .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
              hence p`2=G*(i1,i2)`2 by A640,A641;
              thus G*(j1,i2)`1<=p`1 & p`1<=G*
              (i1,i2)`1 by A51,A52,A56,A64,A66,A69,A480,A495,A640,A641,A642,
GOBOARD1:def 1;
                 Seg len c1 = dom c1 by FINSEQ_1:def 3;
              hence p in rng c1 by A51,A52,A69,A494,A640,A641,A642,PARTFUN2:4;
             end;
             suppose j<>len g1;
then A643:           len g1 < j by A639,REAL_1:def 5;
A644:           j = w + len g1;
                  len g1 + 1<=j by A643,NAT_1:38;
              then A645:           1<=w & w<=len g2 by A637,A639,XREAL_1:21,
XREAL_1:22;
then A646:          g/.j=g2/.w by A644,GOBOARD2:5;
                 w in dom g2 by A645,FINSEQ_3:27;
              hence p`2=ppi`2 & pj`1<=p`1 & p`1<=
              ppi`1 & p in rng c1 by A506,A640,A646;
           end;
           end;
          thus L~g c= L~f
           proof let x; assume x in L~g;
            then x in union lg;
            then consider X be set such that
            A647: x in X & X in lg by TARSKI:def 4;
            consider i such that
            A648: X=LSeg(g,i) & 1<=i & i+1 <= len g by A647;
             per cases;
             suppose A649: i+1 <= len g1;
              then i<=i+1 & i+1<=len g1 by NAT_1:29;
              then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A648,XREAL_1:2;
              then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
              then X=LSeg(g1,i) by A648,TOPREAL3:25;
              then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A648,A649;
              then x in union {LSeg(g1,j): 1<=j & j+1 <= len g1}
                by A647,TARSKI:def 4;
              then x in L~f1 & L~f1 c= L~f by A33,TOPREAL3:27;
              hence thesis;
             end;
             suppose A650: i+1 > len g1;
              then A651: len g1<=i & i<=i+1 & i+1<=len g by A648,NAT_1:38;
                A652: 1<=i+1 & len g1<=i+1 & i<=len g by A648,A650,NAT_1:38;
              reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
              A653: q1`2=ppi`2 & pj`1<=q1`1 & q1`1<=ppi`1 & q2`2=ppi`2 & pj`1<=
q2`1 &
              q2`1<=ppi`1 by A638,A651,A652;
              then A654: q1=|[q1`1,q1`2]| & q2=|[q2`1,q1`2]| by EUCLID:57;
              A655: LSeg(g,i)=LSeg(q2,q1) by A648,TOPREAL1:def 5;
                  now per cases by XREAL_1:1;
               suppose q1`1>q2`1;
                then LSeg(g,i)={p2: p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1}
                  by A654,A655,TOPREAL3:16;
                then consider p2 such that
                A656: p2=x & p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1 by A647,A648;
                   pj`1<=p2`1 & p2`1<=ppi`1 by A653,A656,XREAL_1:2;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A497,A653,A656;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               suppose q1`1=q2`1;
                then LSeg(g,i)={q1} by A654,A655,TOPREAL1:7;
                then x=q1 by A647,A648,TARSKI:def 1;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A497,A653;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               suppose q1`1<q2`1;
                then LSeg(g,i)= {p1: p1`2=q1`2 & q1`1<=p1`1 & p1`1<=q2`1}
                  by A654,A655,TOPREAL3:16;
                then consider p2 such that
                A657: p2=x & p2`2=q1`2 & q1`1<=p2`1 & p2`1<=q2`1 by A647,A648;
                   pj`1<=p2`1 & p2`1<=ppi`1 by A653,A657,XREAL_1:2;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A497,A653,A657;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               end;
              hence thesis;
           end;
           end;
          let x; assume x in L~f;
          then A658: x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
           per cases by A658,XBOOLE_0:def 2;
           suppose x in L~f1; then x in L~g1 & L~g1 c= L~g
            by A33,GOBOARD2:11;
            hence x in L~g;
           end;
           suppose x in LSeg(f,k);
            then consider p1 such that
            A659: p1=x & p1`2=ppi`2 & pj`1<=p1`1 & p1`1<=ppi`1 by A497;
            defpred P2[Nat] means
            len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`1>=p1`1;
            A660: now
              take n=len g1;
              thus P2[n]
              proof
               thus len g1<=n & n<=len g by A637,REAL_2:173;
               let q such that
               A661: q=g/.n;
                  1<=len g1 by A14,A16,A36,XREAL_1:2;
               then len g1 in dom g1 by FINSEQ_3:27;
               then q=f1/.len f1
                by A35,A661,FINSEQ_4:83
               .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
               hence p1`1<=q`1 by A659;
              end;
             end;
            A662: for n holds P2[n] implies n<=len g;
            consider ma be Nat such that
            A663: P2[ma] & for n st P2[n] holds n<=ma from NAT_1:sch 6
(A662,A660);
                now per cases;
             suppose A664: ma=len g;
                 j1+1<=i1 by A480,NAT_1:38;
              then A665: 1<=l & l=len g2 by A484,XREAL_1:21;
              then A666: l in dom g2 & i1-l=j1 by FINSEQ_3:27;
              then A667: g/.ma=g2/.l by A484,A637,A664,FINSEQ_4:84
               .= pj by A484,A485,A666;
              then p1`1<=pj`1 by A663;
              then A668: p1`1=pj`1 by A659,XREAL_1:1;
              A669: ma-1<=len g & len g1+1<=ma
                by A637,A664,A665,XREAL_1:45,XREAL_1:9;
              then A670: len g1<=ma-1 & 0<=len g1 by XREAL_1:21;
then A671:           0+1<=ma by XREAL_1:21;
              reconsider m1=ma-1 as Nat by A671,INT_1:18;
                 1<=len g1 by A14,A16,A36,XREAL_1:2;
              then A672: 1<=m1 by A670,XREAL_1:2;
              reconsider q=g/.m1 as Point of TOP-REAL 2;
              A673: q`2=ppi`2 & pj`1<=q`1 & q=|[q`1,q`2]| & m1+1=ma
               by A638,A669,A670,EUCLID:57;
              then A674: LSeg(g,m1)=LSeg(pj,q)
               by A664,A667,A672,TOPREAL1:def 5;
              set lq={e where e is Point of TOP-REAL 2: e`2=ppi`2 & pj`1<=e`1 &
                      e`1<=q`1};
              LSeg(g,m1)=lq by A496,A673,A674,TOPREAL3:16;
              then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
              by A659,A664,A668,A672,A673;
              then x in union lg by A659,TARSKI:def 4;
              hence x in L~g;
             end;
             suppose ma<>len g;
              then ma<len g by A663,REAL_1:def 5;
              then A675: ma+1<=len g & k<=ma & ma<=ma+1
                by A16,A36,A663,XREAL_1:2,NAT_1:38;
              then A676: 1<=ma & len g1<=ma+1 by A14,A663,XREAL_1:2;
              reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
              A677: p1`1<=qa`1 by A663;
               A678: now assume p1`1<=qa1`1;
                 then for q holds q=g/.(ma+1) implies p1`1<=q`1;
                then ma+1<=ma by A663,A675,A676;
                hence contradiction by REAL_2:174;
               end;
              then A679: qa1`1<qa`1 & qa1`1<=p1`1 & p1`1<=qa`1 &
              qa`2=ppi`2 & qa1 `2 = ppi`2
              by A638,A663,A675,A676,A677,XREAL_1:2;
              set lma = {p2: p2`2=ppi`2 & qa1`1<=p2`1 & p2`1<=qa`1};
              A680: qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                 LSeg(g,ma)=LSeg(qa1,qa) by A675,A676,TOPREAL1:def 5
              .= lma by A679,A680,TOPREAL3:16;
              then x in LSeg(g,ma) & LSeg(g,ma) in lg by A659,A675,A676,A677
,A678;
              then x in union lg by TARSKI:def 4;
              hence x in L~g;
             end;
             end;
            hence x in L~g;
         end;
         end;
           1<=len g1 by A14,A16,A36,XREAL_1:2;
        then 1 in dom g1 by FINSEQ_3:27;
        hence g/.1=f1/.1
         by A34,FINSEQ_4:83
        .=f/.1 by A15,A19,FINSEQ_4:86;
           j1+1<=i1 by A480,NAT_1:38;
        then A681: 1<=l by XREAL_1:21;
        then A682: l in dom g2 & len g=len g1 + len g2 & len g2 = l
         by A485,FINSEQ_1:3,35,def 3;
        reconsider m1=i1-l as Nat;
        thus g/.len g=g2/.l by A682,FINSEQ_4:84
        .=G*(m1,i2) by A484,A485,A682
        .=f/.len f by A5,A49,A479;
        thus len f<=len g by A5,A16,A36,A681,A682,XREAL_1:9;
       end;
       case A683: i1=j1;
           k<>k+1;
        hence contradiction by A7,A15,A47,A48,A49,A479,A683,PARTFUN2:17;
       end;
       case A684: i1<j1;
        then reconsider l=j1-i1 as Nat by INT_1:18;
        deffunc F(Nat) = G*(i1+$1,i2);
        consider g2 such that
        A685: len g2 = l & for n st n in dom g2 holds g2/.n = F(n)
          from GOBOARD2:sch 1;
A686:    Seg l = dom g2 by A685,FINSEQ_1:def 3;
        take g=g1^g2;
        A687: now let n; assume n in Seg l;
          then A688: 1<=n & n<=l by FINSEQ_1:3;
          then n<=n+i1 & i1+n<=l+i1 by NAT_1:29,XREAL_1:9;
          then n<=i1+n & i1+n<=j1 & j1<=len G by A51,FINSEQ_3:27;
          then 1<=i1+n & i1+n<=len G by A688,XREAL_1:2;
          hence i1+n in dom G by FINSEQ_3:27;
          hence [i1+n,i2] in Indices G by A50,A51,ZFMISC_1:106;
         end;
        A689: Seg len g2 = dom g2 by FINSEQ_1:def 3;
            now let n such that A690: n in dom g2;
          take m=i1+n,k=i2;
          thus [m,k] in Indices G & g2/.n=G*(m,k) by A685,A687,A689,A690;
         end;
        then A691: for n st n in dom g ex i,j st [i,j] in Indices G &
        g/.n=G*(i,j) by A53,GOBOARD1:39;
        A692: now let n; assume
             n in dom g2 & n+1 in dom g2;
          then A693: g2/.n=G*(i1+n,i2) & [i1+n,i2] in Indices G &
          g2/.(n+1)=G*(i1+(n+1),i2) & [i1+(n+1),i2] in Indices G
          by A685,A687,A689;
          let l1,l2,l3,l4 be Nat; assume
             [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2) &
           g2/.(n+1)=G*(l3,l4);
           then l1=i1+n & l2=i2 & l3=i1+(n+1) & l4=i2 by A693,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)= abs(i1+n-(i1+(n+1)))+0 by ABSVALUE:7
           .= abs(-1)
           .= abs(1) by COMPLEX1:138
           .= 1 by ABSVALUE:def 1;
         end;
         now let l1,l2,l3,l4 be Nat; assume
          A694: [l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,
l2) &
          g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
          then g2/.1=G*
(i1+1,i2) & [i1+1,i2] in Indices G & f1/.len f1=f/.k
            by A15,A16,A18,A685,A687,A689,FINSEQ_4:86;
           then l1=i1 & l2=i2 & l3=i1+1 & l4=i2 by A35,A47,A694,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)=abs(i1-(i1+1))+0 by ABSVALUE:7
          .=abs(i1-i1+-1)
          .=abs(1) by COMPLEX1:138
          .=1 by ABSVALUE:def 1;
         end;
        then for n st n in dom g & n+1 in dom g holds
         for m,k,i,j st [m,k] in Indices G &
         [i,j] in Indices G & g/.n=G*(m,k) &
          g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A692,GOBOARD1:40;
        hence g is_sequence_on G by A691,GOBOARD1:def 11;
        set
        lk={w where w is Point of TOP-REAL 2: w`2=ppi`2 & ppi`1<=w`1 & w`1<=
pj`1};
           c1/.i1=c1.i1 & c1/.j1=c1.j1 by A51,A70,FINSEQ_4:def 4;
        then A695: c1/.i1=ppi & c1/.j1=pj by A51,MATRIX_1:def 9;
        then A696: y2.i1=ppi`2 & y2.j1=pj`2 & x2.i1=ppi`1 & x2.j1=pj`1
          by A51,A64,A65,A66,A67,A68,A70,GOBOARD1:def 3,def 4;
        then A697: ppi`1<pj`1 & ppi`2=pj`2 &
        ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj`2]|
        by A51,A56,A57,A64,A65,A66,A67,A68,A70,A684,EUCLID:57,GOBOARD1:def 1
,def 2;
        A698: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A479,TOPREAL1:def 5
        .= lk by A697,TOPREAL3:16;
        A699: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A479,TOPREAL1:def 5;
            now let n,m; assume
          A700: n in dom g2 & m in dom g2 & n<>m;
          then A701: g2/.n=G*(i1+n,i2) & g2/.m=G*(i1+m,i2) & [i1+n,i2] in
Indices G &
          [i1+m,i2] in Indices G by A685,A687,A689;
          assume g2/.n=g2/.m;
          then i1+n=i1+m by A701,GOBOARD1:21;
          hence contradiction by A700;
         end;
         then for n,m st n in dom g2 & m in dom g2 &
         g2/.n = g2/.m holds n = m;
        then A702: g2 is one-to-one by PARTFUN2:16;
        A703: not f/.k in rng g2
         proof assume f/.k in rng g2;
          then consider n such that
          A704: n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
          A705: g2/.n=G*(i1+n,i2) & [i1+n,i2] in Indices G
            by A685,A686,A687,A704;
             0+1<=n by A704,FINSEQ_3:27;
           then i1+n=i1 & 0<n by A47,A704,A705,GOBOARD1:21;
          hence contradiction;
         end;
        A706: now let n,p; assume
          A707: n in dom g2 & g2/.n=p;
          then A708: g2/.n=G*(i1+n,i2) & 1<=n & n<=len g2 & i1+n in dom G
           by A685,A687,A689,FINSEQ_3:27;
          set n1=i1+n;
          set pn = G*(n1,i2);
             c1/.n1=c1.n1 by A70,A708,FINSEQ_4:def 4;
          then A709: g2/.n=pn & c1/.n1=pn & 0<=n & n1<=i1+len g2
            by A708,MATRIX_1:def 9,XREAL_1:9;
          then A710: y2.n1=pn`2 & y2.n1=y2.i1 & x2.n1=pn`1 & n1<=j1 & i1<=n1
          by A51,A57,A64,A65,A66,A67,A68,A70,A685,A708,GOBOARD1:def 2,def 3
,def 4,REAL_2:173;
          hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=pj`1
            by A51,A56,A67,A70,A696,A707,A708,GOBOARD2:18;
          thus p in rng c1 by A70,A707,A708,A709,PARTFUN2:4;
             0<n by A708;
          then i1<n1 by REAL_2:174;
          hence p`1>ppi`1 by A51,A56,A67,A70,A696,A707,A708,A710,GOBOARD1:def 1
;
         end;
        A711: now let n,m,p,q; assume
          A712: n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
          then A713: g2/.n=G*(i1+n,i2) & i1+n in dom G &
              g2/.m=G*(i1+m,i2) & i1+m in dom G by A685,A687,A689;
          set n1=i1+n, m1=i1+m;
          set pn = G*(n1,i2),
              pm = G*(m1,i2);
             c1/.n1=c1.n1 & c1/.m1 = c1.m1 by A70,A713,FINSEQ_4:def 4;
          then A714: c1/.n1=pn & c1/.m1=pm & n1<m1
            by A712,A713,MATRIX_1:def 9,XREAL_1:10;
          then x2.n1=pn`1 & x2.m1=pm`1 by A67,A70,A713,GOBOARD1:def 3;
          hence p`1<q`1 by A56,A67,A70,A712,A713,A714,GOBOARD1:def 1;
         end;
        A715: rng g2 c= LSeg(f,k)
         proof let x; assume x in rng g2;
          then consider n such that
          A716: n in dom g2 & g2/.n=x by PARTFUN2:4;
          A717: g2/.n=G*(i1+n,i2) by A685,A716;
          set pn = G*((i1+n),i2);
             pn`2=ppi`2 & ppi`1<=pn`1 & pn`1<=pj`1 by A706,A716,A717;
          hence x in LSeg(f,k) by A698,A716,A717;
         end;
           rng g1 /\ rng g2 = {}
         proof consider x being Element of rng g1 /\ rng g2;
          assume not thesis;
          then A718: x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
              now per cases by A14,REAL_1:def 5;
           suppose k=1;
            hence contradiction by A37,A703,A718,TARSKI:def 1;
           end;
           suppose 1<k;
            then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A44,A715,A718,GOBOARD2:9,XBOOLE_0:def 3;
            hence contradiction by A703,A718,TARSKI:def 1;
           end;
           end;
          hence contradiction;
         end;
        then rng g1 misses rng g2 by XBOOLE_0:def 7;
        hence g is one-to-one by A29,A702,FINSEQ_3:98;
        A719: for n st 1<=n & n+2 <= len g2 holds
             LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
         proof let n; assume
          A720:1<=n & n+2 <= len g2;
          then A721: n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
          then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
          g2/.(n+2) in rng g2 by PARTFUN2:4;
          then A722: g2/.n in lk & g2/.(n+1) in lk &
          g2/.(n+2) in lk by A698,A715;
          then consider u be Point of TOP-REAL 2 such that
          A723: g2/.n=u & u`2=ppi`2 & ppi`1<=u`1 & u`1<=pj`1;
          consider u1 be Point of TOP-REAL 2 such that
          A724: g2/.(n+1)=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1 by A722;
          consider u2 be Point of TOP-REAL 2 such that
          A725: g2/.(n+2)=u2 & u2`2=ppi`2 & ppi`1<=u2`1 & u2`1<=pj`1 by A722;
          set lg = {w where w is Point of TOP-REAL 2:
                     w`2=ppi`2 & u`1<=w`1 & w`1<=u2`1};
          A726: 1<= n+1 by NAT_1:29;
          A727: n+1+1 = n+(1+1);
             n+1 <= n+2 by XREAL_1:8;
          then n+1 <= len g2 by A720,XREAL_1:2;
          then A728: LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg(u1,u2) &
          LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
           by A720,A723,A724,A725,A726,A727,TOPREAL1:def 5;
             n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:38;
          then A729: u1`1<u2`1 & u`1<u1`1 by A711,A721,A723,A724,A725;
          then A730: u1`1<=u2`1 & u`1<=u1`1 & u`1<u2`1 by XREAL_1:2;
          A731: u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2]| by A724,A729,
EUCLID:57;
          then LSeg(g2/.n,g2/.(n+2))=lg by A723,A725,A730,TOPREAL3:16;
          hence thesis by A724,A728,A731,TOPREAL1:14;
         end;
        thus g is unfolded
         proof let n; assume
          A732: 1<=n & n+2 <= len g;
then A733:           n+1+1<=len g;
          A734: 1<= n+1 by NAT_1:29;
          A735: n<=n+1 & n+1<=n+1+1 by NAT_1:29;
then A736:      n+1 <= len g by A732,XREAL_1:2;
A737:      n+(1+1)=n+1+1;
A738:      len g=len g1+len g2 by FINSEQ_1:35;
              n+2-len g1 = n-len g1 +2;
          then A739: n-len g1 + 2 <= len g2 by A732,A738,XREAL_1:22;
           per cases;
           suppose A740: n+2 <= len g1;
        then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
              by A732,GOBOARD2:4;
            then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
            g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
            hence thesis by A30,A732,A740,TOPREAL1:def 8;
           end;
           suppose len g1 < n+2;
            then len g1+1<=n+2 by NAT_1:38;
            then A741: len g1<=n+2-1 by XREAL_1:21;
                now per cases;
             suppose A742: len g1=n+1;
                  now assume A743: k=1;
                   1<len g1 by A732,A742,NAT_1:38;
                then 1+1<=len g1 by NAT_1:38;
                hence contradiction by A37,A743,TOPREAL1:29;
               end;
              then A744: 1<k & LSeg(g1,n) c= L~f1
                 by A14,A33,REAL_1:def 5,TOPREAL3:26;
              then A745: L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                 1<=n+1 by NAT_1:29;
              then A746: n in dom g1 & n+1 in dom g1
              by A732,A735,A742,FINSEQ_3:27;
              then A747: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
              A748: g/.(n+1)=f1/.len f1 by A35,A742,A746,FINSEQ_4:83
              .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                 n+2 = 1+len g1 & 1 <= len g2 by A732,A737,A738,A742,XREAL_1:8;
              then A749: g/.(n+2)=g2/.1 by GOBOARD2:5;
                 1<=len g-len g1 by A733,A742,XREAL_1:21;
              then 1 in dom g2 by A738,FINSEQ_3:27;
              then A750: g2/.1 in rng g2 by PARTFUN2:4;
              then g2/.1 in lk by A698,A715;
              then consider u1 be Point of TOP-REAL 2 such that
              A751: g2/.1=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1;
                 ppi in LSeg(ppi,pj) by TOPREAL1:6;
              then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1)
                by A699,A715,A732,A734,A737,A748,A749,A750,A751,TOPREAL1:12
,def 5;
              then A752: LSeg(g,n) /\ LSeg(g,n+1) c= {g/.(n+1)}
               by A47,A744,A745,A747,A748,XBOOLE_1:27;
                 g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                by A732,A734,A736,A737,TOPREAL1:27;
              then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;
              then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
              hence thesis by A752,XBOOLE_0:def 10;
             end;
             suppose len g1<>n+1; then len g1<n+1 by A741,REAL_1:def 5;
              then A753: len g1<=n by NAT_1:38;
              then reconsider n1=n-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A754: len g1=n;
                   1<=len g1 by A14,A16,A36,XREAL_1:2;
                then len g1 in dom g1 by FINSEQ_3:27;
                then A755: g/.n=f1/.len f1 by A35,A754,FINSEQ_4:83
                .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A756:             2 <= len g2 by A732,A738,A754,XREAL_1:8;
                then 1 <= len g2 by XREAL_1:2;
                then A757: g/.(n+1)=g2/.1 by A754,GOBOARD2:5;
                A758: g/.(n+2)=g2/.2 by A754,A756,GOBOARD2:5;
                    1<=len g2 by A756,XREAL_1:2;
                then A759: 1 in dom g2 & 2 in dom g2 by A756,FINSEQ_3:27;
                then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                then A760: g2/.1 in lk & g2/.2 in lk by A698,A715;
                then consider u1 be Point of TOP-REAL 2 such that
                A761: g2/.1=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1;
                consider u2 be Point of TOP-REAL 2 such that
          A762: g2/.2=u2 & u2`2=ppi`2 & ppi`1<=u2`1 & u2`1<=pj`1 by A760;
                A763: u1`1<u2`1 by A711,A759,A761,A762;
                then A764: u1`1<=u2`1 & ppi`1<u2`1 & u2=|[u2`1,u2`2]|
                  by A761,XREAL_1:2,EUCLID:57;
                set lg = {w where w is Point of TOP-REAL 2 :
                          w`2=ppi`2 & ppi`1<=w`1 & w`1<=u2`1};
                A765: u1 in lg by A761,A763;
                A766: LSeg(g,n)=LSeg(ppi,u1) & LSeg(g,n+1)=LSeg(u1,u2)
             by A732,A734,A736,A737,A755,A757,A758,A761,A762,TOPREAL1:def 5;
                   u1 in LSeg(ppi,u2) by A697,A762,A764,A765,TOPREAL3:16;
                hence thesis by A757,A761,A766,TOPREAL1:14;
               end;
               suppose len g1<>n;
then A767:              len g1<n by A753,REAL_1:def 5;
                   n1 + len g1 = n;
then A768:            LSeg(g,n)=LSeg(g2,n1) by A736,A767,GOBOARD2:10;
A769:            len g1<n+1 by A735,A767,XREAL_1:2;
A770:            len g1+1<=n by A767,NAT_1:38;
A771:            n+1 = n1+1+len g1;
A772:             1<=n1+1 by NAT_1:29;
                   n1+1<=len g2 by A736,A738,A771,XREAL_1:8;
                then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                  by A733,A769,A770,A771,A772,GOBOARD2:5,10,XREAL_1:21;
                hence thesis by A719,A739,A768;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
         end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
           m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
         proof let n,m; assume that
          A773: m>n+1 and
          A774: n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
          A775: LSeg(g2,n) /\ LSeg(g2,m) <> {};
          A776: 1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
 len g2 by A774,FINSEQ_3:27;
          reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
           as Point of TOP-REAL 2;
          set lp = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                         p1`1<=w`1 & w`1<=p2`1},
              lq = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                         q1`1<=w`1 & w`1<=q2`1};
              m<m+1 & n<n+1 by NAT_1:38;
           then A777: p1`1<p2`1 & q1`1<q2`1 & p1`2=ppi`2 & p2`2=ppi`2 & q1`2=
ppi`2 &
           q2`2=ppi`2 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
           p2=|[p2`1,p2`2]| &
           q2=|[q2`1,q2`2]| by A706,A711,A774,EUCLID:57;
           A778: LSeg(g2,n) = LSeg(p1,p2) by A776,TOPREAL1:def 5
           .=lp by A777,TOPREAL3:16;
           A779: LSeg(g2,m) = LSeg(q1,q2) by A776,TOPREAL1:def 5
           .=lq by A777,TOPREAL3:16;
           consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
           A780: x in LSeg(g2,n) & x in LSeg(g2,m) by A775,XBOOLE_0:def 3;
then A781:           ex tn be Point of TOP-REAL 2 st
 tn=x & tn`2=ppi`2 & p1`1<=tn`1 & tn`1<=p2`1 by A778;
A782:           ex tm be Point of TOP-REAL 2 st
 tm=x & tm`2=ppi`2 & q1`1<=tm`1 & tm`1<=q2`1 by A779,A780;
               p2`1<q1`1 by A711,A773,A774;
            hence contradiction by A781,A782,XREAL_1:2;
         end;
then A783:    g2 is s.n.c. by GOBOARD2:6;
        A784: L~g2 c= LSeg(f,k)
         proof
          set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; let x; assume
             x in L~g2; then x in union ls;
          then consider X be set such that
          A785: x in X & X in ls by TARSKI:def 4;
          consider m such that
          A786: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A785;
              m in dom g2 & m+1 in dom g2 by A786,GOBOARD2:3;
          then A787: g2/.m in rng g2 & g2/.(m+1) in rng g2 by PARTFUN2:4;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          A788: LSeg(q1,q2) c= LSeg(ppi,pj) by A699,A715,A787,TOPREAL1:12;
             LSeg(g2,m)=LSeg(q1,q2) by A786,TOPREAL1:def 5;
          hence thesis by A699,A785,A786,A788;
         end;
        A789: not f/.k in L~g2
         proof set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; assume
             f/.k in L~g2; then f/.k in union ls;
          then consider X be set such that
          A790: f/.k in X & X in ls by TARSKI:def 4;
          consider m such that
          A791: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A790;
          A792: m in dom g2 & m+1 in dom g2 & m<m+1
          by A791,GOBOARD2:3,NAT_1:38;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          set lq={w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                       q1`1<=w`1 & w`1<=q2`1};
          A793: q1`2=ppi`2 & q2`2=ppi`2 & q1`1<q2`1 & q1=|[q1`1,q1`2]|
          & q2=|[q2`1,q2`2]| by A706,A711,A792,EUCLID:57;
             LSeg(g2,m)=LSeg(q1,q2) by A791,TOPREAL1:def 5
          .=lq by A793,TOPREAL3:16;
          then ex p st p=f/.k & p`2=ppi`2 & q1`1<=p`1 & p`1<=q2`1 by A790,A791
;
          hence contradiction by A47,A706,A792;
         end;
        A794: L~g1 /\ L~g2 = {}
         proof per cases;
           suppose k=1; hence thesis by A37;
           end;
           suppose k<>1; then 1<k by A14,REAL_1:def 5;
            then L~g1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A33,GOBOARD2:9;
             then A795: L~g1 /\ L~g2 c= {f/.k} by A784,XBOOLE_1:26;
                now consider x being Element of L~g1 /\ L~g2;
              assume L~g1 /\ L~g2 <> {};
              then x in {f/.k} & x in L~g2 by A795,TARSKI:def 3,XBOOLE_0:def 3
;
              hence contradiction by A789,TARSKI:def 1;
             end;
            hence thesis;
         end;
         end;
           for n,m st m>n+1 & n in dom g & n+1 in dom g &
        m in dom g & m+1 in dom g
         holds LSeg(g,n) misses LSeg(g,m)
         proof let n,m; assume that
          A796: m>n+1 and
          A797: n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
          A798: 1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
          m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
            by A797,FINSEQ_1:35,FINSEQ_3:27,NAT_1:29;
          set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
              l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
             i1+1<=j1 by A684,NAT_1:38;
          then A799: 1<=l by XREAL_1:21;
          then A800: 1 in dom g2 by A685,FINSEQ_3:27;
          reconsider qq=g2/.1 as Point of TOP-REAL 2;
          set ql={z where z is Point of TOP-REAL 2: z`2=ppi`2 &
                     ppi`1<=z`1 & z`1<=qq`1};
          A801: 1<=len g1 by A14,A16,A36,XREAL_1:2;
           then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
          then A802: g/.len g1=g1/.len g1 by FINSEQ_4:83
             .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
          A803: len g1<len g1 +1 & len g1+1<=len g
            by A685,A798,A799,NAT_1:38,XREAL_1:9;
          A804: g/.(len g1+1)=qq by A685,A799,GOBOARD2:5;
          A805: qq`2=ppi`2 & qq`1<=pj`1 & qq`1>ppi`1 & qq=|[qq`1,qq`2]|
           by A706,A800,EUCLID:57;
          A806: LSeg(g,len g1)=LSeg(ppi,qq)
          by A801,A802,A803,A804,TOPREAL1:def 5
           .= ql by A697,A805,TOPREAL3:16;
            A807: n+1<=m+1 by A796,A798,XREAL_1:2;
                now per cases;
             suppose A808: m+1<=len g1;
              then A809: m<=len g1 & n+1<=len g1 by A798,A807,XREAL_1:2;
              then n<=len g1 by A798,XREAL_1:2;
              then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
               by A798,A808,A809,FINSEQ_3:27;
              then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m) by TOPREAL3:25;
              hence thesis by A31,A796,TOPREAL1:def 9;
             end;
             suppose len g1<m+1;
              then A810: len g1<=m by NAT_1:38;
              then reconsider m1=m-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A811: m=len g1;
                    now assume A812: k=1;
                     1<len g1 by A796,A798,A811,XREAL_1:2;
                  then 1+1<=len g1 by NAT_1:38;
                  hence contradiction by A37,A812,TOPREAL1:29;
                 end;
                then 1<k by A14,REAL_1:def 5;
                then A813: L~f1 /\ LSeg(f,k) ={f/.k}
                 by A5,A8,A9,GOBOARD2:9;
                   n<=len g1 by A796,A798,A811,XREAL_1:2;
                then A814: n in dom g1 & n+1 in dom g1
                by A796,A798,A811,FINSEQ_3:27;
                then A815: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                then LSeg(g,n) in l1 by A796,A798,A811;
                then A816: LSeg(g,n) c= L~f1
                 by A33,ZFMISC_1:92;
                   LSeg(g,m) c= LSeg(f,k)
                 proof let x; assume x in LSeg(g,m);
                  then consider px be Point of TOP-REAL 2 such that
            A817: px=x & px`2=ppi`2 & ppi`1<=px`1 & px`1<=qq`1 by A806,A811;
                     pj`1>=px`1 by A805,A817,XREAL_1:2;
                  hence thesis by A698,A817;
                 end;
                then A818: LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                 by A813,A816,XBOOLE_1:27;
                    now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                  assume
                   LSeg(g,n)/\ LSeg(g,m)<>{};
                  then A819: x in LSeg(g,n) & x in {f/.k}
                  by A818,TARSKI:def 3,XBOOLE_0:def 3;
                  then A820: x=f/.k by TARSKI:def 1;
                     f/.k=g1/.len g1
                   by A15,A16,A18,A35,FINSEQ_4:86;
                  hence contradiction by A29,A30,A31,A796,A811,A814,A815,A819
,A820,GOBOARD2:7;
                 end;
                hence thesis by XBOOLE_0:def 7;
               end;
               suppose
              m<>len g1;
                then A821: len g1<m & m+1=m1+1+len g1
                 by A810,REAL_1:def 5;
                   m = m1+len g1;
                then A822: LSeg(g,m)=LSeg(g2,m1) by A798,A821,GOBOARD2:10;
                   m1+1<=len g2 & len g1+1<=
m by A798,A821,NAT_1:38,XREAL_1:8;
                then A823: 1<=m1 & m1+1 <= len g2 by XREAL_1:21;
                then LSeg(g,m) in l2 by A822;
                then A824: LSeg(g,m) c= L~g2 by ZFMISC_1:92;
                    now per cases;
                 suppose A825: n+1<=len g1;
                  then n<=len g1 by A798,XREAL_1:2;
                  then n in dom g1 & n+1 in dom g1 by A798,A825,FINSEQ_3:27;
                   then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                  then LSeg(g,n) in l1 by A798,A825;
                  then LSeg(g,n) c= L~g1 by ZFMISC_1:92;
                  then LSeg(g,n) /\ LSeg(g,m) c= {} by A794,A824,XBOOLE_1:27;
                  then LSeg(g,n) /\ LSeg(g,m) = {} by XBOOLE_1:3;
                  hence thesis by XBOOLE_0:def 7;
                 end;
                 suppose len g1<n+1;
                  then A826: len g1<=n by NAT_1:38;
                  then reconsider n1=n-len g1 as Nat by INT_1:18;
A827:               n - len g1 + 1 = n + 1 - len g1;
A828:               n = n1 + len g1;
                      now per cases;
                   suppose A829: len g1=n;
                        now consider x being
                      Element of LSeg(g,n) /\ LSeg(g,m);
                      assume
                       LSeg(g,n) /\ LSeg(g,m)<>{};
                      then A830: x in LSeg(g,n) & x in LSeg(g,m)
                      by XBOOLE_0:def 3;
then A831:                      ex qx be Point of TOP-REAL 2 st
                       qx=x & qx`2=ppi`2 & ppi`1<=qx`1 & qx`1<=qq`1
                       by A806,A829;
                      A832: m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                        by A823,GOBOARD2:3,NAT_1:38;
                      reconsider q1=g2/.m1, q2=g2/.(m1+1)
                       as Point of TOP-REAL 2;
                      set q1l={v where v is Point of TOP-REAL 2: v`2=ppi`2 &
                                 q1`1<=v`1 & v`1<=q2`1};
                      A833: q1`2=ppi`2 & q2`2=ppi`2 & q1`1<q2`1 & q1=|[q1`1,q1
`2]|&
                      q2=|[q2`1,q2`2]| by A706,A711,A832,EUCLID:57;
                         m1 > n1 + 1 & n1 + 1 >=
 1 by A796,A827,NAT_1:29,XREAL_1:11;
then A834:                   m1 > 1 by XREAL_1:2;
                         LSeg(g2,m1)=LSeg(q1,q2) by A823,TOPREAL1:def 5
                      .=q1l by A833,TOPREAL3:16;
then A835:                   ex qy be Point of TOP-REAL 2 st
                       qy=x & qy`2=ppi`2 & q1`1<=qy`1 & qy`1<=q2`1
                       by A822,A830;
                         qq`1<q1`1 by A711,A800,A832,A834;
                      hence contradiction by A831,A835,XREAL_1:2;
                     end;
                    hence thesis by XBOOLE_0:def 7;
                   end;
                   suppose n<>len g1;
                    then len g1<n by A826,REAL_1:def 5;
                    then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                     by A796,A798,A827,A828,GOBOARD2:10,XREAL_1:11;
                    hence thesis by A783,A822,TOPREAL1:def 9;
                   end;
                   end;
                  hence thesis;
                 end;
                 end;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
        hence g is s.n.c. by GOBOARD2:6;
        A836: g2 is special
         proof let n;
          set p = g2/.n, q = g2/.(n+1);
         assume 1<=n & n+1 <= len g2;
          then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
          then p`2=ppi`2 & q`2=ppi`2 by A706;
          hence p`1=q`1 or p`2=q`2;
         end;
            now
          set p=g1/.len g1, q=g2/.1;
             i1+1<=j1 by A684,NAT_1:38;
          then 1<=l by XREAL_1:21;
          then 1 in dom g2 by A685,FINSEQ_3:27;
           then q`2=ppi`2 by A706;
          hence p`1=q`1 or p`2=q`2 by A15,A16,A18,A35,A47,FINSEQ_4:86;
         end;
        hence g is special by A32,A836,GOBOARD2:13;
        thus L~g=L~f
         proof
          set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
              lf = {LSeg(f,j): 1<=j & j+1 <= len f};
          A837: len g = len g1 + len g2 by FINSEQ_1:35;
          A838: now let j; assume
            A839: len g1<=j & j<=len g;
            then reconsider w = j-len g1 as Nat by INT_1:18;
            let p such that
            A840: p=g/.j;
                now per cases;
             suppose A841: j=len g1;
                 1<=len g1 by A14,A16,A36,XREAL_1:2;
              then len g1 in dom g1 by FINSEQ_3:27;
              then A842: g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
              .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
              hence p`2=G*(i1,i2)`2 by A840,A841;
              thus G*(i1,i2)`1<=p`1 & p`1<=G*
(j1,i2)`1 by A51,A56,A67,A70,A684,A696,A840,A841,A842,GOBOARD1:def 1;
              thus p in rng c1 by A51,A70,A695,A840,A841,A842,PARTFUN2:4;
             end;
             suppose j<>len g1;
then A843:           len g1 < j by A839,REAL_1:def 5;
A844:           j = w + len g1;
                  len g1 + 1 <= j by A843,NAT_1:38;
then A845:           1<=w & w<=len g2 by A837,A839,XREAL_1:21,XREAL_1:22;
then A846:          g/.j=g2/.w by A844,GOBOARD2:5;
                 w in dom g2 by A845,FINSEQ_3:27;
              hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=
pj`1 & p in rng c1 by A706,A840,A846;
             end;
             end;
            hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=pj`1 & p in rng c1;
           end;
          thus L~g c= L~f
           proof let x; assume x in L~g;
            then x in union lg;
            then consider X be set such that
            A847: x in X & X in lg by TARSKI:def 4;
            consider i such that
            A848: X=LSeg(g,i) & 1<=i & i+1 <= len g by A847;
                now per cases;
             suppose A849: i+1 <= len g1;
              then i<=i+1 & i+1<=len g1 by NAT_1:29;
              then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A848,XREAL_1:2;
              then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
              then X=LSeg(g1,i) by A848,TOPREAL3:25;
              then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A848,A849;
              then x in union {LSeg(g1,j): 1<=j & j+1 <= len g1}
              by A847,TARSKI:def 4;
              then x in L~f1 & L~f1 c= L~f by A33,TOPREAL3:27;
              hence thesis;
             end;
             suppose A850: i+1 > len g1;
              then A851: len g1<=i & i<=i+1 & i+1<=len g by A848,NAT_1:38;
              A852: 1<=i+1 & len g1<=i+1 & i<=len g by A848,A850,NAT_1:38;
              reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
              A853: q1`2=ppi`2 & ppi`1<=q1`1 & q1`1<=pj`1 & q2`2=ppi`2 &
              ppi`1<= q2`1 &
              q2`1<=pj`1 by A838,A851,A852;
              then A854: q1=|[q1`1,q1`2]| & q2=|[q2`1,q1`2]| by EUCLID:57;
              A855: LSeg(g,i)=LSeg(q2,q1) by A848,TOPREAL1:def 5;
                  now per cases by XREAL_1:1;
               suppose q1`1>q2`1;
                then LSeg(g,i)={p2: p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1}
                  by A854,A855,TOPREAL3:16;
                then consider p2 such that
                A856: p2=x & p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1 by A847,A848;
                   ppi`1<=p2`1 & p2`1<=pj`1 by A853,A856,XREAL_1:2;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A698,A853,A856;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               suppose q1`1=q2`1;
                then LSeg(g,i)={q1} by A854,A855,TOPREAL1:7;
                then x=q1 by A847,A848,TARSKI:def 1;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A698,A853;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               suppose q1`1<q2`1;
                then LSeg(g,i)= {p1: p1`2=q1`2 & q1`1<=p1`1 & p1`1<=q2`1}
                  by A854,A855,TOPREAL3:16;
                then consider p2 such that
                A857: p2=x & p2`2=q1`2 & q1`1<=p2`1 & p2`1<=q2`1 by A847,A848;
                   ppi`1<=p2`1 & p2`1<=pj`1 by A853,A857,XREAL_1:2;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A698,A853,A857;
                then x in union lf by TARSKI:def 4;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
           end;
          let x; assume x in L~f;
          then A858: x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
              now per cases by A858,XBOOLE_0:def 2;
           suppose x in L~f1; then x in L~g1 & L~g1 c= L~g
            by A33,GOBOARD2:11;
            hence x in L~g;
           end;
           suppose x in LSeg(f,k);
            then consider p1 such that
            A859: p1=x & p1`2=ppi`2 & ppi`1<=p1`1 & p1`1<=pj`1 by A698;
            defpred P2[Nat] means
            len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`1<=p1`1;
            A860: now
              take n=len g1;
              thus P2[n]
              proof
               thus len g1<=n & n<=len g by A837,REAL_2:173;
               let q such that
               A861: q=g/.n;
                  1<=len g1 by A14,A16,A36,XREAL_1:2;
               then len g1 in dom g1 by FINSEQ_3:27;
               then q=f1/.len f1 by A35,A861,FINSEQ_4:83
               .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
               hence q`1<=p1`1 by A859;
              end;
             end;
            A862: for n holds P2[n] implies n<=len g;
            consider ma be Nat such that
            A863: P2[ma] & for n st P2[n] holds n<=ma from NAT_1:sch 6
(A862,A860);
                now per cases;
             suppose A864: ma=len g;
                 i1+1<=j1 by A684,NAT_1:38;
              then A865: 1<=l by XREAL_1:21;
              then A866: l in dom g2 & i1+l=j1 by A685,FINSEQ_3:27;
              then A867: g/.ma=g2/.l by A685,A837,A864,FINSEQ_4:84
               .= pj by A685,A866;
              then pj`1<=p1`1 by A863;
              then A868: p1`1=pj`1 by A859,XREAL_1:1;
              A869: ma-1<=len g & len g1+1<=ma
                by A685,A837,A864,A865,XREAL_1:45,XREAL_1:9;
              then A870: len g1<=ma-1 & 0<=len g1 by XREAL_1:21;
then A871:           0+1<=ma by XREAL_1:21;
              reconsider m1=ma-1 as Nat by A871,INT_1:18;
                 1<=len g1 by A14,A16,A36,XREAL_1:2;
              then A872: 1<=m1 by A870,XREAL_1:2;
              reconsider q=g/.m1 as Point of TOP-REAL 2;
              A873: q`2=ppi`2 & q`1<=pj`1 & q=|[q`1,q`2]| & m1+1=ma
               by A838,A869,A870,EUCLID:57;
              then A874: LSeg(g,m1)=LSeg(q,pj)
               by A864,A867,A872,TOPREAL1:def 5;
              set lq={e where e is Point of TOP-REAL 2: e`2=ppi`2 & q`1<=e`1 &
                      e`1<=pj`1};
              LSeg(g,m1)=lq by A697,A873,A874,TOPREAL3:16;
              then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
                by A859,A864,A868,A872,A873;
              then x in union lg by A859,TARSKI:def 4;
              hence x in L~g;
             end;
             suppose ma<>len g;
              then ma<len g by A863,REAL_1:def 5;
              then A875: ma+1<=len g & k<=ma & ma<=ma+1
                by A16,A36,A863,XREAL_1:2,NAT_1:38;
              then A876: 1<=ma & len g1<=ma+1
                by A14,A863,XREAL_1:2;
              reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
              A877: qa`1<=p1`1 by A863;
               A878: now assume qa1`1<=p1`1;
                 then for q holds q=g/.(ma+1) implies q`1<=p1`1;
                then ma+1<=ma by A863,A875,A876;
                hence contradiction by REAL_2:174;
               end;
              then A879: qa`1<qa1`1 & qa`1<=p1`1 & p1`1<=qa1`1 &
              qa`2=ppi`2 & qa1 `2 = ppi`2 by A838,A863,A875,A876,A877,XREAL_1:2
;
              set lma = {p2: p2`2=ppi`2 & qa`1<=p2`1 & p2`1<=qa1`1};
              A880: qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                 LSeg(g,ma)=LSeg(qa,qa1) by A875,A876,TOPREAL1:def 5
              .= lma by A879,A880,TOPREAL3:16;
              then x in LSeg(g,ma) & LSeg(g,ma) in lg by A859,A875,A876,A877
,A878;
              then x in union lg by TARSKI:def 4;
              hence x in L~g;
             end;
             end;
            hence x in L~g;
           end;
           end;
          hence x in L~g;
         end;
           1<=len g1 by A14,A16,A36,XREAL_1:2;
        then 1 in dom g1 by FINSEQ_3:27;
        hence g/.1=f1/.1 by A34,FINSEQ_4:83
        .=f/.1 by A15,A19,FINSEQ_4:86;
           i1+1<=j1 by A684,NAT_1:38;
        then A881: 1<=l by XREAL_1:21;
        then A882: l in dom g2 & len g=len g1 + l by A685,FINSEQ_1:35
,FINSEQ_3:27;
        hence g/.len g=g2/.l by FINSEQ_4:84
        .=G*(i1+l,i2) by A685,A882
        .=f/.len f by A5,A49,A479;
        thus len f<=len g by A5,A16,A36,A881,A882,XREAL_1:9;
       end;
       end;
      hence thesis;
     end;
     end;
    hence thesis;
 end;
 end;
     for k holds P[k] from NAT_1:sch 1(A1,A3);
 hence thesis;
end;

theorem
   (for n st n in dom f ex i,j st [i,j] in Indices G &
f/.n=G*(i,j)) & f is_S-Seq implies
ex g st g is_sequence_on G & g is_S-Seq & L~f = L~g & f/.1 = g/.1 &
        f/.len f = g/.len g & len f<=len g
 proof assume that
  A1: for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j) and
  A2: f is_S-Seq;
  A3: f is one-to-one & 2<=len f & f is unfolded s.n.c. special
         by A2,TOPREAL1:def 10;
  then consider g such that
  A4: g is_sequence_on G and
  A5: g is one-to-one unfolded s.n.c. special &
  L~f = L~g & f/.1 = g/.1 & f/.len f = g/.len g & len f <= len g by A1,Th1;
  take g;
  thus g is_sequence_on G by A4;
     2<=len g by A3,A5,XREAL_1:2;
  hence g is_S-Seq by A5,TOPREAL1:def 10;
  thus thesis by A5;
 end;
