:: Properties of Go-Board - Part III
::  by Jaros{\l}aw Kotowicz and Yatsuka Nakamura
::
:: Received August 24, 1992
:: Copyright (c) 1992 Association of Mizar Users

environ

 vocabularies PRE_TOPC, EUCLID, FINSEQ_1, GOBOARD1, RELAT_1, TOPREAL1,
      FINSEQ_4, BOOLE, MATRIX_1, FUNCT_1, ABSVALUE, ARYTM_1, MCART_1, TREES_1,
      INCSP_1, SEQM_3, ORDINAL2, TARSKI;
 notations TARSKI, XBOOLE_0, ZFMISC_1, SUBSET_1, XCMPLX_0, XREAL_0, NAT_1,
      COMPLEX1, RELAT_1, FUNCT_1, FINSEQ_1, PRE_TOPC, FINSEQ_4, MATRIX_1,
      EUCLID, TOPREAL1, GOBOARD1;
 constructors SEQM_3, NAT_1, ABSVALUE, TOPREAL1, GOBOARD1, FINSEQ_4, INT_1,
      MEMBERED, REAL_1, COMPLEX1, XBOOLE_0;
 registrations RELSET_1, STRUCT_0, EUCLID, INT_1, XREAL_0, MEMBERED, ORDINAL2;
 requirements REAL, NUMERALS, SUBSET, BOOLE, ARITHM;
 definitions TARSKI, TOPREAL1, XBOOLE_0;
 theorems AXIOMS, TARSKI, REAL_1, NAT_1, ZFMISC_1, FUNCT_1, FINSEQ_1, ABSVALUE,
      SQUARE_1, FINSEQ_3, REAL_2, MATRIX_1, EUCLID, TOPREAL1, TOPREAL3,
      GOBOARD1, GOBOARD2, FINSEQ_4, PROB_1, PARTFUN2, INT_1, XBOOLE_0,
      XBOOLE_1, XCMPLX_1;
 schemes NAT_1, GOBOARD1, GOBOARD2;

begin

 reserve p,p1,p2,q for Point of TOP-REAL 2,
         f,g,g1,g2 for FinSequence of TOP-REAL 2,
         n,m,i,j,k for Nat,
         G for Go-board,
         x for set;

Lm1:
now let f,k;
    assume A1: len f=k+1;
    assume k<>0;
    then A2: 0<k & k<=k+1 by NAT_1:19,29;
    then 0+1<=k & k<=len f & k+1 <= len f by A1,NAT_1:38;
then A3: k in dom f by FINSEQ_3:27;
A4: len (f|k)=k by A1,A2,FINSEQ_1:80;
A5: dom(f|k)=Seg len(f|k) by FINSEQ_1:def 3;
   assume A6:f is unfolded;
  thus f|k is unfolded
   proof set f1 = f|k;
   let n; assume
A7: 1<=n & n+2 <= len f1;
    then n in dom f1 & n+1 in dom f1 & n+2 in dom f1 & n+1+1=n+(1+1)
       by GOBOARD2:4;
then A8: LSeg(f1,n)=LSeg(f,n) & LSeg(f1,n+1)=LSeg(f,n+1) &
     f1/.(n+1)=f/.(n+1) by A3,A4,A5,FINSEQ_4:86,TOPREAL3:24;
     len f1 <= len f by A1,A2,FINSEQ_1:80;
  then n+2 <= len f by A7,AXIOMS:22;
  hence LSeg(f1,n) /\ LSeg(f1,n+1)={f1/.(n+1)} by A6,A7,A8,TOPREAL1:def 8;
 end;
end;

theorem Th1:
(for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
 f is one-to-one unfolded s.n.c. special
implies
ex g st g is_sequence_on G & g is one-to-one unfolded s.n.c. special &
 L~f = L~g & f/.1 = g/.1 & f/.len f = g/.len g & len f <= len g
proof
defpred P[Nat] means for f st len f = $1 &
 (for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
  f is one-to-one unfolded s.n.c. special
 ex g st g is_sequence_on G &
  g is one-to-one unfolded s.n.c. special &
  L~f=L~g & f/.1=g/.1 & f/.len f=g/.len g & len f<=len g;
A1: P[0]
 proof let f such that
  A2: len f=0 &
  (for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j)) &
  f is one-to-one unfolded s.n.c. special;
  take g=f;
     f= {} by A2,FINSEQ_1:25;
   then for n holds n in dom g & n+1 in dom g implies (
    for m,k,i,j st [m,k] in Indices G & [i,j] in Indices G & g/.n=G*(m,k) &
       g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1) by FINSEQ_1:26;
  hence thesis by A2,GOBOARD1:def 11;
 end;
A3: for k st P[k] holds P[k+1]
 proof let k such that
  A4: P[k];
  let f such that
A5: len f=k+1 and
A6: for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j) and
A7: f is one-to-one and
A8: f is unfolded and
A9: f is s.n.c. and
A10: f is special;
   per cases;
   suppose k=0;
    then A11: dom f = {1} by A5,FINSEQ_1:4,def 3;
    take g=f;
        now let n; assume
         n in dom g & n+1 in dom g;
      then n=1 & n+1=1 by A11,TARSKI:def 1;
      hence for i1,i2,j1,j2 be Nat st [i1,i2] in Indices G &
      [j1,j2] in Indices G &
       g/.n=G*(i1,i2) & g/.(n+1)=G*(j1,j2) holds abs(i1-j1)+abs(i2-j2)=1;
     end;
    hence g is_sequence_on G by A6,GOBOARD1:def 11;
    thus g is one-to-one unfolded s.n.c. special &
     L~f=L~g & f/.1=g/.1 & f/.len f=g/.len g & len f<=len g by A7,A8,A9,A10;
   end;
   suppose A12: k<>0;
    then A13: 0<k & k<=k+1 by NAT_1:19,29;
    then A14: 0+1<=k & k<=len f & k+1 <= len f by A5,NAT_1:38;
then A15: k in dom f by FINSEQ_3:27;
A16: len (f|k)=k by A5,A13,FINSEQ_1:80;
A17: dom(f|k)=Seg len(f|k) by FINSEQ_1:def 3;
A18: k in Seg k by A14,FINSEQ_1:3;
A19: 1 in Seg k by A14,FINSEQ_1:3;
    set f1=f|k;
    A20: now let n; assume A21: n in dom f1;
       then n in dom f by A15,A16,A17,FINSEQ_4:86;
      then consider i,j such that
      A22: [i,j] in Indices G & f/.n=G*(i,j) by A6;
      take i,j;
      thus [i,j] in Indices G & f1/.n=G*(i,j)
       by A15,A16,A17,A21,A22,FINSEQ_4:86;
     end;
       f1 = f|Seg k by FINSEQ_1:def 15;
    then A23: f1 is one-to-one by A7,FUNCT_1:84;
    A24: f1 is unfolded by A5,A8,A12,Lm1;
    A25: f1 is s.n.c. by A9,GOBOARD2:12;
       f1 is special
     proof let n; assume
      A26: 1<=n & n+1 <= len f1;
      then n in dom f1 & n+1 in dom f1 by GOBOARD2:3;
      then A27: f1/.n=f/.n & f1/.(n+1)=f/.(n+1) by A15,A16,A17,FINSEQ_4:86;
         len f1 <=len f by A5,A13,FINSEQ_1:80;
      then n+1 <= len f by A26,AXIOMS:22;
      hence (f1/.n)`1=(f1/.(n+1))`1 or (f1/.n)`2=(f1/.(n+1))`2
       by A10,A26,A27,TOPREAL1:def 7;
     end;
    then consider g1 such that
A28: g1 is_sequence_on G and
A29: g1 is one-to-one and
A30: g1 is unfolded and
A31: g1 is s.n.c. and
A32: g1 is special and
A33: L~g1=L~f1 and
A34: g1/.1=f1/.1 and
A35: g1/.len g1=f1/.len f1 and
A36: len f1<=len g1 by A4,A16,A20,A23,A24,A25;
    A37: k=1 implies L~g1={} & rng g1 = {f/.k}
     proof assume A38: k=1;
      hence L~g1={} by A16,A33,TOPREAL1:28;
then A39:  (len g1=1 or len g1=0) & 1<=len g1
           by A5,A36,A38,FINSEQ_1:80,TOPREAL1:28;
then A40:  len g1 in dom g1 by FINSEQ_3:27;
      A41: g1/.len g1=f/.k by A15,A16,A18,A35,FINSEQ_4:86;
      then f/.k in rng g1 by A40,PARTFUN2:4;
      then A42: {f/.k} c= rng g1 by ZFMISC_1:37;
         rng g1 c= {f/.k}
       proof let x; assume x in rng g1; then consider n such that
        A43: n in dom g1 & g1/.n=x by PARTFUN2:4;
           n in Seg len g1 by A43,FINSEQ_1:def 3;
        then n=len g1 by A39,FINSEQ_1:4,TARSKI:def 1;
        hence x in {f/.k} by A41,A43,TARSKI:def 1;
       end;
      hence rng g1={f/.k} by A42,XBOOLE_0:def 10;
     end;
    A44: 1<k implies rng g1 c= L~f1
     proof assume 1<k; then 1+1<=k by NAT_1:38;
      then A45: 2<=len g1 by A16,A36,AXIOMS:22;
      let x; assume x in rng g1;
      then consider n such that
      A46: n in dom g1 & g1/.n=x by PARTFUN2:4;
      thus x in L~f1 by A33,A45,A46,GOBOARD1:16;
     end;
    consider i1,i2 be Nat such that
    A47: [i1,i2] in Indices G & f/.k=G*(i1,i2) by A6,A15;
       1<=len f by A14,AXIOMS:22;
    then A48: k+1 in dom f by A5,FINSEQ_3:27;
    then consider j1,j2 be Nat such that
    A49: [j1,j2] in Indices G & f/.(k+1)=G*(j1,j2) by A6;
    A50: Indices G = [:dom G,Seg width G:] by MATRIX_1:def 5;
    then A51: i1 in dom G & i2 in Seg width G &
        j1 in dom G & j2 in Seg width G by A47,A49,ZFMISC_1:106;
    A52:dom G = Seg len G by FINSEQ_1:def 3;
    A53: (for n st n in dom g1 ex m,k st [m,k] in Indices G &
    g1/.n=G*(m,k)) &
    for n st n in dom g1 & n+1 in dom g1 holds
     for m,k,i,j st [m,k] in Indices G &
     [i,j] in Indices G & g1/.n = G*(m,k) &
      g1/.(n+1) = G*(i,j) holds abs(m-i)+abs(k-j) = 1 by A28,GOBOARD1:def 11;
    reconsider l1 = Line(G,i1), c1 = Col(G,i2) as FinSequence of TOP-REAL 2;
    set x1 = X_axis(l1), y1 = Y_axis(l1),
        x2 = X_axis(c1), y2 = Y_axis(c1);
A54:  x1 is constant by A51,GOBOARD1:def 6;
A55:  y1 is increasing by A51,GOBOARD1:def 8;
A56:  x2 is increasing by A51,GOBOARD1:def 9;
A57:  y2 is constant by A51,GOBOARD1:def 7;
A58: dom x1=Seg len x1 by FINSEQ_1:def 3;
A59: dom y1=Seg len y1 by FINSEQ_1:def 3;
A60: len y1=len l1 by GOBOARD1:def 4;
A61: len x1=len l1 by GOBOARD1:def 3;
A62: len l1=width G by MATRIX_1:def 8;
then A63:Seg width G = dom l1 by FINSEQ_1:def 3;
A64: dom x2= Seg len x2 by FINSEQ_1:def 3;
A65: dom y2=Seg len y2 by FINSEQ_1:def 3;
A66: len x2=len c1 by GOBOARD1:def 3;
then A67: dom c1 = Seg len x2 by FINSEQ_1:def 3
            .= dom x2 by FINSEQ_1:def 3;
A68: len y2=len c1 by GOBOARD1:def 4;
A69: len c1 = len G by MATRIX_1:def 9;
then A70: dom c1 = Seg len G by FINSEQ_1:def 3
           .= dom G by FINSEQ_1:def 3;
        now per cases by A10,A15,A47,A48,A49,GOBOARD2:16;
     suppose A71: i1=j1;
      set ppi = G*(i1,i2), pj = G*(i1,j2);
          now per cases by AXIOMS:21;
       case A72: i2>j2;
        then reconsider l=i2-j2 as Nat by INT_1:18;
        A73: now let n; assume n in Seg l;
          then A74: 1<=n & n<=l & 0<=j2 by FINSEQ_1:3,NAT_1:18;
          then l<=i2 by PROB_1:2;
          then n<=i2 by A74,AXIOMS:22;
          then reconsider w=i2-n as Nat by INT_1:18;
             0<=n & i2-l<=i2-n by A74,REAL_1:92;
          then i2-n<=i2 & i2<=width G & j2<=w & 1<=j2
            by A51,FINSEQ_1:3,PROB_1:2;
          then 1<=w & w<=width G by AXIOMS:22;
          then w in Seg width G by FINSEQ_1:3;
          hence i2-n is Nat & [i1,i2-n] in Indices G & i2-n in Seg width G
          by A50,A51,ZFMISC_1:106;
         end;
        defpred P1[Nat,set] means for m st m=i2-$1 holds $2=G*(i1,m);
        A75: now let n; assume n in Seg l;
          then reconsider m=i2-n as Nat by A73;
          take p=G*(i1,m);
          thus P1[n,p];
         end;
        consider g2 such that
        A76: len g2=l & for n st n in Seg l holds P1[n,g2/.n]
         from GOBOARD1:sch 1(A75);
A77:    dom g2 = Seg l by A76,FINSEQ_1:def 3;
        take g=g1^g2;
            now let n; assume A78: n in dom g2;
          then reconsider m=i2-n as Nat by A73,A77;
          take k=i1,m;
          thus [k,m] in Indices G & g2/.n=G*(k,m) by A73,A76,A77,A78;
         end;
        then A79: for n st n in dom g ex i,j st [i,j] in Indices G & g/.n=G*
             (i,j) by A53,GOBOARD1:39;
        A80: now let n; assume
A81:      n in dom g2 & n+1 in dom g2;
          then A82: [i1,i2-n] in Indices G
           & [i1,i2-(n+1)] in Indices G by A73,A77;
          reconsider m1=i2-n ,m2=i2-(n+1) as Nat by A73,A77,A81;
          A83: g2/.n=G*(i1,m1) & g2/.(n+1)=G*(i1,m2) by A76,A77,A81;
          let l1,l2,l3,l4 be Nat; assume
             [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2) &
           g2/.(n+1)=G*(l3,l4);
           then l1=i1 & l2=m1 & l3=i1 & l4=m2 by A82,A83,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)= 0+abs(i2-n-(i2-(n+1))) by ABSVALUE:7
           .= 1 by ABSVALUE:def 1;
         end;
         now let l1,l2,l3,l4 be Nat; assume
          A84: [l1,l2] in Indices G & [l3,l4] in Indices G &
          g1/.len g1=G*(l1,l2) &
          g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
          then A85: [i1,i2-1] in Indices G &
          f1/.len f1=f/.k by A15,A16,A18,A73,A77,FINSEQ_4:86;
          reconsider m1=i2-1 as Nat by A73,A77,A84;
             g2/.1=G*(i1,m1) by A76,A77,A84;
           then l1=i1 & l2=i2 & l3=i1 & l4=m1
            by A35,A47,A84,A85,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)=0+abs(i2-(i2-1)) by ABSVALUE:7
          .=1 by ABSVALUE:def 1;
         end;
        then for n st n in dom g & n+1 in dom g holds
         for m,k,i,j st [m,k] in Indices G & [i,j] in Indices G &
         g/.n=G*(m,k) &
          g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A80,GOBOARD1:40;
        hence g is_sequence_on G by A79,GOBOARD1:def 11;
     set lk={w where w is Point of TOP-REAL 2: w`1=ppi`1 & pj`2<=w`2 & w`2<=
ppi`2};
           l1/.i2=l1.i2 & l1/.j2 = l1.j2 by A51,A63,FINSEQ_4:def 4;
        then A86: l1/.i2=ppi & l1/.j2=pj by A51,MATRIX_1:def 8;
        then A87: y1.i2=ppi`2 & y1.j2=pj`2 & x1.i2=ppi`1 & x1.j2=pj`1 & l=len
g2
          by A51,A58,A59,A60,A61,A62,A76,GOBOARD1:def 3,def 4;
   then A88: pj`2<ppi`2 & ppi`1=pj`1 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj`2]|
        by A51,A54,A55,A58,A59,A60,A61,A62,A72,EUCLID:57,GOBOARD1:def 1,def 2;
        A89: LSeg(f,k)=LSeg(pj,ppi) by A14,A47,A49,A71,TOPREAL1:def 5
        .= lk by A88,TOPREAL3:15;
        A90: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5;
            now let n,m; assume
          A91: n in dom g2 & m in dom g2 & n<>m;
          then A92: [i1,i2-n] in Indices G& [i1,i2-m] in Indices G by A73,A77;
          reconsider n1=i2-n, m1=i2-m as Nat by A73,A77,A91;
          A93: g2/.n=G*(i1,n1) & g2/.m=G*(i1,m1) by A76,A77,A91;
          assume g2/.n=g2/.m;
          then n1=m1 by A92,A93,GOBOARD1:21;
          hence contradiction by A91,XCMPLX_1:20;
         end;
         then for n,m st n in dom g2 & m in dom g2 &
         g2/.n = g2/.m holds n = m;
then A94:     g2 is one-to-one & dom g2=Seg len g2 by FINSEQ_1:def 3
,PARTFUN2:16;
        A95: not f/.k in rng g2
         proof assume f/.k in rng g2;
          then consider n such that
          A96: n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
          A97: [i1,i2-n] in Indices G by A73,A76,A94,A96;
          reconsider n1=i2-n as Nat by A73,A76,A94,A96;
             g2/.n=G*(i1,n1) & 0+1<=n by A76,A94,A96,FINSEQ_1:3;
           then n1=i2 & 0<n by A47,A96,A97,GOBOARD1:21;
          hence contradiction by SQUARE_1:29;
         end;
        A98: now let n,p; assume
          A99: n in dom g2 & g2/.n=p;
          then A100: P1[n,g2/.n] &
          1<=n & n<=len g2& i2-n in Seg width G by A73,A76,A94,FINSEQ_3:27;
          reconsider n1=i2-n as Nat by A73,A77,A99;
          set pn = G*(i1,n1);
             l1/.n1=l1.n1 by A63,A100,FINSEQ_4:def 4;
          then A101: g2/.n=pn & l1/.n1=pn & 0<=n & i2-len g2<=n1
            by A100,MATRIX_1:def 8,REAL_1:92;
          then A102: x1.n1=pn`1 & x1.n1=x1.i2 & y1.n1=pn`2 & n1<=i2 & j2<=n1
           by A51,A54,A58,A59,A60,A61,A62,A76,A100,GOBOARD1:def 2,def 3,def 4
,REAL_2:173;
          hence p`1=ppi`1 & pj`2<=p`2 & p`2<=ppi`2
            by A51,A55,A59,A60,A62,A87,A99,A100,A101,GOBOARD2:18;
             dom l1 = Seg len l1 by FINSEQ_1:def 3;
          hence p in rng l1
          by A62,A99,A100,A101,PARTFUN2:4;  0<n by A100;
          then n1<i2 by SQUARE_1:29;
          hence p`2<ppi`2 by A51,A55,A59,A60,A62,A87,A99,A100,A101,A102,
GOBOARD1:def 1;
         end;
        A103: now let n,m,p,q; assume
          A104: n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
          then A105: P1[n,g2/.n] & i2-n in Seg width G &
              P1[m,g2/.m] & i2-m in Seg width G by A73,A76,A77;
          reconsider n1=i2-n, m1=i2-m as Nat by A73,A77,A104;
          set pn = G*(i1,n1), pm = G*(i1,m1);
             l1/.n1=l1.n1 & l1/.m1 = l1.m1 by A63,A105,FINSEQ_4:def 4;
          then A106: g2/.n=pn & l1/.n1=pn & g2/.m=pm & l1/.m1=pm & m1<n1
            by A104,A105,MATRIX_1:def 8,REAL_1:92;
          then y1.n1=pn`2 & y1.m1=pm`2 by A59,A60,A62,A105,GOBOARD1:def 4;
          hence q`2<p`2 by A55,A59,A60,A62,A104,A105,A106,GOBOARD1:def 1;
         end;
        A107: rng g2 c= LSeg(f,k)
         proof let x; assume x in rng g2;
          then consider n such that
          A108: n in dom g2 & g2/.n=x by PARTFUN2:4;
          reconsider n1=i2-n as Nat by A73,A76,A94,A108;
          set pn = G*(i1,n1);
          A109: g2/.n=pn by A76,A94,A108;
          then pn`1=ppi`1 & pj`2<=pn`2 & pn`2<=ppi`2 by A98,A108;
          hence x in LSeg(f,k) by A89,A108,A109;
         end;
           rng g1 /\ rng g2 = {}
         proof consider x being Element of rng g1 /\ rng g2;
          assume not thesis;
          then A110: x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
              now per cases by A14,REAL_1:def 5;
           suppose k=1;
            hence contradiction by A37,A95,A110,TARSKI:def 1;
           end;
           suppose 1<k;
            then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A44,A107,A110,GOBOARD2:9,XBOOLE_0:def 3;
            hence contradiction by A95,A110,TARSKI:def 1;
           end;
           end;
          hence contradiction;
         end;
        then rng g1 misses rng g2 by XBOOLE_0:def 7;
        hence g is one-to-one by A29,A94,FINSEQ_3:98;
        A111: for n st 1<=n & n+2 <= len g2 holds
             LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
         proof let n; assume
          A112: 1<=n & n+2 <= len g2;
          then A113: n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
          then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
          g2/.(n+2) in rng g2 by PARTFUN2:4;
then A114: g2/.n in lk & g2/.(n+1) in lk & g2/.(n+2) in lk by A89,A107;
          then consider u be Point of TOP-REAL 2 such that
          A115: g2/.n=u & u`1=ppi`1 & pj`2<=u`2 & u`2<=ppi`2;
          consider u1 be Point of TOP-REAL 2 such that
          A116: g2/.(n+1)=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2 by A114;
          consider u2 be Point of TOP-REAL 2 such that
          A117: g2/.(n+2)=u2 & u2`1=ppi`1 & pj`2<=u2`2 & u2`2<=ppi`2 by A114;
          set lg = {w where w is Point of TOP-REAL 2:
                     w`1=ppi`1 & u2`2<=w`2 & w`2<=u`2};
          A118: n+(1+1) = n+1+1;
             n+1 <= n+2 by AXIOMS:24;
           then n+1 <= len g2 by A112,AXIOMS:22;
then A119:      LSeg(g2,n)=LSeg(u,u1) by A112,A115,A116,TOPREAL1:def 5;
             1 <= n+1 by NAT_1:29;
then A120:      LSeg(g2,n+1)=LSeg(u1,u2) by A112,A116,A117,A118,TOPREAL1:def 5;
             n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:38;
          then A121: u2`2<u1`2 & u1`2<u`2 by A103,A113,A115,A116,A117;
          then A122: u2`2<=u1`2 & u1`2<=u`2 & u2`2<u`2 by AXIOMS:22;
          A123: u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2]| by A116,A121,
EUCLID:57;
          then LSeg(g2/.n,g2/.(n+2))=lg by A115,A117,A122,TOPREAL3:15;
          hence thesis by A115,A116,A117,A119,A120,A123,TOPREAL1:14;
         end;
        thus g is unfolded
         proof let n; assume
          A124: 1<=n & n+2 <= len g;
then A125:     n+1+1<=len g;
          A126: 1 <= n+1 by NAT_1:29;
          A127: n<=n+1 & n+1<=n+1+1 by NAT_1:29;
then A128:      n+1 <= len g by A124,AXIOMS:22;
A129:      n+(1+1)=n+1+1;
A130:      len g=len g1+len g2 by FINSEQ_1:35;
              n+2-len g1 = n-len g1 +2;
          then A131: n-len g1 + 2 <= len g2 by A124,A130,REAL_1:86;
A132:       n+1+1 = n+(1+1);
           per cases;
           suppose A133: n+2 <= len g1;
        then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
              by A124,GOBOARD2:4;
            then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
            g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
            hence thesis by A30,A124,A133,TOPREAL1:def 8;
           end;
           suppose len g1 < n+2;
            then len g1+1<=n+2 by NAT_1:38;
            then A134: len g1<=n+2-1 by REAL_1:84;
                now per cases;
             suppose A135: len g1=n+1;
                  now assume A136: k=1;
                   1<len g1 by A124,A135,NAT_1:38;
                then 1+1<=len g1 by NAT_1:38;
                hence contradiction by A37,A136,TOPREAL1:29;
               end;
              then A137: 1<k & LSeg(g1,n) c= L~f1
                 by A14,A33,REAL_1:def 5,TOPREAL3:26;
              then A138: L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                 1<=n+1 by NAT_1:29;
              then A139: n in dom g1 & n+1 in dom g1
              by A124,A127,A135,FINSEQ_3:27;
              then A140: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
              A141: g/.(n+1)=f1/.len f1 by A35,A135,A139,FINSEQ_4:83
              .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                A142: 1<=len g-len g1 by A125,A135,REAL_1:84;
              then A143: g/.(n+2)=g2/.1 by A129,A130,A135,GOBOARD2:5;
                 1 in dom g2 by A130,A142,FINSEQ_3:27;
              then A144: g2/.1 in rng g2 by PARTFUN2:4;
              then g2/.1 in lk by A89,A107;
              then consider u1 be Point of TOP-REAL 2 such that
              A145: g2/.1=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2;
                 ppi in LSeg(ppi,pj) by TOPREAL1:6;
              then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1)
                by A90,A107,A124,A126,A132,A141,A143,A144,A145,TOPREAL1:12
,def 5;
              then A146: LSeg(g,n) /\ LSeg(g,n+1) c= {g/.(n+1)}
               by A47,A137,A138,A140,A141,XBOOLE_1:27;
                 g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                by A124,A126,A128,A132,TOPREAL1:27;
              then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;
              then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
              hence thesis by A146,XBOOLE_0:def 10;
             end;
             suppose len g1<>n+1; then len g1<n+1 by A134,REAL_1:def 5;
              then A147: len g1<=n by NAT_1:38;
              then reconsider n1=n-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A148: len g1=n;
                   1<=len g1 by A14,A16,A36,AXIOMS:22;
                then len g1 in dom g1 by FINSEQ_3:27;
                then A149: g/.n=f1/.len f1 by A35,A148,FINSEQ_4:83
                .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                   1 <= len g2 by A128,A130,A148,REAL_1:53;
                then A150: g/.(n+1)=g2/.1 by A148,GOBOARD2:5;
                   2 <= len g2 by A124,A130,A148,REAL_1:53;
                then A151: g/.(n+2)=g2/.2 by A148,GOBOARD2:5;
                A152: 0+2<=len g2 by A124,A130,A148,REAL_1:53;
                then 1<=len g2 by AXIOMS:22;
                then A153: 1 in dom g2 & 2 in dom g2 by A152,FINSEQ_3:27;
                then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                then A154: g2/.1 in lk & g2/.2 in lk by A89,A107;
                then consider u1 be Point of TOP-REAL 2 such that
                A155: g2/.1=u1 & u1`1=ppi`1 & pj`2<=u1`2 & u1`2<=ppi`2;
                consider u2 be Point of TOP-REAL 2 such that
          A156: g2/.2=u2 & u2`1=ppi`1 & pj`2<=u2`2 & u2`2<=ppi`2 by A154;
                A157: u2`2<u1`2 by A103,A153,A155,A156;
                then A158: u2`2<=u1`2 & u2`2<ppi`2 & u2=|[u2`1,u2`2]|
                  by A155,AXIOMS:22,EUCLID:57;
                set lg = {w where w is Point of TOP-REAL 2 :
                          w`1=ppi`1 & u2`2<=w`2 & w`2<=ppi`2};
                A159: u1 in lg by A155,A157;
A160:            LSeg(g,n)=LSeg(ppi,u1)
                 by A124,A128,A149,A150,A155,TOPREAL1:def 5;
A161:            LSeg(g,n+1)=LSeg(u1,u2)
                 by A124,A126,A132,A150,A151,A155,A156,TOPREAL1:def 5;
                   LSeg(ppi,g2/.2)=lg by A88,A156,A158,TOPREAL3:15;
                hence thesis by A150,A155,A156,A159,A160,A161,TOPREAL1:14;
               end;
               suppose len g1<>n;
then A162:              len g1<n by A147,REAL_1:def 5;
              n1 + len g1 = n;
then A163:            LSeg(g,n)=LSeg(g2,n1) by A128,A162,GOBOARD2:10;
A164:            len g1<n+1 by A127,A162,AXIOMS:22;
A165:            len g1+1<=n by A162,NAT_1:38;
A166:            n+1 = n1+1+len g1;
A167:             1<=n1+1 by NAT_1:29;
                   n1 + 1 + len g1 = n + 1;
then A168:              n1+1 <= len g2 by A128,A130,REAL_1:53;
A169:             LSeg(g,n+1)=LSeg(g2,n1+1) by A125,A164,A166,GOBOARD2:10;
A170:             g/.(n+1)=g2/.(n1+1) by A166,A167,A168,GOBOARD2:5;
                   1<=n1 by A165,REAL_1:84;
                hence thesis by A111,A131,A163,A169,A170;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
         end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
           m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
         proof let n,m; assume that
          A171: m>n+1 and
          A172: n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
          A173: LSeg(g2,n) /\ LSeg(g2,m) <> {};
          A174: 1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
 len g2 by A172,FINSEQ_3:27;
          reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
           as Point of TOP-REAL 2;
          set lp = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                         p2`2<=w`2 & w`2<=p1`2},
              lq = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                         q2`2<=w`2 & w`2<=q1`2};
              m<m+1 & n<n+1 by NAT_1:38;
           then A175: p2`2<p1`2 & q2`2<q1`2 & p1`1=ppi`1 & p2`1=ppi`1 & q1`1=
ppi`1 &
           q2`1=ppi`1 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
           p2=|[p2`1,p2`2]| &
           q2=|[q2`1,q2`2]| by A98,A103,A172,EUCLID:57;
           A176: LSeg(g2,n) = LSeg(p2,p1) by A174,TOPREAL1:def 5
           .=lp by A175,TOPREAL3:15;
           A177: LSeg(g2,m) = LSeg(q2,q1) by A174,TOPREAL1:def 5
           .=lq by A175,TOPREAL3:15;
           consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
           A178: x in LSeg(g2,n) & x in LSeg(g2,m) by A173,XBOOLE_0:def 3;
then A179:         ex tn be Point of TOP-REAL 2
               st tn=x & tn`1=ppi`1 & p2`2<=tn`2 & tn`2<=p1`2 by A176;
A180:         ex tm be Point of TOP-REAL 2 st
              tm=x & tm`1=ppi`1 & q2`2<=tm`2 & tm`2<=q1`2 by A177,A178;
               q1`2<p2`2 by A103,A171,A172;
            hence contradiction by A179,A180,AXIOMS:22;
         end;
then A181:    g2 is s.n.c. by GOBOARD2:6;
        A182: L~g2 c= LSeg(f,k)
         proof
          set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; let x; assume
             x in L~g2; then x in union ls by TOPREAL1:def 6;
          then consider X be set such that
          A183: x in X & X in ls by TARSKI:def 4;
          consider m such that
          A184: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A183;
              m in dom g2 & m+1 in dom g2 by A184,GOBOARD2:3;
          then A185: g2/.m in rng g2 & g2/.(m+1) in rng g2 by PARTFUN2:4;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          A186: LSeg(q1,q2) c= LSeg(ppi,pj) by A90,A107,A185,TOPREAL1:12;
             LSeg(g2,m)=LSeg(q1,q2) by A184,TOPREAL1:def 5;
          hence thesis by A90,A183,A184,A186;
         end;
        A187: not f/.k in L~g2
         proof set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; assume
             f/.k in L~g2; then f/.k in union ls by TOPREAL1:def 6;
          then consider X be set such that
          A188: f/.k in X & X in ls by TARSKI:def 4;
          consider m such that
          A189: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A188;
          A190: m in dom g2 & m+1 in dom g2 & m<m+1
          by A189,GOBOARD2:3,NAT_1:38;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          set lq={w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                       q2`2<=w`2 & w`2<=q1`2};
          A191: q1`1=ppi`1 & q2`1=ppi`1 & q2`2<q1`2 & q1=|[q1`1,q1`2]|
          & q2=|[q2`1,q2`2]| by A98,A103,A190,EUCLID:57;
             LSeg(g2,m)=LSeg(q2,q1) by A189,TOPREAL1:def 5
          .=lq by A191,TOPREAL3:15;
          then ex p st p=f/.k & p`1=ppi`1 & q2`2<=p`2 & p`2<=q1`2 by A188,A189
;
          hence contradiction by A47,A98,A190;
         end;
        A192: L~g1 /\ L~g2 = {}
         proof
           per cases;
           suppose k=1; hence thesis by A37;
           end;
           suppose k<>1; then 1<k by A14,REAL_1:def 5;
            then L~g1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,A33,GOBOARD2:9;
            then A193: L~g1 /\ L~g2 c= {f/.k} by A182,XBOOLE_1:26;
                now consider x being Element of L~g1 /\ L~g2;
              assume L~g1 /\ L~g2 <> {};
              then x in {f/.k} & x in L~g2 by A193,TARSKI:def 3,XBOOLE_0:def 3
;
              hence contradiction by A187,TARSKI:def 1;
             end;
            hence thesis;
         end;
         end;
           for n,m st m>n+1 & n in dom g & n+1 in dom g &
        m in dom g & m+1 in dom g holds LSeg(g,n) misses LSeg(g,m)
         proof let n,m; assume that
          A194: m>n+1 and
          A195: n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
          A196: 1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
          m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
            by A195,FINSEQ_1:35,FINSEQ_3:27,NAT_1:29;
          set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
              l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
          A197: L~g1=union l1 & L~g2=union l2 & n+1 <= len g & m+1 <= len g
            by A195,FINSEQ_3:27,TOPREAL1:def 6;
             j2+1<=i2 by A72,NAT_1:38;
          then A198: 1<=l by REAL_1:84;
          then A199: 1 in dom g2 by A76,FINSEQ_3:27;
          reconsider qq=g2/.1 as Point of TOP-REAL 2;
          set ql={z where z is Point of TOP-REAL 2: z`1=ppi`1 &
                     qq`2<=z`2 & z`2<=ppi`2};
          A200: 1<=len g1 by A14,A16,A36,AXIOMS:22;
           then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
          then A201: g/.len g1=g1/.len g1 by FINSEQ_4:83
             .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
          A202: len g1<len g1 +1 & len g1+1<=len g
            by A76,A196,A198,NAT_1:38,REAL_1:55;
          A203: g/.(len g1+1)=qq by A76,A198,GOBOARD2:5;
          A204: qq`1=ppi`1 & pj`2<=qq`2 & qq`2<ppi`2 & qq=|[qq`1,qq`2]|
           by A98,A199,EUCLID:57;
    A205: LSeg(g,len g1)=LSeg(qq,ppi) by A200,A201,A202,A203,TOPREAL1:def 5
           .= ql by A88,A204,TOPREAL3:15;
            A206: n+1<=m+1 by A194,A196,AXIOMS:22;
                now per cases;
             suppose A207: m+1<=len g1;
              then A208: m<=len g1 & n+1<=len g1 by A196,A206,AXIOMS:22;
              then n<=len g1 by A196,AXIOMS:22;
              then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
               by A196,A207,A208,FINSEQ_3:27;
              then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m) by TOPREAL3:25;
              hence thesis by A31,A194,TOPREAL1:def 9;
             end;
             suppose len g1<m+1;
              then A209: len g1<=m by NAT_1:38;
              then reconsider m1=m-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A210: m=len g1;
                    now assume A211: k=1;
                     1<len g1 by A194,A196,A210,AXIOMS:22;
                  then 1+1<=len g1 by NAT_1:38;
                  hence contradiction by A37,A211,TOPREAL1:29;
                 end;
                then 1<k by A14,REAL_1:def 5;
                then A212: L~f1 /\ LSeg(f,k) ={f/.k}
                 by A5,A8,A9,GOBOARD2:9;
                   n<=len g1 by A194,A196,A210,AXIOMS:22;
                then A213: n in dom g1 & n+1 in dom g1
                by A194,A196,A210,FINSEQ_3:27;
                then A214: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                then LSeg(g,n) in l1 by A194,A196,A210;
                then A215: LSeg(g,n) c= L~f1 by A33,A197,ZFMISC_1:92;
                   LSeg(g,m) c= LSeg(f,k)
                 proof let x; assume x in LSeg(g,m);
                  then consider px be Point of TOP-REAL 2 such that
                  A216: px=x & px`1=ppi`1 & qq`2<=px`2 & px`2<=
ppi`2 by A205,A210;
                     pj`2<=px`2 by A204,A216,AXIOMS:22;
                  hence thesis by A89,A216;
                 end;
                then A217: LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                 by A212,A215,XBOOLE_1:27;
                    now consider x being Element of LSeg(g,n) /\ LSeg(g,m);
                  assume LSeg(g,n)/\ LSeg(g,m)<>{};
                  then A218: x in LSeg(g,n) & x in {f/.k}
                  by A217,TARSKI:def 3,XBOOLE_0:def 3;
                  then A219: x=f/.k by TARSKI:def 1;
                     f/.k=g1/.len g1 by A15,A16,A18,A35,FINSEQ_4:86;
                  hence contradiction
                  by A29,A30,A31,A194,A210,A213,A214,A218,A219,GOBOARD2:7;
                 end;
                hence thesis by XBOOLE_0:def 7;
               end;
               suppose
              m<>len g1;
                then A220: len g1<m & m+1 = m1+1 +len g1
                 by A209,REAL_1:def 5;
                   m = m1+len g1;
                then A221: LSeg(g,m)=LSeg(g2,m1) by A196,A220,GOBOARD2:10;
                   m1+1<=len g2 & len g1+1<=
m by A196,A220,NAT_1:38,REAL_1:53;
                then A222: 1<=m1 & m1+1 <= len g2 by REAL_1:84;
                then LSeg(g,m) in l2 by A221;
                then A223: LSeg(g,m) c= L~g2 by A197,ZFMISC_1:92;
                    now per cases;
                 suppose A224: n+1<=len g1;
                  then n<=len g1 by A196,AXIOMS:22;
                  then n in dom g1 & n+1 in dom g1 by A196,A224,FINSEQ_3:27;
                   then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                  then LSeg(g,n) in l1 by A196,A224;
                  then LSeg(g,n) c= L~g1 by A197,ZFMISC_1:92;
                  then LSeg(g,n) /\ LSeg(g,m) c= {} by A192,A223,XBOOLE_1:27;
                  then LSeg(g,n) /\ LSeg(g,m) = {} by XBOOLE_1:3;
                  hence thesis by XBOOLE_0:def 7;
                 end;
                 suppose len g1<n+1;
                  then A225: len g1<=n by NAT_1:38;
                  then reconsider n1=n-len g1 as Nat by INT_1:18;
A226:               n - len g1 + 1 = n + 1 - len g1;
A227:               n = n1 + len g1;
                      now per cases;
                   suppose A228: len g1=n;
                        now consider x being Element of LSeg(g,n) /\ LSeg(g,m);
                      assume LSeg(g,n) /\ LSeg(g,m)<>{};
                      then A229: x in LSeg(g,n) & x in LSeg(g,m)
                      by XBOOLE_0:def 3;
then A230:                      ex qx be Point of TOP-REAL 2 st
               qx=x & qx`1=ppi`1 & qq`2<=qx`2 & qx`2<=ppi`2 by A205,A228;
                      A231: m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                        by A222,GOBOARD2:3,NAT_1:38;
                      reconsider q1=g2/.m1, q2=g2/.(m1+1)
                       as Point of TOP-REAL 2;
                      set q1l={v where v is Point of TOP-REAL 2: v`1=ppi`1 &
                                 q2`2<=v`2 & v`2<=q1`2};
A232: q1`1=ppi`1 & q2`1=ppi`1 & q2`2<q1`2 & q1=|[q1`1,q1`2]|&
                      q2=|[q2`1,q2`2]| by A98,A103,A231,EUCLID:57;
                         m1 > n1 + 1 & n1 + 1 >=
 1 by A194,A226,NAT_1:29,REAL_1:54;
then A233:                   m1 > 1 by AXIOMS:22;
                         LSeg(g2,m1)=LSeg(q2,q1) by A222,TOPREAL1:def 5
                      .=q1l by A232,TOPREAL3:15;
then A234:                      ex qy be Point of TOP-REAL 2 st
 qy=x & qy`1=ppi`1 & q2`2<=qy`2 & qy`2<=q1`2 by A221,A229;
                         q1`2 < qq`2 by A103,A199,A231,A233;
                      hence contradiction by A230,A234,AXIOMS:22;
                     end;
                    hence thesis by XBOOLE_0:def 7;
                   end;
                   suppose n<>len g1;
                    then len g1<n by A225,REAL_1:def 5;
                    then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                     by A194,A196,A226,A227,GOBOARD2:10,REAL_1:54;
                    hence thesis by A181,A221,TOPREAL1:def 9;
                   end;
                   end;
                  hence thesis;
                 end;
                 end;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
        hence g is s.n.c. by GOBOARD2:6;
        A235: g2 is special
         proof let n;
         set p = g2/.n, q = g2/.(n+1);
         assume 1<=n & n+1 <= len g2;
          then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
          then p`1=ppi`1 & q`1=ppi`1 by A98;
          hence p`1=q`1 or p`2=q`2;
         end;
            now set p=g1/.len g1, q=g2/.1;
             j2+1<=i2 by A72,NAT_1:38;
          then 1<=l by REAL_1:84;
          then 1 in dom g2 by A77,FINSEQ_1:3;
           then q`1=ppi`1 by A98;
          hence p`1=q`1 or p`2=q`2
           by A15,A16,A18,A35,A47,FINSEQ_4:86;
         end;
        hence g is special by A32,A235,GOBOARD2:13;
        thus L~g=L~f
         proof
          set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
              lf = {LSeg(f,j): 1<=j & j+1 <= len f};
          A236: len g = len g1 + len g2 by FINSEQ_1:35;
          A237: now let j; assume
            A238: len g1<=j & j<=len g;
            then reconsider w = j-len g1 as Nat by INT_1:18;
            let p such that
            A239: p=g/.j;
                now per cases;
             suppose A240: j=len g1;
                 1<=len g1 by A14,A16,A36,AXIOMS:22;
              then len g1 in dom g1 by FINSEQ_3:27;
              then A241: g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
              .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
              hence p`1=G*(i1,i2)`1 by A239,A240;
              thus G*(i1,j2)`2<=p`2 & p`2<=G*(i1,i2)`2 by A51,A55,A59,A60,A62
,A72,A87,A239,A240,A241,GOBOARD1:def 1;
                  dom l1 = Seg len l1 by FINSEQ_1:def 3;
              hence p in rng l1 by A51,A62,A86,A239,A240,A241,PARTFUN2:4;
             end;
             suppose j<>len g1;
           then len g1 < j by A238,REAL_1:def 5;
then len g1 + 1<=j by NAT_1:38;
then A242:           1<=w & w<=len g2 by A236,A238,REAL_1:84,86;
              w + len g1 = j;
              then A243: g/.j=g2/.w by A242,GOBOARD2:5;
                 w in dom g2 by A242,FINSEQ_3:27;
              hence p`1=ppi`1 & pj`2<=p`2 & p`2<=
ppi`2 & p in rng l1 by A98,A239,A243;
             end;
             end;
            hence p`1=ppi`1 & pj`2<=p`2 & p`2<=ppi`2 & p in rng l1;
           end;
          thus L~g c= L~f
           proof let x; assume x in L~g;
            then x in union lg by TOPREAL1:def 6;
            then consider X be set such that
            A244: x in X & X in lg by TARSKI:def 4;
            consider i such that
            A245: X=LSeg(g,i) & 1<=i & i+1 <= len g by A244;
             per cases;
             suppose A246: i+1 <= len g1;
              then i<=i+1 & i+1<=len g1 by NAT_1:29;
              then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A245,AXIOMS:22;
              then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
              then X=LSeg(g1,i) by A245,TOPREAL3:25;
              then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A245,A246;
              then x in union {LSeg(g1,j): 1<=j & j+1 <= len g1}
                by A244,TARSKI:def 4;
              then x in L~f1 & L~f1 c= L~f by A33,TOPREAL1:def 6,TOPREAL3:27;
              hence thesis;
             end;
             suppose A247: i+1 > len g1;
              then A248: len g1<=i & i<=i+1 & i+1<=len g by A245,NAT_1:38;
              A249: 1<=i+1 & len g1<=i+1 & i<=len g by A245,A247,NAT_1:38;
              reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
              A250: q1`1=ppi`1 & pj`2<=q1`2 & q1`2<=ppi`2 & q2`1=ppi`1 & pj`2<=
q2`2 &
                  q2`2<=ppi`2 by A237,A248,A249;
              then A251: q1=|[q1`1,q1`2]| & q2=|[q1`1,q2`2]| by EUCLID:57;
              A252: LSeg(g,i)=LSeg(q2,q1) by A245,TOPREAL1:def 5;
                  now per cases by AXIOMS:21;
               suppose q1`2>q2`2;
                then LSeg(g,i)={p2: p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2}
                  by A251,A252,TOPREAL3:15;
                then consider p2 such that
                A253: p2=x & p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2 by A244,A245;
                   pj`2<=p2`2 & p2`2<=ppi`2 by A250,A253,AXIOMS:22;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A250,A253;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               suppose q1`2=q2`2;
                then LSeg(g,i)={q1} by A251,A252,TOPREAL1:7;
                then x=q1 by A244,A245,TARSKI:def 1;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A250;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               suppose q1`2<q2`2;
                then LSeg(g,i)= {p1: p1`1=q1`1 & q1`2<=p1`2 & p1`2<=q2`2}
                  by A251,A252,TOPREAL3:15;
                then consider p2 such that
                A254: p2=x & p2`1=q1`1 & q1`2<=p2`2 & p2`2<=q2`2 by A244,A245;
                   pj`2<=p2`2 & p2`2<=ppi`2 by A250,A254,AXIOMS:22;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A89,A250,A254;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               end;
              hence thesis;
           end;
           end;
          let x; assume x in L~f;
          then A255: x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
           per cases by A255,XBOOLE_0:def 2;
           suppose x in L~f1; then x in L~g1 & L~g1 c= L~g
            by A33,GOBOARD2:11;
            hence x in L~g;
           end;
           suppose x in LSeg(f,k);
            then consider p1 such that
            A256: p1=x & p1`1=ppi`1 & pj`2<=p1`2 & p1`2<=ppi`2 by A89;
            defpred P2[Nat] means
            len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`2>=p1`2;
            A257: now
              take n=len g1;
              thus P2[n]
              proof
                 0<=len g2 by NAT_1:18;
               hence len g1<=n & n<=len g by A236,REAL_2:173;
               let q such that
               A258: q=g/.n;
                  1<=len g1 by A14,A16,A36,AXIOMS:22;
               then len g1 in dom g1 by FINSEQ_3:27;
               then q=f1/.len f1 by A35,A258,FINSEQ_4:83
               .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
               hence p1`2<=q`2 by A256;
              end;
             end;
            A259: for n holds P2[n] implies n<=len g;
            consider ma be Nat such that
            A260: P2[ma] & for n st P2[n] holds n<=ma from NAT_1:sch 6
(A259,A257);
                now per cases;
             suppose A261: ma=len g;
                 j2+1<=i2 by A72,NAT_1:38;
              then A262: 1<=l & l=len g2 by A76,REAL_1:84;
              then A263: l in dom g2 & i2-l=j2 by FINSEQ_3:27;
              then A264: g/.ma=g2/.l by A76,A236,A261,FINSEQ_4:84
               .= pj by A76,A77,A263;
              then p1`2<=pj`2 by A260;
              then A265: p1`2=pj`2 by A256,AXIOMS:21;
              A266: ma-1<=len g & len g1+1<=ma
                by A236,A261,A262,PROB_1:2,REAL_1:55;
              then A267: len g1<=ma-1 & 0<=len g1 by NAT_1:18,REAL_1:84;
then A268:           0+1<=ma by REAL_1:84;
              reconsider m1=ma-1 as Nat by A268,INT_1:18;
                 1<=len g1 by A14,A16,A36,AXIOMS:22;
              then A269: 1<=m1 by A267,AXIOMS:22;
              reconsider q=g/.m1 as Point of TOP-REAL 2;
              A270: q`1=ppi`1 & pj`2<=q`2 & q=|[q`1,q`2]| & m1+1=ma
               by A237,A266,A267,EUCLID:57;
              then A271: LSeg(g,m1)=LSeg(pj,q)
               by A261,A264,A269,TOPREAL1:def 5;
              set lq={e where e is Point of TOP-REAL 2: e`1=ppi`1 & pj`2<=e`2 &
                      e`2<=q`2};
              LSeg(g,m1)=lq by A88,A270,A271,TOPREAL3:15;
              then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
              by A256,A261,A265,A269,A270;
              then x in union lg by A256,TARSKI:def 4;
              hence x in L~g by TOPREAL1:def 6;
             end;
             suppose ma<>len g;
              then ma<len g by A260,REAL_1:def 5;
              then A272: ma+1<=len g & k<=ma & ma<=ma+1
                by A16,A36,A260,AXIOMS:22,NAT_1:38;
              then A273: 1<=ma & len g1<=ma+1 by A14,A260,AXIOMS:22;
              reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
              A274: p1`2<=qa`2 by A260;
               A275: now assume p1`2<=qa1`2;
                 then for q holds q=g/.(ma+1) implies p1`2<=q`2;
                then ma+1<=ma by A260,A272,A273;
                hence contradiction by REAL_2:174;
               end;
              then A276: qa1`2<qa`2 & qa1`2<=p1`2 & p1`2<=qa`2 &
        qa`1=ppi`1 & qa1 `1 = ppi`1 by A237,A260,A272,A273,A274,AXIOMS:22;
              set lma = {p2: p2`1=ppi`1 & qa1`2<=p2`2 & p2`2<=qa`2};
              A277: qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                 LSeg(g,ma)=LSeg(qa1,qa) by A272,A273,TOPREAL1:def 5
              .= lma by A276,A277,TOPREAL3:15;
              then x in LSeg(g,ma) & LSeg(g,ma) in lg by A256,A272,A273,A274
,A275;
              then x in union lg by TARSKI:def 4;
              hence x in L~g by TOPREAL1:def 6;
             end;
             end;
            hence x in L~g;
         end;
         end;
           1<=len g1 by A14,A16,A36,AXIOMS:22;
        then 1 in dom g1 by FINSEQ_3:27;
        hence g/.1=f1/.1 by A34,FINSEQ_4:83
        .=f/.1 by A15,A19,FINSEQ_4:86;
           j2+1<=i2 by A72,NAT_1:38;
        then A278: 1<=l by REAL_1:84;
         then A279: l in dom g2 & len g=len g1 + len g2 & len g2 = l
         by A77,FINSEQ_1:3,35,def 3;
         reconsider m1=i2-l as Nat;
         thus g/.len g=g2/.l by A279,FINSEQ_4:84
         .=G*(i1,m1) by A76,A77,A279
         .=f/.len f by A5,A49,A71;
         thus len f<=len g by A5,A16,A36,A278,A279,REAL_1:55;
       end;
       case A280: i2=j2;
           k<>k+1 by NAT_1:38;
        hence contradiction by A7,A15,A47,A48,A49,A71,A280,PARTFUN2:17;
       end;
       case A281: i2<j2;
        then reconsider l=j2-i2 as Nat by INT_1:18;
        deffunc F(Nat) = G*(i1,i2+$1);
        consider g2 such that
        A282: len g2=l & for n st n in dom g2 holds g2/.n=F(n) from
GOBOARD2:sch 1;
        take g=g1^g2;
        A283: now let n; assume n in Seg l;
          then A284: 1<=n & n<=l by FINSEQ_1:3;
          then n<=n+i2 & i2+n<=l+i2 by NAT_1:29,REAL_1:55;
          then n<=i2+n & i2+n<=j2 & j2<=width G
           by A51,FINSEQ_1:3;
          then 1<=i2+n & i2+n<=width G by A284,AXIOMS:22;
          hence i2+n in Seg width G by FINSEQ_1:3;
          hence [i1,i2+n] in Indices G by A50,A51,ZFMISC_1:106;
         end;
        A285: dom g2 = Seg len g2 by FINSEQ_1:def 3;
            now let n such that A286: n in dom g2;
          take m=i1,k=i2+n;
          thus [m,k] in Indices G & g2/.n=G*(m,k) by A282,A283,A285,A286;
         end;
        then A287: for n st n in dom g ex i,j st [i,j] in Indices G &
        g/.n=G*(i,j) by A53,GOBOARD1:39;
        A288: now let n; assume
             n in dom g2 & n+1 in dom g2;
          then A289: g2/.n=G*(i1,i2+n) & [i1,i2+n] in Indices G &
          g2/.(n+1)=G*(i1,i2+(n+1)) &
          [i1,i2+(n+1)] in Indices G by A282,A283,A285;
          let l1,l2,l3,l4 be Nat; assume
             [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2) &
          g2/.(n+1)=G*(l3,l4);
           then l1=i1 & l2=i2+n & l3=i1 & l4=i2+(n+1) by A289,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)= 0+abs(i2+n-(i2+(n+1))) by ABSVALUE:7
          .= abs(-1)
          .= abs(1) by ABSVALUE:17
          .= 1 by ABSVALUE:def 1;
         end;
         now let l1,l2,l3,l4 be Nat; assume
A290: [l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,l2) &
          g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
          then g2/.1=G*
(i1,i2+1) & [i1,i2+1] in Indices G & f1/.len f1=f/.k
            by A15,A16,A18,A282,A283,A285,FINSEQ_4:86;
           then l1=i1 & l2=i2 & l3=i1 & l4=i2+1 by A35,A47,A290,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)=0+abs(i2-(i2+1)) by ABSVALUE:7
          .=abs(i2-i2+-1)
          .=abs(1) by ABSVALUE:17
          .=1 by ABSVALUE:def 1;
         end;
        then for n st n in dom g & n+1 in dom g holds
         for m,k,i,j st [m,k] in Indices G &
         [i,j] in Indices G & g/.n=G*(m,k) &
          g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A288,GOBOARD1:40;
        hence g is_sequence_on G by A287,GOBOARD1:def 11;
        set
        lk={w where w is Point of TOP-REAL 2: w`1=ppi`1 & ppi`2<=w`2 & w`2<=
pj`2};
           l1/.i2=l1.i2 & l1/.j2=l1.j2 by A51,A63,FINSEQ_4:def 4;
        then A291: l1/.i2=ppi & l1/.j2=pj by A51,MATRIX_1:def 8;
        then A292: y1.i2=ppi`2 & y1.j2=pj`2 & x1.i2=ppi`1 & x1.j2=pj`1
          by A51,A58,A59,A60,A61,A62,GOBOARD1:def 3,def 4;
        then A293: ppi`2<pj`2 & ppi`1=pj`1 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj
`2]|
        by A51,A54,A55,A58,A59,A60,A61,A62,A281,EUCLID:57,GOBOARD1:def 1,def 2;
        A294: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5
        .= lk by A293,TOPREAL3:15;
        A295: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A71,TOPREAL1:def 5;
            now let n,m; assume
          A296: n in dom g2 & m in dom g2 & n<>m;
          then A297: g2/.n=G*(i1,i2+n) & g2/.m=G*(i1,i2+m) & [i1,i2+n] in
Indices G &
          [i1,i2+m] in Indices G by A282,A283,A285;
          assume g2/.n=g2/.m;
          then i2+n=i2+m by A297,GOBOARD1:21;
          hence contradiction by A296,XCMPLX_1:2;
         end;
         then for n,m st n in dom g2 & m in dom g2 &
         g2/.n = g2/.m holds n = m;
        then A298: g2 is one-to-one by PARTFUN2:16;
        A299: not f/.k in rng g2
         proof assume f/.k in rng g2;
          then consider n such that
          A300: n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
         dom g2 = Seg len g2 by FINSEQ_1:def 3;
          then A301: g2/.n=G*(i1,i2+n) & [i1,i2+n] in Indices G
            by A282,A283,A300;
             0+1<=n by A300,FINSEQ_3:27;
           then i2+n=i2 & 0<n by A47,A300,A301,GOBOARD1:21;
          hence contradiction by XCMPLX_1:3;
         end;
        A302: now let n,p; assume
          A303: n in dom g2 & g2/.n=p;
          then A304: g2/.n=G*(i1,i2+n) & 1<=n & n<=len g2
& i2+n in Seg width G by A282,A283,A285,FINSEQ_1:3;
          set n1=i2+n;
          set pn = G*(i1,n1);
             l1/.n1=l1.n1 by A63,A304,FINSEQ_4:def 4;
          then A305: g2/.n=pn & l1/.n1=pn & 0<=n & n1<=i2+len g2
            by A304,MATRIX_1:def 8,REAL_1:55;
          then A306: x1.n1=pn`1 & x1.n1=x1.i2 & y1.n1=pn`2 & n1<=j2 & i2<=n1
           by A51,A54,A58,A59,A60,A61,A62,A282,A304,GOBOARD1:def 2,def 3,def 4
,REAL_2:173;
          hence p`1=ppi`1 & ppi`2<=p`2 & p`2<=pj`2
            by A51,A55,A59,A60,A62,A292,A303,A304,GOBOARD2:18;
              dom l1 = Seg len l1 by FINSEQ_1:def 3;
          hence p in rng l1
          by A62,A303,A304,A305,PARTFUN2:4;  0<n by A304;
          then i2<n1 by REAL_2:174;
          hence p`2>ppi`2 by A51,A55,A59,A60,A62,A292,A303,A304,A306,
GOBOARD1:def 1;
         end;
        A307: now let n,m,p,q; assume
          A308: n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
          then A309: g2/.n=G*(i1,i2+n) & i2+n in Seg width G &
              g2/.m=G*(i1,i2+m) & i2+m in Seg width G by A282,A283,A285;
          set n1=i2+n, m1=i2+m;
          set pn = G*(i1,n1),
              pm = G*(i1,m1);
             l1/.n1=l1.n1 & l1/.m1 = l1.m1 by A63,A309,FINSEQ_4:def 4;
          then A310: l1/.n1=pn & l1/.m1=pm & n1<m1
            by A308,A309,MATRIX_1:def 8,REAL_1:67;
          then y1.n1=pn`2 & y1.m1=pm`2 by A59,A60,A62,A309,GOBOARD1:def 4;
          hence p`2<q`2 by A55,A59,A60,A62,A308,A309,A310,GOBOARD1:def 1;
         end;
        A311: rng g2 c= LSeg(f,k)
         proof let x; assume x in rng g2;
          then consider n such that
          A312: n in dom g2 & g2/.n=x by PARTFUN2:4;
          A313: g2/.n=G*(i1,i2+n) by A282,A312;
          set pn = G*(i1,(i2+n));
             pn`1=ppi`1 & ppi`2<=pn`2 & pn`2<=pj`2 by A302,A312,A313;
          hence x in LSeg(f,k) by A294,A312,A313;
         end;
           rng g1 /\ rng g2 = {}
         proof consider x being Element of rng g1 /\ rng g2;
          assume not thesis;
          then A314: x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
              now per cases by A14,REAL_1:def 5;
           suppose k=1;
            hence contradiction by A37,A299,A314,TARSKI:def 1;
           end;
           suppose 1<k;
            then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A44,A311,A314,GOBOARD2:9,XBOOLE_0:def 3;
            hence contradiction by A299,A314,TARSKI:def 1;
           end;
           end;
          hence contradiction;
         end;
        then rng g1 misses rng g2 by XBOOLE_0:def 7;
        hence g is one-to-one by A29,A298,FINSEQ_3:98;
        A315: for n st 1<=n & n+2 <= len g2 holds
             LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
         proof let n; assume
          A316: 1<=n & n+2 <= len g2;
          then A317: n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
          then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
          g2/.(n+2) in rng g2 by PARTFUN2:4;
          then A318: g2/.n in lk & g2/.(n+1) in lk &
          g2/.(n+2) in lk by A294,A311;
          then consider u be Point of TOP-REAL 2 such that
          A319: g2/.n=u & u`1=ppi`1 & ppi`2<=u`2 & u`2<=pj`2;
          consider u1 be Point of TOP-REAL 2 such that
          A320: g2/.(n+1)=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2 by A318;
          consider u2 be Point of TOP-REAL 2 such that
          A321: g2/.(n+2)=u2 & u2`1=ppi`1 & ppi`2<=u2`2 & u2`2<=pj`2 by A318;
          set lg = {w where w is Point of TOP-REAL 2:
                     w`1=ppi`1 & u`2<=w`2 & w`2<=u2`2};
          A322: 1<= n+1 by NAT_1:29;
          A323: n+1+1 = n+(1+1);
             n+1 <= n+2 by AXIOMS:24;
          then n+1 <= len g2 by A316,AXIOMS:22;
          then A324: LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg(u1,u2) &
          LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
           by A316,A319,A320,A321,A322,A323,TOPREAL1:def 5;
             n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:38;
          then A325: u1`2<u2`2 & u`2<u1`2 by A307,A317,A319,A320,A321;
          then A326: u1`2<=u2`2 & u`2<=u1`2 & u`2<u2`2 by AXIOMS:22;
          A327: u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2]| by A320,A325,
EUCLID:57;
          then LSeg(g2/.n,g2/.(n+2))=lg by A319,A321,A326,TOPREAL3:15;
          hence thesis by A320,A324,A327,TOPREAL1:14;
         end;
        thus g is unfolded
         proof let n; assume
          A328: 1<=n & n+2 <= len g;
then A329:           n+1+1<=len g;
          A330: 1<= n+1 by NAT_1:29;
          A331: n<=n+1 & n+1<=n+1+1 by NAT_1:29;
then A332:      n+1 <= len g by A328,AXIOMS:22;
A333:      n+(1+1)=n+1+1;
A334:      len g=len g1+len g2 by FINSEQ_1:35;
              n+2-len g1 = n-len g1 +2;
          then A335: n-len g1 + 2 <= len g2 by A328,A334,REAL_1:86;
           per cases;
           suppose A336: n+2 <= len g1;
          then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
              by A328,GOBOARD2:4;
            then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
            g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
            hence thesis by A30,A328,A336,TOPREAL1:def 8;
           end;
           suppose len g1 < n+2;
            then len g1+1<=n+2 by NAT_1:38;
            then A337: len g1<=n+2-1 by REAL_1:84;
                now per cases;
             suppose A338: len g1=n+1;
                  now assume A339: k=1;
                   1<len g1 by A328,A338,NAT_1:38;
                then 1+1<=len g1 by NAT_1:38;
                hence contradiction by A37,A339,TOPREAL1:29;
               end;
              then A340: 1<k & LSeg(g1,n) c= L~f1
                 by A14,A33,REAL_1:def 5,TOPREAL3:26;
              then A341: L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                 1<=n+1 by NAT_1:29;
        then A342: n in dom g1 & n+1 in dom g1 by A328,A331,A338,FINSEQ_3:27;
              then A343: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
              A344: g/.(n+1)=f1/.len f1
               by A35,A338,A342,FINSEQ_4:83
              .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                A345: 1<=len g-len g1 by A329,A338,REAL_1:84;
              then A346: g/.(n+2)=g2/.1 by A333,A334,A338,GOBOARD2:5;
                 1 in dom g2 by A334,A345,FINSEQ_3:27;
              then A347: g2/.1 in rng g2 by PARTFUN2:4;
              then g2/.1 in lk by A294,A311;
              then consider u1 be Point of TOP-REAL 2 such that
              A348: g2/.1=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2;
                 ppi in LSeg(ppi,pj) by TOPREAL1:6;
              then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1)
                by A295,A311,A328,A330,A333,A344,A346,A347,A348,TOPREAL1:12
,def 5;
              then A349: LSeg(g,n) /\ LSeg(g,n+1) c= {g/.(n+1)}
               by A47,A340,A341,A343,A344,XBOOLE_1:27;
                 g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                by A328,A330,A332,A333,TOPREAL1:27;
              then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;
              then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
              hence thesis by A349,XBOOLE_0:def 10;
             end;
             suppose len g1<>n+1; then len g1<n+1 by A337,REAL_1:def 5;
              then A350: len g1<=n by NAT_1:38;
              then reconsider n1=n-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A351: len g1=n;
                   1<=len g1 by A14,A16,A36,AXIOMS:22;
                then len g1 in dom g1 by FINSEQ_3:27;
                then A352: g/.n=f1/.len f1 by A35,A351,FINSEQ_4:83
                .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A353:             2 <= len g2 by A328,A334,A351,REAL_1:53;
                then 1 <= len g2 by AXIOMS:22;
                then A354: g/.(n+1)=g2/.1 by A351,GOBOARD2:5;
                A355: g/.(n+2)=g2/.2 by A351,A353,GOBOARD2:5;
                    1<=len g2 by A353,AXIOMS:22;
                then A356: 1 in dom g2 & 2 in dom g2 by A353,FINSEQ_3:27;
                then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                then A357: g2/.1 in lk & g2/.2 in lk by A294,A311;
                then consider u1 be Point of TOP-REAL 2 such that
                A358: g2/.1=u1 & u1`1=ppi`1 & ppi`2<=u1`2 & u1`2<=pj`2;
                consider u2 be Point of TOP-REAL 2 such that
          A359: g2/.2=u2 & u2`1=ppi`1 & ppi`2<=u2`2 & u2`2<=pj`2 by A357;
                A360: u1`2<u2`2 by A307,A356,A358,A359;
                then A361: u1`2<=u2`2 & ppi`2<u2`2 & u2=|[u2`1,u2`2]|
                  by A358,AXIOMS:22,EUCLID:57;
                set lg = {w where w is Point of TOP-REAL 2 :
                          w`1=ppi`1 & ppi`2<=w`2 & w`2<=u2`2};
                A362: u1 in lg by A358,A360;
                A363: LSeg(g,n)=LSeg(ppi,u1) & LSeg(g,n+1)=LSeg(u1,u2)
               by A328,A330,A332,A333,A352,A354,A355,A358,A359,TOPREAL1:def 5;
                   u1 in LSeg(ppi,u2) by A293,A359,A361,A362,TOPREAL3:15;
                hence thesis by A354,A358,A363,TOPREAL1:14;
               end;
               suppose len g1<>n;
then A364:              len g1<n by A350,REAL_1:def 5;
                   n1 + len g1 = n;
then A365:            LSeg(g,n)=LSeg(g2,n1) by A332,A364,GOBOARD2:10;
A366:            len g1<n+1 by A331,A364,AXIOMS:22;
A367:            len g1+1<=n by A364,NAT_1:38;
A368:             n1+1+len g1 = n+1;
A369:             1<=n1+1 by NAT_1:29;
                   n1+1<=len g2 by A332,A334,A368,REAL_1:53;
                then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                  by A329,A366,A367,A368,A369,GOBOARD2:5,10,REAL_1:84;
                hence thesis by A315,A335,A365;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
         end;
            for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
         m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
         proof let n,m; assume that
          A370: m>n+1 and
          A371: n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
          A372: LSeg(g2,n) /\ LSeg(g2,m) <> {};
          A373: 1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
 len g2 by A371,FINSEQ_3:27;
          reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
           as Point of TOP-REAL 2;
          set lp = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                         p1`2<=w`2 & w`2<=p2`2},
              lq = {w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                         q1`2<=w`2 & w`2<=q2`2};
              m<m+1 & n<n+1 by NAT_1:38;
           then A374: p1`2<p2`2 & q1`2<q2`2 & p1`1=ppi`1 & p2`1=ppi`1 & q1`1=
ppi`1 &
           q2`1=ppi`1 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
           p2=|[p2`1,p2`2]| &
           q2=|[q2`1,q2`2]| by A302,A307,A371,EUCLID:57;
           A375: LSeg(g2,n) = LSeg(p1,p2) by A373,TOPREAL1:def 5
           .=lp by A374,TOPREAL3:15;
           A376: LSeg(g2,m) = LSeg(q1,q2) by A373,TOPREAL1:def 5
           .=lq by A374,TOPREAL3:15;
           consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
           A377: x in LSeg(g2,n) & x in LSeg(g2,m) by A372,XBOOLE_0:def 3;
then A378:           ex tn be Point of TOP-REAL 2 st
 tn=x & tn`1=ppi`1 & p1`2<=tn`2 & tn`2<=p2`2 by A375;
A379:           ex tm be Point of TOP-REAL 2 st
 tm=x & tm`1=ppi`1 & q1`2<=tm`2 & tm`2<=q2`2 by A376,A377;
               p2`2<q1`2 by A307,A370,A371;
            hence contradiction by A378,A379,AXIOMS:22;
         end;
then A380:    g2 is s.n.c. by GOBOARD2:6;
        A381: L~g2 c= LSeg(f,k)
         proof
          set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; let x; assume
             x in L~g2; then x in union ls by TOPREAL1:def 6;
          then consider X be set such that
          A382: x in X & X in ls by TARSKI:def 4;
          consider m such that
          A383: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A382;
              m in dom g2 & m+1 in dom g2 by A383,GOBOARD2:3;
          then A384: g2/.m in rng g2 & g2/.(m+1) in rng g2
           by PARTFUN2:4;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          A385: LSeg(q1,q2) c= LSeg(ppi,pj) by A295,A311,A384,TOPREAL1:12;
             LSeg(g2,m)=LSeg(q1,q2) by A383,TOPREAL1:def 5;
          hence thesis by A295,A382,A383,A385;
         end;
        A386: not f/.k in L~g2
         proof set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; assume
             f/.k in L~g2; then f/.k in union ls by TOPREAL1:def 6;
          then consider X be set such that
          A387: f/.k in X & X in ls by TARSKI:def 4;
          consider m such that
          A388: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A387;
          A389: m in dom g2 & m+1 in dom g2 &
          m<m+1 by A388,GOBOARD2:3,NAT_1:38;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          set lq={w where w is Point of TOP-REAL 2: w`1=ppi`1 &
                       q1`2<=w`2 & w`2<=q2`2};
          A390: q1`1=ppi`1 & q2`1=ppi`1 & q1`2<q2`2 & q1=|[q1`1,q1`2]|
          & q2=|[q2`1,q2`2]| by A302,A307,A389,EUCLID:57;
             LSeg(g2,m)=LSeg(q1,q2) by A388,TOPREAL1:def 5
          .=lq by A390,TOPREAL3:15;
          then ex p st p=f/.k & p`1=ppi`1 & q1`2<=p`2 & p`2<=q2`2 by A387,A388
;
          hence contradiction by A47,A302,A389;
         end;
        A391: L~g1 /\ L~g2 = {}
         proof
           per cases;
           suppose k=1; hence thesis by A37;
           end;
           suppose k<>1; then 1<k by A14,REAL_1:def 5;
            then L~g1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,A33,GOBOARD2:9;
            then A392: L~g1 /\ L~g2 c= {f/.k} by A381,XBOOLE_1:26;
                now consider x being Element of L~g1 /\ L~g2;
              assume L~g1 /\ L~g2 <> {};
              then x in {f/.k} & x in L~g2 by A392,TARSKI:def 3,XBOOLE_0:def 3
;
              hence contradiction by A386,TARSKI:def 1;
             end;
            hence thesis;
         end;
         end;
           for n,m st m>n+1 & n in dom g &
        n+1 in dom g & m in dom g & m+1 in dom g
         holds LSeg(g,n) misses LSeg(g,m)
         proof let n,m; assume that
          A393: m>n+1 and
          A394: n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
          A395: 1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
          m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
            by A394,FINSEQ_1:35,FINSEQ_3:27,NAT_1:29;
          set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
              l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
          A396: L~g1=union l1 & L~g2=union l2 & n+1 <= len g & m+1 <= len g
            by A394,FINSEQ_3:27,TOPREAL1:def 6;
             i2+1<=j2 by A281,NAT_1:38;
          then A397: 1<=l by REAL_1:84;
          then A398: 1 in dom g2 by A282,FINSEQ_3:27;
          reconsider qq=g2/.1 as Point of TOP-REAL 2;
          set ql={z where z is Point of TOP-REAL 2: z`1=ppi`1 &
                     ppi`2<=z`2 & z`2<=qq`2};
          A399: 1<=len g1 by A14,A16,A36,AXIOMS:22;
           then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
          then A400: g/.len g1=g1/.len g1 by FINSEQ_4:83
             .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
          A401: len g1<len g1 +1 & len g1+1<=len g
            by A282,A395,A397,NAT_1:38,REAL_1:55;
          A402: g/.(len g1+1)=qq by A282,A397,GOBOARD2:5;
          A403: qq`1=ppi`1 & qq`2<=pj`2 & qq`2>ppi`2 & qq=|[qq`1,qq`2]|
           by A302,A398,EUCLID:57;
    A404: LSeg(g,len g1)=LSeg(ppi,qq) by A399,A400,A401,A402,TOPREAL1:def 5
           .= ql by A293,A403,TOPREAL3:15;
            A405: n+1<=m+1 by A393,A395,AXIOMS:22;
                now per cases;
             suppose A406: m+1<=len g1;
              then A407: m<=len g1 & n+1<=len g1 by A395,A405,AXIOMS:22;
              then n<=len g1 by A395,AXIOMS:22;
              then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
               by A395,A406,A407,FINSEQ_3:27;
              then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m)
               by TOPREAL3:25;
              hence thesis by A31,A393,TOPREAL1:def 9;
             end;
             suppose len g1<m+1;
              then A408: len g1<=m by NAT_1:38;
              then reconsider m1=m-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A409: m=len g1;
                    now assume A410: k=1;
                     1<len g1 by A393,A395,A409,AXIOMS:22;
                  then 1+1<=len g1 by NAT_1:38;
                  hence contradiction by A37,A410,TOPREAL1:29;
                 end;
                then 1<k by A14,REAL_1:def 5;
                then A411: L~f1 /\ LSeg(f,k) ={f/.k} by A5,A8,A9,GOBOARD2:9;
                   n<=len g1 by A393,A395,A409,AXIOMS:22;
                then A412: n in dom g1 & n+1 in dom g1
                by A393,A395,A409,FINSEQ_3:27;
                then A413: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                then LSeg(g,n) in l1 by A393,A395,A409;
                then A414: LSeg(g,n) c= L~f1 by A33,A396,ZFMISC_1:92;
                   LSeg(g,m) c= LSeg(f,k)
                 proof let x; assume x in LSeg(g,m);
                  then consider px be Point of TOP-REAL 2 such that
          A415: px=x & px`1=ppi`1 & ppi`2<=px`2 & px`2<= qq`2 by A404,A409;
                     pj`2>=px`2 by A403,A415,AXIOMS:22;
                  hence thesis by A294,A415;
                 end;
                then A416: LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                 by A411,A414,XBOOLE_1:27;
                    now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                  assume LSeg(g,n)/\ LSeg(g,m)<>{};
                  then A417: x in LSeg(g,n) & x in {f/.k}
                  by A416,TARSKI:def 3,XBOOLE_0:def 3;
                  then A418: x=f/.k by TARSKI:def 1;
                     f/.k=g1/.len g1 by A15,A16,A18,A35,FINSEQ_4:86;
                  hence contradiction by A29,A30,A31,A393,A409,A412,A413,A417
,A418,GOBOARD2:7;
                 end;
                hence thesis by XBOOLE_0:def 7;
               end;
               suppose
              m<>len g1;
                then A419: len g1<m & m+1=m1+1+len g1
                 by A408,REAL_1:def 5;
                   m = m1+len g1;
                then A420: LSeg(g,m)=LSeg(g2,m1) by A395,A419,GOBOARD2:10;
                   m1+1<=len g2 & len g1+1<=
m by A395,A419,NAT_1:38,REAL_1:53;
                then A421: 1<=m1 & m1+1 <= len g2 by REAL_1:84;
                then LSeg(g,m) in l2 by A420;
                then A422: LSeg(g,m) c= L~g2 by A396,ZFMISC_1:92;
                    now per cases;
                 suppose A423: n+1<=len g1;
                  then n<=len g1 by A395,AXIOMS:22;
                  then n in dom g1 & n+1 in dom g1 by A395,A423,FINSEQ_3:27;
                   then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                  then LSeg(g,n) in l1 by A395,A423;
                  then LSeg(g,n) c= L~g1 by A396,ZFMISC_1:92;
                  then LSeg(g,n) /\ LSeg(g,m) c= {} by A391,A422,XBOOLE_1:27;
                  then LSeg(g,n) /\ LSeg(g,m) = {} by XBOOLE_1:3;
                  hence thesis by XBOOLE_0:def 7;
                 end;
                 suppose len g1<n+1;
                  then A424: len g1<=n by NAT_1:38;
                  then reconsider n1=n-len g1 as Nat by INT_1:18;
A425:               n - len g1 + 1 = n + 1 - len g1;
A426:               n = n1 + len g1;
                      now per cases;
                   suppose A427: len g1=n;
                        now consider x being
                      Element of LSeg(g,n) /\ LSeg(g,m);
                      assume LSeg(g,n) /\ LSeg(g,m)<>{};
                then A428: x in LSeg(g,n) & x in LSeg(g,m) by XBOOLE_0:def 3;
then A429:                      ex qx be Point of TOP-REAL 2 st
                      qx=x & qx`1=ppi`1 & ppi`2<=qx`2 & qx`2<=qq`2
                      by A404,A427;
                      A430: m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                        by A421,GOBOARD2:3,NAT_1:38;
                      reconsider q1=g2/.m1, q2=g2/.(m1+1)
                       as Point of TOP-REAL 2;
                      set q1l={v where v is Point of TOP-REAL 2: v`1=ppi`1 &
                      q1`2<=v`2 & v`2<=q2`2};
A431: q1`1=ppi`1 & q2`1=ppi`1 & q1`2<q2`2 & q1=|[q1`1,q1`2]|&
                      q2=|[q2`1,q2`2]| by A302,A307,A430,EUCLID:57;
                         m1 > n1 + 1 & n1 + 1 >=
 1 by A393,A425,NAT_1:29,REAL_1:54;
then A432:                   m1 > 1 by AXIOMS:22;
                         LSeg(g2,m1)=LSeg(q1,q2) by A421,TOPREAL1:def 5
                      .=q1l by A431,TOPREAL3:15;
then A433:                      ex qy be Point of TOP-REAL 2 st
 qy=x & qy`1=ppi`1 & q1`2<=qy`2 & qy`2<=q2`2 by A420,A428;
                         qq`2 < q1`2 by A307,A398,A430,A432;
                      hence contradiction by A429,A433,AXIOMS:22;
                     end;
                    hence thesis by XBOOLE_0:def 7;
                   end;
                   suppose n<>len g1;
                    then len g1<n by A424,REAL_1:def 5;
                    then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                     by A393,A395,A425,A426,GOBOARD2:10,REAL_1:54;
                    hence thesis by A380,A420,TOPREAL1:def 9;
                   end;
                   end;
                  hence thesis;
                 end;
                 end;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
        hence g is s.n.c. by GOBOARD2:6;
        A434: g2 is special
         proof let n;
          set p = g2/.n, q = g2/.(n+1);
         assume 1<=n & n+1 <= len g2;
          then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
          then p`1=ppi`1 & q`1=ppi`1 by A302;
          hence p`1=q`1 or p`2=q`2;
         end;
            now
          set p=g1/.len g1, q=g2/.1;
             i2+1<=j2 by A281,NAT_1:38;
          then 1<=l by REAL_1:84;
          then 1 in dom g2 by A282,FINSEQ_3:27;
           then q`1=ppi`1 by A302;
          hence p`1=q`1 or p`2=q`2 by A15,A16,A18,A35,A47,FINSEQ_4:86;
         end;
        hence g is special by A32,A434,GOBOARD2:13;
        thus L~g=L~f
         proof
          set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
              lf = {LSeg(f,j): 1<=j & j+1 <= len f};
          A435: len g = len g1 + len g2 by FINSEQ_1:35;
          A436: now let j; assume
            A437: len g1<=j & j<=len g;
            then reconsider w = j-len g1 as Nat by INT_1:18;
            let p such that
            A438: p=g/.j;
             per cases;
             suppose A439: j=len g1;
                 1<=len g1 by A14,A16,A36,AXIOMS:22;
              then len g1 in dom g1 by FINSEQ_3:27;
              then A440: g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
              .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
              hence p`1=G*(i1,i2)`1 by A438,A439;
              thus G*(i1,i2)`2<=p`2 & p`2<=G*
(i1,j2)`2 by A51,A55,A59,A60,A62,A281,A292,A438,A439,A440,GOBOARD1:def 1;
                  dom l1 = Seg len l1 by FINSEQ_1:def 3;
              hence p in rng l1 by A51,A62,A291,A438,A439,A440,PARTFUN2:4;
             end;
             suppose j<>len g1;
then A441:           len g1 < j by A437,REAL_1:def 5;
A442:           j = w + len g1;
                  len g1 + 1<=j by A441,NAT_1:38;
then A443:           1<=w & w<=len g2 by A435,A437,REAL_1:84,86;
then A444:          g/.j=g2/.w by A442,GOBOARD2:5;
                 w in dom g2 by A443,FINSEQ_3:27;
              hence p`1=ppi`1 & ppi`2<=p`2 & p`2<=
              pj`2 & p in rng l1 by A302,A438,A444;
           end;
           end;
          thus L~g c= L~f
           proof let x; assume x in L~g;
            then x in union lg by TOPREAL1:def 6;
            then consider X be set such that
            A445: x in X & X in lg by TARSKI:def 4;
            consider i such that
            A446: X=LSeg(g,i) & 1<=i & i+1 <= len g by A445;
             per cases;
             suppose A447: i+1 <= len g1;
              then i<=i+1 & i+1<=len g1 by NAT_1:29;
              then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A446,AXIOMS:22;
              then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
              then X=LSeg(g1,i) by A446,TOPREAL3:25;
              then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A446,A447;
              then x in union {LSeg(g1,j): 1<=j & j+1 <= len g1}
                by A445,TARSKI:def 4;
              then x in L~f1 & L~f1 c= L~f by A33,TOPREAL1:def 6,TOPREAL3:27;
              hence thesis;
             end;
             suppose A448: i+1 > len g1;
              then A449: len g1<=i & i<=i+1 & i+1<=len g by A446,NAT_1:38;
              A450: 1<=i+1 & len g1<=i+1 & i<=len g by A446,A448,NAT_1:38;
              reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
        A451: q1`1=ppi`1 & ppi`2<=q1`2 & q1`2<=pj`2 & q2`1=ppi`1 & ppi`2<=
q2`2 &
                  q2`2<=pj`2 by A436,A449,A450;
              then A452: q1=|[q1`1,q1`2]| & q2=|[q1`1,q2`2]| by EUCLID:57;
              A453: LSeg(g,i)=LSeg(q2,q1) by A446,TOPREAL1:def 5;
                  now per cases by AXIOMS:21;
               suppose q1`2>q2`2;
                then LSeg(g,i)={p2: p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2}
                  by A452,A453,TOPREAL3:15;
                then consider p2 such that
                A454: p2=x & p2`1=q1`1 & q2`2<=p2`2 & p2`2<=q1`2 by A445,A446;
                   ppi`2<=p2`2 & p2`2<=pj`2 by A451,A454,AXIOMS:22;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A294,A451,A454;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               suppose q1`2=q2`2;
                then LSeg(g,i)={q1} by A452,A453,TOPREAL1:7;
                then x=q1 by A445,A446,TARSKI:def 1;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A294,A451;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               suppose q1`2<q2`2;
                then LSeg(g,i)= {p1: p1`1=q1`1 & q1`2<=p1`2 & p1`2<=q2`2}
                  by A452,A453,TOPREAL3:15;
                then consider p2 such that
                A455: p2=x & p2`1=q1`1 & q1`2<=p2`2 & p2`2<=q2`2 by A445,A446;
                   ppi`2<=p2`2 & p2`2<=pj`2 by A451,A455,AXIOMS:22;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A294,A451,A455;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               end;
              hence thesis;
           end;
           end;
          let x; assume x in L~f;
          then A456: x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
              now per cases by A456,XBOOLE_0:def 2;
           suppose x in L~f1; then x in L~g1 & L~g1 c= L~g
            by A33,GOBOARD2:11;
            hence x in L~g;
           end;
           suppose x in LSeg(f,k);
            then consider p1 such that
            A457: p1=x & p1`1=ppi`1 & ppi`2<=p1`2 & p1`2<=pj`2 by A294;
            defpred P2[Nat] means
            len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`2<=p1`2;
            A458: now take n=len g1;
              thus P2[n]
              proof
                 0<=len g2 by NAT_1:18;
               hence len g1<=n & n<=len g by A435,REAL_2:173;
               let q such that
               A459: q=g/.n;
                  1<=len g1 by A14,A16,A36,AXIOMS:22;
               then len g1 in dom g1 by FINSEQ_3:27;
               then q=f1/.len f1
                by A35,A459,FINSEQ_4:83
               .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
               hence q`2<=p1`2 by A457;
              end;
             end;
            A460: for n holds P2[n] implies n<=len g;
            consider ma be Nat such that
            A461: P2[ma] & for n st P2[n] holds n<=ma from NAT_1:sch 6
(A460,A458);
                now per cases;
             suppose A462: ma=len g;
                 i2+1<=j2 by A281,NAT_1:38;
              then A463: 1<=l by REAL_1:84;
              then A464: l in dom g2 & i2+l=j2 by A282,FINSEQ_3:27;
              then A465: g/.ma=g2/.l by A282,A435,A462,FINSEQ_4:84
               .= pj by A282,A464;
              then pj`2<=p1`2 by A461;
              then A466: p1`2=pj`2 by A457,AXIOMS:21;
              A467: ma-1<=len g & len g1+1<=ma
                by A282,A435,A462,A463,PROB_1:2,REAL_1:55;
              then A468: len g1<=ma-1 & 0<=len g1 by NAT_1:18,REAL_1:84;
then A469:           0+1<=ma by REAL_1:84;
              reconsider m1=ma-1 as Nat by A469,INT_1:18;
                 1<=len g1 by A14,A16,A36,AXIOMS:22;
              then A470: 1<=m1 by A468,AXIOMS:22;
              reconsider q=g/.m1 as Point of TOP-REAL 2;
              A471: q`1=ppi`1 & q`2<=pj`2 & q=|[q`1,q`2]| & m1+1=ma
               by A436,A467,A468,EUCLID:57;
              then A472: LSeg(g,m1)=LSeg(q,pj)
               by A462,A465,A470,TOPREAL1:def 5;
              set lq={e where e is Point of TOP-REAL 2: e`1=ppi`1 & q`2<=e`2 &
                      e`2<=pj`2};
              LSeg(g,m1)=lq by A293,A471,A472,TOPREAL3:15;
              then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
              by A457,A462,A466,A470,A471;
              then x in union lg by A457,TARSKI:def 4;
              hence x in L~g by TOPREAL1:def 6;
             end;
             suppose ma<>len g;
              then ma<len g by A461,REAL_1:def 5;
              then A473: ma+1<=len g & k<=ma & ma<=ma+1
                by A16,A36,A461,AXIOMS:22,NAT_1:38;
              then A474: 1<=ma & len g1<=ma+1 by A14,A461,AXIOMS:22;
              reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
              A475: qa`2<=p1`2 by A461;
               A476: now assume qa1`2<=p1`2;
                 then for q holds q=g/.(ma+1) implies q`2<=p1`2;
                then ma+1<=ma by A461,A473,A474;
                hence contradiction by REAL_2:174;
               end;
              then A477: qa`2<qa1`2 & qa`2<=p1`2 & p1`2<=qa1`2 &
              qa`1=ppi`1 & qa1 `1 = ppi`1
              by A436,A461,A473,A474,A475,AXIOMS:22;
              set lma = {p2: p2`1=ppi`1 & qa`2<=p2`2 & p2`2<=qa1`2};
              A478: qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                 LSeg(g,ma)=LSeg(qa,qa1) by A473,A474,TOPREAL1:def 5
              .= lma by A477,A478,TOPREAL3:15;
              then x in LSeg(g,ma) & LSeg(g,ma) in lg by A457,A473,A474,A475
,A476;
              then x in union lg by TARSKI:def 4;
              hence x in L~g by TOPREAL1:def 6;
             end;
             end;
            hence x in L~g;
           end;
           end;
          hence x in L~g;
         end;
           1<=len g1 by A14,A16,A36,AXIOMS:22;
        then 1 in dom g1 by FINSEQ_3:27;
        hence g/.1=f1/.1 by A34,FINSEQ_4:83
        .=f/.1 by A15,A19,FINSEQ_4:86;
           i2+1<=j2 by A281,NAT_1:38;
        then A479: 1<=l by REAL_1:84;
        then A480: l in dom g2 & len g=len g1 + l by A282,FINSEQ_1:35
,FINSEQ_3:27;
        hence g/.len g=g2/.l by FINSEQ_4:84
        .=G*(i1,i2+l) by A282,A480
        .=f/.len f by A5,A49,A71;
        thus len f<=len g by A5,A16,A36,A479,A480,REAL_1:55;
        end;
        end;
       hence thesis;
     end;
     suppose A481: i2=j2;
      set ppi = G*(i1,i2), pj = G*(j1,i2);
          now per cases by AXIOMS:21;
       case A482: i1>j1;
        then reconsider l=i1-j1 as Nat by INT_1:18;
        A483: now let n; assume n in Seg l;
          then A484: 1<=n & n<=l & 0<=j1 by FINSEQ_1:3,NAT_1:18;
          then l<=i1 by PROB_1:2;
          then n<=i1 by A484,AXIOMS:22;
          then reconsider w=i1-n as Nat by INT_1:18;
             0<=n & i1-l<=i1-n by A484,REAL_1:92;
          then i1-n<=i1 & i1<=len G & j1<=w & 1<=j1
            by A51,FINSEQ_3:27,PROB_1:2;
          then 1<=w & w<=len G by AXIOMS:22;
          then w in dom G by FINSEQ_3:27;
          hence i1-n is Nat & [i1-n,i2] in Indices G & i1-n in dom G
            by A50,A51,ZFMISC_1:106;
         end;
        defpred P1[Nat,set] means for m st m=i1-$1 holds $2=G*(m,i2);
        A485: now let n; assume n in Seg l;
          then reconsider m=i1-n as Nat by A483;
          take p=G*(m,i2);
          thus P1[n,p];
         end;
        consider g2 such that
        A486: len g2 = l & for n st n in Seg l holds P1[n,g2/.n]
         from GOBOARD1:sch 1(A485);
A487:     dom g2=Seg l by A486,FINSEQ_1:def 3;
        take g=g1^g2;
            now let n; assume A488: n in dom g2;
          then reconsider m=i1-n as Nat by A483,A487;
          take m,k=i2;
          thus [m,k] in Indices G & g2/.n=G*(m,k) by A483,A486,A487,A488;
         end;
        then A489: for n st n in dom g ex i,j st [i,j] in Indices G &
        g/.n=G*(i,j) by A53,GOBOARD1:39;
        A490: now let n; assume
A491:          n in dom g2 & n+1 in dom g2;
          then A492: [i1-n,i2] in Indices G
           & [i1-(n+1),i2] in Indices G by A483,A487;
          reconsider m1=i1-n ,m2=i1-(n+1) as Nat by A483,A487,A491;
          A493: g2/.n=G*(m1,i2) & g2/.(n+1)=G*(m2,i2) by A486,A487,A491;
          let l1,l2,l3,l4 be Nat; assume
             [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2) &
           g2/.(n+1)=G*(l3,l4);
           then l1=m1 & l2=i2 & l3=m2 & l4=i2 by A492,A493,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)= abs(i1-n-(i1-(n+1)))+0 by ABSVALUE:7
           .= 1 by ABSVALUE:def 1;
         end;
         now let l1,l2,l3,l4 be Nat; assume
A494: [l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,l2) &
          g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
          then A495: [i1-1,i2] in Indices G
           & f1/.len f1=f/.k by A15,A16,A18,A483,A487,FINSEQ_4:86;
          reconsider m1=i1-1 as Nat by A483,A487,A494;
             g2/.1=G*(m1,i2) by A486,A487,A494;
           then l1=i1 & l2=i2 & l3=m1 & l4=i2
            by A35,A47,A494,A495,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)=abs(i1-(i1-1))+0 by ABSVALUE:7
          .=1 by ABSVALUE:def 1;
         end;
        then for n st n in dom g & n+1 in dom g holds
         for m,k,i,j st [m,k] in Indices G &
         [i,j] in Indices G & g/.n=G*(m,k) &
          g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A490,GOBOARD1:40;
        hence g is_sequence_on G by A489,GOBOARD1:def 11;
        set
        lk={w where w is Point of TOP-REAL 2: w`2=ppi`2 & pj`1<=w`1 & w`1<=
ppi`1};
           c1/.i1=c1.i1 & c1/.j1=c1.j1 by A51,A70,FINSEQ_4:def 4;
        then A496: c1/.i1=ppi & c1/.j1=pj by A51,MATRIX_1:def 9;
        then A497: y2.i1=ppi`2 & y2.j1=pj`2 & x2.i1=ppi`1 & x2.j1=pj`1 & len g2
=l
          by A51,A52,A64,A65,A66,A68,A69,A486,GOBOARD1:def 3,def 4;
        then A498: pj`1<ppi`1 & ppi`2=pj`2 & ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj
`2]|
        by A51,A52,A56,A57,A64,A65,A66,A68,A69,A482,EUCLID:57,GOBOARD1:def 1
,def 2;
        A499: LSeg(f,k)=LSeg(pj,ppi) by A14,A47,A49,A481,TOPREAL1:def 5
        .= lk by A498,TOPREAL3:16;
        A500: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A481,TOPREAL1:def 5;
            now let n,m; assume
          A501: n in dom g2 & m in dom g2 & n<>m;
          then A502: [i1-n,i2] in Indices G& [i1-m,i2] in Indices G by A483
,A487;
          reconsider n1=i1-n, m1=i1-m as Nat by A483,A487,A501;
          A503: g2/.n=G*(n1,i2) & g2/.m=G*(m1,i2) by A486,A487,A501;
          assume g2/.n=g2/.m;
          then n1=m1 by A502,A503,GOBOARD1:21;
          hence contradiction by A501,XCMPLX_1:20;
         end;
         then for n,m st n in dom g2 & m in dom g2 &
         g2/.n = g2/.m holds n = m;
then A504: g2 is one-to-one & Seg len g2=dom g2 by FINSEQ_1:def 3,PARTFUN2:16;
        A505: not f/.k in rng g2
         proof assume f/.k in rng g2;
          then consider n such that
          A506: n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
          A507: [i1-n,i2] in Indices G
            by A483,A486,A504,A506;
          reconsider n1=i1-n as Nat by A483,A486,A504,A506;
             g2/.n=G*(n1,i2) & 0+1<=n by A486,A504,A506,FINSEQ_1:3;
           then n1=i1 & 0<n by A47,A506,A507,GOBOARD1:21;
          hence contradiction by SQUARE_1:29;
         end;
        A508: now let n,p; assume
          A509: n in dom g2 & g2/.n=p;
          then A510: P1[n,g2/.n] &
          1<=n & n<=len g2& i1-n in dom G by A483,A486,A504,FINSEQ_1:3;
          reconsider n1=i1-n as Nat by A483,A487,A509;
          set pn = G*(n1,i2);
             c1/.n1=c1.n1 by A70,A510,FINSEQ_4:def 4;
          then A511: g2/.n=pn & c1/.n1=pn & 0<=n & i1-len g2<=n1
            by A510,MATRIX_1:def 9,REAL_1:92;
          then A512: y2.n1=pn`2 & y2.n1=y2.i1 & x2.n1=pn`1 & n1<=i1 & j1<=n1
           by A51,A52,A57,A64,A65,A66,A68,A69,A486,A510,GOBOARD1:def 2,def 3
,def 4,REAL_2:173;
          hence p`2=ppi`2 & pj`1<=p`1 & p`1<=ppi`1
            by A51,A52,A56,A64,A66,A69,A497,A509,A510,A511,GOBOARD2:18;
          thus p in rng c1 by A70,A509,A510,A511,PARTFUN2:4;
             0<n by A510;
          then n1<i1 by SQUARE_1:29;
          hence p`1<ppi`1
           by A51,A52,A56,A64,A66,A69,A497,A509,A510,A511,A512,GOBOARD1:def 1;
         end;
        A513: now let n,m,p,q; assume
          A514: n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
          then A515: P1[n,g2/.n] & i1-n in dom G &
              P1[m,g2/.m] & i1-m in dom G by A483,A486,A487;
          reconsider n1=i1-n, m1=i1-m as Nat by A483,A487,A514;
          set pn = G*(n1,i2), pm = G*(m1,i2);
             c1/.n1=c1.n1 & c1/.m1 = c1.m1 by A70,A515,FINSEQ_4:def 4;
          then A516: g2/.n=pn & c1/.n1=pn & g2/.m=pm & c1/.m1=pm & m1<n1
            by A514,A515,MATRIX_1:def 9,REAL_1:92;
          then x2.n1=pn`1 & x2.m1=pm`1 by A67,A70,A515,GOBOARD1:def 3;
          hence q`1<p`1 by A56,A67,A70,A514,A515,A516,GOBOARD1:def 1;
         end;
        A517: rng g2 c= LSeg(f,k)
         proof let x; assume x in rng g2;
          then consider n such that
          A518: n in dom g2 & g2/.n=x by PARTFUN2:4;
          reconsider n1=i1-n as Nat by A483,A486,A504,A518;
          set pn = G*(n1,i2);
          A519: g2/.n=pn by A486,A504,A518;
          then pn`2=ppi`2 & pj`1<=pn`1 & pn`1<=ppi`1 by A508,A518;
          hence x in LSeg(f,k) by A499,A518,A519;
         end;
           rng g1 /\ rng g2 = {}
         proof consider x being Element of rng g1 /\ rng g2;
          assume not thesis;
          then A520: x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
              now per cases by A14,REAL_1:def 5;
           suppose k=1;
            hence contradiction by A37,A505,A520,TARSKI:def 1;
           end;
           suppose 1<k;
            then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A44,A517,A520,GOBOARD2:9,XBOOLE_0:def 3;
            hence contradiction by A505,A520,TARSKI:def 1;
           end;
           end;
          hence contradiction;
         end;
        then rng g1 misses rng g2 by XBOOLE_0:def 7;
        hence g is one-to-one
         by A29,A504,FINSEQ_3:98;
        A521: for n st 1<=n & n+2 <= len g2 holds
             LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
         proof let n; assume
          A522: 1<=n & n+2 <= len g2;
          then A523: n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
          then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
          g2/.(n+2) in rng g2 by PARTFUN2:4;
          then A524: g2/.n in lk & g2/.(n+1) in lk &
          g2/.(n+2) in lk by A499,A517;
          then consider u be Point of TOP-REAL 2 such that
          A525: g2/.n=u & u`2=ppi`2 & pj`1<=u`1 & u`1<=ppi`1;
          consider u1 be Point of TOP-REAL 2 such that
          A526: g2/.(n+1)=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1 by A524;
          consider u2 be Point of TOP-REAL 2 such that
          A527: g2/.(n+2)=u2 & u2`2=ppi`2 & pj`1<=u2`1 & u2`1<=ppi`1 by A524;
          set lg = {w where w is Point of TOP-REAL 2:
                     w`2=ppi`2 & u2`1<=w`1 & w`1<=u`1};
          A528: 1<= n+1 by NAT_1:29;
          A529: n+1+1 = n+(1+1);
             n+1 <= n+2 by AXIOMS:24;
          then n+1 <= len g2 by A522,AXIOMS:22;
          then A530: LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg(u1,u2) &
          LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
           by A522,A525,A526,A527,A528,A529,TOPREAL1:def 5;
             n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:38;
          then A531: u2`1<u1`1 & u1`1<u`1 by A513,A523,A525,A526,A527;
          then A532: u2`1<=u1`1 & u1`1<=u`1 & u2`1<u`1 by AXIOMS:22;
          A533: u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2]| by A526,A531,
EUCLID:57;
          then LSeg(g2/.n,g2/.(n+2))=lg by A525,A527,A532,TOPREAL3:16;
          hence thesis by A526,A530,A533,TOPREAL1:14;
         end;
        thus g is unfolded
         proof let n; assume
          A534: 1<=n & n+2 <= len g;
then A535:           n+1+1<=len g;
          A536: 1 <= n+1 by NAT_1:29;
          A537: n<=n+1 & n+1<=n+1+1 by NAT_1:29;
then A538:      n+1 <= len g by A534,AXIOMS:22;
A539:      n+(1+1)=n+1+1;
A540:      len g=len g1+len g2 by FINSEQ_1:35;
              n+2-len g1 = n-len g1 +2;
          then A541: n-len g1 + 2 <= len g2 by A534,A540,REAL_1:86;
           per cases;
           suppose A542: n+2 <= len g1;
        then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
              by A534,GOBOARD2:4;
            then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
            g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
            hence thesis by A30,A534,A542,TOPREAL1:def 8;
           end;
           suppose len g1 < n+2;
            then len g1+1<=n+2 by NAT_1:38;
            then A543: len g1<=n+2-1 by REAL_1:84;
             thus thesis
             proof per cases;
             suppose A544: len g1=n+1;
                  now assume A545: k=1;
                   1<len g1 by A534,A544,NAT_1:38;
                then 1+1<=len g1 by NAT_1:38;
                hence contradiction by A37,A545,TOPREAL1:29;
               end;
              then A546: 1<k & LSeg(g1,n) c= L~f1
                 by A14,A33,REAL_1:def 5,TOPREAL3:26;
              then A547: L~f1 /\ LSeg(f,k)={f/.k}
               by A5,A8,A9,GOBOARD2:9;
                 1<=n+1 by NAT_1:29;
              then A548: n in dom g1 & n+1 in dom g1
              by A534,A537,A544,FINSEQ_3:27;
              then A549: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
              A550: g/.(n+1)=f1/.len f1
               by A35,A544,A548,FINSEQ_4:83
              .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                 1 <= len g2 by A534,A539,A540,A544,REAL_1:53;
              then A551: g/.(n+2)=g2/.1 by A539,A544,GOBOARD2:5;
                 1<=len g-len g1 by A535,A544,REAL_1:84;
              then 1 in dom g2 by A540,FINSEQ_3:27;
              then A552: g2/.1 in rng g2 by PARTFUN2:4;
              then g2/.1 in lk by A499,A517;
              then consider u1 be Point of TOP-REAL 2 such that
              A553: g2/.1=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1;
                 ppi in LSeg(ppi,pj) by TOPREAL1:6;
              then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1)
                by A500,A517,A534,A536,A539,A550,A551,A552,A553,TOPREAL1:12
,def 5;
              then A554: LSeg(g,n) /\ LSeg(g,n+1) c= {g/.(n+1)}
               by A47,A546,A547,A549,A550,XBOOLE_1:27;
                 g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                by A534,A536,A538,A539,TOPREAL1:27;
              then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;
              then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
              hence thesis by A554,XBOOLE_0:def 10;
             end;
             suppose len g1<>n+1; then len g1<n+1 by A543,REAL_1:def 5;
              then A555: len g1<=n by NAT_1:38;
              then reconsider n1=n-len g1 as Nat by INT_1:18;
              thus thesis
               proof per cases;
               suppose A556: len g1=n;
                   1<=len g1 by A14,A16,A36,AXIOMS:22;
                then len g1 in dom g1 by FINSEQ_3:27;
                then A557: g/.n=f1/.len f1 by A35,A556,FINSEQ_4:83
                .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A558:             2 <= len g2 by A534,A540,A556,REAL_1:53;
                then 1<= len g2 by AXIOMS:22;
                then A559: g/.(n+1)=g2/.1 by A556,GOBOARD2:5;
                A560: g/.(n+2)=g2/.2 by A556,A558,GOBOARD2:5;
                   1<=len g2 by A558,AXIOMS:22;
                then A561: 1 in dom g2 & 2 in dom g2 by A558,FINSEQ_3:27;
                then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                then A562: g2/.1 in lk & g2/.2 in lk by A499,A517;
                then consider u1 be Point of TOP-REAL 2 such that
                A563: g2/.1=u1 & u1`2=ppi`2 & pj`1<=u1`1 & u1`1<=ppi`1;
                consider u2 be Point of TOP-REAL 2 such that
                A564:
                g2/.2=u2 & u2`2=ppi`2 & pj`1<=u2`1 & u2`1<=ppi`1 by A562;
                A565: u2`1<u1`1 by A513,A561,A563,A564;
                then A566: u2`1<=u1`1 & u2`1<ppi`1 & u2=|[u2`1,u2`2]|
                  by A563,AXIOMS:22,EUCLID:57;
                set lg = {w where w is Point of TOP-REAL 2 :
                          w`2=ppi`2 & u2`1<=w`1 & w`1<=ppi`1};
                A567: u1 in lg by A563,A565;
          A568: LSeg(ppi,g2/.2)=LSeg(ppi,u2) & LSeg(g,n)=LSeg(ppi,u1) &
                LSeg(g,n+1)=LSeg(u1,u2)
               by A534,A536,A538,A539,A557,A559,A560,A563,A564,TOPREAL1:def 5;
                   LSeg(ppi,g2/.2)=lg by A498,A564,A566,TOPREAL3:16;
                hence thesis by A559,A563,A567,A568,TOPREAL1:14;
               end;
               suppose len g1<>n;
then A569:              len g1<n by A555,REAL_1:def 5;
                   n1 + len g1 = n;
then A570:            LSeg(g,n)=LSeg(g2,n1) by A538,A569,GOBOARD2:10;
A571:            len g1<n+1 by A537,A569,AXIOMS:22;
A572:            len g1+1<=n by A569,NAT_1:38;
A573:            n+1 = n1+1+len g1;
A574:             1<=n1+1 by NAT_1:29;
                 n1 + 1 + len g1 = n + 1;
                then n1+1 <= len g2 by A538,A540,REAL_1:53;
                then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                  by A535,A571,A572,A573,A574,GOBOARD2:5,10,REAL_1:84;
                hence thesis by A521,A541,A570;
               end;
               end;
             end;
             end;
         end;
         end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
           m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
         proof let n,m; assume that
          A575: m>n+1 and
          A576: n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
          A577: LSeg(g2,n) /\ LSeg(g2,m) <> {};
          A578: 1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
 len g2 by A576,FINSEQ_3:27;
          reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
           as Point of TOP-REAL 2;
          set lp = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                         p2`1<=w`1 & w`1<=p1`1},
              lq = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                         q2`1<=w`1 & w`1<=q1`1};
              m<m+1 & n<n+1 by NAT_1:38;
           then A579: p2`1<p1`1 & q2`1<q1`1 & p1`2=ppi`2 & p2`2=ppi`2 & q1`2=
ppi`2 &
           q2`2=ppi`2 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
           p2=|[p2`1,p2`2]| &
           q2=|[q2`1,q2`2]| by A508,A513,A576,EUCLID:57;
           A580: LSeg(g2,n) = LSeg(p2,p1) by A578,TOPREAL1:def 5
           .=lp by A579,TOPREAL3:16;
           A581: LSeg(g2,m) = LSeg(q2,q1) by A578,TOPREAL1:def 5
           .=lq by A579,TOPREAL3:16;
           consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
           A582: x in LSeg(g2,n) & x in LSeg(g2,m) by A577,XBOOLE_0:def 3;
then A583:           ex tn be Point of TOP-REAL 2 st
               tn=x & tn`2=ppi`2 & p2`1<=tn`1 & tn`1<=p1`1 by A580;
A584:           ex tm be Point of TOP-REAL 2 st
               tm=x & tm`2=ppi`2 & q2`1<=tm`1 & tm`1<=q1`1 by A581,A582;
               q1`1<p2`1 by A513,A575,A576;
            hence contradiction by A583,A584,AXIOMS:22;
         end;
then A585:    g2 is s.n.c. by GOBOARD2:6;
        A586: L~g2 c= LSeg(f,k)
         proof
          set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; let x; assume
             x in L~g2; then x in union ls by TOPREAL1:def 6;
          then consider X be set such that
          A587: x in X & X in ls by TARSKI:def 4;
          consider m such that
          A588: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A587;
              m in dom g2 & m+1 in dom g2 by A588,GOBOARD2:3;
          then A589: g2/.m in rng g2 & g2/.(m+1) in rng g2
           by PARTFUN2:4;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          A590: LSeg(q1,q2) c= LSeg(ppi,pj) by A500,A517,A589,TOPREAL1:12;
             LSeg(g2,m)=LSeg(q1,q2) by A588,TOPREAL1:def 5;
          hence thesis by A500,A587,A588,A590;
         end;
        A591: not f/.k in L~g2
         proof set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; assume
             f/.k in L~g2; then f/.k in union ls by TOPREAL1:def 6;
          then consider X be set such that
          A592: f/.k in X & X in ls by TARSKI:def 4;
          consider m such that
          A593: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A592;
          A594: m in dom g2 & m+1 in dom g2 &
          m<m+1 by A593,GOBOARD2:3,NAT_1:38;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          set lq={w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                       q2`1<=w`1 & w`1<=q1`1};
          A595: q1`2=ppi`2 & q2`2=ppi`2 & q2`1<q1`1 & q1=|[q1`1,q1`2]|
          & q2=|[q2`1,q2`2]| by A508,A513,A594,EUCLID:57;
             LSeg(g2,m)=LSeg(q2,q1) by A593,TOPREAL1:def 5
          .=lq by A595,TOPREAL3:16;
          then ex p st p=f/.k & p`2=ppi`2 & q2`1<=p`1 & p`1<=q1`1 by A592,A593
;
          hence contradiction by A47,A508,A594;
         end;
        A596: L~g1 /\ L~g2 = {}
         proof
           per cases;
           suppose k=1; hence thesis by A37;
           end;
           suppose k<>1; then 1<k by A14,REAL_1:def 5;
            then L~g1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A33,GOBOARD2:9;
            then A597: L~g1 /\ L~g2 c= {f/.k} by A586,XBOOLE_1:26;
                now consider x being Element of L~g1 /\ L~g2;
              assume L~g1 /\ L~g2 <> {};
              then x in {f/.k} & x in L~g2 by A597,TARSKI:def 3,XBOOLE_0:def 3
;
              hence contradiction by A591,TARSKI:def 1;
             end;
            hence thesis;
         end;
         end;
           for n,m st m>n+1 & n in dom g & n+1 in dom g &
        m in dom g & m+1 in dom g
         holds LSeg(g,n) misses LSeg(g,m)
         proof let n,m; assume that
          A598: m>n+1 and
          A599: n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
          A600: 1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
          m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
            by A599,FINSEQ_1:35,FINSEQ_3:27,NAT_1:29;
          set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
              l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
          A601: L~g1=union l1 & L~g2=union l2 & n+1 <= len g & m+1 <= len g
            by A599,FINSEQ_3:27,TOPREAL1:def 6;
             j1+1<=i1 by A482,NAT_1:38;
          then A602: 1<=l by REAL_1:84;
          then A603: 1 in dom g2 by A486,FINSEQ_3:27;
          reconsider qq=g2/.1 as Point of TOP-REAL 2;
          set ql={z where z is Point of TOP-REAL 2: z`2=ppi`2 &
                     qq`1<=z`1 & z`1<=ppi`1};
          A604: 1<=len g1 by A14,A16,A36,AXIOMS:22;
           then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
          then A605: g/.len g1=g1/.len g1 by FINSEQ_4:83
             .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
          A606: len g1<len g1 +1 & len g1+1<=len g
            by A486,A600,A602,NAT_1:38,REAL_1:55;
          A607: g/.(len g1+1)=qq by A486,A602,GOBOARD2:5;
          A608: qq`2=ppi`2 & pj`1<=qq`1 & qq`1<ppi`1 & qq=|[qq`1,qq`2]|
           by A508,A603,EUCLID:57;
    A609: LSeg(g,len g1)=LSeg(qq,ppi) by A604,A605,A606,A607,TOPREAL1:def 5
           .= ql by A498,A608,TOPREAL3:16;
            A610: n+1<=m+1 by A598,A600,AXIOMS:22;
                now per cases;
             suppose A611: m+1<=len g1;
              then A612: m<=len g1 & n+1<=len g1 by A600,A610,AXIOMS:22;
              then n<=len g1 by A600,AXIOMS:22;
              then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
               by A600,A611,A612,FINSEQ_3:27;
              then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m)
               by TOPREAL3:25;
              hence thesis by A31,A598,TOPREAL1:def 9;
             end;
             suppose len g1<m+1;
              then A613: len g1<=m by NAT_1:38;
              then reconsider m1=m-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A614: m=len g1;
                    now assume A615: k=1;
                     1<len g1 by A598,A600,A614,AXIOMS:22;
                  then 1+1<=len g1 by NAT_1:38;
                  hence contradiction by A37,A615,TOPREAL1:29;
                 end;
                then 1<k by A14,REAL_1:def 5;
                then A616: L~f1 /\ LSeg(f,k) ={f/.k}
                 by A5,A8,A9,GOBOARD2:9;
                   n<=len g1 by A598,A600,A614,AXIOMS:22;
                then A617: n in dom g1 & n+1 in dom g1
                by A598,A600,A614,FINSEQ_3:27;
                then A618: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                then LSeg(g,n) in l1 by A598,A600,A614;
                then A619: LSeg(g,n) c= L~f1
                 by A33,A601,ZFMISC_1:92;
                   LSeg(g,m) c= LSeg(f,k)
                 proof let x; assume x in LSeg(g,m);
                  then consider px be Point of TOP-REAL 2 such that
                  A620: px=x & px`2=ppi`2 & qq`1<=px`1 & px`1<=
ppi`1 by A609,A614;
                     pj`1<=px`1 by A608,A620,AXIOMS:22;
                  hence thesis by A499,A620;
                 end;
                then A621: LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                 by A616,A619,XBOOLE_1:27;
                    now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                  assume
                   LSeg(g,n)/\ LSeg(g,m)<>{};
                  then A622: x in LSeg(g,n) & x in {f/.k}
                  by A621,TARSKI:def 3,XBOOLE_0:def 3;
                  then A623: x=f/.k by TARSKI:def 1;
                     f/.k=g1/.len g1
                   by A15,A16,A18,A35,FINSEQ_4:86;
                  hence contradiction
                  by A29,A30,A31,A598,A614,A617,A618,A622,A623,GOBOARD2:7;
                 end;
                hence thesis by XBOOLE_0:def 7;
               end;
               suppose
              m<>len g1;
                then A624: len g1<m & m+1=m1+1+len g1
                 by A613,REAL_1:def 5;
                   m = m1+len g1;
                then A625: LSeg(g,m)=LSeg(g2,m1) by A600,A624,GOBOARD2:10;
                   m1+1<=len g2 & len g1+1<=
m by A600,A624,NAT_1:38,REAL_1:53;
                then A626: 1<=m1 & m1+1 <= len g2 by REAL_1:84;
                then LSeg(g,m) in l2 by A625;
                then A627: LSeg(g,m) c= L~g2 by A601,ZFMISC_1:92;
                    now per cases;
                 suppose A628: n+1<=len g1;
                  then n<=len g1 by A600,AXIOMS:22;
                  then n in dom g1 & n+1 in dom g1 by A600,A628,FINSEQ_3:27;
                   then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                  then LSeg(g,n) in l1 by A600,A628;
                  then LSeg(g,n) c= L~g1 by A601,ZFMISC_1:92;
                  then LSeg(g,n) /\ LSeg(g,m) c= {} by A596,A627,XBOOLE_1:27;
                  then LSeg(g,n) /\ LSeg(g,m) = {} by XBOOLE_1:3;
                  hence thesis by XBOOLE_0:def 7;
                 end;
                 suppose len g1<n+1;
                  then A629: len g1<=n by NAT_1:38;
                  then reconsider n1=n-len g1 as Nat by INT_1:18;
A630:               n - len g1 + 1 = n + 1 - len g1;
A631:               n = n1 + len g1;
                      now per cases;
                   suppose A632: len g1=n;
                        now consider x being
                      Element of LSeg(g,n) /\ LSeg(g,m);
                      assume
                       LSeg(g,n) /\ LSeg(g,m)<>{};
                      then A633: x in LSeg(g,n) & x in LSeg(g,m)
                      by XBOOLE_0:def 3;
then A634:                    ex qx be Point of TOP-REAL 2 st
                         qx=x & qx`2=ppi`2 & qq`1<=qx`1 & qx`1<=
ppi`1 by A609,A632;
                      A635: m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                        by A626,GOBOARD2:3,NAT_1:38;
                      reconsider q1=g2/.m1, q2=g2/.(m1+1)
                       as Point of TOP-REAL 2;
                      set q1l={v where v is Point of TOP-REAL 2: v`2=ppi`2 &
                                 q2`1<=v`1 & v`1<=q1`1};
A636:       q1`2=ppi`2 & q2`2=ppi`2 & q2`1<q1`1 & q1=|[q1`1,q1`2]|&
                      q2=|[q2`1,q2`2]| by A508,A513,A635,EUCLID:57;
                         m1 > n1 + 1 & n1 + 1 >=
 1 by A598,A630,NAT_1:29,REAL_1:54;
then A637:                   m1 > 1 by AXIOMS:22;
                         LSeg(g2,m1)=LSeg(q2,q1) by A626,TOPREAL1:def 5
                      .=q1l by A636,TOPREAL3:16;
then A638:                      ex qy be Point of TOP-REAL 2 st
                          qy=x & qy`2=ppi`2 & q2`1<=qy`1 & qy`1<=
q1`1 by A625,A633;
                         q1`1 < qq`1 by A513,A603,A635,A637;
                      hence contradiction by A634,A638,AXIOMS:22;
                     end;
                    hence thesis by XBOOLE_0:def 7;
                   end;
                   suppose n<>len g1;
                    then len g1<n by A629,REAL_1:def 5;
                    then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                     by A598,A600,A630,A631,GOBOARD2:10,REAL_1:54;
                    hence thesis by A585,A625,TOPREAL1:def 9;
                   end;
                   end;
                  hence thesis;
                 end;
                 end;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
        hence g is s.n.c. by GOBOARD2:6;
        A639: g2 is special
        proof let n;
         set p = g2/.n, q = g2/.(n+1);
        assume
              1<=n & n+1 <= len g2;
          then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
          then p`2=ppi`2 & q`2=ppi`2 by A508;
          hence p`1=q`1 or p`2=q`2;
         end;
            now
          set p=g1/.len g1, q=g2/.1;
             j1+1<=i1 by A482,NAT_1:38;
          then 1<=l by REAL_1:84;
          then 1 in dom g2 by A487,FINSEQ_1:3;
           then q`2=ppi`2 by A508;
          hence p`1=q`1 or p`2=q`2
           by A15,A16,A18,A35,A47,FINSEQ_4:86;
         end;
        hence g is special by A32,A639,GOBOARD2:13;
        thus L~g=L~f
         proof
          set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
              lf = {LSeg(f,j): 1<=j & j+1 <= len f};
          A640: len g = len g1 + len g2 by FINSEQ_1:35;
          A641: now let j; assume
            A642: len g1<=j & j<=len g;
            then reconsider w = j-len g1 as Nat by INT_1:18;
            let p such that
            A643: p=g/.j;
             per cases;
             suppose A644: j=len g1;
                 1<=len g1 by A14,A16,A36,AXIOMS:22;
              then len g1 in dom g1 by FINSEQ_3:27;
              then A645: g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
              .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
              hence p`2=G*(i1,i2)`2 by A643,A644;
              thus G*(j1,i2)`1<=p`1 & p`1<=G*
              (i1,i2)`1 by A51,A52,A56,A64,A66,A69,A482,A497,A643,A644,A645,
GOBOARD1:def 1;
                 Seg len c1 = dom c1 by FINSEQ_1:def 3;
              hence p in rng c1 by A51,A52,A69,A496,A643,A644,A645,PARTFUN2:4;
             end;
             suppose j<>len g1;
then A646:           len g1 < j by A642,REAL_1:def 5;
A647:           j = w + len g1;
                  len g1 + 1<=j by A646,NAT_1:38;
              then A648:           1<=w & w<=len g2 by A640,A642,REAL_1:84,86;
then A649:          g/.j=g2/.w by A647,GOBOARD2:5;
                 w in dom g2 by A648,FINSEQ_3:27;
              hence p`2=ppi`2 & pj`1<=p`1 & p`1<=
              ppi`1 & p in rng c1 by A508,A643,A649;
           end;
           end;
          thus L~g c= L~f
           proof let x; assume x in L~g;
            then x in union lg by TOPREAL1:def 6;
            then consider X be set such that
            A650: x in X & X in lg by TARSKI:def 4;
            consider i such that
            A651: X=LSeg(g,i) & 1<=i & i+1 <= len g by A650;
             per cases;
             suppose A652: i+1 <= len g1;
              then i<=i+1 & i+1<=len g1 by NAT_1:29;
              then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A651,AXIOMS:22;
              then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
              then X=LSeg(g1,i) by A651,TOPREAL3:25;
              then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A651,A652;
              then x in union {LSeg(g1,j): 1<=j & j+1 <= len g1}
                by A650,TARSKI:def 4;
              then x in L~f1 & L~f1 c= L~f by A33,TOPREAL1:def 6,TOPREAL3:27;
              hence thesis;
             end;
             suppose A653: i+1 > len g1;
              then A654: len g1<=i & i<=i+1 & i+1<=len g by A651,NAT_1:38;
                A655: 1<=i+1 & len g1<=i+1 & i<=len g by A651,A653,NAT_1:38;
              reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
              A656: q1`2=ppi`2 & pj`1<=q1`1 & q1`1<=ppi`1 & q2`2=ppi`2 & pj`1<=
q2`1 &
              q2`1<=ppi`1 by A641,A654,A655;
              then A657: q1=|[q1`1,q1`2]| & q2=|[q2`1,q1`2]| by EUCLID:57;
              A658: LSeg(g,i)=LSeg(q2,q1) by A651,TOPREAL1:def 5;
                  now per cases by AXIOMS:21;
               suppose q1`1>q2`1;
                then LSeg(g,i)={p2: p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1}
                  by A657,A658,TOPREAL3:16;
                then consider p2 such that
                A659: p2=x & p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1 by A650,A651;
                   pj`1<=p2`1 & p2`1<=ppi`1 by A656,A659,AXIOMS:22;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A499,A656,A659;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               suppose q1`1=q2`1;
                then LSeg(g,i)={q1} by A657,A658,TOPREAL1:7;
                then x=q1 by A650,A651,TARSKI:def 1;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A499,A656;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               suppose q1`1<q2`1;
                then LSeg(g,i)= {p1: p1`2=q1`2 & q1`1<=p1`1 & p1`1<=q2`1}
                  by A657,A658,TOPREAL3:16;
                then consider p2 such that
                A660: p2=x & p2`2=q1`2 & q1`1<=p2`1 & p2`1<=q2`1 by A650,A651;
                   pj`1<=p2`1 & p2`1<=ppi`1 by A656,A660,AXIOMS:22;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A499,A656,A660;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               end;
              hence thesis;
           end;
           end;
          let x; assume x in L~f;
          then A661: x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
           per cases by A661,XBOOLE_0:def 2;
           suppose x in L~f1; then x in L~g1 & L~g1 c= L~g
            by A33,GOBOARD2:11;
            hence x in L~g;
           end;
           suppose x in LSeg(f,k);
            then consider p1 such that
            A662: p1=x & p1`2=ppi`2 & pj`1<=p1`1 & p1`1<=ppi`1 by A499;
            defpred P2[Nat] means
            len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`1>=p1`1;
            A663: now
              take n=len g1;
              thus P2[n]
              proof
                 0<=len g2 by NAT_1:18;
               hence len g1<=n & n<=len g by A640,REAL_2:173;
               let q such that
               A664: q=g/.n;
                  1<=len g1 by A14,A16,A36,AXIOMS:22;
               then len g1 in dom g1 by FINSEQ_3:27;
               then q=f1/.len f1
                by A35,A664,FINSEQ_4:83
               .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
               hence p1`1<=q`1 by A662;
              end;
             end;
            A665: for n holds P2[n] implies n<=len g;
            consider ma be Nat such that
            A666: P2[ma] & for n st P2[n] holds n<=ma from NAT_1:sch 6
(A665,A663);
                now per cases;
             suppose A667: ma=len g;
                 j1+1<=i1 by A482,NAT_1:38;
              then A668: 1<=l & l=len g2 by A486,REAL_1:84;
              then A669: l in dom g2 & i1-l=j1 by FINSEQ_3:27;
              then A670: g/.ma=g2/.l by A486,A640,A667,FINSEQ_4:84
               .= pj by A486,A487,A669;
              then p1`1<=pj`1 by A666;
              then A671: p1`1=pj`1 by A662,AXIOMS:21;
              A672: ma-1<=len g & len g1+1<=ma
                by A640,A667,A668,PROB_1:2,REAL_1:55;
              then A673: len g1<=ma-1 & 0<=len g1 by NAT_1:18,REAL_1:84;
then A674:           0+1<=ma by REAL_1:84;
              reconsider m1=ma-1 as Nat by A674,INT_1:18;
                 1<=len g1 by A14,A16,A36,AXIOMS:22;
              then A675: 1<=m1 by A673,AXIOMS:22;
              reconsider q=g/.m1 as Point of TOP-REAL 2;
              A676: q`2=ppi`2 & pj`1<=q`1 & q=|[q`1,q`2]| & m1+1=ma
               by A641,A672,A673,EUCLID:57;
              then A677: LSeg(g,m1)=LSeg(pj,q)
               by A667,A670,A675,TOPREAL1:def 5;
              set lq={e where e is Point of TOP-REAL 2: e`2=ppi`2 & pj`1<=e`1 &
                      e`1<=q`1};
              LSeg(g,m1)=lq by A498,A676,A677,TOPREAL3:16;
              then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
              by A662,A667,A671,A675,A676;
              then x in union lg by A662,TARSKI:def 4;
              hence x in L~g by TOPREAL1:def 6;
             end;
             suppose ma<>len g;
              then ma<len g by A666,REAL_1:def 5;
              then A678: ma+1<=len g & k<=ma & ma<=ma+1
                by A16,A36,A666,AXIOMS:22,NAT_1:38;
              then A679: 1<=ma & len g1<=ma+1 by A14,A666,AXIOMS:22;
              reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
              A680: p1`1<=qa`1 by A666;
               A681: now assume p1`1<=qa1`1;
                 then for q holds q=g/.(ma+1) implies p1`1<=q`1;
                then ma+1<=ma by A666,A678,A679;
                hence contradiction by REAL_2:174;
               end;
              then A682: qa1`1<qa`1 & qa1`1<=p1`1 & p1`1<=qa`1 &
              qa`2=ppi`2 & qa1 `2 = ppi`2
              by A641,A666,A678,A679,A680,AXIOMS:22;
              set lma = {p2: p2`2=ppi`2 & qa1`1<=p2`1 & p2`1<=qa`1};
              A683: qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                 LSeg(g,ma)=LSeg(qa1,qa) by A678,A679,TOPREAL1:def 5
              .= lma by A682,A683,TOPREAL3:16;
              then x in LSeg(g,ma) & LSeg(g,ma) in lg by A662,A678,A679,A680
,A681;
              then x in union lg by TARSKI:def 4;
              hence x in L~g by TOPREAL1:def 6;
             end;
             end;
            hence x in L~g;
         end;
         end;
           1<=len g1 by A14,A16,A36,AXIOMS:22;
        then 1 in dom g1 by FINSEQ_3:27;
        hence g/.1=f1/.1
         by A34,FINSEQ_4:83
        .=f/.1 by A15,A19,FINSEQ_4:86;
           j1+1<=i1 by A482,NAT_1:38;
        then A684: 1<=l by REAL_1:84;
        then A685: l in dom g2 & len g=len g1 + len g2 & len g2 = l
         by A487,FINSEQ_1:3,35,def 3;
        reconsider m1=i1-l as Nat;
        thus g/.len g=g2/.l by A685,FINSEQ_4:84
        .=G*(m1,i2) by A486,A487,A685
        .=f/.len f by A5,A49,A481;
        thus len f<=len g by A5,A16,A36,A684,A685,REAL_1:55;
       end;
       case A686: i1=j1;
           k<>k+1 by NAT_1:38;
        hence contradiction by A7,A15,A47,A48,A49,A481,A686,PARTFUN2:17;
       end;
       case A687: i1<j1;
        then reconsider l=j1-i1 as Nat by INT_1:18;
        deffunc F(Nat) = G*(i1+$1,i2);
        consider g2 such that
        A688: len g2 = l & for n st n in dom g2 holds g2/.n = F(n)
          from GOBOARD2:sch 1;
A689:    Seg l = dom g2 by A688,FINSEQ_1:def 3;
        take g=g1^g2;
        A690: now let n; assume n in Seg l;
          then A691: 1<=n & n<=l by FINSEQ_1:3;
          then n<=n+i1 & i1+n<=l+i1 by NAT_1:29,REAL_1:55;
          then n<=i1+n & i1+n<=j1 & j1<=len G by A51,FINSEQ_3:27;
          then 1<=i1+n & i1+n<=len G by A691,AXIOMS:22;
          hence i1+n in dom G by FINSEQ_3:27;
          hence [i1+n,i2] in Indices G by A50,A51,ZFMISC_1:106;
         end;
        A692: Seg len g2 = dom g2 by FINSEQ_1:def 3;
            now let n such that A693: n in dom g2;
          take m=i1+n,k=i2;
          thus [m,k] in Indices G & g2/.n=G*(m,k) by A688,A690,A692,A693;
         end;
        then A694: for n st n in dom g ex i,j st [i,j] in Indices G &
        g/.n=G*(i,j) by A53,GOBOARD1:39;
        A695: now let n; assume
             n in dom g2 & n+1 in dom g2;
          then A696: g2/.n=G*(i1+n,i2) & [i1+n,i2] in Indices G &
          g2/.(n+1)=G*(i1+(n+1),i2) & [i1+(n+1),i2] in Indices G
          by A688,A690,A692;
          let l1,l2,l3,l4 be Nat; assume
             [l1,l2] in Indices G & [l3,l4] in Indices G & g2/.n=G*(l1,l2) &
           g2/.(n+1)=G*(l3,l4);
           then l1=i1+n & l2=i2 & l3=i1+(n+1) & l4=i2 by A696,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)= abs(i1+n-(i1+(n+1)))+0 by ABSVALUE:7
           .= abs(-1)
           .= abs(1) by ABSVALUE:17
           .= 1 by ABSVALUE:def 1;
         end;
         now let l1,l2,l3,l4 be Nat; assume
          A697: [l1,l2] in Indices G & [l3,l4] in Indices G & g1/.len g1=G*(l1,
l2) &
          g2/.1=G*(l3,l4) & len g1 in dom g1 & 1 in dom g2;
          then g2/.1=G*
(i1+1,i2) & [i1+1,i2] in Indices G & f1/.len f1=f/.k
            by A15,A16,A18,A688,A690,A692,FINSEQ_4:86;
           then l1=i1 & l2=i2 & l3=i1+1 & l4=i2 by A35,A47,A697,GOBOARD1:21;
          hence abs(l1-l3)+abs(l2-l4)=abs(i1-(i1+1))+0 by ABSVALUE:7
          .=abs(i1-i1+-1)
          .=abs(1) by ABSVALUE:17
          .=1 by ABSVALUE:def 1;
         end;
        then for n st n in dom g & n+1 in dom g holds
         for m,k,i,j st [m,k] in Indices G &
         [i,j] in Indices G & g/.n=G*(m,k) &
          g/.(n+1)=G*(i,j) holds abs(m-i)+abs(k-j)=1 by A53,A695,GOBOARD1:40;
        hence g is_sequence_on G by A694,GOBOARD1:def 11;
        set
        lk={w where w is Point of TOP-REAL 2: w`2=ppi`2 & ppi`1<=w`1 & w`1<=
pj`1};
           c1/.i1=c1.i1 & c1/.j1=c1.j1 by A51,A70,FINSEQ_4:def 4;
        then A698: c1/.i1=ppi & c1/.j1=pj by A51,MATRIX_1:def 9;
        then A699: y2.i1=ppi`2 & y2.j1=pj`2 & x2.i1=ppi`1 & x2.j1=pj`1
          by A51,A64,A65,A66,A67,A68,A70,GOBOARD1:def 3,def 4;
        then A700: ppi`1<pj`1 & ppi`2=pj`2 &
        ppi=|[ppi`1,ppi`2]| & pj=|[pj`1,pj`2]|
        by A51,A56,A57,A64,A65,A66,A67,A68,A70,A687,EUCLID:57,GOBOARD1:def 1
,def 2;
        A701: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A481,TOPREAL1:def 5
        .= lk by A700,TOPREAL3:16;
        A702: LSeg(f,k)=LSeg(ppi,pj) by A14,A47,A49,A481,TOPREAL1:def 5;
            now let n,m; assume
          A703: n in dom g2 & m in dom g2 & n<>m;
          then A704: g2/.n=G*(i1+n,i2) & g2/.m=G*(i1+m,i2) & [i1+n,i2] in
Indices G &
          [i1+m,i2] in Indices G by A688,A690,A692;
          assume g2/.n=g2/.m;
          then i1+n=i1+m by A704,GOBOARD1:21;
          hence contradiction by A703,XCMPLX_1:2;
         end;
         then for n,m st n in dom g2 & m in dom g2 &
         g2/.n = g2/.m holds n = m;
        then A705: g2 is one-to-one by PARTFUN2:16;
        A706: not f/.k in rng g2
         proof assume f/.k in rng g2;
          then consider n such that
          A707: n in dom g2 & g2/.n=f/.k by PARTFUN2:4;
          A708: g2/.n=G*(i1+n,i2) & [i1+n,i2] in Indices G
            by A688,A689,A690,A707;
             0+1<=n by A707,FINSEQ_3:27;
           then i1+n=i1 & 0<n by A47,A707,A708,GOBOARD1:21;
          hence contradiction by XCMPLX_1:3;
         end;
        A709: now let n,p; assume
          A710: n in dom g2 & g2/.n=p;
          then A711: g2/.n=G*(i1+n,i2) & 1<=n & n<=len g2 & i1+n in dom G
           by A688,A690,A692,FINSEQ_3:27;
          set n1=i1+n;
          set pn = G*(n1,i2);
             c1/.n1=c1.n1 by A70,A711,FINSEQ_4:def 4;
          then A712: g2/.n=pn & c1/.n1=pn & 0<=n & n1<=i1+len g2
            by A711,MATRIX_1:def 9,REAL_1:55;
          then A713: y2.n1=pn`2 & y2.n1=y2.i1 & x2.n1=pn`1 & n1<=j1 & i1<=n1
          by A51,A57,A64,A65,A66,A67,A68,A70,A688,A711,GOBOARD1:def 2,def 3
,def 4,REAL_2:173;
          hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=pj`1
            by A51,A56,A67,A70,A699,A710,A711,GOBOARD2:18;
          thus p in rng c1 by A70,A710,A711,A712,PARTFUN2:4;
             0<n by A711;
          then i1<n1 by REAL_2:174;
          hence p`1>ppi`1 by A51,A56,A67,A70,A699,A710,A711,A713,GOBOARD1:def 1
;
         end;
        A714: now let n,m,p,q; assume
          A715: n in dom g2 & m in dom g2 & n<m & g2/.n=p & g2/.m=q;
          then A716: g2/.n=G*(i1+n,i2) & i1+n in dom G &
              g2/.m=G*(i1+m,i2) & i1+m in dom G by A688,A690,A692;
          set n1=i1+n, m1=i1+m;
          set pn = G*(n1,i2),
              pm = G*(m1,i2);
             c1/.n1=c1.n1 & c1/.m1 = c1.m1 by A70,A716,FINSEQ_4:def 4;
          then A717: c1/.n1=pn & c1/.m1=pm & n1<m1
            by A715,A716,MATRIX_1:def 9,REAL_1:67;
          then x2.n1=pn`1 & x2.m1=pm`1 by A67,A70,A716,GOBOARD1:def 3;
          hence p`1<q`1 by A56,A67,A70,A715,A716,A717,GOBOARD1:def 1;
         end;
        A718: rng g2 c= LSeg(f,k)
         proof let x; assume x in rng g2;
          then consider n such that
          A719: n in dom g2 & g2/.n=x by PARTFUN2:4;
          A720: g2/.n=G*(i1+n,i2) by A688,A719;
          set pn = G*((i1+n),i2);
             pn`2=ppi`2 & ppi`1<=pn`1 & pn`1<=pj`1 by A709,A719,A720;
          hence x in LSeg(f,k) by A701,A719,A720;
         end;
           rng g1 /\ rng g2 = {}
         proof consider x being Element of rng g1 /\ rng g2;
          assume not thesis;
          then A721: x in rng g1 & x in rng g2 by XBOOLE_0:def 3;
              now per cases by A14,REAL_1:def 5;
           suppose k=1;
            hence contradiction by A37,A706,A721,TARSKI:def 1;
           end;
           suppose 1<k;
            then x in L~f1 /\ LSeg(f,k) & L~f1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A44,A718,A721,GOBOARD2:9,XBOOLE_0:def 3;
            hence contradiction by A706,A721,TARSKI:def 1;
           end;
           end;
          hence contradiction;
         end;
        then rng g1 misses rng g2 by XBOOLE_0:def 7;
        hence g is one-to-one by A29,A705,FINSEQ_3:98;
        A722: for n st 1<=n & n+2 <= len g2 holds
             LSeg(g2,n) /\ LSeg(g2,n+1) = {g2/.(n+1)}
         proof let n; assume
          A723:1<=n & n+2 <= len g2;
          then A724: n in dom g2 & n+1 in dom g2 & n+2 in dom g2 by GOBOARD2:4;
          then g2/.n in rng g2 & g2/.(n+1) in rng g2 &
          g2/.(n+2) in rng g2 by PARTFUN2:4;
          then A725: g2/.n in lk & g2/.(n+1) in lk &
          g2/.(n+2) in lk by A701,A718;
          then consider u be Point of TOP-REAL 2 such that
          A726: g2/.n=u & u`2=ppi`2 & ppi`1<=u`1 & u`1<=pj`1;
          consider u1 be Point of TOP-REAL 2 such that
          A727: g2/.(n+1)=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1 by A725;
          consider u2 be Point of TOP-REAL 2 such that
          A728: g2/.(n+2)=u2 & u2`2=ppi`2 & ppi`1<=u2`1 & u2`1<=pj`1 by A725;
          set lg = {w where w is Point of TOP-REAL 2:
                     w`2=ppi`2 & u`1<=w`1 & w`1<=u2`1};
          A729: 1<= n+1 by NAT_1:29;
          A730: n+1+1 = n+(1+1);
             n+1 <= n+2 by AXIOMS:24;
          then n+1 <= len g2 by A723,AXIOMS:22;
          then A731: LSeg(g2,n)=LSeg(u,u1) & LSeg(g2,n+1)=LSeg(u1,u2) &
          LSeg(g2/.n,g2/.(n+2))=LSeg(u,u2)
           by A723,A726,A727,A728,A729,A730,TOPREAL1:def 5;
             n<n+1 & n+1<n+1+1 & n+1+1=n+(1+1) by NAT_1:38;
          then A732: u1`1<u2`1 & u`1<u1`1 by A714,A724,A726,A727,A728;
          then A733: u1`1<=u2`1 & u`1<=u1`1 & u`1<u2`1 by AXIOMS:22;
          A734: u1 in lg & u=|[u`1,u`2]| & u2=|[u2`1,u2`2]| by A727,A732,
EUCLID:57;
          then LSeg(g2/.n,g2/.(n+2))=lg by A726,A728,A733,TOPREAL3:16;
          hence thesis by A727,A731,A734,TOPREAL1:14;
         end;
        thus g is unfolded
         proof let n; assume
          A735: 1<=n & n+2 <= len g;
then A736:           n+1+1<=len g;
          A737: 1<= n+1 by NAT_1:29;
          A738: n<=n+1 & n+1<=n+1+1 by NAT_1:29;
then A739:      n+1 <= len g by A735,AXIOMS:22;
A740:      n+(1+1)=n+1+1;
A741:      len g=len g1+len g2 by FINSEQ_1:35;
              n+2-len g1 = n-len g1 +2;
          then A742: n-len g1 + 2 <= len g2 by A735,A741,REAL_1:86;
           per cases;
           suppose A743: n+2 <= len g1;
        then n in dom g1 & n+1 in dom g1 & n+2 in dom g1 & n+(1+1)=n+1+1
              by A735,GOBOARD2:4;
            then LSeg(g1,n)=LSeg(g,n) & LSeg(g1,n+1)=LSeg(g,n+1) &
            g/.(n+1)=g1/.(n+1) by FINSEQ_4:83,TOPREAL3:25;
            hence thesis by A30,A735,A743,TOPREAL1:def 8;
           end;
           suppose len g1 < n+2;
            then len g1+1<=n+2 by NAT_1:38;
            then A744: len g1<=n+2-1 by REAL_1:84;
                now per cases;
             suppose A745: len g1=n+1;
                  now assume A746: k=1;
                   1<len g1 by A735,A745,NAT_1:38;
                then 1+1<=len g1 by NAT_1:38;
                hence contradiction by A37,A746,TOPREAL1:29;
               end;
              then A747: 1<k & LSeg(g1,n) c= L~f1
                 by A14,A33,REAL_1:def 5,TOPREAL3:26;
              then A748: L~f1 /\ LSeg(f,k)={f/.k} by A5,A8,A9,GOBOARD2:9;
                 1<=n+1 by NAT_1:29;
              then A749: n in dom g1 & n+1 in dom g1
              by A735,A738,A745,FINSEQ_3:27;
              then A750: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
              A751: g/.(n+1)=f1/.len f1 by A35,A745,A749,FINSEQ_4:83
              .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
                 n+2 = 1+len g1 & 1 <= len g2 by A735,A740,A741,A745,REAL_1:53;
              then A752: g/.(n+2)=g2/.1 by GOBOARD2:5;
                 1<=len g-len g1 by A736,A745,REAL_1:84;
              then 1 in dom g2 by A741,FINSEQ_3:27;
              then A753: g2/.1 in rng g2 by PARTFUN2:4;
              then g2/.1 in lk by A701,A718;
              then consider u1 be Point of TOP-REAL 2 such that
              A754: g2/.1=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1;
                 ppi in LSeg(ppi,pj) by TOPREAL1:6;
              then LSeg(ppi,u1) c= LSeg(f,k) & LSeg(g,n+1)=LSeg(ppi,u1)
                by A702,A718,A735,A737,A740,A751,A752,A753,A754,TOPREAL1:12
,def 5;
              then A755: LSeg(g,n) /\ LSeg(g,n+1) c= {g/.(n+1)}
               by A47,A747,A748,A750,A751,XBOOLE_1:27;
                 g/.(n+1) in LSeg(g,n) & g/.(n+1) in LSeg(g,n+1)
                by A735,A737,A739,A740,TOPREAL1:27;
              then g/.(n+1) in LSeg(g,n) /\ LSeg(g,n+1) by XBOOLE_0:def 3;
              then {g/.(n+1)} c= LSeg(g,n) /\ LSeg(g,n+1) by ZFMISC_1:37;
              hence thesis by A755,XBOOLE_0:def 10;
             end;
             suppose len g1<>n+1; then len g1<n+1 by A744,REAL_1:def 5;
              then A756: len g1<=n by NAT_1:38;
              then reconsider n1=n-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A757: len g1=n;
                   1<=len g1 by A14,A16,A36,AXIOMS:22;
                then len g1 in dom g1 by FINSEQ_3:27;
                then A758: g/.n=f1/.len f1 by A35,A757,FINSEQ_4:83
                .= ppi by A15,A16,A18,A47,FINSEQ_4:86;
A759:             2 <= len g2 by A735,A741,A757,REAL_1:53;
                then 1 <= len g2 by AXIOMS:22;
                then A760: g/.(n+1)=g2/.1 by A757,GOBOARD2:5;
                A761: g/.(n+2)=g2/.2 by A757,A759,GOBOARD2:5;
                    1<=len g2 by A759,AXIOMS:22;
                then A762: 1 in dom g2 & 2 in dom g2 by A759,FINSEQ_3:27;
                then g2/.1 in rng g2 & g2/.2 in rng g2 by PARTFUN2:4;
                then A763: g2/.1 in lk & g2/.2 in lk by A701,A718;
                then consider u1 be Point of TOP-REAL 2 such that
                A764: g2/.1=u1 & u1`2=ppi`2 & ppi`1<=u1`1 & u1`1<=pj`1;
                consider u2 be Point of TOP-REAL 2 such that
          A765: g2/.2=u2 & u2`2=ppi`2 & ppi`1<=u2`1 & u2`1<=pj`1 by A763;
                A766: u1`1<u2`1 by A714,A762,A764,A765;
                then A767: u1`1<=u2`1 & ppi`1<u2`1 & u2=|[u2`1,u2`2]|
                  by A764,AXIOMS:22,EUCLID:57;
                set lg = {w where w is Point of TOP-REAL 2 :
                          w`2=ppi`2 & ppi`1<=w`1 & w`1<=u2`1};
                A768: u1 in lg by A764,A766;
                A769: LSeg(g,n)=LSeg(ppi,u1) & LSeg(g,n+1)=LSeg(u1,u2)
             by A735,A737,A739,A740,A758,A760,A761,A764,A765,TOPREAL1:def 5;
                   u1 in LSeg(ppi,u2) by A700,A765,A767,A768,TOPREAL3:16;
                hence thesis by A760,A764,A769,TOPREAL1:14;
               end;
               suppose len g1<>n;
then A770:              len g1<n by A756,REAL_1:def 5;
                   n1 + len g1 = n;
then A771:            LSeg(g,n)=LSeg(g2,n1) by A739,A770,GOBOARD2:10;
A772:            len g1<n+1 by A738,A770,AXIOMS:22;
A773:            len g1+1<=n by A770,NAT_1:38;
A774:            n+1 = n1+1+len g1;
A775:             1<=n1+1 by NAT_1:29;
                   n1+1<=len g2 by A739,A741,A774,REAL_1:53;
                then LSeg(g,n+1)=LSeg(g2,n1+1)& g/.(n+1)=g2/.(n1+1) & 1<=n1
                  by A736,A772,A773,A774,A775,GOBOARD2:5,10,REAL_1:84;
                hence thesis by A722,A742,A771;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
         end;
              for n,m st m>n+1 & n in dom g2 & n+1 in dom g2 & m in dom g2 &
           m+1 in dom g2 holds LSeg(g2,n) misses LSeg(g2,m)
         proof let n,m; assume that
          A776: m>n+1 and
          A777: n in dom g2 & n+1 in dom g2 & m in dom g2 & m+1 in dom g2 and
          A778: LSeg(g2,n) /\ LSeg(g2,m) <> {};
          A779: 1 <= n & n+1 <= len g2 & 1 <= m & m+1<=
 len g2 by A777,FINSEQ_3:27;
          reconsider p1=g2/.n, p2=g2/.(n+1), q1=g2/.m, q2=g2/.(m+1)
           as Point of TOP-REAL 2;
          set lp = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                         p1`1<=w`1 & w`1<=p2`1},
              lq = {w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                         q1`1<=w`1 & w`1<=q2`1};
              m<m+1 & n<n+1 by NAT_1:38;
           then A780: p1`1<p2`1 & q1`1<q2`1 & p1`2=ppi`2 & p2`2=ppi`2 & q1`2=
ppi`2 &
           q2`2=ppi`2 & p1=|[p1`1,p1`2]| & q1=|[q1`1,q1`2]| &
           p2=|[p2`1,p2`2]| &
           q2=|[q2`1,q2`2]| by A709,A714,A777,EUCLID:57;
           A781: LSeg(g2,n) = LSeg(p1,p2) by A779,TOPREAL1:def 5
           .=lp by A780,TOPREAL3:16;
           A782: LSeg(g2,m) = LSeg(q1,q2) by A779,TOPREAL1:def 5
           .=lq by A780,TOPREAL3:16;
           consider x being Element of LSeg(g2,n) /\ LSeg(g2,m);
           A783: x in LSeg(g2,n) & x in LSeg(g2,m) by A778,XBOOLE_0:def 3;
then A784:           ex tn be Point of TOP-REAL 2 st
 tn=x & tn`2=ppi`2 & p1`1<=tn`1 & tn`1<=p2`1 by A781;
A785:           ex tm be Point of TOP-REAL 2 st
 tm=x & tm`2=ppi`2 & q1`1<=tm`1 & tm`1<=q2`1 by A782,A783;
               p2`1<q1`1 by A714,A776,A777;
            hence contradiction by A784,A785,AXIOMS:22;
         end;
then A786:    g2 is s.n.c. by GOBOARD2:6;
        A787: L~g2 c= LSeg(f,k)
         proof
          set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; let x; assume
             x in L~g2; then x in union ls by TOPREAL1:def 6;
          then consider X be set such that
          A788: x in X & X in ls by TARSKI:def 4;
          consider m such that
          A789: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A788;
              m in dom g2 & m+1 in dom g2 by A789,GOBOARD2:3;
          then A790: g2/.m in rng g2 & g2/.(m+1) in rng g2 by PARTFUN2:4;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          A791: LSeg(q1,q2) c= LSeg(ppi,pj) by A702,A718,A790,TOPREAL1:12;
             LSeg(g2,m)=LSeg(q1,q2) by A789,TOPREAL1:def 5;
          hence thesis by A702,A788,A789,A791;
         end;
        A792: not f/.k in L~g2
         proof set ls={LSeg(g2,m): 1<=m & m+1 <= len g2}; assume
             f/.k in L~g2; then f/.k in union ls by TOPREAL1:def 6;
          then consider X be set such that
          A793: f/.k in X & X in ls by TARSKI:def 4;
          consider m such that
          A794: X=LSeg(g2,m) & 1<=m & m+1 <= len g2 by A793;
          A795: m in dom g2 & m+1 in dom g2 & m<m+1
          by A794,GOBOARD2:3,NAT_1:38;
          reconsider q1=g2/.m, q2=g2/.(m+1) as Point of TOP-REAL 2;
          set lq={w where w is Point of TOP-REAL 2: w`2=ppi`2 &
                       q1`1<=w`1 & w`1<=q2`1};
          A796: q1`2=ppi`2 & q2`2=ppi`2 & q1`1<q2`1 & q1=|[q1`1,q1`2]|
          & q2=|[q2`1,q2`2]| by A709,A714,A795,EUCLID:57;
             LSeg(g2,m)=LSeg(q1,q2) by A794,TOPREAL1:def 5
          .=lq by A796,TOPREAL3:16;
          then ex p st p=f/.k & p`2=ppi`2 & q1`1<=p`1 & p`1<=q2`1 by A793,A794
;
          hence contradiction by A47,A709,A795;
         end;
        A797: L~g1 /\ L~g2 = {}
         proof per cases;
           suppose k=1; hence thesis by A37;
           end;
           suppose k<>1; then 1<k by A14,REAL_1:def 5;
            then L~g1 /\ LSeg(f,k)={f/.k}
             by A5,A8,A9,A33,GOBOARD2:9;
             then A798: L~g1 /\ L~g2 c= {f/.k} by A787,XBOOLE_1:26;
                now consider x being Element of L~g1 /\ L~g2;
              assume L~g1 /\ L~g2 <> {};
              then x in {f/.k} & x in L~g2 by A798,TARSKI:def 3,XBOOLE_0:def 3
;
              hence contradiction by A792,TARSKI:def 1;
             end;
            hence thesis;
         end;
         end;
           for n,m st m>n+1 & n in dom g & n+1 in dom g &
        m in dom g & m+1 in dom g
         holds LSeg(g,n) misses LSeg(g,m)
         proof let n,m; assume that
          A799: m>n+1 and
          A800: n in dom g & n+1 in dom g & m in dom g & m+1 in dom g;
          A801: 1<=n & 1<=n+1 & n+1<=len g & 1<=m & 1<=m+1 &
          m+1<=len g & n<=n+1 & m<=m+1 & len g=len g1+len g2
            by A800,FINSEQ_1:35,FINSEQ_3:27,NAT_1:29;
          set l1 = {LSeg(g1,i): 1<=i & i+1 <= len g1},
              l2 = {LSeg(g2,j): 1<=j & j+1 <= len g2};
          A802: L~g1=union l1 & L~g2=union l2 & n+1 <= len g & m+1 <= len g
            by A800,FINSEQ_3:27,TOPREAL1:def 6;
             i1+1<=j1 by A687,NAT_1:38;
          then A803: 1<=l by REAL_1:84;
          then A804: 1 in dom g2 by A688,FINSEQ_3:27;
          reconsider qq=g2/.1 as Point of TOP-REAL 2;
          set ql={z where z is Point of TOP-REAL 2: z`2=ppi`2 &
                     ppi`1<=z`1 & z`1<=qq`1};
          A805: 1<=len g1 by A14,A16,A36,AXIOMS:22;
           then len g1 in dom g1 & dom g1 c= dom g by FINSEQ_1:39,FINSEQ_3:27;
          then A806: g/.len g1=g1/.len g1 by FINSEQ_4:83
             .= ppi by A15,A16,A18,A35,A47,FINSEQ_4:86;
          A807: len g1<len g1 +1 & len g1+1<=len g
            by A688,A801,A803,NAT_1:38,REAL_1:55;
          A808: g/.(len g1+1)=qq by A688,A803,GOBOARD2:5;
          A809: qq`2=ppi`2 & qq`1<=pj`1 & qq`1>ppi`1 & qq=|[qq`1,qq`2]|
           by A709,A804,EUCLID:57;
          A810: LSeg(g,len g1)=LSeg(ppi,qq)
          by A805,A806,A807,A808,TOPREAL1:def 5
           .= ql by A700,A809,TOPREAL3:16;
            A811: n+1<=m+1 by A799,A801,AXIOMS:22;
                now per cases;
             suppose A812: m+1<=len g1;
              then A813: m<=len g1 & n+1<=len g1 by A801,A811,AXIOMS:22;
              then n<=len g1 by A801,AXIOMS:22;
              then n in dom g1 & n+1 in dom g1 & m in dom g1 & m+1 in dom g1
               by A801,A812,A813,FINSEQ_3:27;
              then LSeg(g,n)=LSeg(g1,n) & LSeg(g,m)=LSeg(g1,m) by TOPREAL3:25;
              hence thesis by A31,A799,TOPREAL1:def 9;
             end;
             suppose len g1<m+1;
              then A814: len g1<=m by NAT_1:38;
              then reconsider m1=m-len g1 as Nat by INT_1:18;
                  now per cases;
               suppose A815: m=len g1;
                    now assume A816: k=1;
                     1<len g1 by A799,A801,A815,AXIOMS:22;
                  then 1+1<=len g1 by NAT_1:38;
                  hence contradiction by A37,A816,TOPREAL1:29;
                 end;
                then 1<k by A14,REAL_1:def 5;
                then A817: L~f1 /\ LSeg(f,k) ={f/.k}
                 by A5,A8,A9,GOBOARD2:9;
                   n<=len g1 by A799,A801,A815,AXIOMS:22;
                then A818: n in dom g1 & n+1 in dom g1
                by A799,A801,A815,FINSEQ_3:27;
                then A819: LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                then LSeg(g,n) in l1 by A799,A801,A815;
                then A820: LSeg(g,n) c= L~f1
                 by A33,A802,ZFMISC_1:92;
                   LSeg(g,m) c= LSeg(f,k)
                 proof let x; assume x in LSeg(g,m);
                  then consider px be Point of TOP-REAL 2 such that
            A821: px=x & px`2=ppi`2 & ppi`1<=px`1 & px`1<=qq`1 by A810,A815;
                     pj`1>=px`1 by A809,A821,AXIOMS:22;
                  hence thesis by A701,A821;
                 end;
                then A822: LSeg(g,n) /\ LSeg(g,m) c= {f/.k}
                 by A817,A820,XBOOLE_1:27;
                    now consider x being Element of LSeg(g,n)/\ LSeg(g,m);
                  assume
                   LSeg(g,n)/\ LSeg(g,m)<>{};
                  then A823: x in LSeg(g,n) & x in {f/.k}
                  by A822,TARSKI:def 3,XBOOLE_0:def 3;
                  then A824: x=f/.k by TARSKI:def 1;
                     f/.k=g1/.len g1
                   by A15,A16,A18,A35,FINSEQ_4:86;
                  hence contradiction by A29,A30,A31,A799,A815,A818,A819,A823
,A824,GOBOARD2:7;
                 end;
                hence thesis by XBOOLE_0:def 7;
               end;
               suppose
              m<>len g1;
                then A825: len g1<m & m+1=m1+1+len g1
                 by A814,REAL_1:def 5;
                   m = m1+len g1;
                then A826: LSeg(g,m)=LSeg(g2,m1) by A801,A825,GOBOARD2:10;
                   m1+1<=len g2 & len g1+1<=
m by A801,A825,NAT_1:38,REAL_1:53;
                then A827: 1<=m1 & m1+1 <= len g2 by REAL_1:84;
                then LSeg(g,m) in l2 by A826;
                then A828: LSeg(g,m) c= L~g2 by A802,ZFMISC_1:92;
                    now per cases;
                 suppose A829: n+1<=len g1;
                  then n<=len g1 by A801,AXIOMS:22;
                  then n in dom g1 & n+1 in dom g1 by A801,A829,FINSEQ_3:27;
                   then LSeg(g,n)=LSeg(g1,n) by TOPREAL3:25;
                  then LSeg(g,n) in l1 by A801,A829;
                  then LSeg(g,n) c= L~g1 by A802,ZFMISC_1:92;
                  then LSeg(g,n) /\ LSeg(g,m) c= {} by A797,A828,XBOOLE_1:27;
                  then LSeg(g,n) /\ LSeg(g,m) = {} by XBOOLE_1:3;
                  hence thesis by XBOOLE_0:def 7;
                 end;
                 suppose len g1<n+1;
                  then A830: len g1<=n by NAT_1:38;
                  then reconsider n1=n-len g1 as Nat by INT_1:18;
A831:               n - len g1 + 1 = n + 1 - len g1;
A832:               n = n1 + len g1;
                      now per cases;
                   suppose A833: len g1=n;
                        now consider x being
                      Element of LSeg(g,n) /\ LSeg(g,m);
                      assume
                       LSeg(g,n) /\ LSeg(g,m)<>{};
                      then A834: x in LSeg(g,n) & x in LSeg(g,m)
                      by XBOOLE_0:def 3;
then A835:                      ex qx be Point of TOP-REAL 2 st
                       qx=x & qx`2=ppi`2 & ppi`1<=qx`1 & qx`1<=qq`1
                       by A810,A833;
                      A836: m1 in dom g2 & m1+1 in dom g2 & m1<m1+1
                        by A827,GOBOARD2:3,NAT_1:38;
                      reconsider q1=g2/.m1, q2=g2/.(m1+1)
                       as Point of TOP-REAL 2;
                      set q1l={v where v is Point of TOP-REAL 2: v`2=ppi`2 &
                                 q1`1<=v`1 & v`1<=q2`1};
                      A837: q1`2=ppi`2 & q2`2=ppi`2 & q1`1<q2`1 & q1=|[q1`1,q1
`2]|&
                      q2=|[q2`1,q2`2]| by A709,A714,A836,EUCLID:57;
                         m1 > n1 + 1 & n1 + 1 >=
 1 by A799,A831,NAT_1:29,REAL_1:54;
then A838:                   m1 > 1 by AXIOMS:22;
                         LSeg(g2,m1)=LSeg(q1,q2) by A827,TOPREAL1:def 5
                      .=q1l by A837,TOPREAL3:16;
then A839:                   ex qy be Point of TOP-REAL 2 st
                       qy=x & qy`2=ppi`2 & q1`1<=qy`1 & qy`1<=q2`1
                       by A826,A834;
                         qq`1<q1`1 by A714,A804,A836,A838;
                      hence contradiction by A835,A839,AXIOMS:22;
                     end;
                    hence thesis by XBOOLE_0:def 7;
                   end;
                   suppose n<>len g1;
                    then len g1<n by A830,REAL_1:def 5;
                    then LSeg(g,n)=LSeg(g2,n1) & m1>n1+1
                     by A799,A801,A831,A832,GOBOARD2:10,REAL_1:54;
                    hence thesis by A786,A826,TOPREAL1:def 9;
                   end;
                   end;
                  hence thesis;
                 end;
                 end;
                hence thesis;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
         end;
        hence g is s.n.c. by GOBOARD2:6;
        A840: g2 is special
         proof let n;
          set p = g2/.n, q = g2/.(n+1);
         assume 1<=n & n+1 <= len g2;
          then n in dom g2 & n+1 in dom g2 by GOBOARD2:3;
          then p`2=ppi`2 & q`2=ppi`2 by A709;
          hence p`1=q`1 or p`2=q`2;
         end;
            now
          set p=g1/.len g1, q=g2/.1;
             i1+1<=j1 by A687,NAT_1:38;
          then 1<=l by REAL_1:84;
          then 1 in dom g2 by A688,FINSEQ_3:27;
           then q`2=ppi`2 by A709;
          hence p`1=q`1 or p`2=q`2 by A15,A16,A18,A35,A47,FINSEQ_4:86;
         end;
        hence g is special by A32,A840,GOBOARD2:13;
        thus L~g=L~f
         proof
          set lg = {LSeg(g,i): 1<=i & i+1 <= len g},
              lf = {LSeg(f,j): 1<=j & j+1 <= len f};
          A841: len g = len g1 + len g2 by FINSEQ_1:35;
          A842: now let j; assume
            A843: len g1<=j & j<=len g;
            then reconsider w = j-len g1 as Nat by INT_1:18;
            let p such that
            A844: p=g/.j;
                now per cases;
             suppose A845: j=len g1;
                 1<=len g1 by A14,A16,A36,AXIOMS:22;
              then len g1 in dom g1 by FINSEQ_3:27;
              then A846: g/.len g1 = f1/.len f1 by A35,FINSEQ_4:83
              .= G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
              hence p`2=G*(i1,i2)`2 by A844,A845;
              thus G*(i1,i2)`1<=p`1 & p`1<=G*
(j1,i2)`1 by A51,A56,A67,A70,A687,A699,A844,A845,A846,GOBOARD1:def 1;
              thus p in rng c1 by A51,A70,A698,A844,A845,A846,PARTFUN2:4;
             end;
             suppose j<>len g1;
then A847:           len g1 < j by A843,REAL_1:def 5;
A848:           j = w + len g1;
                  len g1 + 1 <= j by A847,NAT_1:38;
then A849:           1<=w & w<=len g2 by A841,A843,REAL_1:84,86;
then A850:          g/.j=g2/.w by A848,GOBOARD2:5;
                 w in dom g2 by A849,FINSEQ_3:27;
              hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=
pj`1 & p in rng c1 by A709,A844,A850;
             end;
             end;
            hence p`2=ppi`2 & ppi`1<=p`1 & p`1<=pj`1 & p in rng c1;
           end;
          thus L~g c= L~f
           proof let x; assume x in L~g;
            then x in union lg by TOPREAL1:def 6;
            then consider X be set such that
            A851: x in X & X in lg by TARSKI:def 4;
            consider i such that
            A852: X=LSeg(g,i) & 1<=i & i+1 <= len g by A851;
                now per cases;
             suppose A853: i+1 <= len g1;
              then i<=i+1 & i+1<=len g1 by NAT_1:29;
              then 1<=i & i<=len g1 & 1<=i+1 & i+1<=len g1 by A852,AXIOMS:22;
              then i in dom g1 & i+1 in dom g1 by FINSEQ_3:27;
              then X=LSeg(g1,i) by A852,TOPREAL3:25;
              then X in {LSeg(g1,j): 1<=j & j+1 <= len g1} by A852,A853;
              then x in union {LSeg(g1,j): 1<=j & j+1 <= len g1}
              by A851,TARSKI:def 4;
              then x in L~f1 & L~f1 c= L~f by A33,TOPREAL1:def 6,TOPREAL3:27;
              hence thesis;
             end;
             suppose A854: i+1 > len g1;
              then A855: len g1<=i & i<=i+1 & i+1<=len g by A852,NAT_1:38;
              A856: 1<=i+1 & len g1<=i+1 & i<=len g by A852,A854,NAT_1:38;
              reconsider q1=g/.i, q2=g/.(i+1) as Point of TOP-REAL 2;
              A857: q1`2=ppi`2 & ppi`1<=q1`1 & q1`1<=pj`1 & q2`2=ppi`2 &
              ppi`1<= q2`1 &
              q2`1<=pj`1 by A842,A855,A856;
              then A858: q1=|[q1`1,q1`2]| & q2=|[q2`1,q1`2]| by EUCLID:57;
              A859: LSeg(g,i)=LSeg(q2,q1) by A852,TOPREAL1:def 5;
                  now per cases by AXIOMS:21;
               suppose q1`1>q2`1;
                then LSeg(g,i)={p2: p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1}
                  by A858,A859,TOPREAL3:16;
                then consider p2 such that
                A860: p2=x & p2`2=q1`2 & q2`1<=p2`1 & p2`1<=q1`1 by A851,A852;
                   ppi`1<=p2`1 & p2`1<=pj`1 by A857,A860,AXIOMS:22;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A701,A857,A860;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               suppose q1`1=q2`1;
                then LSeg(g,i)={q1} by A858,A859,TOPREAL1:7;
                then x=q1 by A851,A852,TARSKI:def 1;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A701,A857;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               suppose q1`1<q2`1;
                then LSeg(g,i)= {p1: p1`2=q1`2 & q1`1<=p1`1 & p1`1<=q2`1}
                  by A858,A859,TOPREAL3:16;
                then consider p2 such that
                A861: p2=x & p2`2=q1`2 & q1`1<=p2`1 & p2`1<=q2`1 by A851,A852;
                   ppi`1<=p2`1 & p2`1<=pj`1 by A857,A861,AXIOMS:22;
                then x in LSeg(f,k) & LSeg(f,k) in lf by A14,A701,A857,A861;
                then x in union lf by TARSKI:def 4;
                hence thesis by TOPREAL1:def 6;
               end;
               end;
              hence thesis;
             end;
             end;
            hence thesis;
           end;
          let x; assume x in L~f;
          then A862: x in L~f1 \/ LSeg(f,k) by A5,A12,GOBOARD2:8;
              now per cases by A862,XBOOLE_0:def 2;
           suppose x in L~f1; then x in L~g1 & L~g1 c= L~g
            by A33,GOBOARD2:11;
            hence x in L~g;
           end;
           suppose x in LSeg(f,k);
            then consider p1 such that
            A863: p1=x & p1`2=ppi`2 & ppi`1<=p1`1 & p1`1<=pj`1 by A701;
            defpred P2[Nat] means
            len g1<=$1 & $1<=len g & for q st q=g/.$1 holds q`1<=p1`1;
            A864: now
              take n=len g1;
              thus P2[n]
              proof
                 0<=len g2 by NAT_1:18;
               hence len g1<=n & n<=len g by A841,REAL_2:173;
               let q such that
               A865: q=g/.n;
                  1<=len g1 by A14,A16,A36,AXIOMS:22;
               then len g1 in dom g1 by FINSEQ_3:27;
               then q=f1/.len f1 by A35,A865,FINSEQ_4:83
               .=G*(i1,i2) by A15,A16,A18,A47,FINSEQ_4:86;
               hence q`1<=p1`1 by A863;
              end;
             end;
            A866: for n holds P2[n] implies n<=len g;
            consider ma be Nat such that
            A867: P2[ma] & for n st P2[n] holds n<=ma from NAT_1:sch 6
(A866,A864);
                now per cases;
             suppose A868: ma=len g;
                 i1+1<=j1 by A687,NAT_1:38;
              then A869: 1<=l by REAL_1:84;
              then A870: l in dom g2 & i1+l=j1 by A688,FINSEQ_3:27;
              then A871: g/.ma=g2/.l by A688,A841,A868,FINSEQ_4:84
               .= pj by A688,A870;
              then pj`1<=p1`1 by A867;
              then A872: p1`1=pj`1 by A863,AXIOMS:21;
              A873: ma-1<=len g & len g1+1<=ma
                by A688,A841,A868,A869,PROB_1:2,REAL_1:55;
              then A874: len g1<=ma-1 & 0<=len g1 by NAT_1:18,REAL_1:84;
then A875:           0+1<=ma by REAL_1:84;
              reconsider m1=ma-1 as Nat by A875,INT_1:18;
                 1<=len g1 by A14,A16,A36,AXIOMS:22;
              then A876: 1<=m1 by A874,AXIOMS:22;
              reconsider q=g/.m1 as Point of TOP-REAL 2;
              A877: q`2=ppi`2 & q`1<=pj`1 & q=|[q`1,q`2]| & m1+1=ma
               by A842,A873,A874,EUCLID:57;
              then A878: LSeg(g,m1)=LSeg(q,pj)
               by A868,A871,A876,TOPREAL1:def 5;
              set lq={e where e is Point of TOP-REAL 2: e`2=ppi`2 & q`1<=e`1 &
                      e`1<=pj`1};
              LSeg(g,m1)=lq by A700,A877,A878,TOPREAL3:16;
              then p1 in LSeg(g,m1) & LSeg(g,m1) in lg
                by A863,A868,A872,A876,A877;
              then x in union lg by A863,TARSKI:def 4;
              hence x in L~g by TOPREAL1:def 6;
             end;
             suppose ma<>len g;
              then ma<len g by A867,REAL_1:def 5;
              then A879: ma+1<=len g & k<=ma & ma<=ma+1
                by A16,A36,A867,AXIOMS:22,NAT_1:38;
              then A880: 1<=ma & len g1<=ma+1
                by A14,A867,AXIOMS:22;
              reconsider qa=g/.ma, qa1=g/.(ma+1) as Point of TOP-REAL 2;
              A881: qa`1<=p1`1 by A867;
               A882: now assume qa1`1<=p1`1;
                 then for q holds q=g/.(ma+1) implies q`1<=p1`1;
                then ma+1<=ma by A867,A879,A880;
                hence contradiction by REAL_2:174;
               end;
              then A883: qa`1<qa1`1 & qa`1<=p1`1 & p1`1<=qa1`1 &
              qa`2=ppi`2 & qa1 `2 = ppi`2 by A842,A867,A879,A880,A881,AXIOMS:22
;
              set lma = {p2: p2`2=ppi`2 & qa`1<=p2`1 & p2`1<=qa1`1};
              A884: qa=|[qa`1,qa`2]| & qa1=|[qa1 `1, qa1 `2]| by EUCLID:57;
                 LSeg(g,ma)=LSeg(qa,qa1) by A879,A880,TOPREAL1:def 5
              .= lma by A883,A884,TOPREAL3:16;
              then x in LSeg(g,ma) & LSeg(g,ma) in lg by A863,A879,A880,A881
,A882;
              then x in union lg by TARSKI:def 4;
              hence x in L~g by TOPREAL1:def 6;
             end;
             end;
            hence x in L~g;
           end;
           end;
          hence x in L~g;
         end;
           1<=len g1 by A14,A16,A36,AXIOMS:22;
        then 1 in dom g1 by FINSEQ_3:27;
        hence g/.1=f1/.1 by A34,FINSEQ_4:83
        .=f/.1 by A15,A19,FINSEQ_4:86;
           i1+1<=j1 by A687,NAT_1:38;
        then A885: 1<=l by REAL_1:84;
        then A886: l in dom g2 & len g=len g1 + l by A688,FINSEQ_1:35
,FINSEQ_3:27;
        hence g/.len g=g2/.l by FINSEQ_4:84
        .=G*(i1+l,i2) by A688,A886
        .=f/.len f by A5,A49,A481;
        thus len f<=len g by A5,A16,A36,A885,A886,REAL_1:55;
       end;
       end;
      hence thesis;
     end;
     end;
    hence thesis;
 end;
 end;
     for k holds P[k] from NAT_1:sch 1(A1,A3);
 hence thesis;
end;

theorem
   (for n st n in dom f ex i,j st [i,j] in Indices G &
f/.n=G*(i,j)) & f is_S-Seq implies
ex g st g is_sequence_on G & g is_S-Seq & L~f = L~g & f/.1 = g/.1 &
        f/.len f = g/.len g & len f<=len g
 proof assume that
  A1: for n st n in dom f ex i,j st [i,j] in Indices G & f/.n=G*(i,j) and
  A2: f is_S-Seq;
  A3: f is one-to-one & 2<=len f & f is unfolded s.n.c. special
         by A2,TOPREAL1:def 10;
  then consider g such that
  A4: g is_sequence_on G and
  A5: g is one-to-one unfolded s.n.c. special &
  L~f = L~g & f/.1 = g/.1 & f/.len f = g/.len g & len f <= len g by A1,Th1;
  take g;
  thus g is_sequence_on G by A4;
     2<=len g by A3,A5,AXIOMS:22;
  hence g is_S-Seq by A5,TOPREAL1:def 10;
  thus thesis by A5;
 end;
