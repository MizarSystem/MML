:: Monotonic and Continuous Real Function
::  by Jaros{\l}aw Kotowicz
::
:: Received January 10, 1991
:: Copyright (c) 1991-2011 Association of Mizar Users
::           (Stowarzyszenie Uzytkownikow Mizara, Bialystok, Poland).
:: This code can be distributed under the GNU General Public Licence
:: version 3.0 or later, or the Creative Commons Attribution-ShareAlike
:: License version 3.0 or later, subject to the binding interpretation
:: detailed in file COPYING.interpretation.
:: See COPYING.GPL and COPYING.CC-BY-SA for the full text of these
:: licenses, or see http://www.gnu.org/licenses/gpl.html and
:: http://creativecommons.org/licenses/by-sa/3.0/.

environ

 vocabularies NUMBERS, REAL_1, XREAL_0, ORDINAL1, SUBSET_1, SEQ_1, PARTFUN1,
      RCOMP_1, XBOOLE_0, RELAT_1, TARSKI, SEQ_2, LIMFUNC1, FUNCOP_1, FUNCT_1,
      XXREAL_0, ORDINAL2, CARD_1, PROB_1, XXREAL_1, ARYTM_1, ARYTM_3, COMPLEX1,
      FCONT_1, FUNCT_2, VALUED_0, SEQM_3;
 notations TARSKI, XBOOLE_0, SUBSET_1, ORDINAL1, NUMBERS, XCMPLX_0, XREAL_0,
      COMPLEX1, PROB_1, REAL_1, FUNCT_1, FUNCT_2, FUNCOP_1, VALUED_1, SEQ_1,
      RELSET_1, SEQ_2, PARTFUN1, PARTFUN2, RCOMP_1, FCONT_1, LIMFUNC1,
      XXREAL_0, RFUNCT_2;
 constructors PARTFUN1, REAL_1, COMPLEX1, NAT_1, SEQ_2, PROB_1, RCOMP_1,
      PARTFUN2, RFUNCT_2, FCONT_1, LIMFUNC1, VALUED_1, SEQ_1, XXREAL_2,
      RELSET_1, BINOP_2, RVSUM_1;
 registrations ORDINAL1, RELSET_1, NUMBERS, XXREAL_0, XREAL_0, MEMBERED,
      RCOMP_1, RFUNCT_2, VALUED_1, FUNCT_2, VALUED_0, XXREAL_2, FUNCOP_1,
      SEQ_4, RELAT_1;
 requirements REAL, NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, RCOMP_1, XBOOLE_0, SUBSET_1, PROB_1, LIMFUNC1;
 theorems FUNCT_1, NAT_1, SEQ_2, SEQ_4, ABSVALUE, PARTFUN1, PARTFUN2, RCOMP_1,
      RFUNCT_2, FCONT_1, SUBSET_1, FCONT_2, TARSKI, FUNCT_2, RELAT_1, XREAL_0,
      XBOOLE_0, XBOOLE_1, FUNCOP_1, XREAL_1, COMPLEX1, XXREAL_0, VALUED_1,
      XXREAL_1, XXREAL_2, VALUED_0;
 schemes SEQ_1, FUNCT_2;

begin

reserve x,X for set;
reserve x0,r1,r2,g,g1,g2,p,s for Real;
reserve r for real number;
reserve n,m for Element of NAT;
reserve a,b,d for Real_Sequence;
reserve f for PartFunc of REAL,REAL;

registration
  cluster [#] REAL -> closed;
  coherence
  proof
    let a;
    thus thesis;
  end;
  cluster empty -> closed Subset of REAL;
  coherence
  proof
    let S be Subset of REAL such that
A1: S is empty;
    let a;
    assume that
A2: rng a c= S and
    a is convergent;
    thus thesis by A1,A2,XBOOLE_1:3;
  end;
end;

registration
  cluster [#] REAL -> open;
  coherence
  proof
    ([#] REAL)` = {} REAL by XBOOLE_1:37;
    hence thesis by RCOMP_1:def 5;
  end;
  cluster empty -> open Subset of REAL;
  coherence
  proof
    let S be Subset of REAL;
    assume S is empty;
    then S` = [#] REAL;
    hence thesis by RCOMP_1:def 5;
  end;
end;

registration
  let r;
  cluster right_closed_halfline(r) -> closed;
  coherence
  proof
    r in REAL by XREAL_0:def 1;
    then reconsider b = NAT --> r as Real_Sequence by FUNCOP_1:57;
    let a such that
A1: rng a c= right_closed_halfline(r) and
A2: a is convergent;
A3: now
      let n;
      a.n in rng a by VALUED_0:28;
      then a.n in right_closed_halfline(r) by A1;
      then a.n in {g1: r <= g1} by XXREAL_1:232;
      then ex r1 st a.n = r1 & r <= r1;
      hence b.n <= a.n by FUNCOP_1:13;
    end;
    lim b = b.0 by SEQ_4:41
      .= r by FUNCOP_1:13;
    then r <= lim a by A2,A3,SEQ_2:32;
    then (lim a) in {g1: r <= g1};
    hence thesis by XXREAL_1:232;
  end;
  cluster left_closed_halfline(r) -> closed;
  coherence
  proof
    r in REAL by XREAL_0:def 1;
    then reconsider b = NAT --> r as Real_Sequence by FUNCOP_1:57;
    let a such that
A4: rng a c= left_closed_halfline(r) and
A5: a is convergent;
A6: now
      let n;
      a.n in rng a by VALUED_0:28;
      then a.n in left_closed_halfline(r) by A4;
      then a.n in {g: g <= r} by XXREAL_1:231;
      then ex r1 st a.n = r1 & r1 <= r;
      hence a.n <= b.n by FUNCOP_1:13;
    end;
    lim b = b.0 by SEQ_4:41
      .= r by FUNCOP_1:13;
    then lim a <= r by A5,A6,SEQ_2:32;
    then lim a in {g1: g1 <= r};
    hence thesis by XXREAL_1:231;
  end;
  cluster right_open_halfline(r) -> open;
  coherence
  proof
    (right_open_halfline(r))` = left_closed_halfline(r) by XXREAL_1:224,296;
    hence thesis by RCOMP_1:def 5;
  end;
  cluster halfline(r) -> open;
  coherence
  proof
    (left_open_halfline(r))` = right_closed_halfline(r) by XXREAL_1:224,290;
    hence thesis by RCOMP_1:def 5;
  end;
end;

canceled 8;

theorem Th9:
  g in ].x0 - r,x0 + r.[ implies abs(g-x0) < r
proof
  assume g in ].x0 - r,x0 + r.[;
  then
A1: ex g1 st g1 = g & x0 - r < g1 & g1 < x0 + r;
  per cases;
  suppose
A2: x0 <= g;
A3: g - x0 < x0 + r - x0 by A1,XREAL_1:16;
    0 <= g - x0 by A2,XREAL_1:50;
    hence thesis by A3,ABSVALUE:def 1;
  end;
  suppose
    g <= x0;
    then 0 <= x0 - g by XREAL_1:50;
    then
A4: x0 - g = abs(- (g - x0)) by ABSVALUE:def 1
      .= abs(g - x0) by COMPLEX1:138;
    x0 - g < x0 - (x0 - r) by A1,XREAL_1:17;
    hence thesis by A4;
  end;
end;

theorem
  g in ].x0 - r,x0 + r.[ implies g - x0 in ].-r,r.[
proof
  set r1 = g-x0;
  assume g in ].x0 - r,x0 + r.[;
  then
 abs(g-x0) < r by Th9;
  then abs(r1 - 0) < r;
  then r1 in ].0 - r, 0 + r.[ by RCOMP_1:8;
  hence thesis;
end;

theorem Th11:
  g = x0 + r1 & abs(r1) < r implies 0 < r & g in ].x0 - r,x0 + r.[
proof
  assume that
A1: g = x0 + r1 and
A2: abs(r1) < r;
  thus 0 < r by A2,COMPLEX1:132;
  abs(g - x0) < r by A1,A2;
  hence thesis by RCOMP_1:8;
end;

theorem
  g - x0 in ].-r,r.[ implies 0 < r & g in ].x0 - r,x0 + r.[
proof
  set r1 = g - x0;
  assume r1 in ].-r,r.[;
  then ex g1 st g1 = r1 & -r < g1 & g1 < r;
  then
A1: abs(r1) < r by SEQ_2:9;
  x0 + r1 = g;
  hence thesis by A1,Th11;
end;

theorem Th13:
  for x0 be real number holds (for n holds a.n = x0 - p/(n+1))
  implies a is convergent & lim a = x0
proof
  let x0 be real number;
  deffunc F(Element of NAT) = p/($1+1);
  consider d such that
A1: for n holds d.n = F(n) from SEQ_1:sch 1;
  x0 in REAL by XREAL_0:def 1;
  then reconsider b = NAT --> x0 as Real_Sequence by FUNCOP_1:57;
  assume
A2: for n holds a.n = x0 - p/(n+1);
  now
    let n;
    thus (b - d).n = b.n - d.n by VALUED_1:15
      .= x0 - d.n by FUNCOP_1:13
      .= x0 - p/(n+1) by A1
      .=a.n by A2;
  end;
  then
A3: a = b - d by FUNCT_2:113;
A4: d is convergent by A1,SEQ_4:46;
  hence a is convergent by A3,SEQ_2:25;
A5: lim b = b.0 by SEQ_4:41
    .= x0 by FUNCOP_1:13;
  lim d = 0 by A1,SEQ_4:46;
  hence lim a = x0 - 0 by A4,A5,A3,SEQ_2:26
    .= x0;
end;

theorem Th14:
  for x0 be real number holds (for n holds a.n = x0 + p/(n+1))
  implies a is convergent & lim a = x0
proof
  let x0 be real number;
  deffunc F(Element of NAT) = p/($1+1);
  consider d such that
A1: for n holds d.n = F(n) from SEQ_1:sch 1;
  x0 in REAL by XREAL_0:def 1;
  then reconsider b = NAT --> x0 as Real_Sequence by FUNCOP_1:57;
  assume
A2: for n holds a.n = x0 + p/(n+1);
  now
    let n;
    thus (b + d).n = b.n + d.n by VALUED_1:1
      .= x0 + d.n by FUNCOP_1:13
      .= x0 + p/(n+1) by A1
      .=a.n by A2;
  end;
  then
A3: a = b + d by FUNCT_2:113;
A4: d is convergent by A1,SEQ_4:46;
  hence a is convergent by A3,SEQ_2:19;
A5: lim b = b.0 by SEQ_4:41
    .= x0 by FUNCOP_1:13;
  lim d = 0 by A1,SEQ_4:46;
  hence lim a = x0 + 0 by A4,A5,A3,SEQ_2:20
    .= x0;
end;

theorem
  f is_continuous_in x0 & f.x0 <> r & (ex N be Neighbourhood of x0 st N
  c= dom f) implies ex N be Neighbourhood of x0 st N c= dom f & for g st g in N
  holds f.g <> r
proof
  assume that
A1: f is_continuous_in x0 and
A2: f.x0 <> r;
  given N be Neighbourhood of x0 such that
A3: N c= dom f;
  consider p be real number such that
A4: 0 < p and
A5: N = ].x0 - p,x0 + p.[ by RCOMP_1:def 7;
  defpred P[Element of NAT,real number] means x0 - p/($1+1) < $2 & $2 < x0 + p
  /($1+1) & f.$2 = r & $2 in dom f;
  assume
A6: for N be Neighbourhood of x0 holds not N c= dom f or ex g st g in N
  & f.g = r;
A7: for n ex g be Real st P[n,g]
  proof
    let n;
A8: 0 <= n by NAT_1:2;
    then reconsider
    Nn = ].x0 - p/(n+1),x0 + p/(n+1).[ as Neighbourhood of x0 by A4,
RCOMP_1:def 7,XREAL_1:141;
A9: Nn c= dom f
    proof
      let x;
      assume x in Nn;
      then consider g2 such that
A10:  g2 = x and
A11:  x0 - p/(n+1) < g2 and
A12:  g2 < x0 + p/(n+1);
      0 + 1 <= n + 1 by A8,XREAL_1:9;
      then
A13:  p/(n+1) <= p/1 by A4,XREAL_1:120;
      then x0 + p/(n+1) <= x0 + p by XREAL_1:9;
      then
A14:  g2 < x0 + p by A12,XXREAL_0:2;
      x0 - p <= x0 - p/(n+1) by A13,XREAL_1:15;
      then x0 - p < g2 by A11,XXREAL_0:2;
      then x in N by A5,A10,A14;
      hence thesis by A3;
    end;
    then consider g such that
A15: g in Nn and
A16: f.g = r by A6;
    take g;
    ex g1 st g1 = g & x0 - p/(n+1) < g1 & g1 <x0 + p/(n+1) by A15;
    hence x0 - p/(n+1) < g & g <x0 + p/(n+1);
    thus f.g = r by A16;
    thus thesis by A9,A15;
  end;
  consider d such that
A17: for n holds P[n,d.n] from FUNCT_2:sch 3(A7);
A18: rng d c= dom f
  proof
    let x;
    assume x in rng d;
    then ex n st x = d.n by FUNCT_2:190;
    hence thesis by A17;
  end;
A19: now
    let r2 be real number such that
A20: 0 < r2;
    take n = 0;
    let m such that
    n <= m;
    abs((f/*d).m - r) = abs(f.(d.m) - r) by A18,FUNCT_2:185
      .= abs(r - r) by A17
      .= 0 by ABSVALUE:7;
    hence abs((f/*d).m - r) < r2 by A20;
  end;
  deffunc F(Element of NAT) = x0 - p/($1+1);
  consider a such that
A21: for n holds a.n = F(n) from SEQ_1:sch 1;
  deffunc F(Element of NAT) = x0 + p/($1+1);
  consider b such that
A22: for n holds b.n = F(n) from SEQ_1:sch 1;
A23: now
    let n;
    x0 - p/(n+1) < d.n & d.n < x0 + p/(n+1) by A17;
    hence a.n <= d.n & d.n <= b.n by A21,A22;
  end;
A24: p is Real by XREAL_0:def 1;
  then
A25: b is convergent & lim b = x0 by A22,Th14;
  a is convergent & lim a = x0 by A24,A21,Th13;
  then d is convergent & lim d = x0 by A25,A23,SEQ_2:33,34;
  then f/*d is convergent & f.x0 = lim (f/*d) by A1,A18,FCONT_1:def 1;
  hence contradiction by A2,A19,SEQ_2:def 7;
end;

theorem
  f|X is increasing or f|X is decreasing implies f|X is one-to-one
proof
  assume
A1: f|X is increasing or f|X is decreasing;
  now
    per cases by A1;
    suppose
A2:   f|X is increasing;
      now
        given r1,r2 such that
A3:     r1 in dom (f|X) and
A4:     r2 in dom (f|X) and
A5:     (f|X).r1 = (f|X).r2 and
A6:     r1 <> r2;
A7:     r1 in X /\ dom f & r2 in X /\ dom f by A3,A4,RELAT_1:90;
        now
          per cases by A6,XXREAL_0:1;
          suppose
            r1 < r2;
            then f.r1 < f.r2 by A2,A7,RFUNCT_2:43;
            then (f|X).r1 < f.r2 by A3,FUNCT_1:70;
            hence contradiction by A4,A5,FUNCT_1:70;
          end;
          suppose
            r2 < r1;
            then f.r2 < f.r1 by A2,A7,RFUNCT_2:43;
            then (f|X).r2 < f.r1 by A4,FUNCT_1:70;
            hence contradiction by A3,A5,FUNCT_1:70;
          end;
        end;
        hence contradiction;
      end;
      hence thesis by PARTFUN1:38;
    end;
    suppose
A8:   f|X is decreasing;
      now
        given r1,r2 such that
A9:     r1 in dom (f|X) and
A10:    r2 in dom (f|X) and
A11:    (f|X).r1 = (f|X).r2 and
A12:    r1 <> r2;
A13:    r1 in X /\ dom f & r2 in X /\ dom f by A9,A10,RELAT_1:90;
        now
          per cases by A12,XXREAL_0:1;
          suppose
            r1 < r2;
            then f.r2 < f.r1 by A8,A13,RFUNCT_2:44;
            then (f|X).r2 < f.r1 by A10,FUNCT_1:70;
            hence contradiction by A9,A11,FUNCT_1:70;
          end;
          suppose
            r2 < r1;
            then f.r1 < f.r2 by A8,A13,RFUNCT_2:44;
            then (f|X).r1 < f.r2 by A9,FUNCT_1:70;
            hence contradiction by A10,A11,FUNCT_1:70;
          end;
        end;
        hence contradiction;
      end;
      hence thesis by PARTFUN1:38;
    end;
  end;
  hence thesis;
end;

theorem Th17:
  for f be one-to-one PartFunc of REAL,REAL st f|X is increasing
  holds (f|X)"|(f.:X) is increasing
proof
  let f be one-to-one PartFunc of REAL,REAL;
  assume that
A1: f|X is increasing and
A2: not (f|X)"|(f.:X) is increasing;
  consider r1,r2 such that
A3: r1 in f.:X /\ dom ((f|X)") and
A4: r2 in f.:X /\ dom((f|X)") and
A5: r1 < r2 and
A6: ((f|X)").r1 >= ((f|X)").r2 by A2,RFUNCT_2:43;
A7: f.:X = rng (f|X) by RELAT_1:148;
  then
A8: r1 in rng (f|X) by A3,XBOOLE_0:def 4;
A9: r2 in rng (f|X) by A4,A7,XBOOLE_0:def 4;
A10: f|X|X is increasing by A1;
  now
    per cases;
    suppose
      ((f|X)").r1 = ((f|X)").r2;
      then r1 = (f|X).(((f|X)").r2) by A8,FUNCT_1:57
        .= r2 by A9,FUNCT_1:57;
      hence contradiction by A5;
    end;
    suppose
A11:  ((f|X)").r1 <> ((f|X)").r2;
A12:  dom (f|X) = dom ((f|X)|X) by RELAT_1:101
        .= X /\ dom (f|X) by RELAT_1:90;
A13:  ((f|X)").r2 in dom (f|X) & ((f|X)").r1 in dom (f|X) by A8,A9,PARTFUN2:79;
      ((f|X)").r2 < ((f|X)").r1 by A6,A11,XXREAL_0:1;
      then (f|X).(((f|X)").r2) < (f|X).(((f|X)").r1) by A10,A13,A12,RFUNCT_2:43
;
      then r2 < (f|X).(((f|X)").r1) by A9,FUNCT_1:57;
      hence contradiction by A5,A8,FUNCT_1:57;
    end;
  end;
  hence contradiction;
end;

theorem Th18:
  for f be one-to-one PartFunc of REAL,REAL st f|X is decreasing
  holds (f|X)"|(f.:X) is decreasing
proof
  let f be one-to-one PartFunc of REAL,REAL;
  assume that
A1: f|X is decreasing and
A2: not (f|X)"|(f.:X) is decreasing;
  consider r1,r2 such that
A3: r1 in f.:X /\ dom ((f|X)") and
A4: r2 in f.:X /\ dom((f|X)") and
A5: r1 < r2 and
A6: ((f|X)").r1 <= ((f|X)").r2 by A2,RFUNCT_2:44;
A7: f.:X = rng (f|X) by RELAT_1:148;
  then
A8: r1 in rng (f|X) by A3,XBOOLE_0:def 4;
A9: r2 in rng (f|X) by A4,A7,XBOOLE_0:def 4;
A10: f|X|X is decreasing by A1;
  now
    per cases;
    suppose
      ((f|X)").r1 = ((f|X)").r2;
      then r1 = (f|X).(((f|X)").r2) by A8,FUNCT_1:57
        .= r2 by A9,FUNCT_1:57;
      hence contradiction by A5;
    end;
    suppose
A11:  ((f|X)").r1 <> ((f|X)").r2;
A12:  dom (f|X) = dom ((f|X)|X) by RELAT_1:101
        .= X /\ dom (f|X) by RELAT_1:90;
A13:  ((f|X)").r2 in dom (f|X) & ((f|X)").r1 in dom (f|X) by A8,A9,PARTFUN2:79;
      ((f|X)").r2 > ((f|X)").r1 by A6,A11,XXREAL_0:1;
      then (f|X).(((f|X)").r2) < (f|X).(((f|X)").r1) by A10,A13,A12,RFUNCT_2:44
;
      then r2 < (f|X).(((f|X)").r1) by A9,FUNCT_1:57;
      hence contradiction by A5,A8,FUNCT_1:57;
    end;
  end;
  hence contradiction;
end;

theorem Th19:
  X c= dom f & f|X is monotone & (ex p st f.:X =
  left_open_halfline(p)) implies f|X is continuous
proof
  assume that
A1: X c= dom f and
A2: f|X is monotone;
  given p such that
A3: f.:X = left_open_halfline(p);
  set L = left_open_halfline(p);
  now
    per cases by A2,RFUNCT_2:def 6;
    suppose
      f|X is non-decreasing;
      then
A4:   f|X|X is non-decreasing;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
A5:     (f|X).:X = f.:X by RELAT_1:162;
        assume x0 in dom(f|X);
        then
A6:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A7:     x0 in dom (f|X) by RELAT_1:90;
        then (f|X).x0 in (f|X).:X by A6,FUNCT_1:def 12;
        then
A8:     (f|X).x0 in L by A3,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A9:       N2 c= L by A8,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A10:      N3 c= N1 and
A11:      N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A12:      r>0 and
A13:      N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
A14:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A12,XREAL_1:31,217;
          set M2 = (f|X).x0 + r/2;
A15:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31,217;
A16:      (f|X).x0 < (f|X).x0 + r by A12,XREAL_1:31;
          then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A15,XXREAL_0:2;
          then
A17:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A14;
          then M2 in N2 by A11,A13;
          then consider r2 such that
A18:      r2 in dom (f|X) & r2 in X and
A19:      M2 = (f|X).r2 by A3,A5,A9,PARTFUN2:78;
A20:      M2 > (f|X).x0 by A12,XREAL_1:31,217;
A21:      now
            assume
A22:        r2 < x0;
            x0 in X /\ dom(f|X) & r2 in X /\ dom (f|X) by A6,A7,A18,
XBOOLE_0:def 4;
            hence contradiction by A4,A19,A20,A22,RFUNCT_2:45;
          end;
          set M1 = (f|X).x0 - r/2;
A23:      (f|X).x0 - r < (f|X).x0 - r + r/2 by A12,XREAL_1:31,217;
          (f|X).x0 - r/2 < (f|X).x0 by A15,XREAL_1:21;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A16,XXREAL_0:2;
          then
A24:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A23;
          then M1 in N2 by A11,A13;
          then consider r1 such that
A25:      r1 in dom (f|X) & r1 in X and
A26:      M1 = (f|X).r1 by A3,A5,A9,PARTFUN2:78;
A27:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31,217;
          then
A28:      M1 < (f|X).x0 by XREAL_1:21;
A29:      now
            assume
A30:        x0 < r1;
            x0 in X /\ dom( f|X) & r1 in X /\ dom(f|X) by A6,A7,A25,
XBOOLE_0:def 4;
            hence contradiction by A4,A26,A28,A30,RFUNCT_2:45;
          end;
          x0 <> r2 by A12,A19,XREAL_1:31,217;
          then x0 < r2 by A21,XXREAL_0:1;
          then
A31:      r2 - x0 > 0 by XREAL_1:52;
          set R = min(x0 - r1,r2 - x0);
A32:      R <= r2 - x0 by XXREAL_0:17;
          r1 <> x0 by A26,A27,XREAL_1:21;
          then r1 < x0 by A29,XXREAL_0:1;
          then x0 - r1 > 0 by XREAL_1:52;
          then R > 0 by A31,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume that
A33:      x in dom (f|X) and
A34:      x in N;
A35:      x in X /\ dom (f|X) by A33,RELAT_1:87,XBOOLE_1:28;
A36:      ex s st s = x & x0 - R < s & s < x0 + R by A34;
          then x0 < R + x by XREAL_1:21;
          then
A37:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r1 by XXREAL_0:17;
          then x0 - x < x0 - r1 by A37,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
          then
A38:      x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
          r1 in X /\ dom (f|X) by A25,XBOOLE_0:def 4;
          then
A39:      (f|X).r1 <= (f|X).x by A4,A38,A35,RFUNCT_2:45;
          x - x0 < R by A36,XREAL_1:21;
          then x - x0 < r2 - x0 by A32,XXREAL_0:2;
          then
A40:      x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
          r2 in X /\ dom (f|X) by A18,XBOOLE_0:def 4;
          then (f|X).x <= (f|X).r2 by A4,A40,A35,RFUNCT_2:45;
          then
A41:      (f|X).x in [.M1,M2.] by A26,A19,A39;
          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A24,A17,XXREAL_2:def 12
;
          then (f|X).x in N3 by A13,A41;
          hence (f|X).x in N1 by A10;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
    suppose
      f|X is non-increasing;
      then
A42:  f|X|X is non-increasing by RELAT_1:101;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
A43:    (f|X).:X = f.:X by RELAT_1:162;
        assume x0 in dom(f|X);
        then
A44:    x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A45:    x0 in dom(f|X) by RELAT_1:90;
        then (f|X).x0 in (f|X).:X by A44,FUNCT_1:def 12;
        then
A46:    (f|X).x0 in L by A3,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A47:      N2 c= L by A46,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A48:      N3 c= N1 and
A49:      N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A50:      r > 0 and
A51:      N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
A52:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A50,XREAL_1:31,217;
          set M2 = (f|X).x0 + r/2;
A53:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31,217;
A54:      (f|X).x0 < (f|X).x0 + r by A50,XREAL_1:31;
          then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A53,XXREAL_0:2;
          then
A55:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A52;
          then M2 in N2 by A49,A51;
          then consider r2 such that
A56:      r2 in dom (f|X) & r2 in X and
A57:      M2 = (f|X).r2 by A3,A43,A47,PARTFUN2:78;
A58:      M2 > (f|X).x0 by A50,XREAL_1:31,217;
A59:      now
            assume
A60:        r2 > x0;
            x0 in X /\ dom (f|X) & r2 in X /\ dom (f|X) by A44,A45,A56,
XBOOLE_0:def 4;
            hence contradiction by A42,A57,A58,A60,RFUNCT_2:46;
          end;
          set M1 = (f|X).x0 - r/2;
A61:      (f|X).x0 - r < (f|X).x0 - r + r/2 by A50,XREAL_1:31,217;
          (f|X).x0 - r/2 < (f|X).x0 by A53,XREAL_1:21;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A54,XXREAL_0:2;
          then
A62:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A61;
          then M1 in N2 by A49,A51;
          then consider r1 such that
A63:      r1 in dom (f|X) & r1 in X and
A64:      M1 = (f|X).r1 by A3,A43,A47,PARTFUN2:78;
A65:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31,217;
          then
A66:      M1 < (f|X).x0 by XREAL_1:21;
A67:      now
            assume
A68:        x0 > r1;
            x0 in X /\ dom (f|X) & r1 in X /\ dom(f|X) by A44,A45,A63,
XBOOLE_0:def 4;
            hence contradiction by A42,A64,A66,A68,RFUNCT_2:46;
          end;
          x0 <> r2 by A50,A57,XREAL_1:31,217;
          then x0 > r2 by A59,XXREAL_0:1;
          then
A69:      x0 - r2 > 0 by XREAL_1:52;
          set R = min(r1 - x0,x0 - r2);
A70:      R <= r1 - x0 by XXREAL_0:17;
          r1 <> x0 by A64,A65,XREAL_1:21;
          then r1 > x0 by A67,XXREAL_0:1;
          then r1 - x0 > 0 by XREAL_1:52;
          then R > 0 by A69,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume that
A71:      x in dom (f|X) and
A72:      x in N;
A73:      x in X /\ dom(f|X) by A71,RELAT_1:87,XBOOLE_1:28;
A74:      ex s st s = x & x0 - R < s & s < x0 + R by A72;
          then x0 < R + x by XREAL_1:21;
          then
A75:      x0 - x < R + x - x by XREAL_1:11;
          x - x0 < R by A74,XREAL_1:21;
          then x - x0 < r1-x0 by A70,XXREAL_0:2;
          then
A76:      x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
          r1 in X /\ dom(f|X) by A63,XBOOLE_0:def 4;
          then
A77:      (f|X).r1 <= (f|X).x by A42,A76,A73,RFUNCT_2:46;
          R <= x0 - r2 by XXREAL_0:17;
          then x0 - x < x0 - r2 by A75,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
          then
A78:      x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
          r2 in X /\ dom(f|X) by A56,XBOOLE_0:def 4;
          then (f|X).x <= (f|X).r2 by A42,A78,A73,RFUNCT_2:46;
          then
A79:      (f|X).x in [.M1,M2.] by A64,A57,A77;
          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A62,A55,XXREAL_2:def 12
;
          then (f|X).x in N3 by A51,A79;
          hence (f|X).x in N1 by A48;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
  end;
  hence thesis;
end;

theorem Th20:
  X c= dom f & f|X is monotone & (ex p st f.:X =
  right_open_halfline(p)) implies f|X is continuous
proof
  assume that
A1: X c= dom f and
A2: f|X is monotone;
  given p such that
A3: f.:X = right_open_halfline(p);
  set L = right_open_halfline(p);
  now
    per cases by A2,RFUNCT_2:def 6;
    suppose
      f|X is non-decreasing;
      then
A4:   f|X|X is non-decreasing;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
A5:     (f|X).:X = f.:X by RELAT_1:162;
        assume x0 in dom(f|X);
        then
A6:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A7:     x0 in dom (f|X) by RELAT_1:90;
        then (f|X).x0 in (f|X).:X by A6,FUNCT_1:def 12;
        then
A8:     (f|X).x0 in L by A3,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A9:       N2 c= L by A8,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A10:      N3 c= N1 and
A11:      N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A12:      r>0 and
A13:      N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
A14:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A12,XREAL_1:31,217;
          set M2 = (f|X).x0 + r/2;
A15:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31,217;
A16:      (f|X).x0 < (f|X).x0 + r by A12,XREAL_1:31;
          then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A15,XXREAL_0:2;
          then
A17:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A14;
          then M2 in N2 by A11,A13;
          then consider r2 such that
A18:      r2 in dom (f|X) & r2 in X and
A19:      M2 = (f|X).r2 by A3,A5,A9,PARTFUN2:78;
A20:      M2 > (f|X).x0 by A12,XREAL_1:31,217;
A21:      now
            assume
A22:        r2 < x0;
            x0 in X /\ dom(f|X) & r2 in X /\ dom (f|X) by A6,A7,A18,
XBOOLE_0:def 4;
            hence contradiction by A4,A19,A20,A22,RFUNCT_2:45;
          end;
          set M1 = (f|X).x0 - r/2;
A23:      (f|X).x0 - r < (f|X).x0 - r + r/2 by A12,XREAL_1:31,217;
          (f|X).x0 - r/2 < (f|X).x0 by A15,XREAL_1:21;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A16,XXREAL_0:2;
          then
A24:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A23;
          then M1 in N2 by A11,A13;
          then consider r1 such that
A25:      r1 in dom (f|X) & r1 in X and
A26:      M1 = (f|X).r1 by A3,A5,A9,PARTFUN2:78;
A27:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31,217;
          then
A28:      M1 < (f|X).x0 by XREAL_1:21;
A29:      now
            assume
A30:        x0 < r1;
            x0 in X /\ dom( f|X) & r1 in X /\ dom(f|X) by A6,A7,A25,
XBOOLE_0:def 4;
            hence contradiction by A4,A26,A28,A30,RFUNCT_2:45;
          end;
          x0 <> r2 by A12,A19,XREAL_1:31,217;
          then x0 < r2 by A21,XXREAL_0:1;
          then
A31:      r2 - x0 > 0 by XREAL_1:52;
          set R = min(x0 - r1,r2 - x0);
A32:      R <= r2 - x0 by XXREAL_0:17;
          r1 <> x0 by A26,A27,XREAL_1:21;
          then r1 < x0 by A29,XXREAL_0:1;
          then x0 - r1 > 0 by XREAL_1:52;
          then R > 0 by A31,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume that
A33:      x in dom (f|X) and
A34:      x in N;
A35:      x in X /\ dom (f|X) by A33,RELAT_1:87,XBOOLE_1:28;
A36:      ex s st s = x & x0 - R < s & s < x0 + R by A34;
          then x0 < R + x by XREAL_1:21;
          then
A37:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r1 by XXREAL_0:17;
          then x0 - x < x0 - r1 by A37,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
          then
A38:      x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
          r1 in X /\ dom (f|X) by A25,XBOOLE_0:def 4;
          then
A39:      (f|X).r1 <= (f|X).x by A4,A38,A35,RFUNCT_2:45;
          x - x0 < R by A36,XREAL_1:21;
          then x - x0 < r2 - x0 by A32,XXREAL_0:2;
          then
A40:      x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
          r2 in X /\ dom (f|X) by A18,XBOOLE_0:def 4;
          then (f|X).x <= (f|X).r2 by A4,A40,A35,RFUNCT_2:45;
          then
A41:      (f|X).x in [.M1,M2.] by A26,A19,A39;
          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A24,A17,XXREAL_2:def 12
;
          then (f|X).x in N3 by A13,A41;
          hence (f|X).x in N1 by A10;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
    suppose
      f|X is non-increasing;
      then
A42:  f|X|X is non-increasing by RELAT_1:101;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
A43:    (f|X).:X = f.:X by RELAT_1:162;
        assume x0 in dom(f|X);
        then
A44:    x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A45:    x0 in dom(f|X) by RELAT_1:90;
        then (f|X).x0 in (f|X).:X by A44,FUNCT_1:def 12;
        then
A46:    (f|X).x0 in L by A3,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A47:      N2 c= L by A46,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A48:      N3 c= N1 and
A49:      N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A50:      r > 0 and
A51:      N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
A52:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A50,XREAL_1:31,217;
          set M2 = (f|X).x0 + r/2;
A53:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31,217;
A54:      (f|X).x0 < (f|X).x0 + r by A50,XREAL_1:31;
          then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A53,XXREAL_0:2;
          then
A55:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A52;
          then M2 in N2 by A49,A51;
          then consider r2 such that
A56:      r2 in dom (f|X) & r2 in X and
A57:      M2 = (f|X).r2 by A3,A43,A47,PARTFUN2:78;
A58:      M2 > (f|X).x0 by A50,XREAL_1:31,217;
A59:      now
            assume
A60:        r2 > x0;
            x0 in X /\ dom (f|X) & r2 in X /\ dom (f|X) by A44,A45,A56,
XBOOLE_0:def 4;
            hence contradiction by A42,A57,A58,A60,RFUNCT_2:46;
          end;
          set M1 = (f|X).x0 - r/2;
A61:      (f|X).x0 - r < (f|X).x0 - r + r/2 by A50,XREAL_1:31,217;
          (f|X).x0 - r/2 < (f|X).x0 by A53,XREAL_1:21;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A54,XXREAL_0:2;
          then
A62:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A61;
          then M1 in N2 by A49,A51;
          then consider r1 such that
A63:      r1 in dom (f|X) & r1 in X and
A64:      M1 = (f|X).r1 by A3,A43,A47,PARTFUN2:78;
A65:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31,217;
          then
A66:      M1 < (f|X).x0 by XREAL_1:21;
A67:      now
            assume
A68:        x0 > r1;
            x0 in X /\ dom (f|X) & r1 in X /\ dom(f|X) by A44,A45,A63,
XBOOLE_0:def 4;
            hence contradiction by A42,A64,A66,A68,RFUNCT_2:46;
          end;
          x0 <> r2 by A50,A57,XREAL_1:31,217;
          then x0 > r2 by A59,XXREAL_0:1;
          then
A69:      x0 - r2 > 0 by XREAL_1:52;
          set R = min(r1 - x0,x0 - r2);
A70:      R <= r1 - x0 by XXREAL_0:17;
          r1 <> x0 by A64,A65,XREAL_1:21;
          then r1 > x0 by A67,XXREAL_0:1;
          then r1 - x0 > 0 by XREAL_1:52;
          then R > 0 by A69,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume that
A71:      x in dom (f|X) and
A72:      x in N;
A73:      x in X /\ dom(f|X) by A71,RELAT_1:87,XBOOLE_1:28;
A74:      ex s st s = x & x0 - R < s & s < x0 + R by A72;
          then x0 < R + x by XREAL_1:21;
          then
A75:      x0 - x < R + x - x by XREAL_1:11;
          x - x0 < R by A74,XREAL_1:21;
          then x - x0 < r1-x0 by A70,XXREAL_0:2;
          then
A76:      x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
          r1 in X /\ dom(f|X) by A63,XBOOLE_0:def 4;
          then
A77:      (f|X).r1 <= (f|X).x by A42,A76,A73,RFUNCT_2:46;
          R <= x0 - r2 by XXREAL_0:17;
          then x0 - x < x0 - r2 by A75,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
          then
A78:      x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
          r2 in X /\ dom(f|X) by A56,XBOOLE_0:def 4;
          then (f|X).x <= (f|X).r2 by A42,A78,A73,RFUNCT_2:46;
          then
A79:      (f|X).x in [.M1,M2.] by A64,A57,A77;
          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A62,A55,XXREAL_2:def 12
;
          then (f|X).x in N3 by A51,A79;
          hence (f|X).x in N1 by A48;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
  end;
  hence thesis;
end;

theorem Th21:
  X c= dom f & f|X is monotone & (ex p st f.:X =
  left_closed_halfline(p)) implies f|X is continuous
proof
  assume that
A1: X c= dom f and
A2: f|X is monotone;
  given p such that
A3: f.:X = left_closed_halfline(p);
  set L = left_open_halfline(p);
  set l = left_closed_halfline(p);
  for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
  proof
    let x0 be real number;
A4: (f|X).:X = f.:X by RELAT_1:162;
A5: L c= l by XXREAL_1:21;
    assume x0 in dom(f|X);
    then
A6: x0 in X by RELAT_1:86;
    then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
    then
A7: x0 in dom (f|X) by RELAT_1:90;
    then (f|X).x0 in (f|X).:X by A6,FUNCT_1:def 12;
    then (f|X).x0 in {p} \/ L by A3,A4,XXREAL_1:423;
    then
A8: (f|X).x0 in {p} or (f|X).x0 in L by XBOOLE_0:def 3;
    now
      let N1 be Neighbourhood of (f|X).x0;
      now
        per cases by A2,RFUNCT_2:def 6;
        suppose
          f|X is non-decreasing;
          then
A9:       f|X|X is non-decreasing;
          now
            per cases by A8,TARSKI:def 1;
            suppose
              (f|X).x0 in L;
              then consider N2 being Neighbourhood of (f|X).x0 such that
A10:          N2 c= L by RCOMP_1:39;
              consider N3 being Neighbourhood of (f|X).x0 such that
A11:          N3 c= N1 and
A12:          N3 c= N2 by RCOMP_1:38;
              consider r be real number such that
A13:          r>0 and
A14:          N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
A15:          (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A13,XREAL_1:31,217;
              set M2 = (f|X).x0 + r/2;
A16:          (f|X).x0 < (f|X).x0 + r/2 by A13,XREAL_1:31,217;
A17:          (f|X).x0 < (f|X).x0 + r by A13,XREAL_1:31;
              then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
              then (f|X).x0 - r < (f|X).x0 + r/2 by A16,XXREAL_0:2;
              then
A18:          M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A15;
              then M2 in N2 by A12,A14;
              then M2 in L by A10;
              then consider r2 such that
A19:          r2 in dom (f|X) & r2 in X and
A20:          M2 = (f|X).r2 by A3,A4,A5,PARTFUN2:78;
A21:          M2 > (f|X).x0 by A13,XREAL_1:31,217;
A22:          now
                assume
A23:            r2 < x0;
                x0 in X /\ dom(f|X) & r2 in X /\ dom (f|X) by A6,A7,A19,
XBOOLE_0:def 4;
                hence contradiction by A9,A20,A21,A23,RFUNCT_2:45;
              end;
              set M1 = (f|X).x0 - r/2;
A24:          (f|X).x0 - r < (f|X).x0 - r + r/2 by A13,XREAL_1:31,217;
              (f|X).x0 - r/2 < (f|X).x0 by A16,XREAL_1:21;
              then (f|X).x0 - r/2 < (f|X).x0 + r by A17,XXREAL_0:2;
              then
A25:          M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A24;
              then M1 in N2 by A12,A14;
              then M1 in L by A10;
              then consider r1 such that
A26:          r1 in dom (f|X) & r1 in X and
A27:          M1 = (f|X).r1 by A3,A4,A5,PARTFUN2:78;
A28:          (f|X).x0 < (f|X).x0 + r/2 by A13,XREAL_1:31,217;
              then
A29:          M1 < (f|X).x0 by XREAL_1:21;
A30:          now
                assume
A31:            x0 < r1;
                x0 in X /\ dom( f|X) & r1 in X /\ dom(f|X) by A6,A7,A26,
XBOOLE_0:def 4;
                hence contradiction by A9,A27,A29,A31,RFUNCT_2:45;
              end;
              x0 <> r2 by A13,A20,XREAL_1:31,217;
              then x0 < r2 by A22,XXREAL_0:1;
              then
A32:          r2 - x0 > 0 by XREAL_1:52;
              set R = min(x0 - r1,r2 - x0);
A33:          R <= r2 - x0 by XXREAL_0:17;
              r1 <> x0 by A27,A28,XREAL_1:21;
              then r1 < x0 by A30,XXREAL_0:1;
              then x0 - r1 > 0 by XREAL_1:52;
              then R > 0 by A32,XXREAL_0:15;
              then reconsider N = ].x0 - R,x0+ R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
              take N;
              let x be real number;
              assume that
A34:          x in dom (f|X) and
A35:          x in N;
A36:          x in X /\ dom (f|X) by A34,RELAT_1:87,XBOOLE_1:28;
A37:          ex s st s = x & x0 - R < s & s < x0 + R by A35;
              then x0 < R + x by XREAL_1:21;
              then
A38:          x0 - x < R + x - x by XREAL_1:11;
              R <= x0 - r1 by XXREAL_0:17;
              then x0 - x < x0 - r1 by A38,XXREAL_0:2;
              then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
              then
A39:          x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
              r1 in X /\ dom (f|X) by A26,XBOOLE_0:def 4;
              then
A40:          (f|X).r1 <= (f|X).x by A9,A39,A36,RFUNCT_2:45;
              x - x0 < R by A37,XREAL_1:21;
              then x - x0 < r2 - x0 by A33,XXREAL_0:2;
              then
A41:          x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
              r2 in X /\ dom (f|X) by A19,XBOOLE_0:def 4;
              then (f|X).x <= (f|X).r2 by A9,A41,A36,RFUNCT_2:45;
              then
A42:          (f|X).x in [.M1,M2.] by A27,A20,A40;
              [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A25,A18,
XXREAL_2:def 12;
              then (f|X).x in N3 by A14,A42;
              hence (f|X).x in N1 by A11;
            end;
            suppose
A43:          (f|X).x0 = p;
              then consider r be real number such that
A44:          r > 0 and
A45:          N1 = ].p - r,p + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set R = r/2;
A46:          p < p + R by A44,XREAL_1:31,217;
A47:          p - R < p by A44,XREAL_1:46,217;
              then p - R in {s : s < p};
              then p - R in L by XXREAL_1:229;
              then consider r1 such that
A48:          r1 in dom (f|X) & r1 in X and
A49:          p - R = (f|X).r1 by A3,A4,A5,PARTFUN2:78;
A50:          r1 in X /\ dom (f|X) by A48,XBOOLE_0:def 4;
A51:          now
                assume
A52:            x0 < r1;
                x0 in X /\ dom (f|X) & r1 in X /\ dom (f|X) by A6,A7,A48,
XBOOLE_0:def 4;
                hence contradiction by A9,A43,A47,A49,A52,RFUNCT_2:45;
              end;
              r1 <> x0 by A43,A44,A49,XREAL_1:46,217;
              then r1 < x0 by A51,XXREAL_0:1;
              then reconsider N = ].x0 - (x0 - r1),x0 + (x0 - r1).[ as
              Neighbourhood of x0 by RCOMP_1:def 7,XREAL_1:52;
              take N;
              let x be real number such that
A53:          x in dom(f|X) and
A54:          x in N;
A55:          ex s st s = x & x0 - (x0-r1) < s & s < x0 + (x0-r1) by A54;
A56:          R < r by A44,XREAL_1:218;
              then
A57:          p - r < p - R by XREAL_1:17;
A58:          dom (f|X) c= X by RELAT_1:87;
              then (f|X).x in l by A3,A4,A53,FUNCT_1:def 12;
              then (f|X).x in {s: s <= p} by XXREAL_1:231;
              then ex s st s = (f|X).x & s <= p;
              then
A59:          (f|X).x <= p + R by A46,XXREAL_0:2;
              x in X /\ dom (f|X) by A53,A58,XBOOLE_0:def 4;
              then p - R <= (f|X).x by A9,A49,A50,A55,RFUNCT_2:45;
              then
A60:          (f|X).x in [.p - R, p + R.] by A59;
              p < p + r by A44,XREAL_1:31;
              then p - R < p + r by A47,XXREAL_0:2;
              then
A61:          p - R in ].p - r, p + r.[ by A57;
A62:          p + R < p + r by A56,XREAL_1:8;
              p - r < p by A44,XREAL_1:46;
              then p - r < p + R by A46,XXREAL_0:2;
              then p + R in ].p - r, p + r.[ by A62;
              then [.p - R, p + R.] c= N1 by A45,A61,XXREAL_2:def 12;
              hence (f|X).x in N1 by A60;
            end;
          end;
          hence ex N being Neighbourhood of x0 st for r1 be real number st r1
          in dom(f|X) & r1 in N holds (f|X).r1 in N1;
        end;
        suppose
          f|X is non-increasing;
          then
A63:      f|X|X is non-increasing by RELAT_1:101;
          now
            per cases by A8,TARSKI:def 1;
            suppose
              (f|X).x0 in L;
              then consider N2 being Neighbourhood of (f|X).x0 such that
A64:          N2 c= L by RCOMP_1:39;
              consider N3 being Neighbourhood of (f|X).x0 such that
A65:          N3 c= N1 and
A66:          N3 c= N2 by RCOMP_1:38;
              consider r be real number such that
A67:          r > 0 and
A68:          N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
A69:          (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A67,XREAL_1:31,217;
              set M2 = (f|X).x0 + r/2;
A70:          (f|X).x0 < (f|X).x0 + r/2 by A67,XREAL_1:31,217;
A71:          (f|X).x0 < (f|X).x0 + r by A67,XREAL_1:31;
              then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
              then (f|X).x0 - r < (f|X).x0 + r/2 by A70,XXREAL_0:2;
              then
A72:          M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A69;
              then M2 in N2 by A66,A68;
              then M2 in L by A64;
              then consider r2 such that
A73:          r2 in dom (f|X) & r2 in X and
A74:          M2 = (f|X).r2 by A3,A4,A5,PARTFUN2:78;
A75:          M2 > (f|X).x0 by A67,XREAL_1:31,217;
A76:          now
                assume
A77:            r2 > x0;
                x0 in X /\ dom (f|X) & r2 in X /\ dom (f|X) by A6,A7,A73,
XBOOLE_0:def 4;
                hence contradiction by A63,A74,A75,A77,RFUNCT_2:46;
              end;
              set M1 = (f|X).x0 - r/2;
A78:          (f|X).x0 - r < (f|X).x0 - r + r/2 by A67,XREAL_1:31,217;
              (f|X).x0 - r/2 < (f|X).x0 by A70,XREAL_1:21;
              then (f|X).x0 - r/2 < (f|X).x0 + r by A71,XXREAL_0:2;
              then
A79:          M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A78;
              then M1 in N2 by A66,A68;
              then M1 in L by A64;
              then consider r1 such that
A80:          r1 in dom (f|X) & r1 in X and
A81:          M1 = (f|X).r1 by A3,A4,A5,PARTFUN2:78;
A82:          (f|X).x0 < (f|X).x0 + r/2 by A67,XREAL_1:31,217;
              then
A83:          M1 < (f|X).x0 by XREAL_1:21;
A84:          now
                assume
A85:            x0 > r1;
                x0 in X /\ dom (f|X) & r1 in X /\ dom(f|X) by A6,A7,A80,
XBOOLE_0:def 4;
                hence contradiction by A63,A81,A83,A85,RFUNCT_2:46;
              end;
              x0 <> r2 by A67,A74,XREAL_1:31,217;
              then x0 > r2 by A76,XXREAL_0:1;
              then
A86:          x0 - r2 > 0 by XREAL_1:52;
              set R = min(r1 - x0,x0 - r2);
A87:          R <= r1 - x0 by XXREAL_0:17;
              r1 <> x0 by A81,A82,XREAL_1:21;
              then r1 > x0 by A84,XXREAL_0:1;
              then r1 - x0 > 0 by XREAL_1:52;
              then R > 0 by A86,XXREAL_0:15;
              then reconsider N =].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
              take N;
              let x be real number;
              assume that
A88:          x in dom (f|X) and
A89:          x in N;
A90:          x in X /\ dom(f|X) by A88,RELAT_1:87,XBOOLE_1:28;
A91:          ex s st s = x & x0 - R < s & s < x0 + R by A89;
              then x0 < R + x by XREAL_1:21;
              then
A92:          x0 - x < R + x - x by XREAL_1:11;
              x - x0 < R by A91,XREAL_1:21;
              then x - x0 < r1-x0 by A87,XXREAL_0:2;
              then
A93:          x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
              r1 in X /\ dom(f|X) by A80,XBOOLE_0:def 4;
              then
A94:          (f|X).r1 <= (f|X).x by A63,A93,A90,RFUNCT_2:46;
              R <= x0 - r2 by XXREAL_0:17;
              then x0 - x < x0 - r2 by A92,XXREAL_0:2;
              then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
              then
A95:          x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
              r2 in X /\ dom(f|X) by A73,XBOOLE_0:def 4;
              then (f|X).x <= (f|X).r2 by A63,A95,A90,RFUNCT_2:46;
              then
A96:          (f|X).x in [.M1,M2.] by A81,A74,A94;
              [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A79,A72,
XXREAL_2:def 12;
              then (f|X).x in N3 by A68,A96;
              hence (f|X).x in N1 by A65;
            end;
            suppose
A97:          (f|X).x0 = p;
              then consider r be real number such that
A98:          r > 0 and
A99:          N1 = ].p - r,p + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set R = r/2;
A100:         p < p + R by A98,XREAL_1:31,217;
A101:         p - R < p by A98,XREAL_1:46,217;
              then p - R in {s : s < p};
              then p - R in L by XXREAL_1:229;
              then consider r1 such that
A102:         r1 in dom (f|X) & r1 in X and
A103:         p - R = (f|X).r1 by A3,A4,A5,PARTFUN2:78;
A104:         r1 in X /\ dom (f|X) by A102,XBOOLE_0:def 4;
A105:         now
                assume
A106:           x0 > r1;
                x0 in X /\ dom (f|X) & r1 in X /\ dom (f|X) by A6,A7,A102,
XBOOLE_0:def 4;
                hence contradiction by A63,A97,A101,A103,A106,RFUNCT_2:46;
              end;
              r1 <> x0 by A97,A98,A103,XREAL_1:46,217;
              then r1 > x0 by A105,XXREAL_0:1;
              then reconsider N = ].x0 - (r1 - x0),x0 + (r1 - x0).[ as
              Neighbourhood of x0 by RCOMP_1:def 7,XREAL_1:52;
              take N;
              let x be real number such that
A107:         x in dom(f|X) and
A108:         x in N;
A109:         ex s st s = x & x0 - (r1-x0) < s & s < x0 + (r1-x0) by A108;
A110:         R < r by A98,XREAL_1:218;
              then
A111:         p - r < p - R by XREAL_1:17;
A112:         dom (f|X) c= X by RELAT_1:87;
              then (f|X).x in l by A3,A4,A107,FUNCT_1:def 12;
              then (f|X).x in {s: s <= p} by XXREAL_1:231;
              then ex s st s = (f|X).x & s <= p;
              then
A113:         (f|X).x <= p + R by A100,XXREAL_0:2;
              x in X /\ dom (f|X) by A107,A112,XBOOLE_0:def 4;
              then p - R <= (f|X).x by A63,A103,A104,A109,RFUNCT_2:46;
              then
A114:         (f|X).x in [.p - R, p + R.] by A113;
              p < p + r by A98,XREAL_1:31;
              then p - R < p + r by A101,XXREAL_0:2;
              then
A115:         p - R in ].p - r, p + r.[ by A111;
A116:         p + R < p + r by A110,XREAL_1:8;
              p - r < p by A98,XREAL_1:46;
              then p - r < p + R by A100,XXREAL_0:2;
              then p + R in ].p - r, p + r.[ by A116;
              then [.p - R, p + R.] c= N1 by A99,A115,XXREAL_2:def 12;
              hence (f|X).x in N1 by A114;
            end;
          end;
          hence ex N being Neighbourhood of x0 st for r1 be real number st r1
          in dom(f|X) & r1 in N holds (f|X).r1 in N1;
        end;
      end;
      hence ex N being Neighbourhood of x0 st for r1 be real number st r1 in
      dom(f|X) & r1 in N holds (f|X).r1 in N1;
    end;
    hence thesis by FCONT_1:4;
  end;
  hence thesis by FCONT_1:def 2;
end;

theorem Th22:
  X c= dom f & f|X is monotone & (ex p st f.:X =
  right_closed_halfline(p)) implies f|X is continuous
proof
  assume that
A1: X c= dom f and
A2: f|X is monotone;
  given p such that
A3: f.:X = right_closed_halfline(p);
  set L = right_open_halfline(p);
  set l = right_closed_halfline(p);
  for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
  proof
    let x0 be real number;
A4: (f|X).:X = f.:X by RELAT_1:162;
A5: L c= l by XXREAL_1:22;
    assume x0 in dom(f|X);
    then
A6: x0 in X by RELAT_1:86;
    then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
    then
A7: x0 in dom (f|X) by RELAT_1:90;
    then (f|X).x0 in (f|X).:X by A6,FUNCT_1:def 12;
    then (f|X).x0 in {p} \/ L by A3,A4,XXREAL_1:427;
    then
A8: (f|X).x0 in {p} or (f|X).x0 in L by XBOOLE_0:def 3;
    now
      let N1 be Neighbourhood of (f|X).x0;
      now
        per cases by A2,RFUNCT_2:def 6;
        suppose
          f|X is non-decreasing;
          then
A9:       f|X|X is non-decreasing;
          now
            per cases by A8,TARSKI:def 1;
            suppose
              (f|X).x0 in L;
              then consider N2 being Neighbourhood of (f|X).x0 such that
A10:          N2 c= L by RCOMP_1:39;
              consider N3 being Neighbourhood of (f|X).x0 such that
A11:          N3 c= N1 and
A12:          N3 c= N2 by RCOMP_1:38;
              consider r be real number such that
A13:          r>0 and
A14:          N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
A15:          (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A13,XREAL_1:31,217;
              set M2 = (f|X).x0 + r/2;
A16:          (f|X).x0 < (f|X).x0 + r/2 by A13,XREAL_1:31,217;
A17:          (f|X).x0 < (f|X).x0 + r by A13,XREAL_1:31;
              then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
              then (f|X).x0 - r < (f|X).x0 + r/2 by A16,XXREAL_0:2;
              then
A18:          M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A15;
              then M2 in N2 by A12,A14;
              then M2 in L by A10;
              then consider r2 such that
A19:          r2 in dom (f|X) & r2 in X and
A20:          M2 = (f|X).r2 by A3,A4,A5,PARTFUN2:78;
A21:          M2 > (f|X).x0 by A13,XREAL_1:31,217;
A22:          now
                assume
A23:            r2 < x0;
                x0 in X /\ dom(f|X) & r2 in X /\ dom (f|X) by A6,A7,A19,
XBOOLE_0:def 4;
                hence contradiction by A9,A20,A21,A23,RFUNCT_2:45;
              end;
              set M1 = (f|X).x0 - r/2;
A24:          (f|X).x0 - r < (f|X).x0 - r + r/2 by A13,XREAL_1:31,217;
              (f|X).x0 - r/2 < (f|X).x0 by A16,XREAL_1:21;
              then (f|X).x0 - r/2 < (f|X).x0 + r by A17,XXREAL_0:2;
              then
A25:          M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A24;
              then M1 in N2 by A12,A14;
              then M1 in L by A10;
              then consider r1 such that
A26:          r1 in dom (f|X) & r1 in X and
A27:          M1 = (f|X).r1 by A3,A4,A5,PARTFUN2:78;
A28:          (f|X).x0 < (f|X).x0 + r/2 by A13,XREAL_1:31,217;
              then
A29:          M1 < (f|X).x0 by XREAL_1:21;
A30:          now
                assume
A31:            x0 < r1;
                x0 in X /\ dom( f|X) & r1 in X /\ dom(f|X) by A6,A7,A26,
XBOOLE_0:def 4;
                hence contradiction by A9,A27,A29,A31,RFUNCT_2:45;
              end;
              x0 <> r2 by A13,A20,XREAL_1:31,217;
              then x0 < r2 by A22,XXREAL_0:1;
              then
A32:          r2 - x0 > 0 by XREAL_1:52;
              set R = min(x0 - r1,r2 - x0);
A33:          R <= r2 - x0 by XXREAL_0:17;
              r1 <> x0 by A27,A28,XREAL_1:21;
              then r1 < x0 by A30,XXREAL_0:1;
              then x0 - r1 > 0 by XREAL_1:52;
              then R > 0 by A32,XXREAL_0:15;
              then reconsider N = ].x0 - R,x0+ R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
              take N;
              let x be real number;
              assume that
A34:          x in dom (f|X) and
A35:          x in N;
A36:          x in X /\ dom (f|X) by A34,RELAT_1:87,XBOOLE_1:28;
A37:          ex s st s = x & x0 - R < s & s < x0 + R by A35;
              then x0 < R + x by XREAL_1:21;
              then
A38:          x0 - x < R + x - x by XREAL_1:11;
              R <= x0 - r1 by XXREAL_0:17;
              then x0 - x < x0 - r1 by A38,XXREAL_0:2;
              then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
              then
A39:          x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
              r1 in X /\ dom (f|X) by A26,XBOOLE_0:def 4;
              then
A40:          (f|X).r1 <= (f|X).x by A9,A39,A36,RFUNCT_2:45;
              x - x0 < R by A37,XREAL_1:21;
              then x - x0 < r2 - x0 by A33,XXREAL_0:2;
              then
A41:          x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
              r2 in X /\ dom (f|X) by A19,XBOOLE_0:def 4;
              then (f|X).x <= (f|X).r2 by A9,A41,A36,RFUNCT_2:45;
              then
A42:          (f|X).x in [.M1,M2.] by A27,A20,A40;
              [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A25,A18,
XXREAL_2:def 12;
              then (f|X).x in N3 by A14,A42;
              hence (f|X).x in N1 by A11;
            end;
            suppose
A43:          (f|X).x0 = p;
              then consider r be real number such that
A44:          r > 0 and
A45:          N1 = ].p - r,p + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set R = r/2;
A46:          p - R < p by A44,XREAL_1:46,217;
A47:          p < p + R by A44,XREAL_1:31,217;
              then p + R in {s : p < s};
              then p + R in L by XXREAL_1:230;
              then consider r1 such that
A48:          r1 in dom (f|X) & r1 in X and
A49:          p + R = (f|X).r1 by A3,A4,A5,PARTFUN2:78;
A50:          now
                assume
A51:            x0 > r1;
                x0 in X /\ dom (f|X) & r1 in X /\ dom (f|X) by A6,A7,A48,
XBOOLE_0:def 4;
                hence contradiction by A9,A43,A47,A49,A51,RFUNCT_2:45;
              end;
              r1 <> x0 by A43,A44,A49,XREAL_1:31,217;
              then r1 > x0 by A50,XXREAL_0:1;
              then reconsider N = ].x0 - (r1 - x0),x0 + (r1 - x0).[ as
              Neighbourhood of x0 by RCOMP_1:def 7,XREAL_1:52;
              take N;
              let x be real number such that
A52:          x in dom(f|X) and
A53:          x in N;
A54:          ex s st s = x & x0 - (r1-x0) < s & s < x0 + (r1-x0) by A53;
A55:          dom (f|X) c= X by RELAT_1:87;
              then (f|X).x in l by A3,A4,A52,FUNCT_1:def 12;
              then (f|X).x in {s: p <= s} by XXREAL_1:232;
              then ex s st s = (f|X).x & p <= s;
              then
A56:          p - R <= (f|X).x by A46,XXREAL_0:2;
A57:          r1 in X /\ dom (f|X) by A48,XBOOLE_0:def 4;
              x in X /\ dom (f|X) by A52,A55,XBOOLE_0:def 4;
              then p + R >= (f|X).x by A9,A49,A57,A54,RFUNCT_2:45;
              then
A58:          (f|X).x in [.p - R, p + R.] by A56;
A59:          R < r by A44,XREAL_1:218;
              then
A60:          p - r < p - R by XREAL_1:17;
              p < p + r by A44,XREAL_1:31;
              then p - R < p + r by A46,XXREAL_0:2;
              then
A61:          p - R in ].p - r, p + r.[ by A60;
A62:          p + R < p + r by A59,XREAL_1:8;
              p - r < p by A44,XREAL_1:46;
              then p - r < p + R by A47,XXREAL_0:2;
              then p + R in ].p - r, p + r.[ by A62;
              then [.p - R, p + R.] c= N1 by A45,A61,XXREAL_2:def 12;
              hence (f|X).x in N1 by A58;
            end;
          end;
          hence ex N being Neighbourhood of x0 st for r1 be real number st r1
          in dom(f|X) & r1 in N holds (f|X).r1 in N1;
        end;
        suppose
          f|X is non-increasing;
          then
A63:      f|X|X is non-increasing by RELAT_1:101;
          now
            per cases by A8,TARSKI:def 1;
            suppose
              (f|X).x0 in L;
              then consider N2 being Neighbourhood of (f|X).x0 such that
A64:          N2 c= L by RCOMP_1:39;
              consider N3 being Neighbourhood of (f|X).x0 such that
A65:          N3 c= N1 and
A66:          N3 c= N2 by RCOMP_1:38;
              consider r be real number such that
A67:          r > 0 and
A68:          N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
A69:          (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A67,XREAL_1:31,217;
              set M2 = (f|X).x0 + r/2;
A70:          (f|X).x0 < (f|X).x0 + r/2 by A67,XREAL_1:31,217;
A71:          (f|X).x0 < (f|X).x0 + r by A67,XREAL_1:31;
              then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
              then (f|X).x0 - r < (f|X).x0 + r/2 by A70,XXREAL_0:2;
              then
A72:          M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A69;
              then M2 in N2 by A66,A68;
              then M2 in L by A64;
              then consider r2 such that
A73:          r2 in dom (f|X) & r2 in X and
A74:          M2 = (f|X).r2 by A3,A4,A5,PARTFUN2:78;
A75:          M2 > (f|X).x0 by A67,XREAL_1:31,217;
A76:          now
                assume
A77:            r2 > x0;
                x0 in X /\ dom (f|X) & r2 in X /\ dom (f|X) by A6,A7,A73,
XBOOLE_0:def 4;
                hence contradiction by A63,A74,A75,A77,RFUNCT_2:46;
              end;
              set M1 = (f|X).x0 - r/2;
A78:          (f|X).x0 - r < (f|X).x0 - r + r/2 by A67,XREAL_1:31,217;
              (f|X).x0 - r/2 < (f|X).x0 by A70,XREAL_1:21;
              then (f|X).x0 - r/2 < (f|X).x0 + r by A71,XXREAL_0:2;
              then
A79:          M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A78;
              then M1 in N2 by A66,A68;
              then M1 in L by A64;
              then consider r1 such that
A80:          r1 in dom (f|X) & r1 in X and
A81:          M1 = (f|X).r1 by A3,A4,A5,PARTFUN2:78;
A82:          (f|X).x0 < (f|X).x0 + r/2 by A67,XREAL_1:31,217;
              then
A83:          M1 < (f|X).x0 by XREAL_1:21;
A84:          now
                assume
A85:            x0 > r1;
                x0 in X /\ dom (f|X) & r1 in X /\ dom(f|X) by A6,A7,A80,
XBOOLE_0:def 4;
                hence contradiction by A63,A81,A83,A85,RFUNCT_2:46;
              end;
              x0 <> r2 by A67,A74,XREAL_1:31,217;
              then x0 > r2 by A76,XXREAL_0:1;
              then
A86:          x0 - r2 > 0 by XREAL_1:52;
              set R = min(r1 - x0,x0 - r2);
A87:          R <= r1 - x0 by XXREAL_0:17;
              r1 <> x0 by A81,A82,XREAL_1:21;
              then r1 > x0 by A84,XXREAL_0:1;
              then r1 - x0 > 0 by XREAL_1:52;
              then R > 0 by A86,XXREAL_0:15;
              then reconsider N =].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
              take N;
              let x be real number;
              assume that
A88:          x in dom (f|X) and
A89:          x in N;
A90:          x in X /\ dom(f|X) by A88,RELAT_1:87,XBOOLE_1:28;
A91:          ex s st s = x & x0 - R < s & s < x0 + R by A89;
              then x0 < R + x by XREAL_1:21;
              then
A92:          x0 - x < R + x - x by XREAL_1:11;
              x - x0 < R by A91,XREAL_1:21;
              then x - x0 < r1-x0 by A87,XXREAL_0:2;
              then
A93:          x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
              r1 in X /\ dom(f|X) by A80,XBOOLE_0:def 4;
              then
A94:          (f|X).r1 <= (f|X).x by A63,A93,A90,RFUNCT_2:46;
              R <= x0 - r2 by XXREAL_0:17;
              then x0 - x < x0 - r2 by A92,XXREAL_0:2;
              then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
              then
A95:          x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
              r2 in X /\ dom(f|X) by A73,XBOOLE_0:def 4;
              then (f|X).x <= (f|X).r2 by A63,A95,A90,RFUNCT_2:46;
              then
A96:          (f|X).x in [.M1,M2.] by A81,A74,A94;
              [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A79,A72,
XXREAL_2:def 12;
              then (f|X).x in N3 by A68,A96;
              hence (f|X).x in N1 by A65;
            end;
            suppose
A97:          (f|X).x0 = p;
              then consider r be real number such that
A98:          r > 0 and
A99:          N1 = ].p - r,p + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set R = r/2;
A100:         p - R < p by A98,XREAL_1:46,217;
A101:         p < p + R by A98,XREAL_1:31,217;
              then p + R in {s : p < s};
              then p + R in L by XXREAL_1:230;
              then consider r1 such that
A102:         r1 in dom (f|X) & r1 in X and
A103:         p + R = (f|X).r1 by A3,A4,A5,PARTFUN2:78;
A104:         now
                assume
A105:           x0 < r1;
                x0 in X /\ dom (f|X) & r1 in X /\ dom (f|X) by A6,A7,A102,
XBOOLE_0:def 4;
                hence contradiction by A63,A97,A101,A103,A105,RFUNCT_2:46;
              end;
              r1 <> x0 by A97,A98,A103,XREAL_1:31,217;
              then r1 < x0 by A104,XXREAL_0:1;
              then reconsider N = ].x0 - (x0 - r1),x0 + (x0 - r1).[ as
              Neighbourhood of x0 by RCOMP_1:def 7,XREAL_1:52;
              take N;
              let x be real number such that
A106:         x in dom(f|X) and
A107:         x in N;
A108:         ex s st s = x & x0 - (x0-r1) < s & s < x0 + (x0-r1) by A107;
A109:         dom (f|X) c= X by RELAT_1:87;
              then (f|X).x in l by A3,A4,A106,FUNCT_1:def 12;
              then (f|X).x in {s: p <= s} by XXREAL_1:232;
              then ex s st s = (f|X).x & p <= s;
              then
A110:         p - R <= (f|X).x by A100,XXREAL_0:2;
A111:         r1 in X /\ dom (f|X) by A102,XBOOLE_0:def 4;
              x in X /\ dom (f|X) by A106,A109,XBOOLE_0:def 4;
              then p + R >= (f|X).x by A63,A103,A111,A108,RFUNCT_2:46;
              then
A112:         (f|X).x in [.p - R, p + R.] by A110;
A113:         R < r by A98,XREAL_1:218;
              then
A114:         p - r < p - R by XREAL_1:17;
              p < p + r by A98,XREAL_1:31;
              then p - R < p + r by A100,XXREAL_0:2;
              then
A115:         p - R in ].p - r, p + r.[ by A114;
A116:         p + R < p + r by A113,XREAL_1:8;
              p - r < p by A98,XREAL_1:46;
              then p - r < p + R by A101,XXREAL_0:2;
              then p + R in ].p - r, p + r.[ by A116;
              then [.p - R, p + R.] c= N1 by A99,A115,XXREAL_2:def 12;
              hence (f|X).x in N1 by A112;
            end;
          end;
          hence ex N being Neighbourhood of x0 st for r1 be real number st r1
          in dom(f|X) & r1 in N holds (f|X).r1 in N1;
        end;
      end;
      hence ex N being Neighbourhood of x0 st for r1 be real number st r1 in
      dom(f|X) & r1 in N holds (f|X).r1 in N1;
    end;
    hence thesis by FCONT_1:4;
  end;
  hence thesis by FCONT_1:def 2;
end;

theorem Th23:
  X c= dom f & f|X is monotone & (ex p,g st f.:X = ].p,g.[)
  implies f|X is continuous
proof
  assume that
A1: X c= dom f and
A2: f|X is monotone;
  given p,g such that
A3: f.:X = ].p,g.[;
  set L = ].p,g.[;
  now
    per cases by A2,RFUNCT_2:def 6;
    suppose
      f|X is non-decreasing;
      then
A4:   f|X|X is non-decreasing;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
A5:     (f|X).:X = f.:X by RELAT_1:162;
        assume x0 in dom(f|X);
        then
A6:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A7:     x0 in dom (f|X) by RELAT_1:90;
        then (f|X).x0 in (f|X).:X by A6,FUNCT_1:def 12;
        then
A8:     (f|X).x0 in L by A3,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A9:       N2 c= L by A8,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A10:      N3 c= N1 and
A11:      N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A12:      r>0 and
A13:      N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
A14:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A12,XREAL_1:31,217;
          set M2 = (f|X).x0 + r/2;
A15:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31,217;
A16:      (f|X).x0 < (f|X).x0 + r by A12,XREAL_1:31;
          then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A15,XXREAL_0:2;
          then
A17:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A14;
          then M2 in N2 by A11,A13;
          then consider r2 such that
A18:      r2 in dom (f|X) & r2 in X and
A19:      M2 = (f|X).r2 by A3,A5,A9,PARTFUN2:78;
A20:      M2 > (f|X).x0 by A12,XREAL_1:31,217;
A21:      now
            assume
A22:        r2 < x0;
            x0 in X /\ dom(f|X) & r2 in X /\ dom (f|X) by A6,A7,A18,
XBOOLE_0:def 4;
            hence contradiction by A4,A19,A20,A22,RFUNCT_2:45;
          end;
          set M1 = (f|X).x0 - r/2;
A23:      (f|X).x0 - r < (f|X).x0 - r + r/2 by A12,XREAL_1:31,217;
          (f|X).x0 - r/2 < (f|X).x0 by A15,XREAL_1:21;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A16,XXREAL_0:2;
          then
A24:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A23;
          then M1 in N2 by A11,A13;
          then consider r1 such that
A25:      r1 in dom (f|X) & r1 in X and
A26:      M1 = (f|X).r1 by A3,A5,A9,PARTFUN2:78;
A27:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31,217;
          then
A28:      M1 < (f|X).x0 by XREAL_1:21;
A29:      now
            assume
A30:        x0 < r1;
            x0 in X /\ dom( f|X) & r1 in X /\ dom(f|X) by A6,A7,A25,
XBOOLE_0:def 4;
            hence contradiction by A4,A26,A28,A30,RFUNCT_2:45;
          end;
          x0 <> r2 by A12,A19,XREAL_1:31,217;
          then x0 < r2 by A21,XXREAL_0:1;
          then
A31:      r2 - x0 > 0 by XREAL_1:52;
          set R = min(x0 - r1,r2 - x0);
A32:      R <= r2 - x0 by XXREAL_0:17;
          r1 <> x0 by A26,A27,XREAL_1:21;
          then r1 < x0 by A29,XXREAL_0:1;
          then x0 - r1 > 0 by XREAL_1:52;
          then R > 0 by A31,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume that
A33:      x in dom (f|X) and
A34:      x in N;
A35:      x in X /\ dom (f|X) by A33,RELAT_1:87,XBOOLE_1:28;
A36:      ex s st s = x & x0 - R < s & s < x0 + R by A34;
          then x0 < R + x by XREAL_1:21;
          then
A37:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r1 by XXREAL_0:17;
          then x0 - x < x0 - r1 by A37,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
          then
A38:      x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
          r1 in X /\ dom (f|X) by A25,XBOOLE_0:def 4;
          then
A39:      (f|X).r1 <= (f|X).x by A4,A38,A35,RFUNCT_2:45;
          x - x0 < R by A36,XREAL_1:21;
          then x - x0 < r2 - x0 by A32,XXREAL_0:2;
          then
A40:      x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
          r2 in X /\ dom (f|X) by A18,XBOOLE_0:def 4;
          then (f|X).x <= (f|X).r2 by A4,A40,A35,RFUNCT_2:45;
          then
A41:      (f|X).x in [.M1,M2.] by A26,A19,A39;
          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A24,A17,XXREAL_2:def 12
;
          then (f|X).x in N3 by A13,A41;
          hence (f|X).x in N1 by A10;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
    suppose
      f|X is non-increasing;
      then
A42:  f|X|X is non-increasing by RELAT_1:101;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
A43:    (f|X).:X = f.:X by RELAT_1:162;
        assume x0 in dom(f|X);
        then
A44:    x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A45:    x0 in dom(f|X) by RELAT_1:90;
        then (f|X).x0 in (f|X).:X by A44,FUNCT_1:def 12;
        then
A46:    (f|X).x0 in L by A3,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A47:      N2 c= L by A46,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A48:      N3 c= N1 and
A49:      N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A50:      r > 0 and
A51:      N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
A52:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A50,XREAL_1:31,217;
          set M2 = (f|X).x0 + r/2;
A53:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31,217;
A54:      (f|X).x0 < (f|X).x0 + r by A50,XREAL_1:31;
          then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A53,XXREAL_0:2;
          then
A55:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A52;
          then M2 in N2 by A49,A51;
          then consider r2 such that
A56:      r2 in dom (f|X) & r2 in X and
A57:      M2 = (f|X).r2 by A3,A43,A47,PARTFUN2:78;
A58:      M2 > (f|X).x0 by A50,XREAL_1:31,217;
A59:      now
            assume
A60:        r2 > x0;
            x0 in X /\ dom (f|X) & r2 in X /\ dom (f|X) by A44,A45,A56,
XBOOLE_0:def 4;
            hence contradiction by A42,A57,A58,A60,RFUNCT_2:46;
          end;
          set M1 = (f|X).x0 - r/2;
A61:      (f|X).x0 - r < (f|X).x0 - r + r/2 by A50,XREAL_1:31,217;
          (f|X).x0 - r/2 < (f|X).x0 by A53,XREAL_1:21;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A54,XXREAL_0:2;
          then
A62:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A61;
          then M1 in N2 by A49,A51;
          then consider r1 such that
A63:      r1 in dom (f|X) & r1 in X and
A64:      M1 = (f|X).r1 by A3,A43,A47,PARTFUN2:78;
A65:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31,217;
          then
A66:      M1 < (f|X).x0 by XREAL_1:21;
A67:      now
            assume
A68:        x0 > r1;
            x0 in X /\ dom (f|X) & r1 in X /\ dom(f|X) by A44,A45,A63,
XBOOLE_0:def 4;
            hence contradiction by A42,A64,A66,A68,RFUNCT_2:46;
          end;
          x0 <> r2 by A50,A57,XREAL_1:31,217;
          then x0 > r2 by A59,XXREAL_0:1;
          then
A69:      x0 - r2 > 0 by XREAL_1:52;
          set R = min(r1 - x0,x0 - r2);
A70:      R <= r1 - x0 by XXREAL_0:17;
          r1 <> x0 by A64,A65,XREAL_1:21;
          then r1 > x0 by A67,XXREAL_0:1;
          then r1 - x0 > 0 by XREAL_1:52;
          then R > 0 by A69,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume that
A71:      x in dom (f|X) and
A72:      x in N;
A73:      x in X /\ dom(f|X) by A71,RELAT_1:87,XBOOLE_1:28;
A74:      ex s st s = x & x0 - R < s & s < x0 + R by A72;
          then x0 < R + x by XREAL_1:21;
          then
A75:      x0 - x < R + x - x by XREAL_1:11;
          x - x0 < R by A74,XREAL_1:21;
          then x - x0 < r1-x0 by A70,XXREAL_0:2;
          then
A76:      x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
          r1 in X /\ dom(f|X) by A63,XBOOLE_0:def 4;
          then
A77:      (f|X).r1 <= (f|X).x by A42,A76,A73,RFUNCT_2:46;
          R <= x0 - r2 by XXREAL_0:17;
          then x0 - x < x0 - r2 by A75,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
          then
A78:      x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
          r2 in X /\ dom(f|X) by A56,XBOOLE_0:def 4;
          then (f|X).x <= (f|X).r2 by A42,A78,A73,RFUNCT_2:46;
          then
A79:      (f|X).x in [.M1,M2.] by A64,A57,A77;
          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A62,A55,XXREAL_2:def 12
;
          then (f|X).x in N3 by A51,A79;
          hence (f|X).x in N1 by A48;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
  end;
  hence thesis;
end;

theorem Th24:
  X c= dom f & f|X is monotone & f.:X = REAL implies f|X is continuous
proof
  assume that
A1: X c= dom f and
A2: f|X is monotone and
A3: f.:X = REAL;
  now
    per cases by A2,RFUNCT_2:def 6;
    suppose
      f|X is non-decreasing;
      then
A4:   f|X|X is non-decreasing;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
A5:     (f|X).:X = f.:X by RELAT_1:162;
        assume x0 in dom(f|X);
        then
A6:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A7:     x0 in dom (f|X) by RELAT_1:90;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider r be real number such that
A8:       r>0 and
A9:       N1 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
A10:      (f|X).x0 < (f|X).x0 + r/2 by A8,XREAL_1:31,217;
          set M1 = (f|X).x0 - r/2;
          consider r1 such that
A11:      r1 in dom (f|X) & r1 in X and
A12:      M1 = (f|X).r1 by A3,A5,PARTFUN2:78;
A13:      (f|X).x0 < (f|X).x0 + r/2 by A8,XREAL_1:31,217;
          then
A14:      M1 < (f|X).x0 by XREAL_1:21;
A15:      now
            assume
A16:        x0 < r1;
            x0 in X /\ dom (f|X) & r1 in X /\ dom(f|X) by A6,A7,A11,
XBOOLE_0:def 4;
            hence contradiction by A4,A12,A14,A16,RFUNCT_2:45;
          end;
          set M2 = (f|X).x0 + r/2;
          consider r2 such that
A17:      r2 in dom (f|X) & r2 in X and
A18:      M2 = (f|X).r2 by A3,A5,PARTFUN2:78;
A19:      M2 > (f|X).x0 by A8,XREAL_1:31,217;
A20:      now
            assume
A21:        r2 < x0;
            x0 in X /\ dom(f|X) & r2 in X /\ dom (f|X) by A6,A7,A17,
XBOOLE_0:def 4;
            hence contradiction by A4,A18,A19,A21,RFUNCT_2:45;
          end;
          x0 <> r2 by A8,A18,XREAL_1:31,217;
          then x0 < r2 by A20,XXREAL_0:1;
          then
A22:      r2 - x0 > 0 by XREAL_1:52;
          set R = min(x0 - r1,r2 - x0);
A23:      R <= r2 - x0 by XXREAL_0:17;
          r1 <> x0 by A12,A13,XREAL_1:21;
          then r1 < x0 by A15,XXREAL_0:1;
          then x0 - r1 > 0 by XREAL_1:52;
          then R > 0 by A22,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume that
A24:      x in dom (f|X) and
A25:      x in N;
A26:      x in X /\ dom (f|X) by A24,RELAT_1:87,XBOOLE_1:28;
A27:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A8,XREAL_1:31,217;
A28:      (f|X).x0 < (f|X).x0 + r by A8,XREAL_1:31;
          then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A10,XXREAL_0:2;
          then
A29:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A27;
A30:      (f|X).x0 - r < (f|X).x0 - r + r/2 by A8,XREAL_1:31,217;
          (f|X).x0 - r/2 < (f|X).x0 by A10,XREAL_1:21;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A28,XXREAL_0:2;
          then M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A30;
          then
A31:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A29,XXREAL_2:def 12;
A32:      ex s st s = x & x0 - R < s & s < x0 + R by A25;
          then x0 < R + x by XREAL_1:21;
          then
A33:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r1 by XXREAL_0:17;
          then x0 - x < x0 - r1 by A33,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
          then
A34:      x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
          r1 in X /\ dom (f|X) by A11,XBOOLE_0:def 4;
          then
A35:      (f|X).r1 <= (f|X).x by A4,A34,A26,RFUNCT_2:45;
          x - x0 < R by A32,XREAL_1:21;
          then x - x0 < r2 - x0 by A23,XXREAL_0:2;
          then
A36:      x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
          r2 in X /\ dom (f|X) by A17,XBOOLE_0:def 4;
          then (f|X).x <= (f|X).r2 by A4,A36,A26,RFUNCT_2:45;
          then (f|X).x in [.M1,M2.] by A12,A18,A35;
          hence (f|X).x in N1 by A9,A31;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
    suppose
      f|X is non-increasing;
      then
A37:  f|X|X is non-increasing by RELAT_1:101;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
A38:    (f|X).:X = f.:X by RELAT_1:162;
        assume x0 in dom(f|X);
        then
A39:    x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A40:    x0 in dom (f|X) by RELAT_1:90;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider r be real number such that
A41:      r > 0 and
A42:      N1 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
A43:      (f|X).x0 < (f|X).x0 + r/2 by A41,XREAL_1:31,217;
          set M1 = (f|X).x0 - r/2;
          consider r1 such that
A44:      r1 in dom (f|X) & r1 in X and
A45:      M1 = (f|X).r1 by A3,A38,PARTFUN2:78;
A46:      (f|X).x0 < (f|X).x0 + r/2 by A41,XREAL_1:31,217;
          then
A47:      M1 < (f|X).x0 by XREAL_1:21;
A48:      now
            assume
A49:        x0 > r1;
            x0 in X /\ dom (f|X) & r1 in X /\ dom(f|X) by A39,A40,A44,
XBOOLE_0:def 4;
            hence contradiction by A37,A45,A47,A49,RFUNCT_2:46;
          end;
          set M2 = (f|X).x0 + r/2;
          consider r2 such that
A50:      r2 in dom (f|X) & r2 in X and
A51:      M2 = (f|X).r2 by A3,A38,PARTFUN2:78;
A52:      M2 > (f|X).x0 by A41,XREAL_1:31,217;
A53:      now
            assume
A54:        r2 > x0;
            x0 in X /\ dom (f|X) & r2 in X /\ dom (f|X) by A39,A40,A50,
XBOOLE_0:def 4;
            hence contradiction by A37,A51,A52,A54,RFUNCT_2:46;
          end;
          x0 <> r2 by A41,A51,XREAL_1:31,217;
          then x0 > r2 by A53,XXREAL_0:1;
          then
A55:      x0 - r2 > 0 by XREAL_1:52;
          set R = min(r1 - x0,x0 - r2);
A56:      R <= r1 - x0 by XXREAL_0:17;
          r1 <> x0 by A45,A46,XREAL_1:21;
          then r1 > x0 by A48,XXREAL_0:1;
          then r1 - x0 > 0 by XREAL_1:52;
          then R > 0 by A55,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume that
A57:      x in dom (f|X) and
A58:      x in N;
A59:      x in X /\ dom(f|X) by A57,RELAT_1:87,XBOOLE_1:28;
A60:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A41,XREAL_1:31,217;
A61:      (f|X).x0 < (f|X).x0 + r by A41,XREAL_1:31;
          then (f|X).x0 - r < (f|X).x0 + r - r by XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A43,XXREAL_0:2;
          then
A62:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A60;
A63:      (f|X).x0 - r < (f|X).x0 - r + r/2 by A41,XREAL_1:31,217;
          (f|X).x0 - r/2 < (f|X).x0 by A43,XREAL_1:21;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A61,XXREAL_0:2;
          then M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A63;
          then
A64:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A62,XXREAL_2:def 12;
A65:      ex s st s = x & x0 - R < s & s < x0 + R by A58;
          then x0 < R + x by XREAL_1:21;
          then
A66:      x0 - x < R + x - x by XREAL_1:11;
          x - x0 < R by A65,XREAL_1:21;
          then x - x0 < r1-x0 by A56,XXREAL_0:2;
          then
A67:      x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
          r1 in X /\ dom(f|X) by A44,XBOOLE_0:def 4;
          then
A68:      (f|X).r1 <= (f|X).x by A37,A67,A59,RFUNCT_2:46;
          R <= x0 - r2 by XXREAL_0:17;
          then x0 - x < x0 - r2 by A66,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
          then
A69:      x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
          r2 in X /\ dom(f|X) by A50,XBOOLE_0:def 4;
          then (f|X).x <= (f|X).r2 by A37,A69,A59,RFUNCT_2:46;
          then (f|X).x in [.M1,M2.] by A45,A51,A68;
          hence (f|X).x in N1 by A42,A64;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st (f|].p,g.[ is increasing
or f|].p,g.[ is decreasing) & ].p,g.[ c= dom f holds (f|].p,g.[)"|(f.:].p,g.[)
  is continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  assume that
A1: f|].p,g.[ is increasing or f|].p,g.[ is decreasing and
A2: ].p,g.[ c= dom f;
  now
    per cases by A1;
    suppose
A3:   f|].p,g.[ is increasing;
A4:   now
        let r be Real;
        assume r in f.:].p,g.[;
        then consider s such that
A5:     s in dom f & s in ].p,g.[ and
A6:     r = f.s by PARTFUN2:78;
        s in dom f /\ ].p,g.[ by A5,XBOOLE_0:def 4;
        then
A7:     s in dom (f|].p,g.[) by RELAT_1:90;
        then r = (f|].p,g.[).s by A6,FUNCT_1:70;
        then r in rng (f|].p,g.[) by A7,FUNCT_1:def 5;
        hence r in dom ((f|].p,g.[)") by FUNCT_1:55;
      end;
A8:   ((f|].p,g.[)").:(f.:].p,g.[) = ((f|].p,g.[)").:(rng (f|].p,g.[)) by
RELAT_1:148
        .= ((f|].p,g.[)").:(dom ((f|].p,g.[)")) by FUNCT_1:55
        .= rng ((f|].p,g.[)") by RELAT_1:146
        .= dom (f|].p,g.[) by FUNCT_1:55
        .= dom f /\ ].p,g.[ by RELAT_1:90
        .= ].p,g.[ by A2,XBOOLE_1:28;
      (f|].p,g.[)"|(f.:].p,g.[) is increasing by A3,Th17;
      hence thesis by A4,A8,Th23,SUBSET_1:7;
    end;
    suppose
A9:   f|].p,g.[ is decreasing;
A10:  now
        let r be Real;
        assume r in f.:].p,g.[;
        then consider s such that
A11:    s in dom f & s in ].p,g.[ and
A12:    r = f.s by PARTFUN2:78;
        s in dom f /\ ].p,g.[ by A11,XBOOLE_0:def 4;
        then
A13:    s in dom (f|].p,g.[) by RELAT_1:90;
        then r = (f|].p,g.[).s by A12,FUNCT_1:70;
        then r in rng (f|].p,g.[) by A13,FUNCT_1:def 5;
        hence r in dom ((f|].p,g.[)") by FUNCT_1:55;
      end;
A14:  ((f|].p,g.[)").:(f.:].p,g.[) = ((f|].p,g.[)").:(rng (f|].p,g.[)) by
RELAT_1:148
        .= ((f|].p,g.[)").:(dom ((f|].p,g.[)")) by FUNCT_1:55
        .= rng ((f|].p,g.[)") by RELAT_1:146
        .= dom (f|].p,g.[) by FUNCT_1:55
        .= dom f /\ ].p,g.[ by RELAT_1:90
        .= ].p,g.[ by A2,XBOOLE_1:28;
      (f|].p,g.[)"|(f.:].p,g.[) is decreasing by A9,Th18;
      hence thesis by A10,A14,Th23,SUBSET_1:7;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st (f|left_open_halfline p
is increasing or f|left_open_halfline p is decreasing) & left_open_halfline(p)
  c= dom f holds (f|left_open_halfline(p))"|(f.:left_open_halfline(p)) is
  continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = left_open_halfline(p);
  assume that
A1: f|L is increasing or f|L is decreasing and
A2: L c= dom f;
  now
    per cases by A1;
    suppose
A3:   f|L is increasing;
A4:   now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A5:     s in dom f & s in L and
A6:     r = f.s by PARTFUN2:78;
        s in dom f /\ L by A5,XBOOLE_0:def 4;
        then
A7:     s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A6,FUNCT_1:70;
        then r in rng (f|L) by A7,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A8:   ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      (f|L)"|(f.:L) is increasing by A3,Th17;
      hence thesis by A4,A8,Th19,SUBSET_1:7;
    end;
    suppose
A9:   f|L is decreasing;
A10:  now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A11:    s in dom f & s in L and
A12:    r = f.s by PARTFUN2:78;
        s in dom f /\ L by A11,XBOOLE_0:def 4;
        then
A13:    s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A12,FUNCT_1:70;
        then r in rng (f|L) by A13,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A14:  ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      (f|L)"|(f.:L) is decreasing by A9,Th18;
      hence thesis by A10,A14,Th19,SUBSET_1:7;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st (f|right_open_halfline p
is increasing or f|right_open_halfline p is decreasing) & right_open_halfline(p
  ) c= dom f holds (f|right_open_halfline(p))"|(f.:right_open_halfline(p)) is
  continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = right_open_halfline(p);
  assume that
A1: f|L is increasing or f|L is decreasing and
A2: L c= dom f;
  now
    per cases by A1;
    suppose
A3:   f|L is increasing;
A4:   now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A5:     s in dom f & s in L and
A6:     r = f.s by PARTFUN2:78;
        s in dom f /\ L by A5,XBOOLE_0:def 4;
        then
A7:     s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A6,FUNCT_1:70;
        then r in rng (f|L) by A7,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A8:   ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      (f|L)"|(f.:L) is increasing by A3,Th17;
      hence thesis by A4,A8,Th20,SUBSET_1:7;
    end;
    suppose
A9:   f|L is decreasing;
A10:  now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A11:    s in dom f & s in L and
A12:    r = f.s by PARTFUN2:78;
        s in dom f /\ L by A11,XBOOLE_0:def 4;
        then
A13:    s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A12,FUNCT_1:70;
        then r in rng (f|L) by A13,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A14:  ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      (f|L)"|(f.:L) is decreasing by A9,Th18;
      hence thesis by A10,A14,Th20,SUBSET_1:7;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st (f|left_closed_halfline p
is increasing or f|left_closed_halfline p is decreasing) & left_closed_halfline
(p) c= dom f holds (f|left_closed_halfline(p))"|(f.:left_closed_halfline(p)) is
  continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = left_closed_halfline(p);
  assume that
A1: f|L is increasing or f|L is decreasing and
A2: L c= dom f;
  now
    per cases by A1;
    suppose
A3:   f|L is increasing;
A4:   now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A5:     s in dom f & s in L and
A6:     r = f.s by PARTFUN2:78;
        s in dom f /\ L by A5,XBOOLE_0:def 4;
        then
A7:     s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A6,FUNCT_1:70;
        then r in rng (f|L) by A7,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A8:   ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      (f|L)"|(f.:L) is increasing by A3,Th17;
      hence thesis by A4,A8,Th21,SUBSET_1:7;
    end;
    suppose
A9:   f|L is decreasing;
A10:  now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A11:    s in dom f & s in L and
A12:    r = f.s by PARTFUN2:78;
        s in dom f /\ L by A11,XBOOLE_0:def 4;
        then
A13:    s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A12,FUNCT_1:70;
        then r in rng (f|L) by A13,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A14:  ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      (f|L)"|(f.:L) is decreasing by A9,Th18;
      hence thesis by A10,A14,Th21,SUBSET_1:7;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st (f|right_closed_halfline
  p is increasing or f|right_closed_halfline p is decreasing) &
  right_closed_halfline(p) c= dom f holds (f|right_closed_halfline(p))"|(f.:
  right_closed_halfline(p)) is continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = right_closed_halfline(p);
  assume that
A1: f|L is increasing or f|L is decreasing and
A2: L c= dom f;
  now
    per cases by A1;
    suppose
A3:   f|L is increasing;
A4:   now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A5:     s in dom f & s in L and
A6:     r = f.s by PARTFUN2:78;
        s in dom f /\ L by A5,XBOOLE_0:def 4;
        then
A7:     s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A6,FUNCT_1:70;
        then r in rng (f|L) by A7,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A8:   ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      (f|L)"|(f.:L) is increasing by A3,Th17;
      hence thesis by A4,A8,Th22,SUBSET_1:7;
    end;
    suppose
A9:   f|L is decreasing;
A10:  now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A11:    s in dom f & s in L and
A12:    r = f.s by PARTFUN2:78;
        s in dom f /\ L by A11,XBOOLE_0:def 4;
        then
A13:    s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A12,FUNCT_1:70;
        then r in rng (f|L) by A13,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A14:  ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      (f|L)"|(f.:L) is decreasing by A9,Th18;
      hence thesis by A10,A14,Th22,SUBSET_1:7;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st (f|[#]REAL is increasing
  or f|[#]REAL is decreasing) & f is total holds f"|rng f is continuous
proof
  set L = [#] REAL;
  let f be one-to-one PartFunc of REAL,REAL;
  assume that
A1: f|[#]REAL is increasing or f|[#]REAL is decreasing and
A2: f is total;
A3: dom f = [#] REAL by A2,PARTFUN1:def 4;
  now
    per cases by A1;
    suppose
A4:   f|L is increasing;
A5:   now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A6:     s in dom f and
        s in L and
A7:     r = f.s by PARTFUN2:78;
        s in dom f /\ L by A6,XBOOLE_0:def 4;
        then
A8:     s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A7,FUNCT_1:70;
        then r in rng (f|L) by A8,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A9:   ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= REAL by A3;
      (f|L)"|(f.:L) is increasing by A4,Th17;
      then (f|L)"|(f.:L) is continuous by A5,A9,Th24,SUBSET_1:7;
      then (f|L)"|rng f is continuous by A3,RELAT_1:146;
      hence thesis by A3,RELAT_1:97;
    end;
    suppose
A10:  f|L is decreasing;
A11:  now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A12:    s in dom f and
        s in L and
A13:    r = f.s by PARTFUN2:78;
        s in dom f /\ L by A12,XBOOLE_0:def 4;
        then
A14:    s in dom (f|L) by RELAT_1:90;
        then r = (f|L).s by A13,FUNCT_1:70;
        then r in rng (f|L) by A14,FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
A15:  ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= REAL by A3;
      (f|L)"|(f.:L) is decreasing by A10,Th18;
      then (f|L)"|(f.:L) is continuous by A11,A15,Th24,SUBSET_1:7;
      then (f|L)"|rng f is continuous by A3,RELAT_1:146;
      hence thesis by A3,RELAT_1:97;
    end;
  end;
  hence thesis;
end;

theorem
  ].p,g.[ c= dom f & f|].p,g.[ is continuous & (f|].p,g.[ is increasing
  or f|].p,g.[ is decreasing) implies rng (f|].p,g.[) is open
proof
  assume that
A1: ].p,g.[ c= dom f and
A2: f|].p,g.[ is continuous and
A3: f|].p,g.[ is increasing or f|].p,g.[ is decreasing;
  now
    let r1 be real number;
    set f1 = f|].p,g.[;
    assume r1 in rng f1;
    then consider x0 such that
A4: x0 in dom f1 and
A5: f1.x0 = r1 by PARTFUN1:26;
A6: r1 = f.x0 by A4,A5,FUNCT_1:70;
A7: x0 in dom f /\ ].p,g.[ by A4,RELAT_1:90;
    then x0 in ].p,g.[ by XBOOLE_0:def 4;
    then consider N be Neighbourhood of x0 such that
A8: N c= ].p,g.[ by RCOMP_1:39;
    consider r be real number such that
A9: 0 < r and
A10: N = ].x0 - r, x0 + r.[ by RCOMP_1:def 7;
    reconsider r as Real by XREAL_0:def 1;
    0 < r/2 by A9,XREAL_1:217;
    then
A11: x0 - r/2 < x0 - 0 by XREAL_1:17;
A12: r/2 < r by A9,XREAL_1:218;
    then
A13: x0 - r < x0 - r/2 by XREAL_1:17;
A14: N c= dom f by A1,A8,XBOOLE_1:1;
    set fp = f.(x0 + r/2);
    set fm = f.(x0 - r/2);
A15: x0 + r/2 < x0 + r by A12,XREAL_1:10;
A16: x0 < x0 + r/2 by A9,XREAL_1:31,217;
    then
A17: x0 - r/2 < x0 + r/2 by A11,XXREAL_0:2;
    x0 < x0 + r by A9,XREAL_1:31;
    then x0 - r/2 < x0 + r by A11,XXREAL_0:2;
    then
A18: x0 - r/2 in ].x0 - r, x0 + r.[ by A13;
    then
A19: x0 - r/2 in ].p,g.[ /\ dom f by A8,A10,A14,XBOOLE_0:def 4;
    x0 - r < x0 by A9,XREAL_1:46;
    then x0 - r < x0 + r/2 by A16,XXREAL_0:2;
    then
A20: x0 + r/2 in ].x0 - r, x0 + r.[ by A15;
    then
A21: x0 + r/2 in ].p,g.[ /\ dom f by A8,A10,A14,XBOOLE_0:def 4;
A22: [.x0 - r/2, x0 + r/2.] c= ].x0 - r, x0 + r.[ by A18,A20,XXREAL_2:def 12;
A23: [.x0 - r/2, x0 + r/2.] c= ].p,g.[ by A8,A10,A18,A20,XXREAL_2:def 12;
    then
A24: f|[.x0 - r/2, x0 + r/2.] is continuous by A2,FCONT_1:17;
    now
      per cases by A3;
      suppose
A25:    f|].p,g.[ is increasing;
        set R = min(f.x0 - fm,fp - f.x0);
        f.x0 < fp by A7,A16,A21,A25,RFUNCT_2:43;
        then
A26:    0 < fp - f.x0 by XREAL_1:52;
        fm < f.x0 by A7,A11,A19,A25,RFUNCT_2:43;
        then 0 < f.x0 - fm by XREAL_1:52;
        then 0 < R by A26,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        fm < fp by A17,A21,A19,A25,RFUNCT_2:43;
        then [.fp,fm.] = {} by XXREAL_1:29;
        then
A27:    [.fm,fp.] \/ [.fp,fm.] = [.fm,fp.];
        thus N1 c= rng f1
        proof
          let x;
A28:      ].fm,fp.[ c= [.fm,fp.] by XXREAL_1:25;
          assume x in N1;
          then consider r2 such that
A29:      r2 = x and
A30:      f.x0 - R < r2 and
A31:      r2 < f.x0 + R by A6;
          R <= fp - f.x0 by XXREAL_0:17;
          then f.x0 + R <= f.x0 + (fp - f.x0) by XREAL_1:9;
          then
A32:      r2 < fp by A31,XXREAL_0:2;
          R <= f.x0 - fm by XXREAL_0:17;
          then f.x0 - (f.x0 - fm) <= f.x0 - R by XREAL_1:15;
          then fm < r2 by A30,XXREAL_0:2;
          then r2 in ].fm,fp.[ by A32;
          then consider s such that
A33:      s in [.x0 - r/2, x0 + r/2.] and
A34:      x = f.s by A1,A23,A24,A17,A27,A29,A28,FCONT_2:16,XBOOLE_1:1;
          s in N by A10,A22,A33;
          then s in dom f /\ ].p,g.[ by A8,A14,XBOOLE_0:def 4;
          then
A35:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A34,FUNCT_1:70;
          hence thesis by A35,FUNCT_1:def 5;
        end;
      end;
      suppose
A36:    f|].p,g.[ is decreasing;
        set R = min(fm - f.x0,f.x0 - fp);
        fp < f.x0 by A7,A16,A21,A36,RFUNCT_2:44;
        then
A37:    0 < f.x0 - fp by XREAL_1:52;
        f.x0 < fm by A7,A11,A19,A36,RFUNCT_2:44;
        then 0 < fm - f.x0 by XREAL_1:52;
        then 0 < R by A37,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        fp < fm by A17,A21,A19,A36,RFUNCT_2:44;
        then [.fm,fp.] = {} by XXREAL_1:29;
        then
A38:    [.fm,fp.] \/ [.fp,fm.] = [.fp,fm.];
        thus N1 c= rng f1
        proof
          let x;
A39:      ].fp,fm.[ c= [.fp,fm.] by XXREAL_1:25;
          assume x in N1;
          then consider r2 such that
A40:      r2 = x and
A41:      f.x0 - R < r2 and
A42:      r2 < f.x0 + R by A6;
          R <= fm - f.x0 by XXREAL_0:17;
          then f.x0 + R <= f.x0 + (fm - f.x0) by XREAL_1:9;
          then
A43:      r2 < fm by A42,XXREAL_0:2;
          R <= f.x0 - fp by XXREAL_0:17;
          then f.x0 - (f.x0 - fp) <= f.x0 - R by XREAL_1:15;
          then fp < r2 by A41,XXREAL_0:2;
          then r2 in ].fp,fm.[ by A43;
          then consider s such that
A44:      s in [.x0 - r/2, x0 + r/2.] and
A45:      x = f.s by A1,A23,A24,A17,A38,A40,A39,FCONT_2:16,XBOOLE_1:1;
          s in N by A10,A22,A44;
          then s in dom f /\ ].p,g.[ by A8,A14,XBOOLE_0:def 4;
          then
A46:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A45,FUNCT_1:70;
          hence thesis by A46,FUNCT_1:def 5;
        end;
      end;
    end;
    hence ex N be Neighbourhood of r1 st N c= rng f1;
  end;
  hence thesis by RCOMP_1:41;
end;

theorem
  left_open_halfline(p) c= dom f & f|left_open_halfline p is continuous
& (f|left_open_halfline p is increasing or f|left_open_halfline p is decreasing
  ) implies rng (f|left_open_halfline(p)) is open
proof
  set L = left_open_halfline(p);
  assume that
A1: left_open_halfline(p) c= dom f and
A2: f|L is continuous and
A3: f|L is increasing or f|L is decreasing;
  now
    let r1 be real number;
    set f1 = f|L;
    assume r1 in rng f1;
    then consider x0 such that
A4: x0 in dom f1 and
A5: f1.x0 = r1 by PARTFUN1:26;
A6: r1 = f.x0 by A4,A5,FUNCT_1:70;
A7: x0 in dom f /\ L by A4,RELAT_1:90;
    then x0 in L by XBOOLE_0:def 4;
    then consider N be Neighbourhood of x0 such that
A8: N c= L by RCOMP_1:39;
    consider r be real number such that
A9: 0 < r and
A10: N = ].x0 - r, x0 + r.[ by RCOMP_1:def 7;
    reconsider r as Real by XREAL_0:def 1;
    0 < r/2 by A9,XREAL_1:217;
    then
A11: x0 - r/2 < x0 - 0 by XREAL_1:17;
A12: r/2 < r by A9,XREAL_1:218;
    then
A13: x0 - r < x0 - r/2 by XREAL_1:17;
A14: N c= dom f by A1,A8,XBOOLE_1:1;
    set fp = f.(x0 + r/2);
    set fm = f.(x0 - r/2);
A15: x0 + r/2 < x0 + r by A12,XREAL_1:10;
A16: x0 < x0 + r/2 by A9,XREAL_1:31,217;
    then
A17: x0 - r/2 < x0 + r/2 by A11,XXREAL_0:2;
    x0 < x0 + r by A9,XREAL_1:31;
    then x0 - r/2 < x0 + r by A11,XXREAL_0:2;
    then
A18: x0 - r/2 in ].x0 - r, x0 + r.[ by A13;
    then
A19: x0 - r/2 in L /\ dom f by A8,A10,A14,XBOOLE_0:def 4;
    x0 - r < x0 by A9,XREAL_1:46;
    then x0 - r < x0 + r/2 by A16,XXREAL_0:2;
    then
A20: x0 + r/2 in ].x0 - r, x0 + r.[ by A15;
    then
A21: x0 + r/2 in L /\ dom f by A8,A10,A14,XBOOLE_0:def 4;
A22: [.x0 - r/2, x0 + r/2.] c= ].x0 - r, x0 + r.[ by A18,A20,XXREAL_2:def 12;
    f|N is continuous by A2,A8,FCONT_1:17;
    then
A23: f|[.x0 - r/2, x0 + r/2.] is continuous by A10,A22,FCONT_1:17;
A24: [.x0 - r/2, x0 + r/2.] c= L by A8,A10,A18,A20,XXREAL_2:def 12;
    now
      per cases by A3;
      suppose
A25:    f|L is increasing;
        set R = min(f.x0 - fm,fp - f.x0);
        f.x0 < fp by A7,A16,A21,A25,RFUNCT_2:43;
        then
A26:    0 < fp - f.x0 by XREAL_1:52;
        fm < f.x0 by A7,A11,A19,A25,RFUNCT_2:43;
        then 0 < f.x0 - fm by XREAL_1:52;
        then 0 < R by A26,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        fm < fp by A17,A21,A19,A25,RFUNCT_2:43;
        then [.fp,fm.] = {} by XXREAL_1:29;
        then
A27:    [.fm,fp.] \/ [.fp,fm.] = [.fm,fp.];
        thus N1 c= rng f1
        proof
          let x;
A28:      ].fm,fp.[ c= [.fm,fp.] by XXREAL_1:25;
          assume x in N1;
          then consider r2 such that
A29:      r2 = x and
A30:      f.x0 - R < r2 and
A31:      r2 < f.x0 + R by A6;
          R <= fp - f.x0 by XXREAL_0:17;
          then f.x0 + R <= f.x0 + (fp - f.x0) by XREAL_1:9;
          then
A32:      r2 < fp by A31,XXREAL_0:2;
          R <= f.x0 - fm by XXREAL_0:17;
          then f.x0 - (f.x0 - fm) <= f.x0 - R by XREAL_1:15;
          then fm < r2 by A30,XXREAL_0:2;
          then r2 in ].fm,fp.[ by A32;
          then consider s such that
A33:      s in [.x0 - r/2, x0 + r/2.] and
A34:      x = f.s by A1,A24,A23,A17,A27,A29,A28,FCONT_2:16,XBOOLE_1:1;
          s in N by A10,A22,A33;
          then s in dom f /\ L by A8,A14,XBOOLE_0:def 4;
          then
A35:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A34,FUNCT_1:70;
          hence thesis by A35,FUNCT_1:def 5;
        end;
      end;
      suppose
A36:    f|L is decreasing;
        set R = min(fm - f.x0,f.x0 - fp);
        fp < f.x0 by A7,A16,A21,A36,RFUNCT_2:44;
        then
A37:    0 < f.x0 - fp by XREAL_1:52;
        f.x0 < fm by A7,A11,A19,A36,RFUNCT_2:44;
        then 0 < fm - f.x0 by XREAL_1:52;
        then 0 < R by A37,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        fp < fm by A17,A21,A19,A36,RFUNCT_2:44;
        then [.fm,fp.] = {} by XXREAL_1:29;
        then
A38:    [.fm,fp.] \/ [.fp,fm.] = [.fp,fm.];
        thus N1 c= rng f1
        proof
          let x;
A39:      ].fp,fm.[ c= [.fp,fm.] by XXREAL_1:25;
          assume x in N1;
          then consider r2 such that
A40:      r2 = x and
A41:      f.x0 - R < r2 and
A42:      r2 < f.x0 + R by A6;
          R <= fm - f.x0 by XXREAL_0:17;
          then f.x0 + R <= f.x0 + (fm - f.x0) by XREAL_1:9;
          then
A43:      r2 < fm by A42,XXREAL_0:2;
          R <= f.x0 - fp by XXREAL_0:17;
          then f.x0 - (f.x0 - fp) <= f.x0 - R by XREAL_1:15;
          then fp < r2 by A41,XXREAL_0:2;
          then r2 in ].fp,fm.[ by A43;
          then consider s such that
A44:      s in [.x0 - r/2, x0 + r/2.] and
A45:      x = f.s by A1,A24,A23,A17,A38,A40,A39,FCONT_2:16,XBOOLE_1:1;
          s in N by A10,A22,A44;
          then s in dom f /\ L by A8,A14,XBOOLE_0:def 4;
          then
A46:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A45,FUNCT_1:70;
          hence thesis by A46,FUNCT_1:def 5;
        end;
      end;
    end;
    hence ex N be Neighbourhood of r1 st N c= rng f1;
  end;
  hence thesis by RCOMP_1:41;
end;

theorem
  right_open_halfline(p) c= dom f & f|right_open_halfline p is
continuous & (f|right_open_halfline p is increasing or f|right_open_halfline p
  is decreasing) implies rng (f|right_open_halfline(p)) is open
proof
  set L = right_open_halfline(p);
  assume that
A1: right_open_halfline(p) c= dom f and
A2: f|L is continuous and
A3: f|L is increasing or f|L is decreasing;
  now
    let r1 be real number;
    set f1 = f|L;
    assume r1 in rng f1;
    then consider x0 such that
A4: x0 in dom f1 and
A5: f1.x0 = r1 by PARTFUN1:26;
A6: r1 = f.x0 by A4,A5,FUNCT_1:70;
A7: x0 in dom f /\ L by A4,RELAT_1:90;
    then x0 in L by XBOOLE_0:def 4;
    then consider N be Neighbourhood of x0 such that
A8: N c= L by RCOMP_1:39;
    consider r be real number such that
A9: 0 < r and
A10: N = ].x0 - r, x0 + r.[ by RCOMP_1:def 7;
    reconsider r as Real by XREAL_0:def 1;
    0 < r/2 by A9,XREAL_1:217;
    then
A11: x0 - r/2 < x0 - 0 by XREAL_1:17;
A12: r/2 < r by A9,XREAL_1:218;
    then
A13: x0 - r < x0 - r/2 by XREAL_1:17;
A14: N c= dom f by A1,A8,XBOOLE_1:1;
    set fp = f.(x0 + r/2);
    set fm = f.(x0 - r/2);
A15: x0 + r/2 < x0 + r by A12,XREAL_1:10;
A16: x0 < x0 + r/2 by A9,XREAL_1:31,217;
    then
A17: x0 - r/2 < x0 + r/2 by A11,XXREAL_0:2;
    x0 < x0 + r by A9,XREAL_1:31;
    then x0 - r/2 < x0 + r by A11,XXREAL_0:2;
    then
A18: x0 - r/2 in ].x0 - r, x0 + r.[ by A13;
    then
A19: x0 - r/2 in L /\ dom f by A8,A10,A14,XBOOLE_0:def 4;
    x0 - r < x0 by A9,XREAL_1:46;
    then x0 - r < x0 + r/2 by A16,XXREAL_0:2;
    then
A20: x0 + r/2 in ].x0 - r, x0 + r.[ by A15;
    then
A21: x0 + r/2 in L /\ dom f by A8,A10,A14,XBOOLE_0:def 4;
A22: [.x0 - r/2, x0 + r/2.] c= ].x0 - r, x0 + r.[ by A18,A20,XXREAL_2:def 12;
    f|N is continuous by A2,A8,FCONT_1:17;
    then
A23: f|([.x0 - r/2, x0 + r/2.]) is continuous by A10,A22,FCONT_1:17;
A24: [.x0 - r/2, x0 + r/2.] c= L by A8,A10,A18,A20,XXREAL_2:def 12;
    now
      per cases by A3;
      suppose
A25:    f|L is increasing;
        set R = min(f.x0 - fm,fp - f.x0);
        f.x0 < fp by A7,A16,A21,A25,RFUNCT_2:43;
        then
A26:    0 < fp - f.x0 by XREAL_1:52;
        fm < f.x0 by A7,A11,A19,A25,RFUNCT_2:43;
        then 0 < f.x0 - fm by XREAL_1:52;
        then 0 < R by A26,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        fm < fp by A17,A21,A19,A25,RFUNCT_2:43;
        then [.fp,fm.] = {} by XXREAL_1:29;
        then
A27:    [.fm,fp.] \/ [.fp,fm.] = [.fm,fp.];
        thus N1 c= rng f1
        proof
          let x;
A28:      ].fm,fp.[ c= [.fm,fp.] by XXREAL_1:25;
          assume x in N1;
          then consider r2 such that
A29:      r2 = x and
A30:      f.x0 - R < r2 and
A31:      r2 < f.x0 + R by A6;
          R <= fp - f.x0 by XXREAL_0:17;
          then f.x0 + R <= f.x0 + (fp - f.x0) by XREAL_1:9;
          then
A32:      r2 < fp by A31,XXREAL_0:2;
          R <= f.x0 - fm by XXREAL_0:17;
          then f.x0 - (f.x0 - fm) <= f.x0 - R by XREAL_1:15;
          then fm < r2 by A30,XXREAL_0:2;
          then r2 in ].fm,fp.[ by A32;
          then consider s such that
A33:      s in [.x0 - r/2, x0 + r/2.] and
A34:      x = f.s by A1,A24,A23,A17,A27,A29,A28,FCONT_2:16,XBOOLE_1:1;
          s in N by A10,A22,A33;
          then s in dom f /\ L by A8,A14,XBOOLE_0:def 4;
          then
A35:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A34,FUNCT_1:70;
          hence thesis by A35,FUNCT_1:def 5;
        end;
      end;
      suppose
A36:    f|L is decreasing;
        set R = min(fm - f.x0,f.x0 - fp);
        fp < f.x0 by A7,A16,A21,A36,RFUNCT_2:44;
        then
A37:    0 < f.x0 - fp by XREAL_1:52;
        f.x0 < fm by A7,A11,A19,A36,RFUNCT_2:44;
        then 0 < fm - f.x0 by XREAL_1:52;
        then 0 < R by A37,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        fp < fm by A17,A21,A19,A36,RFUNCT_2:44;
        then [.fm,fp.] = {} by XXREAL_1:29;
        then
A38:    [.fm,fp.] \/ [.fp,fm.] = [.fp,fm.];
        thus N1 c= rng f1
        proof
          let x;
A39:      ].fp,fm.[ c= [.fp,fm.] by XXREAL_1:25;
          assume x in N1;
          then consider r2 such that
A40:      r2 = x and
A41:      f.x0 - R < r2 and
A42:      r2 < f.x0 + R by A6;
          R <= fm - f.x0 by XXREAL_0:17;
          then f.x0 + R <= f.x0 + (fm - f.x0) by XREAL_1:9;
          then
A43:      r2 < fm by A42,XXREAL_0:2;
          R <= f.x0 - fp by XXREAL_0:17;
          then f.x0 - (f.x0 - fp) <= f.x0 - R by XREAL_1:15;
          then fp < r2 by A41,XXREAL_0:2;
          then r2 in ].fp,fm.[ by A43;
          then consider s such that
A44:      s in [.x0 - r/2, x0 + r/2.] and
A45:      x = f.s by A1,A24,A23,A17,A38,A40,A39,FCONT_2:16,XBOOLE_1:1;
          s in N by A10,A22,A44;
          then s in dom f /\ L by A8,A14,XBOOLE_0:def 4;
          then
A46:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A45,FUNCT_1:70;
          hence thesis by A46,FUNCT_1:def 5;
        end;
      end;
    end;
    hence ex N be Neighbourhood of r1 st N c= rng f1;
  end;
  hence thesis by RCOMP_1:41;
end;

theorem
  [#](REAL) c= dom f & f|[#]REAL is continuous & (f|[#]REAL is
  increasing or f|[#]REAL is decreasing) implies rng f is open
proof
  set L = [#]REAL;
  assume that
A1: [#](REAL) c= dom f and
A2: f|L is continuous and
A3: f|L is increasing or f|L is decreasing;
  now
    let r1 be real number;
    assume r1 in rng f;
    then consider x0 such that
A4: x0 in dom f and
A5: f.x0 = r1 by PARTFUN1:26;
A6: x0 in L /\ dom f by A4,XBOOLE_0:def 4;
    set N =the  Neighbourhood of x0;
    consider r be real number such that
A7: 0 < r and
A8: N = ].x0 - r, x0 + r.[ by RCOMP_1:def 7;
    reconsider r as Real by XREAL_0:def 1;
    0 < r/2 by A7,XREAL_1:217;
    then
A9: x0 - r/2 < x0 - 0 by XREAL_1:17;
A10: r/2 < r by A7,XREAL_1:218;
    then
A11: x0 - r < x0 - r/2 by XREAL_1:17;
A12: x0 + r/2 < x0 + r by A10,XREAL_1:10;
A13: N c= dom f by A1,XBOOLE_1:1;
    set fp = f.(x0 + r/2);
    set fm = f.(x0 - r/2);
A14: f|([.x0 - r/2, x0 + r/2.]) is continuous by A2,FCONT_1:17;
A15: x0 < x0 + r/2 by A7,XREAL_1:31,217;
    then
A16: x0 - r/2 < x0 + r/2 by A9,XXREAL_0:2;
    x0 - r < x0 by A7,XREAL_1:46;
    then x0 - r < x0 + r/2 by A15,XXREAL_0:2;
    then
A17: x0 + r/2 in ].x0 - r, x0 + r.[ by A12;
    then
A18: x0 + r/2 in L /\ dom f by A8,A13,XBOOLE_0:def 4;
    x0 < x0 + r by A7,XREAL_1:31;
    then x0 - r/2 < x0 + r by A9,XXREAL_0:2;
    then
A19: x0 - r/2 in ].x0 - r, x0 + r.[ by A11;
    then
A20: x0 - r/2 in L /\ dom f by A8,A13,XBOOLE_0:def 4;
A21: [.x0 - r/2, x0 + r/2.] c= ].x0 - r, x0 + r.[ by A19,A17,XXREAL_2:def 12;
    now
      per cases by A3;
      suppose
A22:    f|L is increasing;
        set R = min(f.x0 - fm,fp - f.x0);
        f.x0 < fp by A15,A18,A6,A22,RFUNCT_2:43;
        then
A23:    0 < fp - f.x0 by XREAL_1:52;
        fm < f.x0 by A9,A20,A6,A22,RFUNCT_2:43;
        then 0 < f.x0 - fm by XREAL_1:52;
        then 0 < R by A23,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        fm < fp by A16,A18,A20,A22,RFUNCT_2:43;
        then [.fp,fm.] = {} by XXREAL_1:29;
        then
A24:    [.fm,fp.] \/ [.fp,fm.] = [.fm,fp.];
        thus N1 c= rng f
        proof
          let x;
A25:      [.x0 - r/2, x0 + r/2.] c= dom f & ].fm,fp.[ c= [.fm,fp.] by A1,
XBOOLE_1:1,XXREAL_1:25;
          assume x in N1;
          then consider r2 such that
A26:      r2 = x and
A27:      f.x0 - R < r2 and
A28:      r2 < f.x0 + R by A5;
          R <= fp - f.x0 by XXREAL_0:17;
          then f.x0 + R <= f.x0 + (fp - f.x0) by XREAL_1:9;
          then
A29:      r2 < fp by A28,XXREAL_0:2;
          R <= f.x0 - fm by XXREAL_0:17;
          then f.x0 - (f.x0 - fm) <= f.x0 - R by XREAL_1:15;
          then fm < r2 by A27,XXREAL_0:2;
          then r2 in ].fm,fp.[ by A29;
          then consider s such that
A30:      s in [.x0 - r/2, x0 + r/2.] and
A31:      x = f.s by A9,A15,A14,A24,A26,A25,FCONT_2:16,XXREAL_0:2;
          s in N by A8,A21,A30;
          hence thesis by A13,A31,FUNCT_1:def 5;
        end;
      end;
      suppose
A32:    f|L is decreasing;
        set R = min(fm - f.x0,f.x0 - fp);
        fp < f.x0 by A15,A18,A6,A32,RFUNCT_2:44;
        then
A33:    0 < f.x0 - fp by XREAL_1:52;
        f.x0 < fm by A9,A20,A6,A32,RFUNCT_2:44;
        then 0 < fm - f.x0 by XREAL_1:52;
        then 0 < R by A33,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        fp < fm by A16,A18,A20,A32,RFUNCT_2:44;
        then [.fm,fp.] = {} by XXREAL_1:29;
        then
A34:    [.fm,fp.] \/ [.fp,fm.] = [.fp,fm.];
        thus N1 c= rng f
        proof
          let x;
A35:      ].fp,fm.[ c= [.fp,fm.] by XXREAL_1:25;
          assume x in N1;
          then consider r2 such that
A36:      r2 = x and
A37:      f.x0 - R < r2 and
A38:      r2 < f.x0 + R by A5;
          R <= fm - f.x0 by XXREAL_0:17;
          then f.x0 + R <= f.x0 + (fm - f.x0) by XREAL_1:9;
          then
A39:      r2 < fm by A38,XXREAL_0:2;
          R <= f.x0 - fp by XXREAL_0:17;
          then f.x0 - (f.x0 - fp) <= f.x0 - R by XREAL_1:15;
          then fp < r2 by A37,XXREAL_0:2;
          then r2 in ].fp,fm.[ by A39;
          then consider s such that
A40:      s in [.x0 - r/2, x0 + r/2.] and
A41:      x = f.s by A1,A14,A16,A34,A36,A35,FCONT_2:16,XBOOLE_1:1;
          s in N by A8,A21,A40;
          hence thesis by A13,A41,FUNCT_1:def 5;
        end;
      end;
    end;
    hence ex N be Neighbourhood of r1 st N c= rng f;
  end;
  hence thesis by RCOMP_1:41;
end;
