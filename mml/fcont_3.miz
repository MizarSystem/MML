:: Monotonic and Continuous Real Function
::  by Jaros{\l}aw Kotowicz
::
:: Received January 10, 1991
:: Copyright (c) 1991 Association of Mizar Users

environ

 vocabularies SEQ_1, PARTFUN1, SUBSET_1, PRE_TOPC, RELAT_1, SEQ_2, ORDINAL2,
      BOOLE, LIMFUNC1, FUNCT_1, PROB_1, ARYTM, RCOMP_1, ARYTM_1, ABSVALUE,
      ARYTM_3, FCONT_1, SQUARE_1, FUNCOP_1, SEQM_3, OPPCAT_1;
 notations TARSKI, XBOOLE_0, SUBSET_1, ORDINAL1, NUMBERS, XCMPLX_0, XREAL_0,
      COMPLEX1, PROB_1, REAL_1, FUNCT_1, FUNCT_2, FUNCOP_1, VALUED_1, SEQ_1,
      RELSET_1, SEQ_2, PARTFUN1, PARTFUN2, RCOMP_1, FCONT_1, LIMFUNC1,
      XXREAL_0, RFUNCT_2;
 constructors PARTFUN1, REAL_1, COMPLEX1, NAT_1, SEQ_2, PROB_1, RCOMP_1,
      PARTFUN2, RFUNCT_2, FCONT_1, LIMFUNC1, VALUED_1, SEQ_1, XXREAL_2,
      RELSET_1;
 registrations XBOOLE_0, ORDINAL1, RELSET_1, NUMBERS, XXREAL_0, XREAL_0,
      MEMBERED, SEQM_3, RCOMP_1, RFUNCT_2, VALUED_1, FUNCT_2, VALUED_0,
      XXREAL_2, FUNCOP_1, FCONT_1, SEQ_4, RELAT_1;
 requirements REAL, NUMERALS, BOOLE, SUBSET, ARITHM;
 definitions TARSKI, RCOMP_1, XBOOLE_0, SUBSET_1, PROB_1, LIMFUNC1;
 theorems FUNCT_1, NAT_1, SEQ_2, SEQ_4, ABSVALUE, PARTFUN1, PARTFUN2, RCOMP_1,
      RFUNCT_2, FCONT_1, SUBSET_1, FCONT_2, TARSKI, FUNCT_2, RELAT_1, XREAL_0,
      XBOOLE_0, XBOOLE_1, FUNCOP_1, XREAL_1, COMPLEX1, XXREAL_0, VALUED_1,
      XXREAL_1, XXREAL_2, VALUED_0;
 schemes SEQ_1, FUNCT_2;

begin

reserve x,X for set;
reserve x0,r1,r2,g,g1,g2,p,s for Real;
reserve r for real number;
reserve n,m for Element of NAT;
reserve a,b,d for Real_Sequence;
reserve f for PartFunc of REAL,REAL;

registration
  cluster [#] REAL -> closed;
  coherence
proof
  let a;
  thus thesis;
end;
  cluster empty -> closed Subset of REAL;
  coherence
proof let S be Subset of REAL such that
Z: S is empty;
  let a;
  assume rng a c= S & a is convergent;
  then rng a = S by Z,XBOOLE_1:3;
  then dom a = S by Z;
  hence thesis by Z;
end;
end;

registration
  cluster [#] REAL -> open;
  coherence
proof ([#] REAL)` = {} REAL by XBOOLE_1:37;
  hence thesis by RCOMP_1:def 5;
end;
  cluster empty -> open Subset of REAL;
  coherence
proof let S be Subset of REAL;
  assume S is empty;
   then S` = [#] REAL;
  hence thesis by RCOMP_1:def 5;
end;
end;

registration
  let r;
  cluster right_closed_halfline(r) -> closed;
  coherence
proof
  let a such that
A1: rng a c= right_closed_halfline(r) & a is convergent;
  r in REAL by XREAL_0:def 1;
  then reconsider b = NAT --> r as Real_Sequence by FUNCOP_1:57;
A3: lim b = b.0 by SEQ_4:41
    .= r by FUNCOP_1:13;
  now
    let n;
    a.n in rng a by VALUED_0:28;
    then a.n in right_closed_halfline(r) by A1;
    then a.n in {g1: r <= g1} by XXREAL_1:232;
    then ex r1 st a.n = r1 & r <= r1;
    hence b.n <= a.n by FUNCOP_1:13;
  end;
  then r <= lim a by A1,A3,SEQ_2:32;
  then (lim a) in {g1: r <= g1};
  hence thesis by XXREAL_1:232;
end;
  cluster left_closed_halfline(r) -> closed;
  coherence
proof
  let a such that
A1: rng a c= left_closed_halfline(r) & a is convergent;
  r in REAL by XREAL_0:def 1;
  then reconsider b = NAT --> r as Real_Sequence by FUNCOP_1:57;
A3: lim b = b.0 by SEQ_4:41
    .= r by FUNCOP_1:13;
  now
    let n;
    a.n in rng a by VALUED_0:28;
    then a.n in left_closed_halfline(r) by A1;
    then a.n in {g: g <= r} by XXREAL_1:231;
    then ex r1 st a.n = r1 & r1 <= r;
    hence a.n <= b.n by FUNCOP_1:13;
  end;
  then lim a <= r by A1,A3,SEQ_2:32;
  then lim a in {g1: g1 <= r};
  hence thesis by XXREAL_1:231;
end;
  cluster right_open_halfline(r) -> open;
  coherence
proof
A1: (right_open_halfline(r))` = left_closed_halfline(r) by XXREAL_1:224,296;
  thus thesis by A1,RCOMP_1:def 5;
end;
  cluster halfline(r) -> open;
  coherence
proof
A1: (left_open_halfline(r))` = right_closed_halfline(r) by XXREAL_1:224,290;
  thus thesis by A1,RCOMP_1:def 5;
end;
end;

canceled 8;

theorem Th9:
  g in ].x0 - r,x0 + r.[ implies ex r1 st g = x0 + r1 & abs(r1) < r
proof
    assume g in ].x0 - r,x0 + r.[;
    then
A1: ex g1 st g1 = g & x0 - r < g1 & g1 < x0 + r;
    take r1 = g - x0;
    thus x0 + r1 = g;
    per cases;
      suppose x0 <= g;
        then
A2:     0 <= g - x0 by XREAL_1:50;
        g - x0 < x0 + r - x0 by A1,XREAL_1:16;
        hence thesis by A2,ABSVALUE:def 1;
      end;
      suppose g <= x0;
        then 0 <= x0 - g by XREAL_1:50;
        then
A3:     x0 - g = abs(- (g - x0)) by ABSVALUE:def 1
          .= abs(g - x0) by COMPLEX1:138;
        x0 - g < x0 - (x0 - r) by A1,XREAL_1:17;
        hence thesis by A3;
      end;
end;

theorem
  g in ].x0 - r,x0 + r.[ implies g - x0 in ].-r,r.[
proof
    assume g in ].x0 - r,x0 + r.[;
    then consider r1 such that
A1: g = x0 + r1 & abs(r1) < r by Th9;
    abs(r1 - 0) < r by A1;
    then r1 in ].0 - r, 0 + r.[ by RCOMP_1:8;
    hence thesis by A1;
end;

theorem Th11:
  g = x0 + r1 & abs(r1) < r implies 0 < r & g in ].x0 - r,x0 + r.[
proof
  assume
A4: g = x0 + r1 & abs(r1) < r;
  thus 0 < r by A4,COMPLEX1:132;
  abs(g - x0) < r by A4;
  hence thesis by RCOMP_1:8;
end;

theorem
  g - x0 in ].-r,r.[ implies 0 < r & g in ].x0 - r,x0 + r.[
proof
  set r1 = g - x0;
  assume r1 in ].-r,r.[;
  then ex g1 st g1 = r1 & -r < g1 & g1 < r;
  then
A2: abs(r1) < r by SEQ_2:9;
  x0 + r1 = g;
  hence thesis by A2,Th11;
end;

theorem Th13:
  for x0 be real number holds
  (for n holds a.n = x0 - p/(n+1)) implies a is convergent & lim a = x0
proof
  let x0 be real number;
  assume
A1: for n holds a.n = x0 - p/(n+1);
  x0 in REAL by XREAL_0:def 1;
  then reconsider b = NAT --> x0 as Real_Sequence by FUNCOP_1:57;
  deffunc F(Element of NAT) = p/($1+1);
  consider d such that
A2: for n holds d.n = F(n) from SEQ_1:sch 1;
A3: d is convergent & lim d = 0 by A2,SEQ_4:46;
A5: lim b = b.0 by SEQ_4:41
    .= x0 by FUNCOP_1:13;
  now
    let n;
    thus (b - d).n = b.n - d.n by VALUED_1:15
      .= x0 - d.n by FUNCOP_1:13
      .= x0 - p/(n+1) by A2
      .=a.n by A1;
  end;
  then
A6: a = b - d by FUNCT_2:113;
  hence a is convergent by A3,SEQ_2:25;
  thus lim a = x0 - 0 by A3,A5,A6,SEQ_2:26
    .= x0;
end;

theorem Th14:
  for x0 be real number holds
  (for n holds a.n = x0 + p/(n+1)) implies a is convergent & lim a = x0
proof
  let x0 be real number;
  assume
A1: for n holds a.n = x0 + p/(n+1);
  x0 in REAL by XREAL_0:def 1;
  then reconsider b = NAT --> x0 as Real_Sequence by FUNCOP_1:57;
  deffunc F(Element of NAT) = p/($1+1);
  consider d such that
A2: for n holds d.n = F(n) from SEQ_1:sch 1;
A3: d is convergent & lim d = 0 by A2,SEQ_4:46;
A5: lim b = b.0 by SEQ_4:41
    .= x0 by FUNCOP_1:13;
  now
    let n;
    thus (b + d).n = b.n + d.n by VALUED_1:1
      .= x0 + d.n by FUNCOP_1:13
      .= x0 + p/(n+1) by A2
      .=a.n by A1;
  end;
  then
A6: a = b + d by FUNCT_2:113;
  hence a is convergent by A3,SEQ_2:19;
  thus lim a = x0 + 0 by A3,A5,A6,SEQ_2:20
    .= x0;
end;

theorem
  f is_continuous_in x0 & f.x0 <> r &
  (ex N be Neighbourhood of x0 st N c= dom f) implies
  ex N be Neighbourhood of x0 st N c= dom f & for g st g in N holds f.g <> r
proof
  assume
A1: f is_continuous_in x0 & f.x0 <> r;
  given N be Neighbourhood of x0 such that
A2: N c= dom f;
  assume
A3: for N be Neighbourhood of x0 holds
  not N c= dom f or ex g st g in N & f.g = r;
  consider p be real number such that
A4: 0 < p & N = ].x0 - p,x0 + p.[ by RCOMP_1:def 7;
A5: p is Real by XREAL_0:def 1;
  deffunc F(Element of NAT) = x0 - p/($1+1);
  consider a such that
A6: for n holds a.n = F(n) from SEQ_1:sch 1;
  deffunc F(Element of NAT) = x0 + p/($1+1);
  consider b such that
A7: for n holds b.n = F(n) from SEQ_1:sch 1;
  defpred P[Element of NAT,real number] means x0 - p/($1+1) < $2 &
  $2 < x0 + p/($1+1) & f.$2 = r & $2 in dom f;
A8: for n ex g be Real st P[n,g]
  proof
    let n;
A9: 0 <= n by NAT_1:2;
    then 0 < n + 1;
    then 0 < p/(n+1) by A4,XREAL_1:141;
    then reconsider Nn = ].x0 - p/(n+1),x0 + p/(n+1).[ as Neighbourhood of x0
    by RCOMP_1:def 7;
A10: Nn c= dom f
    proof
      let x;
      assume x in Nn;
      then consider g2 such that
A11:  g2 = x & x0 - p/(n+1) < g2 & g2 < x0 + p/(n+1);
      0 + 1 <= n + 1 by A9,XREAL_1:9;
      then
A12:  p/(n+1) <= p/1 by A4,XREAL_1:120;
      then x0 - p <= x0 - p/(n+1) by XREAL_1:15;
      then
A13:  x0 - p < g2 by A11,XXREAL_0:2;
      x0 + p/(n+1) <= x0 + p by A12,XREAL_1:9;
      then g2 < x0 + p by A11,XXREAL_0:2;
      then x in N by A4,A11,A13;
      hence thesis by A2;
    end;
    then consider g such that
A14: g in Nn & f.g = r by A3;
    take g;
    ex g1 st g1 = g & x0 - p/(n+1) < g1 & g1 <x0 + p/(n+1) by A14;
    hence x0 - p/(n+1) < g & g <x0 + p/(n+1);
    thus f.g = r by A14;
    thus thesis by A10,A14;
  end;
  consider d such that
A15: for n holds P[n,d.n] from FUNCT_2:sch 3(A8);
A16: a is convergent & lim a = x0 by A5,A6,Th13;
A17: b is convergent & lim b = x0 by A5,A7,Th14;
A18: now
    let n;
    x0 - p/(n+1) < d.n & d.n < x0 + p/(n+1) by A15;
    hence a.n <= d.n & d.n <= b.n by A6,A7;
  end;
  then
A19: d is convergent by A16,A17,SEQ_2:33;
A20: lim d = x0 by A16,A17,A18,SEQ_2:34;
A21: rng d c= dom f
  proof
    let x;
    assume x in rng d;
    then ex n st x = d.n by FUNCT_2:190;
    hence thesis by A15;
  end;
  then
A22: f/*d is convergent & f.x0 = lim (f/*d) by A1,A19,A20,FCONT_1:def 1;
  now
    let r2 be real number such that
A23: 0 < r2;
    take n = 0;
    let m such that n <= m;
    abs((f/*d).m - r) = abs(f.(d.m) - r) by A21,FUNCT_2:185
      .= abs(r - r) by A15
      .= 0 by ABSVALUE:7;
    hence abs((f/*d).m - r) < r2 by A23;
  end;
  hence contradiction by A1,A22,SEQ_2:def 7;
end;

theorem
  f|X is increasing or f|X is decreasing implies f|X is one-to-one
proof
  assume
A1: f|X is increasing or f|X is decreasing;
  now per cases by A1;
    suppose
A2:   f|X is increasing;
      now
        given r1,r2 such that
A3:     r1 in dom (f|X) & r2 in dom (f|X) & (f|X).r1 = (f|X).r2 and
A4:     r1 <> r2;
A5:     r1 in X /\ dom f & r2 in X /\ dom f by A3,RELAT_1:90;
        now per cases by A4,XXREAL_0:1;
          suppose r1 < r2;
            then f.r1 < f.r2 by A2,A5,RFUNCT_2:43;
            then (f|X).r1 < f.r2 by A3,FUNCT_1:70;
            hence contradiction by A3,FUNCT_1:70;
          end;
          suppose r2 < r1;
            then f.r2 < f.r1 by A2,A5,RFUNCT_2:43;
            then (f|X).r2 < f.r1 by A3,FUNCT_1:70;
            hence contradiction by A3,FUNCT_1:70;
          end;
        end;
        hence contradiction;
      end;
      hence thesis by PARTFUN1:38;
    end;
    suppose
A6:   f|X is decreasing;
      now
        given r1,r2 such that
A7:     r1 in dom (f|X) & r2 in dom (f|X) & (f|X).r1 = (f|X).r2 and
A8:     r1 <> r2;
A9:     r1 in X /\ dom f & r2 in X /\ dom f by A7,RELAT_1:90;
        now per cases by A8,XXREAL_0:1;
          suppose r1 < r2;
            then f.r2 < f.r1 by A6,A9,RFUNCT_2:44;
            then (f|X).r2 < f.r1 by A7,FUNCT_1:70;
            hence contradiction by A7,FUNCT_1:70;
          end;
          suppose r2 < r1;
            then f.r1 < f.r2 by A6,A9,RFUNCT_2:44;
            then (f|X).r1 < f.r2 by A7,FUNCT_1:70;
            hence contradiction by A7,FUNCT_1:70;
          end;
        end;
        hence contradiction;
      end;
      hence thesis by PARTFUN1:38;
    end;
  end;
  hence thesis;
end;

theorem Th17:
  for f be one-to-one PartFunc of REAL,REAL st f|X is increasing holds
  (f|X)"|(f.:X) is increasing
proof
  let f be one-to-one PartFunc of REAL,REAL;
  assume that
A1: f|X is increasing and
A2: not (f|X)"|(f.:X) is increasing;
  consider r1,r2 such that
A3: r1 in f.:X /\ dom ((f|X)") & r2 in f.:X /\ dom((f|X)") & r1 < r2 &
  ((f|X)").r1 >= ((f|X)").r2 by A2,RFUNCT_2:43;
  f.:X = rng (f|X) by RELAT_1:148;
  then
A4: r1 in rng (f|X) & r2 in rng (f|X) by A3,XBOOLE_0:def 4;
A5: f|X|X is increasing by A1;
  now per cases;
    suppose ((f|X)").r1 = ((f|X)").r2;
      then r1 = (f|X).(((f|X)").r2) by A4,FUNCT_1:57
        .= r2 by A4,FUNCT_1:57;
      hence contradiction by A3;
    end;
    suppose ((f|X)").r1 <> ((f|X)").r2;
      then
A6:   ((f|X)").r2 < ((f|X)").r1 by A3,XXREAL_0:1;
A7:   ((f|X)").r2 in dom (f|X) & ((f|X)").r1 in dom (f|X) by A4,PARTFUN2:79;
      dom (f|X) = dom ((f|X)|X) by RELAT_1:101
        .= X /\ dom (f|X) by RELAT_1:90;

then (f|X).(((f|X)").r2) < (f|X).(((f|X)").r1) by A5,A6,A7,RFUNCT_2:43;
      then r2 < (f|X).(((f|X)").r1) by A4,FUNCT_1:57;
      hence contradiction by A3,A4,FUNCT_1:57;
    end;
  end;
  hence contradiction;
end;

theorem Th18:
  for f be one-to-one PartFunc of REAL,REAL st f|X is decreasing holds
  (f|X)"|(f.:X) is decreasing
proof
  let f be one-to-one PartFunc of REAL,REAL;
  assume that
A1: f|X is decreasing and
A2: not (f|X)"|(f.:X) is decreasing;
  consider r1,r2 such that
A3: r1 in f.:X /\ dom ((f|X)") & r2 in f.:X /\ dom((f|X)") & r1 < r2 &
  ((f|X)").r1 <= ((f|X)").r2 by A2,RFUNCT_2:44;
  f.:X = rng (f|X) by RELAT_1:148;
  then
A4: r1 in rng (f|X) & r2 in rng (f|X) by A3,XBOOLE_0:def 4;
A5: f|X|X is decreasing by A1;
  now per cases;
    suppose ((f|X)").r1 = ((f|X)").r2;
      then r1 = (f|X).(((f|X)").r2) by A4,FUNCT_1:57
        .= r2 by A4,FUNCT_1:57;
      hence contradiction by A3;
    end;
    suppose ((f|X)").r1 <> ((f|X)").r2;
      then
A6:   ((f|X)").r2 > ((f|X)").r1 by A3,XXREAL_0:1;
A7:   ((f|X)").r2 in dom (f|X) & ((f|X)").r1 in dom (f|X) by A4,PARTFUN2:79;
      dom (f|X) = dom ((f|X)|X) by RELAT_1:101
        .= X /\ dom (f|X) by RELAT_1:90;

then (f|X).(((f|X)").r2) < (f|X).(((f|X)").r1) by A5,A6,A7,RFUNCT_2:44;
      then r2 < (f|X).(((f|X)").r1) by A4,FUNCT_1:57;
      hence contradiction by A3,A4,FUNCT_1:57;
    end;
  end;
  hence contradiction;
end;

theorem Th19:
  X c= dom f & f|X is monotone &
  (ex p st f.:X = left_open_halfline(p)) implies f|X is continuous
proof
  assume
A1: X c= dom f & f|X is monotone;
  given p such that
A2: f.:X = left_open_halfline(p);
  set L = left_open_halfline(p);
  now per cases by A1,RFUNCT_2:def 6;
    suppose f|X is non-decreasing;
      then
A3:   f|X|X is non-decreasing;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
        assume x0 in dom(f|X);
        then
A4:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A5:     x0 in dom (f|X) by RELAT_1:90;
        then
A6:     (f|X).x0 in (f|X).:X by A4,FUNCT_1:def 12;
A7:     (f|X).:X = f.:X by RELAT_1:162;
A8:     (f|X).x0 in L by A2,A6,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A9:       N2 c= L by A8,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A10:      N3 c= N1 & N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A11:      r>0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
          set M1 = (f|X).x0 - r/2;
          set M2 = (f|X).x0 + r/2;
A12:      r/2 > 0 by A11,XREAL_1:217;
          then
A13:      (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A14:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31;
          then
A15:      (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A16:      (f|X).x0 < (f|X).x0 + r by A11,XREAL_1:31;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A15,XXREAL_0:2;
          then
A17:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A13;
A18:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A12,XREAL_1:31;
          (f|X).x0 - r < (f|X).x0 + r - r by A16,XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A14,XXREAL_0:2;
          then
A19:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A18;
          then
A20:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A17,XXREAL_2:def 12;
          M1 in N2 by A10,A11,A17;
          then consider r1 such that
A21:      r1 in dom (f|X) & r1 in X & M1 = (f|X).r1 by A2,A7,A9,PARTFUN2:78;
          M2 in N2 by A10,A11,A19;
          then consider r2 such that
A22:      r2 in dom (f|X) & r2 in X & M2 = (f|X).r2 by A2,A7,A9,PARTFUN2:78;
          set R = min(x0 - r1,r2 - x0);
A23:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31;
          then
A24:      M1 < (f|X).x0 by XREAL_1:21;
A25:      r1 <> x0 by A21,A23,XREAL_1:21;
          now
            assume
A26:        x0 < r1;
A27:        x0 in X /\ dom( f|X) by A4,A5,XBOOLE_0:def 4;
            r1 in X /\ dom(f|X) by A21,XBOOLE_0:def 4;
            hence contradiction by A3,A21,A24,A26,A27,RFUNCT_2:45;
          end;
          then r1 < x0 by A25,XXREAL_0:1;
          then
A28:      x0 - r1 > 0 by XREAL_1:52;
A29:      M2 > (f|X).x0 by A12,XREAL_1:31;
A30:      x0 <> r2 by A12,A22,XREAL_1:31;
          now
            assume
A31:        r2 < x0;
A32:        x0 in X /\ dom(f|X) by A4,A5,XBOOLE_0:def 4;
            r2 in X /\ dom (f|X) by A22,XBOOLE_0:def 4;
            hence contradiction by A3,A22,A29,A31,A32,RFUNCT_2:45;
          end;
          then x0 < r2 by A30,XXREAL_0:1;
          then r2 - x0 > 0 by XREAL_1:52;
          then R > 0 by A28,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume
A33:      x in dom (f|X) & x in N;
          then
A34:      ex s st s = x & x0 - R < s & s < x0 + R;
          then x0 < R + x by XREAL_1:21;
          then
A35:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r1 by XXREAL_0:17;
          then x0 - x < x0 - r1 by A35,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
          then
A36:      x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
A37:      x - x0 < R by A34,XREAL_1:21;
          R <= r2 - x0 by XXREAL_0:17;
          then x - x0 < r2 - x0 by A37,XXREAL_0:2;
          then
A38:      x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
A39:      x in X /\ dom (f|X) by A33,RELAT_1:87,XBOOLE_1:28;
          r2 in X /\ dom (f|X) by A22,XBOOLE_0:def 4;
          then
A40:      (f|X).x <= (f|X).r2 by A3,A38,A39,RFUNCT_2:45;
          r1 in X /\ dom (f|X) by A21,XBOOLE_0:def 4;
          then (f|X).r1 <= (f|X).x by A3,A36,A39,RFUNCT_2:45;
          then (f|X).x in [.M1,M2.] by A21,A22,A40;
          then (f|X).x in N3 by A11,A20;
          hence (f|X).x in N1 by A10;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
    suppose f|X is non-increasing;
      then
A41:  f|X|X is non-increasing by RELAT_1:101;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
        assume x0 in dom(f|X);
        then
A42:    x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A43:    x0 in dom(f|X) by RELAT_1:90;
        then
A44:    (f|X).x0 in (f|X).:X by A42,FUNCT_1:def 12;
A45:    (f|X).:X = f.:X by RELAT_1:162;
A46:    (f|X).x0 in L by A2,A44,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A47:      N2 c= L by A46,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A48:      N3 c= N1 & N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A49:      r > 0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
          set M1 = (f|X).x0 - r/2;
          set M2 = (f|X).x0 + r/2;
A50:      r/2 > 0 by A49,XREAL_1:217;
          then
A51:      (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A52:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31;
          then
A53:      (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A54:      (f|X).x0 < (f|X).x0 + r by A49,XREAL_1:31;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A53,XXREAL_0:2;
          then
A55:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A51;
A56:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A50,XREAL_1:31;
          (f|X).x0 - r < (f|X).x0 + r - r by A54,XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A52,XXREAL_0:2;
          then
A57:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A56;
          then
A58:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A55,XXREAL_2:def 12;
          M1 in N2 by A48,A49,A55;
          then consider r1 such that
A59:      r1 in dom (f|X) & r1 in X & M1 = (f|X).r1 by A2,A45,A47,PARTFUN2:78;
          M2 in N2 by A48,A49,A57;
          then consider r2 such that
A60:      r2 in dom (f|X) & r2 in X & M2 = (f|X).r2 by A2,A45,A47,PARTFUN2:78;
          set R = min(r1 - x0,x0 - r2);
A61:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31;
          then
A62:      M1 < (f|X).x0 by XREAL_1:21;
A63:      r1 <> x0 by A59,A61,XREAL_1:21;
          now
            assume
A64:        x0 > r1;
A65:        x0 in X /\ dom (f|X) by A42,A43,XBOOLE_0:def 4;
            r1 in X /\ dom(f|X) by A59,XBOOLE_0:def 4;
            hence contradiction by A41,A59,A62,A64,A65,RFUNCT_2:46;
          end;
          then r1 > x0 by A63,XXREAL_0:1;
          then
A66:      r1 - x0 > 0 by XREAL_1:52;
A67:      M2 > (f|X).x0 by A50,XREAL_1:31;
A68:      x0 <> r2 by A50,A60,XREAL_1:31;
          now
            assume
A69:        r2 > x0;
A70:        x0 in X /\ dom (f|X) by A42,A43,XBOOLE_0:def 4;
            r2 in X /\ dom (f|X) by A60,XBOOLE_0:def 4;
            hence contradiction by A41,A60,A67,A69,A70,RFUNCT_2:46;
          end;
          then x0 > r2 by A68,XXREAL_0:1;
          then x0 - r2 > 0 by XREAL_1:52;
          then R > 0 by A66,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume
A71:      x in dom (f|X) & x in N;
          then
A72:      ex s st s = x & x0 - R < s & s < x0 + R;
          then x0 < R + x by XREAL_1:21;
          then
A73:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r2 by XXREAL_0:17;
          then x0 - x < x0 - r2 by A73,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
          then
A74:      x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
A75:      x - x0 < R by A72,XREAL_1:21;
          R <= r1 - x0 by XXREAL_0:17;
          then x - x0 < r1-x0 by A75,XXREAL_0:2;
          then
A76:      x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
A77:      x in X /\ dom(f|X) by A71,RELAT_1:87,XBOOLE_1:28;
          r2 in X /\ dom(f|X) by A60,XBOOLE_0:def 4;
          then
A78:      (f|X).x <= (f|X).r2 by A41,A74,A77,RFUNCT_2:46;
          r1 in X /\ dom(f|X) by A59,XBOOLE_0:def 4;
          then (f|X).r1 <= (f|X).x by A41,A76,A77,RFUNCT_2:46;
          then (f|X).x in [.M1,M2.] by A59,A60,A78;
          then (f|X).x in N3 by A49,A58;
          hence (f|X).x in N1 by A48;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
  end;
  hence thesis;
end;

theorem Th20:
  X c= dom f & f|X is monotone &
  (ex p st f.:X = right_open_halfline(p)) implies f|X is continuous
proof
  assume
A1: X c= dom f & f|X is monotone;
  given p such that
A2: f.:X = right_open_halfline(p);
  set L = right_open_halfline(p);
  now per cases by A1,RFUNCT_2:def 6;
    suppose f|X is non-decreasing;
      then
A3:   f|X|X is non-decreasing;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
        assume x0 in dom(f|X);
        then
A4:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A5:     x0 in dom (f|X) by RELAT_1:90;
        then
A6:     (f|X).x0 in (f|X).:X by A4,FUNCT_1:def 12;
A7:     (f|X).:X = f.:X by RELAT_1:162;
A8:     (f|X).x0 in L by A2,A6,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A9:       N2 c= L by A8,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A10:      N3 c= N1 & N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A11:      r>0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
          set M1 = (f|X).x0 - r/2;
          set M2 = (f|X).x0 + r/2;
A12:      r/2 > 0 by A11,XREAL_1:217;
          then
A13:      (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A14:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31;
          then
A15:      (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A16:      (f|X).x0 < (f|X).x0 + r by A11,XREAL_1:31;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A15,XXREAL_0:2;
          then
A17:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A13;
A18:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A12,XREAL_1:31;
          (f|X).x0 - r < (f|X).x0 + r - r by A16,XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A14,XXREAL_0:2;
          then
A19:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A18;
          then
A20:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A17,XXREAL_2:def 12;
          M1 in N2 by A10,A11,A17;
          then consider r1 such that
A21:      r1 in dom (f|X) & r1 in X & M1 = (f|X).r1 by A2,A7,A9,PARTFUN2:78;
          M2 in N2 by A10,A11,A19;
          then consider r2 such that
A22:      r2 in dom (f|X) & r2 in X & M2 = (f|X).r2 by A2,A7,A9,PARTFUN2:78;
          set R = min(x0 - r1,r2 - x0);
A23:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31;
          then
A24:      M1 < (f|X).x0 by XREAL_1:21;
A25:      r1 <> x0 by A21,A23,XREAL_1:21;
          now
            assume
A26:        x0 < r1;
A27:        x0 in X /\ dom( f|X) by A4,A5,XBOOLE_0:def 4;
            r1 in X /\ dom(f|X) by A21,XBOOLE_0:def 4;
            hence contradiction by A3,A21,A24,A26,A27,RFUNCT_2:45;
          end;
          then r1 < x0 by A25,XXREAL_0:1;
          then
A28:      x0 - r1 > 0 by XREAL_1:52;
A29:      M2 > (f|X).x0 by A12,XREAL_1:31;
A30:      x0 <> r2 by A12,A22,XREAL_1:31;
          now
            assume
A31:        r2 < x0;
A32:        x0 in X /\ dom(f|X) by A4,A5,XBOOLE_0:def 4;
            r2 in X /\ dom (f|X) by A22,XBOOLE_0:def 4;
            hence contradiction by A3,A22,A29,A31,A32,RFUNCT_2:45;
          end;
          then x0 < r2 by A30,XXREAL_0:1;
          then r2 - x0 > 0 by XREAL_1:52;
          then R > 0 by A28,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume
A33:      x in dom (f|X) & x in N;
          then
A34:      ex s st s = x & x0 - R < s & s < x0 + R;
          then x0 < R + x by XREAL_1:21;
          then
A35:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r1 by XXREAL_0:17;
          then x0 - x < x0 - r1 by A35,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
          then
A36:      x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
A37:      x - x0 < R by A34,XREAL_1:21;
          R <= r2 - x0 by XXREAL_0:17;
          then x - x0 < r2 - x0 by A37,XXREAL_0:2;
          then
A38:      x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
A39:      x in X /\ dom (f|X) by A33,RELAT_1:87,XBOOLE_1:28;
          r2 in X /\ dom (f|X) by A22,XBOOLE_0:def 4;
          then
A40:      (f|X).x <= (f|X).r2 by A3,A38,A39,RFUNCT_2:45;
          r1 in X /\ dom (f|X) by A21,XBOOLE_0:def 4;
          then (f|X).r1 <= (f|X).x by A3,A36,A39,RFUNCT_2:45;
          then (f|X).x in [.M1,M2.] by A21,A22,A40;
          then (f|X).x in N3 by A11,A20;
          hence (f|X).x in N1 by A10;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
    suppose f|X is non-increasing;
      then
A41:  f|X|X is non-increasing by RELAT_1:101;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
        assume x0 in dom(f|X);
        then
A42:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A43:    x0 in dom(f|X) by RELAT_1:90;
        then
A44:    (f|X).x0 in (f|X).:X by A42,FUNCT_1:def 12;
A45:    (f|X).:X = f.:X by RELAT_1:162;
A46:    (f|X).x0 in L by A2,A44,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A47:      N2 c= L by A46,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A48:      N3 c= N1 & N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A49:      r > 0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
          set M1 = (f|X).x0 - r/2;
          set M2 = (f|X).x0 + r/2;
A50:      r/2 > 0 by A49,XREAL_1:217;
          then
A51:      (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A52:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31;
          then
A53:      (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A54:      (f|X).x0 < (f|X).x0 + r by A49,XREAL_1:31;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A53,XXREAL_0:2;
          then
A55:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A51;
A56:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A50,XREAL_1:31;
          (f|X).x0 - r < (f|X).x0 + r - r by A54,XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A52,XXREAL_0:2;
          then
A57:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A56;
          then
A58:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A55,XXREAL_2:def 12;
          M1 in N2 by A48,A49,A55;
          then consider r1 such that
A59:      r1 in dom (f|X) & r1 in X & M1 = (f|X).r1 by A2,A45,A47,PARTFUN2:78;
          M2 in N2 by A48,A49,A57;
          then consider r2 such that
A60:      r2 in dom (f|X) & r2 in X & M2 = (f|X).r2 by A2,A45,A47,PARTFUN2:78;
          set R = min(r1 - x0,x0 - r2);
A61:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31;
          then
A62:      M1 < (f|X).x0 by XREAL_1:21;
A63:      r1 <> x0 by A59,A61,XREAL_1:21;
          now
            assume
A64:        x0 > r1;
A65:        x0 in X /\ dom (f|X) by A42,A43,XBOOLE_0:def 4;
            r1 in X /\ dom(f|X) by A59,XBOOLE_0:def 4;
            hence contradiction by A41,A59,A62,A64,A65,RFUNCT_2:46;
          end;
          then r1 > x0 by A63,XXREAL_0:1;
          then
A66:      r1 - x0 > 0 by XREAL_1:52;
A67:      M2 > (f|X).x0 by A50,XREAL_1:31;
A68:      x0 <> r2 by A50,A60,XREAL_1:31;
          now
            assume
A69:        r2 > x0;
A70:        x0 in X /\ dom (f|X) by A42,A43,XBOOLE_0:def 4;
            r2 in X /\ dom (f|X) by A60,XBOOLE_0:def 4;
            hence contradiction by A41,A60,A67,A69,A70,RFUNCT_2:46;
          end;
          then x0 > r2 by A68,XXREAL_0:1;
          then x0 - r2 > 0 by XREAL_1:52;
          then R > 0 by A66,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume
A71:      x in dom (f|X) & x in N;
          then
A72:      ex s st s = x & x0 - R < s & s < x0 + R;
          then x0 < R + x by XREAL_1:21;
          then
A73:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r2 by XXREAL_0:17;
          then x0 - x < x0 - r2 by A73,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
          then
A74:      x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
A75:      x - x0 < R by A72,XREAL_1:21;
          R <= r1 - x0 by XXREAL_0:17;
          then x - x0 < r1-x0 by A75,XXREAL_0:2;
          then
A76:      x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
A77:      x in X /\ dom(f|X) by A71,RELAT_1:87,XBOOLE_1:28;
          r2 in X /\ dom(f|X) by A60,XBOOLE_0:def 4;
          then
A78:      (f|X).x <= (f|X).r2 by A41,A74,A77,RFUNCT_2:46;
          r1 in X /\ dom(f|X) by A59,XBOOLE_0:def 4;
          then (f|X).r1 <= (f|X).x by A41,A76,A77,RFUNCT_2:46;
          then (f|X).x in [.M1,M2.] by A59,A60,A78;
          then (f|X).x in N3 by A49,A58;
          hence (f|X).x in N1 by A48;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
  end;
  hence thesis;
end;

theorem Th21:
  X c= dom f & f|X is monotone &
  (ex p st f.:X = left_closed_halfline(p)) implies f|X is continuous
proof
  assume
A1: X c= dom f & f|X is monotone;
  given p such that
A2: f.:X = left_closed_halfline(p);
  set l = left_closed_halfline(p);
  set L = left_open_halfline(p);
  for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
  proof
    let x0 be real number;
        assume x0 in dom(f|X);
        then
A3:     x0 in X by RELAT_1:86;
    then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
    then
A4: x0 in dom (f|X) by RELAT_1:90;
    then
A5: (f|X).x0 in (f|X).:X by A3,FUNCT_1:def 12;
A6: (f|X).:X = f.:X by RELAT_1:162;
    then (f|X).x0 in {p} \/ L by A2,A5,XXREAL_1:423;
    then
A7: (f|X).x0 in {p} or (f|X).x0 in L by XBOOLE_0:def 3;
A8: L c= l by XXREAL_1:21;
    now
      let N1 be Neighbourhood of (f|X).x0;
      now per cases by A1,RFUNCT_2:def 6;
        suppose f|X is non-decreasing;
          then
A9:       f|X|X is non-decreasing;
          now per cases by A7,TARSKI:def 1;
            suppose (f|X).x0 in L;
              then consider N2 being Neighbourhood of (f|X).x0 such that
A10:          N2 c= L by RCOMP_1:39;
              consider N3 being Neighbourhood of (f|X).x0 such that
A11:          N3 c= N1 & N3 c= N2 by RCOMP_1:38;
              consider r be real number such that
A12:          r>0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set M1 = (f|X).x0 - r/2;
              set M2 = (f|X).x0 + r/2;
A13:          r/2 > 0 by A12,XREAL_1:217;
              then
A14:          (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A15:          (f|X).x0 < (f|X).x0 + r/2 by A13,XREAL_1:31;
              then
A16:          (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A17:          (f|X).x0 < (f|X).x0 + r by A12,XREAL_1:31;
              then (f|X).x0 - r/2 < (f|X).x0 + r by A16,XXREAL_0:2;
              then
A18:          M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A14;
A19:          (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A13,XREAL_1:31;
              (f|X).x0 - r < (f|X).x0 + r - r by A17,XREAL_1:11;
              then (f|X).x0 - r < (f|X).x0 + r/2 by A15,XXREAL_0:2;
              then
A20:          M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A19;
              then
A21:          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[
 by A18,XXREAL_2:def 12;
              M1 in N2 by A11,A12,A18;
              then M1 in L by A10;
              then consider r1 such that
A22:          r1
              in dom (f|X) & r1 in X & M1 = (f|X).r1 by A2,A6,A8,PARTFUN2:78;
              M2 in N2 by A11,A12,A20;
              then M2 in L by A10;
              then consider r2 such that
A23:          r2 in dom (f|X) & r2 in
              X & M2 = (f|X).r2 by A2,A6,A8,PARTFUN2:78;
              set R = min(x0 - r1,r2 - x0);
A24:          (f|X).x0 < (f|X).x0 + r/2 by A13,XREAL_1:31;
              then
A25:          M1 < (f|X).x0 by XREAL_1:21;
A26:          r1 <> x0 by A22,A24,XREAL_1:21;
              now
                assume
A27:            x0 < r1;
A28:            x0 in X /\ dom( f|X) by A3,A4,XBOOLE_0:def 4;
                r1 in X /\ dom(f|X) by A22,XBOOLE_0:def 4;
                hence contradiction by A9,A22,A25,A27,A28,RFUNCT_2:45;
              end;
              then r1 < x0 by A26,XXREAL_0:1;
              then
A29:          x0 - r1 > 0 by XREAL_1:52;
A30:          M2 > (f|X).x0 by A13,XREAL_1:31;
A31:          x0 <> r2 by A13,A23,XREAL_1:31;
              now
                assume
A32:            r2 < x0;
A33:            x0 in X /\ dom(f|X) by A3,A4,XBOOLE_0:def 4;
                r2 in X /\ dom (f|X) by A23,XBOOLE_0:def 4;
                hence contradiction by A9,A23,A30,A32,A33,RFUNCT_2:45;
              end;
              then x0 < r2 by A31,XXREAL_0:1;
              then r2 - x0 > 0 by XREAL_1:52;
              then R > 0 by A29,XXREAL_0:15;
              then reconsider N = ].x0 - R,x0+ R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
              take N;
              let x be real number;
              assume
A34:          x in dom (f|X) & x in N;
              then
A35:          ex s st s = x & x0 - R < s & s < x0 + R;
              then x0 < R + x by XREAL_1:21;
              then
A36:          x0 - x < R + x - x by XREAL_1:11;
              R <= x0 - r1 by XXREAL_0:17;
              then x0 - x < x0 - r1 by A36,XXREAL_0:2;
              then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
              then
A37:          x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
A38:          x - x0 < R by A35,XREAL_1:21;
              R <= r2 - x0 by XXREAL_0:17;
              then x - x0 < r2 - x0 by A38,XXREAL_0:2;
              then
A39:          x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
A40:          x in X /\ dom (f|X) by A34,RELAT_1:87,XBOOLE_1:28;
              r2 in X /\ dom (f|X) by A23,XBOOLE_0:def 4;
              then
A41:          (f|X).x <= (f|X).r2 by A9,A39,A40,RFUNCT_2:45;
              r1 in X /\ dom (f|X) by A22,XBOOLE_0:def 4;
              then (f|X).r1 <= (f|X).x by A9,A37,A40,RFUNCT_2:45;
              then (f|X).x in [.M1,M2.] by A22,A23,A41;
              then (f|X).x in N3 by A12,A21;
              hence (f|X).x in N1 by A11;
            end;
            suppose
A42:          (f|X).x0 = p;
              then consider r be real number such that
A43:          r > 0 & N1 = ].p - r,p + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set R = r/2;
A44:          0 < R by A43,XREAL_1:217;
A45:          R < r by A43,XREAL_1:218;
              then
A46:          p + R < p + r by XREAL_1:8;
A47:          p - r < p by A43,XREAL_1:46;
A48:          p < p + R by A44,XREAL_1:31;
              then p - r < p + R by A47,XXREAL_0:2;
              then
A49:          p + R in ].p - r, p + r.[ by A46;
A50:          p - R < p by A44,XREAL_1:46;
              p < p + r by A43,XREAL_1:31;
              then
A51:          p - R < p + r by A50,XXREAL_0:2;
              p - r < p - R by A45,XREAL_1:17;
              then p - R in ].p - r, p + r.[ by A51;
              then
A52:          [.p - R, p + R.] c= N1 by A43,A49,XXREAL_2:def 12;
              p - R in {s : s < p} by A50;
              then p - R in L by XXREAL_1:229;
              then consider r1 such that
A53:          r1 in dom (f|X) & r1 in
              X & p - R = (f|X).r1 by A2,A6,A8,PARTFUN2:78;
A54:          r1 <> x0 by A42,A44,A53,XREAL_1:46;
              now
                assume
A55:            x0 < r1;
A56:            x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
                r1 in X /\ dom (f|X) by A53,XBOOLE_0:def 4;
                hence contradiction by A9,A42,A50,A53,A55,A56,RFUNCT_2:45;
              end;
              then r1 < x0 by A54,XXREAL_0:1;
              then x0 - r1 > 0 by XREAL_1:52;
              then reconsider N = ].x0 - (x0 - r1),x0 + (x0 - r1).[ as
              Neighbourhood of x0 by RCOMP_1:def 7;
              take N;
              let x be real number such that
A57:          x in dom(f|X) & x in N;
A58:          dom (f|X) c= X by RELAT_1:87;
              then (f|X).x in l by A2,A6,A57,FUNCT_1:def 12;
              then (f|X).x in {s: s <= p} by XXREAL_1:231;
              then ex s st s = (f|X).x & s <= p;
              then
A59:          (f|X).x <= p + R by A48,XXREAL_0:2;
A60:          x in X /\ dom (f|X) by A57,A58,XBOOLE_0:def 4;
A61:          r1 in X /\ dom (f|X) by A53,XBOOLE_0:def 4;
              ex s st s = x & x0 - (x0-r1) < s & s < x0 + (x0-r1) by A57;
              then p - R <= (f|X).x by A9,A53,A60,A61,RFUNCT_2:45;
              then (f|X).x in [.p - R, p + R.] by A59;
              hence (f|X).x in N1 by A52;
            end;
          end;
          hence ex N being Neighbourhood of x0 st

for r1 be real number st r1 in dom(f|X) & r1 in N holds (f|X).r1 in N1;
        end;
        suppose f|X is non-increasing;
          then
A62:      f|X|X is non-increasing by RELAT_1:101;
          now per cases by A7,TARSKI:def 1;
            suppose (f|X).x0 in L;
              then consider N2 being Neighbourhood of (f|X).x0 such that
A63:          N2 c= L by RCOMP_1:39;
              consider N3 being Neighbourhood of (f|X).x0 such that
A64:          N3 c= N1 & N3 c= N2 by RCOMP_1:38;
              consider r be real number such that
A65:          r > 0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set M1 = (f|X).x0 - r/2;
              set M2 = (f|X).x0 + r/2;
A66:          r/2 > 0 by A65,XREAL_1:217;
              then
A67:          (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A68:          (f|X).x0 < (f|X).x0 + r/2 by A66,XREAL_1:31;
              then
A69:          (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A70:          (f|X).x0 < (f|X).x0 + r by A65,XREAL_1:31;
              then (f|X).x0 - r/2 < (f|X).x0 + r by A69,XXREAL_0:2;
              then
A71:          M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A67;
A72:          (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A66,XREAL_1:31;
              (f|X).x0 - r < (f|X).x0 + r - r by A70,XREAL_1:11;
              then (f|X).x0 - r < (f|X).x0 + r/2 by A68,XXREAL_0:2;
              then
A73:          M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A72;
              then
A74:          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[
 by A71,XXREAL_2:def 12;
              M1 in N2 by A64,A65,A71;
              then M1 in L by A63;
              then consider r1 such that
A75:          r1
              in dom (f|X) & r1 in X & M1 = (f|X).r1 by A2,A6,A8,PARTFUN2:78;
              M2 in N2 by A64,A65,A73;
              then M2 in L by A63;
              then consider r2 such that
A76:          r2
              in dom (f|X) & r2 in X & M2 = (f|X).r2 by A2,A6,A8,PARTFUN2:78;
              set R = min(r1 - x0,x0 - r2);
A77:          (f|X).x0 < (f|X).x0 + r/2 by A66,XREAL_1:31;
              then
A78:          M1 < (f|X).x0 by XREAL_1:21;
A79:          r1 <> x0 by A75,A77,XREAL_1:21;
              now
                assume
A80:            x0 > r1;
A81:            x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
                r1 in X /\ dom(f|X) by A75,XBOOLE_0:def 4;
                hence contradiction by A62,A75,A78,A80,A81,RFUNCT_2:46;
              end;
              then r1 > x0 by A79,XXREAL_0:1;
              then
A82:          r1 - x0 > 0 by XREAL_1:52;
A83:          M2 > (f|X).x0 by A66,XREAL_1:31;
A84:          x0 <> r2 by A66,A76,XREAL_1:31;
              now
                assume
A85:            r2 > x0;
A86:            x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
                r2 in X /\ dom (f|X) by A76,XBOOLE_0:def 4;
                hence contradiction by A62,A76,A83,A85,A86,RFUNCT_2:46;
              end;
              then x0 > r2 by A84,XXREAL_0:1;
              then x0 - r2 > 0 by XREAL_1:52;
              then R > 0 by A82,XXREAL_0:15;
              then reconsider N =].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
              take N;
              let x be real number;
              assume
A87:          x in dom (f|X) & x in N;
              then
A88:          ex s st s = x & x0 - R < s & s < x0 + R;
              then x0 < R + x by XREAL_1:21;
              then
A89:          x0 - x < R + x - x by XREAL_1:11;
              R <= x0 - r2 by XXREAL_0:17;
              then x0 - x < x0 - r2 by A89,XXREAL_0:2;
              then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
              then
A90:          x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
A91:          x - x0 < R by A88,XREAL_1:21;
              R <= r1 - x0 by XXREAL_0:17;
              then x - x0 < r1-x0 by A91,XXREAL_0:2;
              then
A92:          x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
A93:          x in X /\ dom(f|X) by A87,RELAT_1:87,XBOOLE_1:28;
              r2 in X /\ dom(f|X) by A76,XBOOLE_0:def 4;
              then
A94:          (f|X).x <= (f|X).r2 by A62,A90,A93,RFUNCT_2:46;
              r1 in X /\ dom(f|X) by A75,XBOOLE_0:def 4;
              then (f|X).r1 <= (f|X).x by A62,A92,A93,RFUNCT_2:46;
              then (f|X).x in [.M1,M2.] by A75,A76,A94;
              then (f|X).x in N3 by A65,A74;
              hence (f|X).x in N1 by A64;
            end;
            suppose
A95:          (f|X).x0 = p;
              then consider r be real number such that
A96:          r > 0 & N1 = ].p - r,p + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set R = r/2;
A97:          0 < R by A96,XREAL_1:217;
A98:          R < r by A96,XREAL_1:218;
              then
A99:          p + R < p + r by XREAL_1:8;
A100:         p - r < p by A96,XREAL_1:46;
A101:         p < p + R by A97,XREAL_1:31;
              then p - r < p + R by A100,XXREAL_0:2;
              then
A102:         p + R in ].p - r, p + r.[ by A99;
A103:         p - R < p by A97,XREAL_1:46;
              p < p + r by A96,XREAL_1:31;
              then
A104:         p - R < p + r by A103,XXREAL_0:2;
              p - r < p - R by A98,XREAL_1:17;
              then p - R in ].p - r, p + r.[ by A104;
              then
A105:         [.p - R, p + R.] c= N1 by A96,A102,XXREAL_2:def 12;
              p - R in {s : s < p} by A103;
              then p - R in L by XXREAL_1:229;
              then consider r1 such that
A106:         r1 in dom (f|X) & r1 in X & p - R = (f|X).r1 by A2,A6,A8,
PARTFUN2:78;
A107:         r1 <> x0 by A95,A97,A106,XREAL_1:46;
              now
                assume
A108:           x0 > r1;
A109:           x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
                r1 in X /\ dom (f|X) by A106,XBOOLE_0:def 4;

hence contradiction by A62,A95,A103,A106,A108,A109,RFUNCT_2:46;
              end;
              then r1 > x0 by A107,XXREAL_0:1;
              then r1 - x0 > 0 by XREAL_1:52;
              then reconsider N = ].x0 - (r1 - x0),x0 + (r1 - x0).[ as
              Neighbourhood of x0 by RCOMP_1:def 7;
              take N;
              let x be real number such that
A110:         x in dom(f|X) & x in N;
A111:         dom (f|X) c= X by RELAT_1:87;
              then (f|X).x in l by A2,A6,A110,FUNCT_1:def 12;
              then (f|X).x in {s: s <= p} by XXREAL_1:231;
              then ex s st s = (f|X).x & s <= p;
              then
A112:         (f|X).x <= p + R by A101,XXREAL_0:2;
A113:         x in X /\ dom (f|X) by A110,A111,XBOOLE_0:def 4;
A114:         r1 in X /\ dom (f|X) by A106,XBOOLE_0:def 4;
              ex s st s = x & x0 - (r1-x0) < s & s < x0 + (r1-x0) by A110;
              then p - R <= (f|X).x by A62,A106,A113,A114,RFUNCT_2:46;
              then (f|X).x in [.p - R, p + R.] by A112;
              hence (f|X).x in N1 by A105;
            end;
          end;
          hence ex N being Neighbourhood of x0 st

for r1 be real number st r1 in dom(f|X) & r1 in N holds (f|X).r1 in N1;
        end;
      end;
      hence ex N being Neighbourhood of x0 st
      for r1 be real number st r1 in dom(f|X) & r1 in N holds (f|X).r1 in N1;
    end;
    hence thesis by FCONT_1:4;
  end;
  hence thesis by FCONT_1:def 2;
end;

theorem Th22:
  X c= dom f & f|X is monotone &
  (ex p st f.:X = right_closed_halfline(p)) implies f|X is continuous
proof
  assume
A1: X c= dom f & f|X is monotone;
  given p such that
A2: f.:X = right_closed_halfline(p);
  set l = right_closed_halfline(p);
  set L = right_open_halfline(p);
  for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
  proof
    let x0 be real number;
        assume x0 in dom(f|X);
        then
A3:     x0 in X by RELAT_1:86;
    then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
    then
A4: x0 in dom (f|X) by RELAT_1:90;
    then
A5: (f|X).x0 in (f|X).:X by A3,FUNCT_1:def 12;
A6: (f|X).:X = f.:X by RELAT_1:162;
    then (f|X).x0 in {p} \/ L by A2,A5,XXREAL_1:427;
    then
A7: (f|X).x0 in {p} or (f|X).x0 in L by XBOOLE_0:def 3;
A8: L c= l by XXREAL_1:22;
    now
      let N1 be Neighbourhood of (f|X).x0;
      now per cases by A1,RFUNCT_2:def 6;
        suppose f|X is non-decreasing;
          then
A9:       f|X|X is non-decreasing;
          now per cases by A7,TARSKI:def 1;
            suppose (f|X).x0 in L;
              then consider N2 being Neighbourhood of (f|X).x0 such that
A10:          N2 c= L by RCOMP_1:39;
              consider N3 being Neighbourhood of (f|X).x0 such that
A11:          N3 c= N1 & N3 c= N2 by RCOMP_1:38;
              consider r be real number such that
A12:          r>0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set M1 = (f|X).x0 - r/2;
              set M2 = (f|X).x0 + r/2;
A13:          r/2 > 0 by A12,XREAL_1:217;
              then
A14:          (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A15:          (f|X).x0 < (f|X).x0 + r/2 by A13,XREAL_1:31;
              then
A16:          (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A17:          (f|X).x0 < (f|X).x0 + r by A12,XREAL_1:31;
              then (f|X).x0 - r/2 < (f|X).x0 + r by A16,XXREAL_0:2;
              then
A18:          M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A14;
A19:          (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A13,XREAL_1:31;
              (f|X).x0 - r < (f|X).x0 + r - r by A17,XREAL_1:11;
              then (f|X).x0 - r < (f|X).x0 + r/2 by A15,XXREAL_0:2;
              then
A20:          M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A19;
              then
A21:          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[
 by A18,XXREAL_2:def 12;
              M1 in N2 by A11,A12,A18;
              then M1 in L by A10;
              then consider r1 such that
A22:          r1 in dom (f|X) & r1 in
              X & M1 = (f|X).r1 by A2,A6,A8,PARTFUN2:78;
              M2 in N2 by A11,A12,A20;
              then M2 in L by A10;
              then consider r2 such that
A23:          r2 in dom (f|X) & r2 in
              X & M2 = (f|X).r2 by A2,A6,A8,PARTFUN2:78;
              set R = min(x0 - r1,r2 - x0);
A24:          (f|X).x0 < (f|X).x0 + r/2 by A13,XREAL_1:31;
              then
A25:          M1 < (f|X).x0 by XREAL_1:21;
A26:          r1 <> x0 by A22,A24,XREAL_1:21;
              now
                assume
A27:            x0 < r1;
A28:            x0 in X /\ dom( f|X) by A3,A4,XBOOLE_0:def 4;
                r1 in X /\ dom(f|X) by A22,XBOOLE_0:def 4;
                hence contradiction by A9,A22,A25,A27,A28,RFUNCT_2:45;
              end;
              then r1 < x0 by A26,XXREAL_0:1;
              then
A29:          x0 - r1 > 0 by XREAL_1:52;
A30:          M2 > (f|X).x0 by A13,XREAL_1:31;
A31:          x0 <> r2 by A13,A23,XREAL_1:31;
              now
                assume
A32:            r2 < x0;
A33:            x0 in X /\ dom(f|X) by A3,A4,XBOOLE_0:def 4;
                r2 in X /\ dom (f|X) by A23,XBOOLE_0:def 4;
                hence contradiction by A9,A23,A30,A32,A33,RFUNCT_2:45;
              end;
              then x0 < r2 by A31,XXREAL_0:1;
              then r2 - x0 > 0 by XREAL_1:52;
              then R > 0 by A29,XXREAL_0:15;
              then reconsider N = ].x0 - R,x0+ R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
              take N;
              let x be real number;
              assume
A34:          x in dom (f|X) & x in N;
              then
A35:          ex s st s = x & x0 - R < s & s < x0 + R;
              then x0 < R + x by XREAL_1:21;
              then
A36:          x0 - x < R + x - x by XREAL_1:11;
              R <= x0 - r1 by XXREAL_0:17;
              then x0 - x < x0 - r1 by A36,XXREAL_0:2;
              then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
              then
A37:          x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
A38:          x - x0 < R by A35,XREAL_1:21;
              R <= r2 - x0 by XXREAL_0:17;
              then x - x0 < r2 - x0 by A38,XXREAL_0:2;
              then
A39:          x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
A40:          x in X /\ dom (f|X) by A34,RELAT_1:87,XBOOLE_1:28;
              r2 in X /\ dom (f|X) by A23,XBOOLE_0:def 4;
              then
A41:          (f|X).x <= (f|X).r2 by A9,A39,A40,RFUNCT_2:45;
              r1 in X /\ dom (f|X) by A22,XBOOLE_0:def 4;
              then (f|X).r1 <= (f|X).x by A9,A37,A40,RFUNCT_2:45;
              then (f|X).x in [.M1,M2.] by A22,A23,A41;
              then (f|X).x in N3 by A12,A21;
              hence (f|X).x in N1 by A11;
            end;
            suppose
A42:          (f|X).x0 = p;
              then consider r be real number such that
A43:          r > 0 & N1 = ].p - r,p + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set R = r/2;
A44:          0 < R by A43,XREAL_1:217;
A45:          R < r by A43,XREAL_1:218;
              then
A46:          p + R < p + r by XREAL_1:8;
A47:          p - r < p by A43,XREAL_1:46;
A48:          p < p + R by A44,XREAL_1:31;
              then p - r < p + R by A47,XXREAL_0:2;
              then
A49:          p + R in ].p - r, p + r.[ by A46;
A50:          p - R < p by A44,XREAL_1:46;
              p < p + r by A43,XREAL_1:31;
              then
A51:          p - R < p + r by A50,XXREAL_0:2;
              p - r < p - R by A45,XREAL_1:17;
              then p - R in ].p - r, p + r.[ by A51;
              then
A52:          [.p - R, p + R.] c= N1 by A43,A49,XXREAL_2:def 12;
              p + R in {s : p < s} by A48;
              then p + R in L by XXREAL_1:230;
              then consider r1 such that
A53:          r1 in dom (f|X) & r1 in
              X & p + R = (f|X).r1 by A2,A6,A8,PARTFUN2:78;
A54:          r1 <> x0 by A42,A44,A53,XREAL_1:31;
              now
                assume
A55:            x0 > r1;
A56:            x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
                r1 in X /\ dom (f|X) by A53,XBOOLE_0:def 4;
                hence contradiction by A9,A42,A48,A53,A55,A56,RFUNCT_2:45;
              end;
              then r1 > x0 by A54,XXREAL_0:1;
              then r1 - x0 > 0 by XREAL_1:52;
              then reconsider N = ].x0 - (r1 - x0),x0 + (r1 - x0).[ as
              Neighbourhood of x0 by RCOMP_1:def 7;
              take N;
              let x be real number such that
A57:          x in dom(f|X) & x in N;
A58:          dom (f|X) c= X by RELAT_1:87;
              then (f|X).x in l by A2,A6,A57,FUNCT_1:def 12;
              then (f|X).x in {s: p <= s} by XXREAL_1:232;
              then ex s st s = (f|X).x & p <= s;
              then
A59:          p - R <= (f|X).x by A50,XXREAL_0:2;
A60:          x in X /\ dom (f|X) by A57,A58,XBOOLE_0:def 4;
A61:          r1 in X /\ dom (f|X) by A53,XBOOLE_0:def 4;
              ex s st s = x & x0 - (r1-x0) < s & s < x0 + (r1-x0) by A57;
              then p + R >= (f|X).x by A9,A53,A60,A61,RFUNCT_2:45;
              then (f|X).x in [.p - R, p + R.] by A59;
              hence (f|X).x in N1 by A52;
            end;
          end;
          hence ex N being Neighbourhood of x0 st

for r1 be real number st r1 in dom(f|X) & r1 in N holds (f|X).r1 in N1;
        end;
        suppose f|X is non-increasing;
          then
A62:      f|X|X is non-increasing by RELAT_1:101;
          now per cases by A7,TARSKI:def 1;
            suppose (f|X).x0 in L;
              then consider N2 being Neighbourhood of (f|X).x0 such that
A63:          N2 c= L by RCOMP_1:39;
              consider N3 being Neighbourhood of (f|X).x0 such that
A64:          N3 c= N1 & N3 c= N2 by RCOMP_1:38;
              consider r be real number such that
A65:          r > 0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set M1 = (f|X).x0 - r/2;
              set M2 = (f|X).x0 + r/2;
A66:          r/2 > 0 by A65,XREAL_1:217;
              then
A67:          (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A68:          (f|X).x0 < (f|X).x0 + r/2 by A66,XREAL_1:31;
              then
A69:          (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A70:          (f|X).x0 < (f|X).x0 + r by A65,XREAL_1:31;
              then (f|X).x0 - r/2 < (f|X).x0 + r by A69,XXREAL_0:2;
              then
A71:          M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A67;
A72:          (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A66,XREAL_1:31;
              (f|X).x0 - r < (f|X).x0 + r - r by A70,XREAL_1:11;
              then (f|X).x0 - r < (f|X).x0 + r/2 by A68,XXREAL_0:2;
              then
A73:          M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A72;
              then
A74:          [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[
 by A71,XXREAL_2:def 12;
              M1 in N2 by A64,A65,A71;
              then M1 in L by A63;
              then consider r1 such that
A75:          r1 in dom (f|X) & r1 in
              X & M1 = (f|X).r1 by A2,A6,A8,PARTFUN2:78;
              M2 in N2 by A64,A65,A73;
              then M2 in L by A63;
              then consider r2 such that
A76:          r2 in dom (f|X) & r2 in
              X & M2 = (f|X).r2 by A2,A6,A8,PARTFUN2:78;
              set R = min(r1 - x0,x0 - r2);
A77:          (f|X).x0 < (f|X).x0 + r/2 by A66,XREAL_1:31;
              then
A78:          M1 < (f|X).x0 by XREAL_1:21;
A79:          r1 <> x0 by A75,A77,XREAL_1:21;
              now
                assume
A80:            x0 > r1;
A81:            x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
                r1 in X /\ dom(f|X) by A75,XBOOLE_0:def 4;
                hence contradiction by A62,A75,A78,A80,A81,RFUNCT_2:46;
              end;
              then r1 > x0 by A79,XXREAL_0:1;
              then
A82:          r1 - x0 > 0 by XREAL_1:52;
A83:          M2 > (f|X).x0 by A66,XREAL_1:31;
A84:          x0 <> r2 by A66,A76,XREAL_1:31;
              now
                assume
A85:            r2 > x0;
A86:            x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
                r2 in X /\ dom (f|X) by A76,XBOOLE_0:def 4;
                hence contradiction by A62,A76,A83,A85,A86,RFUNCT_2:46;
              end;
              then x0 > r2 by A84,XXREAL_0:1;
              then x0 - r2 > 0 by XREAL_1:52;
              then R > 0 by A82,XXREAL_0:15;
              then reconsider N =].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
              take N;
              let x be real number;
              assume
A87:          x in dom (f|X) & x in N;
              then
A88:          ex s st s = x & x0 - R < s & s < x0 + R;
              then x0 < R + x by XREAL_1:21;
              then
A89:          x0 - x < R + x - x by XREAL_1:11;
              R <= x0 - r2 by XXREAL_0:17;
              then x0 - x < x0 - r2 by A89,XXREAL_0:2;
              then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
              then
A90:          x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
A91:          x - x0 < R by A88,XREAL_1:21;
              R <= r1 - x0 by XXREAL_0:17;
              then x - x0 < r1-x0 by A91,XXREAL_0:2;
              then
A92:          x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
A93:          x in X /\ dom(f|X) by A87,RELAT_1:87,XBOOLE_1:28;
              r2 in X /\ dom(f|X) by A76,XBOOLE_0:def 4;
              then
A94:          (f|X).x <= (f|X).r2 by A62,A90,A93,RFUNCT_2:46;
              r1 in X /\ dom(f|X) by A75,XBOOLE_0:def 4;
              then (f|X).r1 <= (f|X).x by A62,A92,A93,RFUNCT_2:46;
              then (f|X).x in [.M1,M2.] by A75,A76,A94;
              then (f|X).x in N3 by A65,A74;
              hence (f|X).x in N1 by A64;
            end;
            suppose
A95:          (f|X).x0 = p;
              then consider r be real number such that
A96:          r > 0 & N1 = ].p - r,p + r.[ by RCOMP_1:def 7;
              reconsider r as Real by XREAL_0:def 1;
              set R = r/2;
A97:          0 < R by A96,XREAL_1:217;
A98:          R < r by A96,XREAL_1:218;
              then
A99:          p + R < p + r by XREAL_1:8;
A100:         p - r < p by A96,XREAL_1:46;
A101:         p < p + R by A97,XREAL_1:31;
              then p - r < p + R by A100,XXREAL_0:2;
              then
A102:         p + R in ].p - r, p + r.[ by A99;
A103:         p - R < p by A97,XREAL_1:46;
              p < p + r by A96,XREAL_1:31;
              then
A104:         p - R < p + r by A103,XXREAL_0:2;
              p - r < p - R by A98,XREAL_1:17;
              then p - R in ].p - r, p + r.[ by A104;
              then
A105:         [.p - R, p + R.] c= N1 by A96,A102,XXREAL_2:def 12;
              p + R in {s : p < s} by A101;
              then p + R in L by XXREAL_1:230;
              then consider r1 such that
A106:         r1 in dom (f|X) & r1 in X & p + R = (f|X).r1 by A2,A6,A8,
PARTFUN2:78;
A107:         r1 <> x0 by A95,A97,A106,XREAL_1:31;
              now
                assume
A108:           x0 < r1;
A109:           x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
                r1 in X /\ dom (f|X) by A106,XBOOLE_0:def 4;

hence contradiction by A62,A95,A101,A106,A108,A109,RFUNCT_2:46;
              end;
              then r1 < x0 by A107,XXREAL_0:1;
              then x0 - r1 > 0 by XREAL_1:52;
              then reconsider N = ].x0 - (x0 - r1),x0 + (x0 - r1).[ as
              Neighbourhood of x0 by RCOMP_1:def 7;
              take N;
              let x be real number such that
A110:         x in dom(f|X) & x in N;
A111:         dom (f|X) c= X by RELAT_1:87;
              then (f|X).x in l by A2,A6,A110,FUNCT_1:def 12;
              then (f|X).x in {s: p <= s} by XXREAL_1:232;
              then ex s st s = (f|X).x & p <= s;
              then
A112:         p - R <= (f|X).x by A103,XXREAL_0:2;
A113:         x in X /\ dom (f|X) by A110,A111,XBOOLE_0:def 4;
A114:         r1 in X /\ dom (f|X) by A106,XBOOLE_0:def 4;
              ex s st s = x & x0 - (x0-r1) < s & s < x0 + (x0-r1) by A110;
              then p + R >= (f|X).x by A62,A106,A113,A114,RFUNCT_2:46;
              then (f|X).x in [.p - R, p + R.] by A112;
              hence (f|X).x in N1 by A105;
            end;
          end;
          hence ex N being Neighbourhood of x0 st

for r1 be real number st r1 in dom(f|X) & r1 in N holds (f|X).r1 in N1;
        end;
      end;
      hence ex N being Neighbourhood of x0 st
      for r1 be real number st r1 in dom(f|X) & r1 in N holds (f|X).r1 in N1;
    end;
    hence thesis by FCONT_1:4;
  end;
  hence thesis by FCONT_1:def 2;
end;

theorem Th23:
  X c= dom f & f|X is monotone & (ex p,g st f.:X = ].p,g.[) implies
  f|X is continuous
proof
  assume
A1: X c= dom f & f|X is monotone;
  given p,g such that
A2: f.:X = ].p,g.[;
  set L = ].p,g.[;
  now per cases by A1,RFUNCT_2:def 6;
    suppose f|X is non-decreasing;
      then
A3:   f|X|X is non-decreasing;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
        assume x0 in dom(f|X);
        then
A4:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A5:     x0 in dom (f|X) by RELAT_1:90;
        then
A6:     (f|X).x0 in (f|X).:X by A4,FUNCT_1:def 12;
A7:     (f|X).:X = f.:X by RELAT_1:162;
A8:     (f|X).x0 in L by A2,A6,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A9:       N2 c= L by A8,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A10:      N3 c= N1 & N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A11:      r>0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
          set M1 = (f|X).x0 - r/2;
          set M2 = (f|X).x0 + r/2;
A12:      r/2 > 0 by A11,XREAL_1:217;
          then
A13:      (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A14:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31;
          then
A15:      (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A16:      (f|X).x0 < (f|X).x0 + r by A11,XREAL_1:31;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A15,XXREAL_0:2;
          then
A17:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A13;
A18:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A12,XREAL_1:31;
          (f|X).x0 - r < (f|X).x0 + r - r by A16,XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A14,XXREAL_0:2;
          then
A19:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A18;
          then
A20:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A17,XXREAL_2:def 12;
          M1 in N2 by A10,A11,A17;
          then consider r1 such that
A21:      r1 in dom (f|X) & r1 in X & M1 = (f|X).r1 by A2,A7,A9,PARTFUN2:78;
          M2 in N2 by A10,A11,A19;
          then consider r2 such that
A22:      r2 in dom (f|X) & r2 in X & M2 = (f|X).r2 by A2,A7,A9,PARTFUN2:78;
          set R = min(x0 - r1,r2 - x0);
A23:      (f|X).x0 < (f|X).x0 + r/2 by A12,XREAL_1:31;
          then
A24:      M1 < (f|X).x0 by XREAL_1:21;
A25:      r1 <> x0 by A21,A23,XREAL_1:21;
          now
            assume
A26:        x0 < r1;
A27:        x0 in X /\ dom( f|X) by A4,A5,XBOOLE_0:def 4;
            r1 in X /\ dom(f|X) by A21,XBOOLE_0:def 4;
            hence contradiction by A3,A21,A24,A26,A27,RFUNCT_2:45;
          end;
          then r1 < x0 by A25,XXREAL_0:1;
          then
A28:      x0 - r1 > 0 by XREAL_1:52;
A29:      M2 > (f|X).x0 by A12,XREAL_1:31;
A30:      x0 <> r2 by A12,A22,XREAL_1:31;
          now
            assume
A31:        r2 < x0;
A32:        x0 in X /\ dom(f|X) by A4,A5,XBOOLE_0:def 4;
            r2 in X /\ dom (f|X) by A22,XBOOLE_0:def 4;
            hence contradiction by A3,A22,A29,A31,A32,RFUNCT_2:45;
          end;
          then x0 < r2 by A30,XXREAL_0:1;
          then r2 - x0 > 0 by XREAL_1:52;
          then R > 0 by A28,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume
A33:      x in dom (f|X) & x in N;
          then
A34:      ex s st s = x & x0 - R < s & s < x0 + R;
          then x0 < R + x by XREAL_1:21;
          then
A35:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r1 by XXREAL_0:17;
          then x0 - x < x0 - r1 by A35,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
          then
A36:      x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
A37:      x - x0 < R by A34,XREAL_1:21;
          R <= r2 - x0 by XXREAL_0:17;
          then x - x0 < r2 - x0 by A37,XXREAL_0:2;
          then
A38:      x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
A39:      x in X /\ dom (f|X) by A33,RELAT_1:87,XBOOLE_1:28;
          r2 in X /\ dom (f|X) by A22,XBOOLE_0:def 4;
          then
A40:      (f|X).x <= (f|X).r2 by A3,A38,A39,RFUNCT_2:45;
          r1 in X /\ dom (f|X) by A21,XBOOLE_0:def 4;
          then (f|X).r1 <= (f|X).x by A3,A36,A39,RFUNCT_2:45;
          then (f|X).x in [.M1,M2.] by A21,A22,A40;
          then (f|X).x in N3 by A11,A20;
          hence (f|X).x in N1 by A10;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
    suppose f|X is non-increasing;
      then
A41:  f|X|X is non-increasing by RELAT_1:101;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
        assume x0 in dom(f|X);
        then
A42:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A43:    x0 in dom(f|X) by RELAT_1:90;
        then
A44:    (f|X).x0 in (f|X).:X by A42,FUNCT_1:def 12;
A45:    (f|X).:X = f.:X by RELAT_1:162;
A46:    (f|X).x0 in L by A2,A44,RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider N2 being Neighbourhood of (f|X).x0 such that
A47:      N2 c= L by A46,RCOMP_1:39;
          consider N3 being Neighbourhood of (f|X).x0 such that
A48:      N3 c= N1 & N3 c= N2 by RCOMP_1:38;
          consider r be real number such that
A49:      r > 0 & N3 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
          set M1 = (f|X).x0 - r/2;
          set M2 = (f|X).x0 + r/2;
A50:      r/2 > 0 by A49,XREAL_1:217;
          then
A51:      (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A52:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31;
          then
A53:      (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A54:      (f|X).x0 < (f|X).x0 + r by A49,XREAL_1:31;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A53,XXREAL_0:2;
          then
A55:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A51;
A56:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A50,XREAL_1:31;
          (f|X).x0 - r < (f|X).x0 + r - r by A54,XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A52,XXREAL_0:2;
          then
A57:      M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A56;
          then
A58:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A55,XXREAL_2:def 12;
          M1 in N2 by A48,A49,A55;
          then consider r1 such that
A59:      r1 in dom (f|X) & r1 in X & M1 = (f|X).r1 by A2,A45,A47,PARTFUN2:78;
          M2 in N2 by A48,A49,A57;
          then consider r2 such that
A60:      r2 in dom (f|X) & r2 in X & M2 = (f|X).r2 by A2,A45,A47,PARTFUN2:78;
          set R = min(r1 - x0,x0 - r2);
A61:      (f|X).x0 < (f|X).x0 + r/2 by A50,XREAL_1:31;
          then
A62:      M1 < (f|X).x0 by XREAL_1:21;
A63:      r1 <> x0 by A59,A61,XREAL_1:21;
          now
            assume
A64:        x0 > r1;
A65:        x0 in X /\ dom (f|X) by A42,A43,XBOOLE_0:def 4;
            r1 in X /\ dom(f|X) by A59,XBOOLE_0:def 4;
            hence contradiction by A41,A59,A62,A64,A65,RFUNCT_2:46;
          end;
          then r1 > x0 by A63,XXREAL_0:1;
          then
A66:      r1 - x0 > 0 by XREAL_1:52;
A67:      M2 > (f|X).x0 by A50,XREAL_1:31;
A68:      x0 <> r2 by A50,A60,XREAL_1:31;
          now
            assume
A69:        r2 > x0;
A70:        x0 in X /\ dom (f|X) by A42,A43,XBOOLE_0:def 4;
            r2 in X /\ dom (f|X) by A60,XBOOLE_0:def 4;
            hence contradiction by A41,A60,A67,A69,A70,RFUNCT_2:46;
          end;
          then x0 > r2 by A68,XXREAL_0:1;
          then x0 - r2 > 0 by XREAL_1:52;
          then R > 0 by A66,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume
A71:      x in dom (f|X) & x in N;
          then
A72:      ex s st s = x & x0 - R < s & s < x0 + R;
          then x0 < R + x by XREAL_1:21;
          then
A73:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r2 by XXREAL_0:17;
          then x0 - x < x0 - r2 by A73,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
          then
A74:      x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
A75:      x - x0 < R by A72,XREAL_1:21;
          R <= r1 - x0 by XXREAL_0:17;
          then x - x0 < r1-x0 by A75,XXREAL_0:2;
          then
A76:      x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
A77:      x in X /\ dom(f|X) by A71,RELAT_1:87,XBOOLE_1:28;
          r2 in X /\ dom(f|X) by A60,XBOOLE_0:def 4;
          then
A78:      (f|X).x <= (f|X).r2 by A41,A74,A77,RFUNCT_2:46;
          r1 in X /\ dom(f|X) by A59,XBOOLE_0:def 4;
          then (f|X).r1 <= (f|X).x by A41,A76,A77,RFUNCT_2:46;
          then (f|X).x in [.M1,M2.] by A59,A60,A78;
          then (f|X).x in N3 by A49,A58;
          hence (f|X).x in N1 by A48;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
  end;
  hence thesis;
end;

theorem Th24:
  X c= dom f & f|X is monotone & f.:X = REAL implies f|X is continuous
proof
  assume
A1: X c= dom f & f|X is monotone & f.:X = REAL;
  now per cases by A1,RFUNCT_2:def 6;
    suppose f|X is non-decreasing;
      then
A2:   f|X|X is non-decreasing;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
        assume x0 in dom(f|X);
        then
A3:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A4:     x0 in dom (f|X) by RELAT_1:90;
A5:     (f|X).:X = f.:X by RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider r be real number such that
A6:       r>0 & N1 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
          set M1 = (f|X).x0 - r/2;
          set M2 = (f|X).x0 + r/2;
A7:       r/2 > 0 by A6,XREAL_1:217;
          then
A8:       (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A9:       (f|X).x0 < (f|X).x0 + r/2 by A7,XREAL_1:31;
          then
A10:      (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A11:      (f|X).x0 < (f|X).x0 + r by A6,XREAL_1:31;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A10,XXREAL_0:2;
          then
A12:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A8;
A13:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A7,XREAL_1:31;
          (f|X).x0 - r < (f|X).x0 + r - r by A11,XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A9,XXREAL_0:2;
          then M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A13;
          then
A14:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A12,XXREAL_2:def 12;
          consider r1 such that
A15:      r1 in dom (f|X) & r1 in X & M1 = (f|X).r1 by A1,A5,PARTFUN2:78;
          consider r2 such that
A16:      r2 in dom (f|X) & r2 in X & M2 = (f|X).r2 by A1,A5,PARTFUN2:78;
          set R = min(x0 - r1,r2 - x0);
A17:      (f|X).x0 < (f|X).x0 + r/2 by A7,XREAL_1:31;
          then
A18:      M1 < (f|X).x0 by XREAL_1:21;
A19:      r1 <> x0 by A15,A17,XREAL_1:21;
          now
            assume
A20:        x0 < r1;
A21:        x0 in X /\ dom (f|X) by A3,A4,XBOOLE_0:def 4;
            r1 in X /\ dom(f|X) by A15,XBOOLE_0:def 4;
            hence contradiction by A2,A15,A18,A20,A21,RFUNCT_2:45;
          end;
          then r1 < x0 by A19,XXREAL_0:1;
          then
A22:      x0 - r1 > 0 by XREAL_1:52;
A23:      M2 > (f|X).x0 by A7,XREAL_1:31;
A24:      x0 <> r2 by A7,A16,XREAL_1:31;
          now
            assume
A25:        r2 < x0;
A26:        x0 in X /\ dom(f|X) by A3,A4,XBOOLE_0:def 4;
            r2 in X /\ dom (f|X) by A16,XBOOLE_0:def 4;
            hence contradiction by A2,A16,A23,A25,A26,RFUNCT_2:45;
          end;
          then x0 < r2 by A24,XXREAL_0:1;
          then r2 - x0 > 0 by XREAL_1:52;
          then R > 0 by A22,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume
A27:      x in dom (f|X) & x in N;
          then
A28:      ex s st s = x & x0 - R < s & s < x0 + R;
          then x0 < R + x by XREAL_1:21;
          then
A29:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r1 by XXREAL_0:17;
          then x0 - x < x0 - r1 by A29,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r1) by XREAL_1:26;
          then
A30:      x - x0 + x0 > r1 - x0 + x0 by XREAL_1:8;
A31:      x - x0 < R by A28,XREAL_1:21;
          R <= r2 - x0 by XXREAL_0:17;
          then x - x0 < r2 - x0 by A31,XXREAL_0:2;
          then
A32:      x - x0 + x0 < r2 - x0 + x0 by XREAL_1:8;
A33:      x in X /\ dom (f|X) by A27,RELAT_1:87,XBOOLE_1:28;
          r2 in X /\ dom (f|X) by A16,XBOOLE_0:def 4;
          then
A34:      (f|X).x <= (f|X).r2 by A2,A32,A33,RFUNCT_2:45;
          r1 in X /\ dom (f|X) by A15,XBOOLE_0:def 4;
          then (f|X).r1 <= (f|X).x by A2,A30,A33,RFUNCT_2:45;
          then (f|X).x in [.M1,M2.] by A15,A16,A34;
          hence (f|X).x in N1 by A6,A14;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
    suppose f|X is non-increasing;
      then
A35:  f|X|X is non-increasing by RELAT_1:101;
      for x0 be real number st x0 in dom(f|X) holds f|X is_continuous_in x0
      proof
        let x0 be real number;
        assume x0 in dom(f|X);
        then
A36:     x0 in X by RELAT_1:86;
        then x0 in dom f /\ X by A1,XBOOLE_0:def 4;
        then
A37:    x0 in dom (f|X) by RELAT_1:90;
A38:    (f|X).:X = f.:X by RELAT_1:162;
        now
          let N1 be Neighbourhood of (f|X).x0;
          consider r be real number such that
A39:      r > 0 & N1 = ].(f|X).x0 - r,(f|X).x0 + r.[ by RCOMP_1:def 7;
          reconsider r as Real by XREAL_0:def 1;
          set M1 = (f|X).x0 - r/2;
          set M2 = (f|X).x0 + r/2;
A40:      r/2 > 0 by A39,XREAL_1:217;
          then
A41:      (f|X).x0 - r < (f|X).x0 - r + r/2 by XREAL_1:31;
A42:      (f|X).x0 < (f|X).x0 + r/2 by A40,XREAL_1:31;
          then
A43:      (f|X).x0 - r/2 < (f|X).x0 by XREAL_1:21;
A44:      (f|X).x0 < (f|X).x0 + r by A39,XREAL_1:31;
          then (f|X).x0 - r/2 < (f|X).x0 + r by A43,XXREAL_0:2;
          then
A45:      M1 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A41;
A46:      (f|X).x0 + r/2 < (f|X).x0 + r/2 + r/2 by A40,XREAL_1:31;
          (f|X).x0 - r < (f|X).x0 + r - r by A44,XREAL_1:11;
          then (f|X).x0 - r < (f|X).x0 + r/2 by A42,XXREAL_0:2;
          then M2 in ].(f|X).x0 - r,(f|X).x0 + r.[ by A46;
          then
A47:      [.M1,M2.] c= ].(f|X).x0 - r,(f|X).x0 + r.[ by A45,XXREAL_2:def 12;
          consider r1 such that
A48:      r1 in dom (f|X) & r1 in X & M1 = (f|X).r1 by A1,A38,PARTFUN2:78;
          consider r2 such that
A49:      r2 in dom (f|X) & r2 in X & M2 = (f|X).r2 by A1,A38,PARTFUN2:78;
          set R = min(r1 - x0,x0 - r2);
A50:      (f|X).x0 < (f|X).x0 + r/2 by A40,XREAL_1:31;
          then
A51:      M1 < (f|X).x0 by XREAL_1:21;
A52:      r1 <> x0 by A48,A50,XREAL_1:21;
          now
            assume
A53:        x0 > r1;
A54:        x0 in X /\ dom (f|X) by A36,A37,XBOOLE_0:def 4;
            r1 in X /\ dom(f|X) by A48,XBOOLE_0:def 4;
            hence contradiction by A35,A48,A51,A53,A54,RFUNCT_2:46;
          end;
          then r1 > x0 by A52,XXREAL_0:1;
          then
A55:      r1 - x0 > 0 by XREAL_1:52;
A56:      M2 > (f|X).x0 by A40,XREAL_1:31;
A57:      x0 <> r2 by A40,A49,XREAL_1:31;
          now
            assume
A58:        r2 > x0;
A59:        x0 in X /\ dom (f|X) by A36,A37,XBOOLE_0:def 4;
            r2 in X /\ dom (f|X) by A49,XBOOLE_0:def 4;
            hence contradiction by A35,A49,A56,A58,A59,RFUNCT_2:46;
          end;
          then x0 > r2 by A57,XXREAL_0:1;
          then x0 - r2 > 0 by XREAL_1:52;
          then R > 0 by A55,XXREAL_0:15;
          then reconsider N = ].x0 - R,x0 + R.[ as Neighbourhood of x0 by
RCOMP_1:def 7;
          take N;
          let x be real number;
          assume
A60:      x in dom (f|X) & x in N;
          then
A61:      ex s st s = x & x0 - R < s & s < x0 + R;
          then x0 < R + x by XREAL_1:21;
          then
A62:      x0 - x < R + x - x by XREAL_1:11;
          R <= x0 - r2 by XXREAL_0:17;
          then x0 - x < x0 - r2 by A62,XXREAL_0:2;
          then -(x0 - x) > -(x0 - r2) by XREAL_1:26;
          then
A63:      x - x0 + x0 > r2 - x0 + x0 by XREAL_1:8;
A64:      x - x0 < R by A61,XREAL_1:21;
          R <= r1 - x0 by XXREAL_0:17;
          then x - x0 < r1-x0 by A64,XXREAL_0:2;
          then
A65:      x - x0 + x0 < r1 - x0 + x0 by XREAL_1:8;
A66:      x in X /\ dom(f|X) by A60,RELAT_1:87,XBOOLE_1:28;
          r2 in X /\ dom(f|X) by A49,XBOOLE_0:def 4;
          then
A67:      (f|X).x <= (f|X).r2 by A35,A63,A66,RFUNCT_2:46;
          r1 in X /\ dom(f|X) by A48,XBOOLE_0:def 4;
          then (f|X).r1 <= (f|X).x by A35,A65,A66,RFUNCT_2:46;
          then (f|X).x in [.M1,M2.] by A48,A49,A67;
          hence (f|X).x in N1 by A39,A47;
        end;
        hence thesis by FCONT_1:4;
      end;
      hence thesis by FCONT_1:def 2;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st
  (f|].p,g.[ is increasing or f|].p,g.[ is decreasing) &
  ].p,g.[ c= dom f holds (f|].p,g.[)"|(f.:].p,g.[) is continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  assume that
A1: f|].p,g.[ is increasing or f|].p,g.[ is decreasing and
A2: ].p,g.[ c= dom f;
  now per cases by A1;
    suppose f|].p,g.[ is increasing;
      then (f|].p,g.[)"|(f.:].p,g.[) is increasing by Th17;
      then (f|].p,g.[)"|(f.:].p,g.[) is non-decreasing;
      then
A3:   (f|].p,g.[)"|(f.:].p,g.[) is monotone;
      now
        let r be Real;
        assume r in f.:].p,g.[;
        then consider s such that
A4:     s in dom f & s in ].p,g.[ & r = f.s by PARTFUN2:78;
        s in dom f /\ ].p,g.[ & r = f.s by A4,XBOOLE_0:def 4;
        then s in dom (f|].p,g.[) & r = f.s by RELAT_1:90;
        then s in dom (f|].p,g.[) & r = (f|].p,g.[).s by FUNCT_1:70
;
        then r in rng (f|].p,g.[) by FUNCT_1:def 5;
        hence r in dom ((f|].p,g.[)") by FUNCT_1:55;
      end;
      then
A5:   f.:].p,g.[ c= dom ((f|].p,g.[)") by SUBSET_1:7;
      ((f|].p,g.[)").:(f.:].p,g.[) = ((f|].p,g.[)").:(rng (f|].p,g.[))
      by RELAT_1:148
        .= ((f|].p,g.[)").:(dom ((f|].p,g.[)")) by FUNCT_1:55
        .= rng ((f|].p,g.[)") by RELAT_1:146
        .= dom (f|].p,g.[) by FUNCT_1:55
        .= dom f /\ ].p,g.[ by RELAT_1:90
        .= ].p,g.[ by A2,XBOOLE_1:28;
      hence thesis by A3,A5,Th23;
    end;
    suppose f|].p,g.[ is decreasing;
      then (f|].p,g.[)"|(f.:].p,g.[) is decreasing by Th18;
      then (f|].p,g.[)"|(f.:].p,g.[) is non-increasing;
      then
A6:   (f|].p,g.[)"|(f.:].p,g.[) is monotone;
      now
        let r be Real;
        assume r in f.:].p,g.[;
        then consider s such that
A7:     s in dom f & s in ].p,g.[ & r = f.s by PARTFUN2:78;
        s in dom f /\ ].p,g.[ by A7,XBOOLE_0:def 4;
        then s in dom (f|].p,g.[) by RELAT_1:90;
        then s in dom (f|].p,g.[) & r = (f|].p,g.[).s by A7,FUNCT_1:70
;
        then r in rng (f|].p,g.[) by FUNCT_1:def 5;
        hence r in dom ((f|].p,g.[)") by FUNCT_1:55;
      end;
      then
A8:   f.:].p,g.[ c= dom ((f|].p,g.[)") by SUBSET_1:7;
      ((f|].p,g.[)").:(f.:].p,g.[) = ((f|].p,g.[)").:(rng (f|].p,g.[))
      by RELAT_1:148
        .= ((f|].p,g.[)").:(dom ((f|].p,g.[)")) by FUNCT_1:55
        .= rng ((f|].p,g.[)") by RELAT_1:146
        .= dom (f|].p,g.[) by FUNCT_1:55
        .= dom f /\ ].p,g.[ by RELAT_1:90
        .= ].p,g.[ by A2,XBOOLE_1:28;
      hence thesis by A6,A8,Th23;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st
  (f|left_open_halfline p is increasing or
  f|left_open_halfline p is decreasing) &
  left_open_halfline(p) c= dom f holds
  (f|left_open_halfline(p))"|(f.:left_open_halfline(p)) is continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = left_open_halfline(p);
  assume that
A1: f|L is increasing or f|L is decreasing and
A2: L c= dom f;
  now per cases by A1;
    suppose f|L is increasing;
      then (f|L)"|(f.:L) is increasing by Th17;
      then (f|L)"|(f.:L) is non-decreasing;
      then
A3:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A4:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L & r = f.s by A4,XBOOLE_0:def 4;
        then s in dom (f|L) & r = f.s by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A5:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      hence thesis by A3,A5,Th19;
    end;
    suppose f|L is decreasing;
      then (f|L)"|(f.:L) is decreasing by Th18;
      then (f|L)"|(f.:L) is non-increasing;
      then
A6:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A7:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L by A7,XBOOLE_0:def 4;
        then s in dom (f|L) by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by A7,FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A8:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      hence thesis by A6,A8,Th19;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st
  (f|right_open_halfline p is increasing or
  f|right_open_halfline p is decreasing) &
  right_open_halfline(p) c= dom f holds
  (f|right_open_halfline(p))"|(f.:right_open_halfline(p)) is continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = right_open_halfline(p);
  assume that
A1: f|L is increasing or f|L is decreasing and
A2: L c= dom f;
  now per cases by A1;
    suppose f|L is increasing;
      then (f|L)"|(f.:L) is increasing by Th17;
      then (f|L)"|(f.:L) is non-decreasing;
      then
A3:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A4:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L & r = f.s by A4,XBOOLE_0:def 4;
        then s in dom (f|L) & r = f.s by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A5:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      hence thesis by A3,A5,Th20;
    end;
    suppose f|L is decreasing;
      then (f|L)"|(f.:L) is decreasing by Th18;
      then (f|L)"|(f.:L) is non-increasing;
      then
A6:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A7:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L by A7,XBOOLE_0:def 4;
        then s in dom (f|L) by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by A7,FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A8:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      hence thesis by A6,A8,Th20;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st
  (f|left_closed_halfline p is increasing or
  f|left_closed_halfline p is decreasing) &
  left_closed_halfline(p) c= dom f holds
  (f|left_closed_halfline(p))"|(f.:left_closed_halfline(p)) is continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = left_closed_halfline(p);
  assume that
A1: f|L is increasing or f|L is decreasing and
A2: L c= dom f;
  now per cases by A1;
    suppose f|L is increasing;
      then (f|L)"|(f.:L) is increasing by Th17;
      then (f|L)"|(f.:L) is non-decreasing;
      then
A3:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A4:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L & r = f.s by A4,XBOOLE_0:def 4;
        then s in dom (f|L) & r = f.s by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A5:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      hence thesis by A3,A5,Th21;
    end;
    suppose f|L is decreasing;
      then (f|L)"|(f.:L) is decreasing by Th18;
      then (f|L)"|(f.:L) is non-increasing;
      then
A6:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A7:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L by A7,XBOOLE_0:def 4;
        then s in dom (f|L) by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by A7,FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A8:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      hence thesis by A6,A8,Th21;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st
  (f|right_closed_halfline p is increasing or
  f|right_closed_halfline p is decreasing) &
  right_closed_halfline(p) c= dom f holds
  (f|right_closed_halfline(p))"|(f.:right_closed_halfline(p)) is continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = right_closed_halfline(p);
  assume that
A1: f|L is increasing or f|L is decreasing and
A2: L c= dom f;
  now per cases by A1;
    suppose f|L is increasing;
      then (f|L)"|(f.:L) is increasing by Th17;
      then (f|L)"|(f.:L) is non-decreasing;
      then
A3:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A4:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L & r = f.s by A4,XBOOLE_0:def 4;
        then s in dom (f|L) & r = f.s by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A5:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      hence thesis by A3,A5,Th22;
    end;
    suppose f|L is decreasing;
      then (f|L)"|(f.:L) is decreasing by Th18;
      then (f|L)"|(f.:L) is non-increasing;
      then
A6:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A7:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L by A7,XBOOLE_0:def 4;
        then s in dom (f|L) by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by A7,FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A8:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= L by A2,XBOOLE_1:28;
      hence thesis by A6,A8,Th22;
    end;
  end;
  hence thesis;
end;

theorem
  for f be one-to-one PartFunc of REAL,REAL st
  (f|[#]REAL is increasing or f|[#]REAL is decreasing)
   & f is total holds f"|rng f is continuous
proof
  let f be one-to-one PartFunc of REAL,REAL;
  set L = [#] REAL;
  assume that
A1: f|[#]REAL is increasing or f|[#]REAL is decreasing and
A2: f is total;
A3: dom f = [#] REAL by A2,PARTFUN1:def 4;
  now per cases by A1;
    suppose f|L is increasing;
      then (f|L)"|(f.:L) is increasing by Th17;
      then (f|L)"|(f.:L) is non-decreasing;
      then
A4:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A5:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L & r = f.s by A5,XBOOLE_0:def 4;
        then s in dom (f|L) & r = f.s by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A6:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= REAL by A3;
      then (f|L)"|(f.:L) is continuous by A4,A6,Th24;
      then (f|L)"|rng f is continuous by A3,RELAT_1:146;
      hence thesis by A3,RELAT_1:97;
    end;
    suppose f|L is decreasing;
      then (f|L)"|(f.:L) is decreasing by Th18;
      then (f|L)"|(f.:L) is non-increasing;
      then
A7:   (f|L)"|(f.:L) is monotone;
      now
        let r be Real;
        assume r in f.:L;
        then consider s such that
A8:     s in dom f & s in L & r = f.s by PARTFUN2:78;
        s in dom f /\ L by A8,XBOOLE_0:def 4;
        then s in dom (f|L) by RELAT_1:90;
        then s in dom (f|L) & r = (f|L).s by A8,FUNCT_1:70;
        then r in rng (f|L) by FUNCT_1:def 5;
        hence r in dom ((f|L)") by FUNCT_1:55;
      end;
      then
A9:   f.:L c= dom ((f|L)") by SUBSET_1:7;
      ((f|L)").:(f.:L) = ((f|L)").:(rng (f|L)) by RELAT_1:148
        .= ((f|L)").:(dom ((f|L)")) by FUNCT_1:55
        .= rng ((f|L)") by RELAT_1:146
        .= dom (f|L) by FUNCT_1:55
        .= dom f /\ L by RELAT_1:90
        .= REAL by A3;
      then (f|L)"|(f.:L) is continuous by A7,A9,Th24;
      then (f|L)"|rng f is continuous by A3,RELAT_1:146;
      hence thesis by A3,RELAT_1:97;
    end;
  end;
  hence thesis;
end;

theorem
  ].p,g.[ c= dom f & f|].p,g.[ is continuous &
  (f|].p,g.[ is increasing or f|].p,g.[ is decreasing) implies
  rng (f|].p,g.[) is open
proof
  assume that
A0: ].p,g.[ c= dom f and
A1: f|].p,g.[ is continuous and
A2: f|].p,g.[ is increasing or f|].p,g.[ is decreasing;
  now
    set f1 = f|].p,g.[;
    let r1 be real number;
    assume r1 in rng f1;
    then consider x0 such that
A3: x0 in dom f1 & f1.x0 = r1 by PARTFUN1:26;
A4: x0 in dom f /\ ].p,g.[ by A3,RELAT_1:90;
    then x0 in dom f & x0 in ].p,g.[ by XBOOLE_0:def 4;
    then consider N be Neighbourhood of x0 such that
A5: N c= ].p,g.[ by RCOMP_1:39;
    consider r be real number such that
A6: 0 < r & N = ].x0 - r, x0 + r.[ by RCOMP_1:def 7;
    reconsider r as Real by XREAL_0:def 1;
A8: r/2 < r by A6,XREAL_1:218;
    then
A9: x0 - r < x0 - r/2 by XREAL_1:17;
A10: 0 < r/2 by A6,XREAL_1:217;
    then
A11: x0 - r/2 < x0 - 0 by XREAL_1:17;
    x0 < x0 + r by A6,XREAL_1:31;
    then x0 - r/2 < x0 + r by A11,XXREAL_0:2;
    then
A12: x0 - r/2 in ].x0 - r, x0 + r.[ by A9;
A13: x0 + r/2 < x0 + r by A8,XREAL_1:10;
A14: x0 - r < x0 by A6,XREAL_1:46;
A15: x0 < x0 + r/2 by A10,XREAL_1:31;
    then x0 - r < x0 + r/2 by A14,XXREAL_0:2;
    then
A16: x0 + r/2 in ].x0 - r, x0 + r.[ by A13;
    then
A17: [.x0 - r/2, x0 + r/2.] c= ].x0 - r, x0 + r.[ by A12,XXREAL_2:def 12;
Y:    [.x0 - r/2, x0 + r/2.] c= ].p,g.[ by A5,A6,A12,A16,XXREAL_2:def 12;
    then
A18: f|[.x0 - r/2, x0 + r/2.] is continuous  by A1,FCONT_1:17;
    set fm = f.(x0 - r/2);
    set fp = f.(x0 + r/2);
A19: x0 - r/2 < x0 + r/2 by A11,A15,XXREAL_0:2;
A20: N c= dom f by A0,A5,XBOOLE_1:1;
    then
A21: x0 + r/2 in ].p,g.[ /\ dom f by A5,A6,A16,XBOOLE_0:def 4;
A22: x0 - r/2 in ].p,g.[ /\ dom f by A5,A6,A12,A20,XBOOLE_0:def 4;
A23: r1 = f.x0 by A3,FUNCT_1:70;
    now per cases by A2;
      suppose
A24:    f|].p,g.[ is increasing;
        then fm < fp by A19,A21,A22,RFUNCT_2:43;
        then [.fp,fm.] = {} by XXREAL_1:29;
        then
A25:    [.fm,fp.] \/ [.fp,fm.] = [.fm,fp.];
        fm < f.x0 by A4,A11,A22,A24,RFUNCT_2:43;
        then
A26:    0 < f.x0 - fm by XREAL_1:52;
        set R = min(f.x0 - fm,fp - f.x0);
        f.x0 < fp by A4,A15,A21,A24,RFUNCT_2:43;
        then 0 < fp - f.x0 by XREAL_1:52;
        then 0 < R by A26,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        thus N1 c= rng f1
        proof
          let x;
          assume x in N1;
          then consider r2 such that
A27:      r2 = x & f.x0 - R < r2 & r2 < f.x0 + R by A23;
A28:      R <= f.x0 - fm & R <= fp - f.x0 by XXREAL_0:17;
          then f.x0 - (f.x0 - fm) <= f.x0 - R by XREAL_1:15;
          then
A29:      fm < r2 by A27,XXREAL_0:2;
          f.x0 + R <= f.x0 + (fp - f.x0) by A28,XREAL_1:9;
          then r2 < fp by A27,XXREAL_0:2;
          then
A30:      r2 in ].fm,fp.[ by A29;
X:        [.x0 - r/2, x0 + r/2.] c= dom f by Y,A0,XBOOLE_1:1;
          ].fm,fp.[ c= [.fm,fp.] by XXREAL_1:25;
          then consider s such that
A31:      s in [.x0 - r/2, x0 + r/2.] & x = f.s by A18,A19,A25,A27,A30,X,
FCONT_2:16;
          s in N by A6,A17,A31;
          then s in dom f /\ ].p,g.[ by A5,A20,XBOOLE_0:def 4;
          then
A32:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A31,FUNCT_1:70;
          hence thesis by A32,FUNCT_1:def 5;
        end;
      end;
      suppose
A33:    f|].p,g.[ is decreasing;
        then fp < fm by A19,A21,A22,RFUNCT_2:44;
        then [.fm,fp.] = {} by XXREAL_1:29;
        then
A34:    [.fm,fp.] \/ [.fp,fm.] = [.fp,fm.];
        f.x0 < fm by A4,A11,A22,A33,RFUNCT_2:44;
        then
A35:    0 < fm - f.x0 by XREAL_1:52;
        set R = min(fm - f.x0,f.x0 - fp);
        fp < f.x0 by A4,A15,A21,A33,RFUNCT_2:44;
        then 0 < f.x0 - fp by XREAL_1:52;
        then 0 < R by A35,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        thus N1 c= rng f1
        proof
          let x;
          assume x in N1;
          then consider r2 such that
A36:      r2 = x & f.x0 - R < r2 & r2 < f.x0 + R by A23;
A37:      R <= fm - f.x0 & R <= f.x0 - fp by XXREAL_0:17;
          then f.x0 - (f.x0 - fp) <= f.x0 - R by XREAL_1:15;
          then
A38:      fp < r2 by A36,XXREAL_0:2;
          f.x0 + R <= f.x0 + (fm - f.x0) by A37,XREAL_1:9;
          then r2 < fm by A36,XXREAL_0:2;
          then
A39:      r2 in ].fp,fm.[ by A38;
X:        [.x0 - r/2, x0 + r/2.] c= dom f by Y,A0,XBOOLE_1:1;
          ].fp,fm.[ c= [.fp,fm.] by XXREAL_1:25;
          then consider s such that
A40:      s in [.x0 - r/2, x0 + r/2.] & x = f.s by A18,A19,A34,A36,A39,X,
FCONT_2:16;
          s in N by A6,A17,A40;
          then s in dom f /\ ].p,g.[ by A5,A20,XBOOLE_0:def 4;
          then
A41:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A40,FUNCT_1:70;
          hence thesis by A41,FUNCT_1:def 5;
        end;
      end;
    end;
    hence ex N be Neighbourhood of r1 st N c= rng f1;
  end;
  hence thesis by RCOMP_1:41;
end;

theorem
   left_open_halfline(p) c= dom f &
  f|left_open_halfline p is continuous &
  (f|left_open_halfline p is increasing or
  f|left_open_halfline p is decreasing) implies
  rng (f|left_open_halfline(p)) is open
proof
  set L = left_open_halfline(p);
  assume that
A0: left_open_halfline(p) c= dom f and
A1: f|L is continuous and
A2: f|L is increasing or f|L is decreasing;
  now
    set f1 = f|L;
    let r1 be real number;
    assume r1 in rng f1;
    then consider x0 such that
A3: x0 in dom f1 & f1.x0 = r1 by PARTFUN1:26;
A4: x0 in dom f /\ L by A3,RELAT_1:90;
    then x0 in dom f & x0 in L by XBOOLE_0:def 4;
    then consider N be Neighbourhood of x0 such that
A5: N c= L by RCOMP_1:39;
    consider r be real number such that
A6: 0 < r & N = ].x0 - r, x0 + r.[ by RCOMP_1:def 7;
    reconsider r as Real by XREAL_0:def 1;
A7: f|N is continuous by A1,A5,FCONT_1:17;
A8: r/2 < r by A6,XREAL_1:218;
    then
A9: x0 - r < x0 - r/2 by XREAL_1:17;
A10: 0 < r/2 by A6,XREAL_1:217;
    then
A11: x0 - r/2 < x0 - 0 by XREAL_1:17;
    x0 < x0 + r by A6,XREAL_1:31;
    then x0 - r/2 < x0 + r by A11,XXREAL_0:2;
    then
A12: x0 - r/2 in ].x0 - r, x0 + r.[ by A9;
A13: x0 + r/2 < x0 + r by A8,XREAL_1:10;
A14: x0 - r < x0 by A6,XREAL_1:46;
A15: x0 < x0 + r/2 by A10,XREAL_1:31;
    then x0 - r < x0 + r/2 by A14,XXREAL_0:2;
    then
A16: x0 + r/2 in ].x0 - r, x0 + r.[ by A13;
    then
A17: [.x0 - r/2, x0 + r/2.] c= ].x0 - r, x0 + r.[ by A12,XXREAL_2:def 12;
    then [.x0 - r/2, x0 + r/2.] c= L by A5,A6,XBOOLE_1:1;
    then
X:    [.x0 - r/2, x0 + r/2.] c= dom f by A0,XBOOLE_1:1;
A18: f|[.x0 - r/2, x0 + r/2.] is continuous  by A6,A7,A17,FCONT_1:17;
    set fm = f.(x0 - r/2);
    set fp = f.(x0 + r/2);
A19: x0 - r/2 < x0 + r/2 by A11,A15,XXREAL_0:2;
A20: N c= dom f by A0,A5,XBOOLE_1:1;
    then
A21: x0 + r/2 in L /\ dom f by A5,A6,A16,XBOOLE_0:def 4;
A22: x0 - r/2 in L /\ dom f by A5,A6,A12,A20,XBOOLE_0:def 4;
A23: r1 = f.x0 by A3,FUNCT_1:70;
    now per cases by A2;
      suppose
A24:    f|L is increasing;
        then fm < fp by A19,A21,A22,RFUNCT_2:43;
        then [.fp,fm.] = {} by XXREAL_1:29;
        then
A25:    [.fm,fp.] \/ [.fp,fm.] = [.fm,fp.];
        fm < f.x0 by A4,A11,A22,A24,RFUNCT_2:43;
        then
A26:    0 < f.x0 - fm by XREAL_1:52;
        set R = min(f.x0 - fm,fp - f.x0);
        f.x0 < fp by A4,A15,A21,A24,RFUNCT_2:43;
        then 0 < fp - f.x0 by XREAL_1:52;
        then 0 < R by A26,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        thus N1 c= rng f1
        proof
          let x;
          assume x in N1;
          then consider r2 such that
A27:      r2 = x & f.x0 - R < r2 & r2 < f.x0 + R by A23;
A28:      R <= f.x0 - fm & R <= fp - f.x0 by XXREAL_0:17;
          then f.x0 - (f.x0 - fm) <= f.x0 - R by XREAL_1:15;
          then
A29:      fm < r2 by A27,XXREAL_0:2;
          f.x0 + R <= f.x0 + (fp - f.x0) by A28,XREAL_1:9;
          then r2 < fp by A27,XXREAL_0:2;
          then
A30:      r2 in ].fm,fp.[ by A29;
          ].fm,fp.[ c= [.fm,fp.] by XXREAL_1:25;
          then consider s such that
A31:      s in [.x0 - r/2, x0 + r/2.] & x = f.s by A18,A19,A25,A27,A30,X,
FCONT_2:16;
          s in N by A6,A17,A31;
          then s in dom f /\ L by A5,A20,XBOOLE_0:def 4;
          then
A32:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A31,FUNCT_1:70;
          hence thesis by A32,FUNCT_1:def 5;
        end;
      end;
      suppose
A33:    f|L is decreasing;
        then fp < fm by A19,A21,A22,RFUNCT_2:44;
        then [.fm,fp.] = {} by XXREAL_1:29;
        then
A34:    [.fm,fp.] \/ [.fp,fm.] = [.fp,fm.];
        f.x0 < fm by A4,A11,A22,A33,RFUNCT_2:44;
        then
A35:    0 < fm - f.x0 by XREAL_1:52;
        set R = min(fm - f.x0,f.x0 - fp);
        fp < f.x0 by A4,A15,A21,A33,RFUNCT_2:44;
        then 0 < f.x0 - fp by XREAL_1:52;
        then 0 < R by A35,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        thus N1 c= rng f1
        proof
          let x;
          assume x in N1;
          then consider r2 such that
A36:      r2 = x & f.x0 - R < r2 & r2 < f.x0 + R by A23;
A37:      R <= fm - f.x0 & R <= f.x0 - fp by XXREAL_0:17;
          then f.x0 - (f.x0 - fp) <= f.x0 - R by XREAL_1:15;
          then
A38:      fp < r2 by A36,XXREAL_0:2;
          f.x0 + R <= f.x0 + (fm - f.x0) by A37,XREAL_1:9;
          then r2 < fm by A36,XXREAL_0:2;
          then
A39:      r2 in ].fp,fm.[ by A38;
          ].fp,fm.[ c= [.fp,fm.] by XXREAL_1:25;
          then consider s such that
A40:      s in [.x0 - r/2, x0 + r/2.] & x = f.s by A18,A19,A34,A36,A39,X,
FCONT_2:16;
          s in N by A6,A17,A40;
          then s in dom f /\ L by A5,A20,XBOOLE_0:def 4;
          then
A41:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A40,FUNCT_1:70;
          hence thesis by A41,FUNCT_1:def 5;
        end;
      end;
    end;
    hence ex N be Neighbourhood of r1 st N c= rng f1;
  end;
  hence thesis by RCOMP_1:41;
end;

theorem
  right_open_halfline(p) c= dom f &
  f|right_open_halfline p is continuous &
  (f|right_open_halfline p is increasing or
  f|right_open_halfline p is decreasing) implies
  rng (f|right_open_halfline(p)) is open
proof
  set L = right_open_halfline(p);
  assume that
A0: right_open_halfline(p) c= dom f and
A1: f|L is continuous and
A2: f|L is increasing or f|L is decreasing;
  now
    set f1 = f|L;
    let r1 be real number;
    assume r1 in rng f1;
    then consider x0 such that
A3: x0 in dom f1 & f1.x0 = r1 by PARTFUN1:26;
A4: x0 in dom f /\ L by A3,RELAT_1:90;
    then x0 in dom f & x0 in L by XBOOLE_0:def 4;
    then consider N be Neighbourhood of x0 such that
A5: N c= L by RCOMP_1:39;
    consider r be real number such that
A6: 0 < r & N = ].x0 - r, x0 + r.[ by RCOMP_1:def 7;
    reconsider r as Real by XREAL_0:def 1;
A7: f|N is continuous by A1,A5,FCONT_1:17;
A8: r/2 < r by A6,XREAL_1:218;
    then
A9: x0 - r < x0 - r/2 by XREAL_1:17;
A10: 0 < r/2 by A6,XREAL_1:217;
    then
A11: x0 - r/2 < x0 - 0 by XREAL_1:17;
    x0 < x0 + r by A6,XREAL_1:31;
    then x0 - r/2 < x0 + r by A11,XXREAL_0:2;
    then
A12: x0 - r/2 in ].x0 - r, x0 + r.[ by A9;
A13: x0 + r/2 < x0 + r by A8,XREAL_1:10;
A14: x0 - r < x0 by A6,XREAL_1:46;
A15: x0 < x0 + r/2 by A10,XREAL_1:31;
    then x0 - r < x0 + r/2 by A14,XXREAL_0:2;
    then
A16: x0 + r/2 in ].x0 - r, x0 + r.[ by A13;
    then
A17: [.x0 - r/2, x0 + r/2.] c= ].x0 - r, x0 + r.[ by A12,XXREAL_2:def 12;
    then [.x0 - r/2, x0 + r/2.] c= L by A5,A6,XBOOLE_1:1;
    then
X:        [.x0 - r/2, x0 + r/2.] c= dom f by A0,XBOOLE_1:1;
A18: f|([.x0 - r/2, x0 + r/2.]) is continuous  by A6,A7,A17,FCONT_1:17;
    set fm = f.(x0 - r/2);
    set fp = f.(x0 + r/2);
A19: x0 - r/2 < x0 + r/2 by A11,A15,XXREAL_0:2;
A20: N c= dom f by A0,A5,XBOOLE_1:1;
    then
A21: x0 + r/2 in L /\ dom f by A5,A6,A16,XBOOLE_0:def 4;
A22: x0 - r/2 in L /\ dom f by A5,A6,A12,A20,XBOOLE_0:def 4;
A23: r1 = f.x0 by A3,FUNCT_1:70;
    now per cases by A2;
      suppose
A24:    f|L is increasing;
        then fm < fp by A19,A21,A22,RFUNCT_2:43;
        then [.fp,fm.] = {} by XXREAL_1:29;
        then
A25:    [.fm,fp.] \/ [.fp,fm.] = [.fm,fp.];
        fm < f.x0 by A4,A11,A22,A24,RFUNCT_2:43;
        then
A26:    0 < f.x0 - fm by XREAL_1:52;
        set R = min(f.x0 - fm,fp - f.x0);
        f.x0 < fp by A4,A15,A21,A24,RFUNCT_2:43;
        then 0 < fp - f.x0 by XREAL_1:52;
        then 0 < R by A26,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        thus N1 c= rng f1
        proof
          let x;
          assume x in N1;
          then consider r2 such that
A27:      r2 = x & f.x0 - R < r2 & r2 < f.x0 + R by A23;
A28:      R <= f.x0 - fm & R <= fp - f.x0 by XXREAL_0:17;
          then f.x0 - (f.x0 - fm) <= f.x0 - R by XREAL_1:15;
          then
A29:      fm < r2 by A27,XXREAL_0:2;
          f.x0 + R <= f.x0 + (fp - f.x0) by A28,XREAL_1:9;
          then r2 < fp by A27,XXREAL_0:2;
          then
A30:      r2 in ].fm,fp.[ by A29;
          ].fm,fp.[ c= [.fm,fp.] by XXREAL_1:25;
          then consider s such that
A31:      s in [.x0 - r/2, x0 + r/2.] & x = f.s by A18,A19,A25,A27,A30,X,
FCONT_2:16;
          s in N by A6,A17,A31;
          then s in dom f /\ L by A5,A20,XBOOLE_0:def 4;
          then
A32:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A31,FUNCT_1:70;
          hence thesis by A32,FUNCT_1:def 5;
        end;
      end;
      suppose
A33:    f|L is decreasing;
        then fp < fm by A19,A21,A22,RFUNCT_2:44;
        then [.fm,fp.] = {} by XXREAL_1:29;
        then
A34:    [.fm,fp.] \/ [.fp,fm.] = [.fp,fm.];
        f.x0 < fm by A4,A11,A22,A33,RFUNCT_2:44;
        then
A35:    0 < fm - f.x0 by XREAL_1:52;
        set R = min(fm - f.x0,f.x0 - fp);
        fp < f.x0 by A4,A15,A21,A33,RFUNCT_2:44;
        then 0 < f.x0 - fp by XREAL_1:52;
        then 0 < R by A35,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        thus N1 c= rng f1
        proof
          let x;
          assume x in N1;
          then consider r2 such that
A36:      r2 = x & f.x0 - R < r2 & r2 < f.x0 + R by A23;
A37:      R <= fm - f.x0 & R <= f.x0 - fp by XXREAL_0:17;
          then f.x0 - (f.x0 - fp) <= f.x0 - R by XREAL_1:15;
          then
A38:      fp < r2 by A36,XXREAL_0:2;
          f.x0 + R <= f.x0 + (fm - f.x0) by A37,XREAL_1:9;
          then r2 < fm by A36,XXREAL_0:2;
          then
A39:      r2 in ].fp,fm.[ by A38;
          ].fp,fm.[ c= [.fp,fm.] by XXREAL_1:25;
          then consider s such that
A40:      s in [.x0 - r/2, x0 + r/2.] & x = f.s by A18,A19,A34,A36,A39,X,
FCONT_2:16;
          s in N by A6,A17,A40;
          then s in dom f /\ L by A5,A20,XBOOLE_0:def 4;
          then
A41:      s in dom f1 by RELAT_1:90;
          then x = f1.s by A40,FUNCT_1:70;
          hence thesis by A41,FUNCT_1:def 5;
        end;
      end;
    end;
    hence ex N be Neighbourhood of r1 st N c= rng f1;
  end;
  hence thesis by RCOMP_1:41;
end;

theorem
  [#](REAL) c= dom f & f|[#]REAL is continuous &
  (f|[#]REAL is increasing or f|[#]REAL is decreasing) implies
  rng f is open
proof
  set L = [#]REAL;
  assume that
A0: [#](REAL) c= dom f and
A1: f|L is continuous and
A2: f|L is increasing or f|L is decreasing;
  now
    let r1 be real number;
    assume r1 in rng f;
    then consider x0 such that
A3: x0 in dom f & f.x0 = r1 by PARTFUN1:26;
    consider N be Neighbourhood of x0;
    consider r be real number such that
A4: 0 < r & N = ].x0 - r, x0 + r.[ by RCOMP_1:def 7;
    reconsider r as Real by XREAL_0:def 1;
A6: r/2 < r by A4,XREAL_1:218;
    then
A7: x0 - r < x0 - r/2 by XREAL_1:17;
A8: 0 < r/2 by A4,XREAL_1:217;
    then
A9: x0 - r/2 < x0 - 0 by XREAL_1:17;
    x0 < x0 + r by A4,XREAL_1:31;
    then x0 - r/2 < x0 + r by A9,XXREAL_0:2;
    then
A10: x0 - r/2 in ].x0 - r, x0 + r.[ by A7;
A11: x0 + r/2 < x0 + r by A6,XREAL_1:10;
A12: x0 - r < x0 by A4,XREAL_1:46;
A13: x0 < x0 + r/2 by A8,XREAL_1:31;
    then x0 - r < x0 + r/2 by A12,XXREAL_0:2;
    then
A14: x0 + r/2 in ].x0 - r, x0 + r.[ by A11;
    then
A15: [.x0 - r/2, x0 + r/2.] c= ].x0 - r, x0 + r.[ by A10,XXREAL_2:def 12;
A16: f|([.x0 - r/2, x0 + r/2.]) is continuous  by A1,FCONT_1:17;
    set fm = f.(x0 - r/2);
    set fp = f.(x0 + r/2);
A17: x0 - r/2 < x0 + r/2 by A9,A13,XXREAL_0:2;
A18: N c= dom f by A0,XBOOLE_1:1;
    then
A19: x0 + r/2 in L /\ dom f by A4,A14,XBOOLE_0:def 4;
A20: x0 - r/2 in L /\ dom f by A4,A10,A18,XBOOLE_0:def 4;
A21: x0 in L /\ dom f by A3,XBOOLE_0:def 4;
    now per cases by A2;
      suppose
A22:    f|L is increasing;
        then fm < fp by A17,A19,A20,RFUNCT_2:43;
        then [.fp,fm.] = {} by XXREAL_1:29;
        then
A23:    [.fm,fp.] \/ [.fp,fm.] = [.fm,fp.];
        fm < f.x0 by A9,A20,A21,A22,RFUNCT_2:43;
        then
A24:    0 < f.x0 - fm by XREAL_1:52;
        set R = min(f.x0 - fm,fp - f.x0);
        f.x0 < fp by A13,A19,A21,A22,RFUNCT_2:43;
        then 0 < fp - f.x0 by XREAL_1:52;
        then 0 < R by A24,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        thus N1 c= rng f
        proof
          let x;
          assume x in N1;
          then consider r2 such that
A25:      r2 = x & f.x0 - R < r2 & r2 < f.x0 + R by A3;
A26:      R <= f.x0 - fm & R <= fp - f.x0 by XXREAL_0:17;
          then f.x0 - (f.x0 - fm) <= f.x0 - R by XREAL_1:15;
          then
A27:      fm < r2 by A25,XXREAL_0:2;
          f.x0 + R <= f.x0 + (fp - f.x0) by A26,XREAL_1:9;
          then r2 < fp by A25,XXREAL_0:2;
          then
A28:      r2 in ].fm,fp.[ by A27;
          ].x0 - r, x0 + r.[ c= dom f by A0,XBOOLE_1:1;
          then
X:        [.x0 - r/2, x0 + r/2.] c= dom f by A15,XBOOLE_1:1;
          ].fm,fp.[ c= [.fm,fp.] by XXREAL_1:25;
          then consider s such that
A29:      s in [.x0 - r/2, x0 + r/2.] & x = f.s by A16,A17,A23,A25,A28,X,
FCONT_2:16;
          s in N by A4,A15,A29;
          hence thesis by A18,A29,FUNCT_1:def 5;
        end;
      end;
      suppose
A30:    f|L is decreasing;
        then fp < fm by A17,A19,A20,RFUNCT_2:44;
        then [.fm,fp.] = {} by XXREAL_1:29;
        then
A31:    [.fm,fp.] \/ [.fp,fm.] = [.fp,fm.];
        f.x0 < fm by A9,A20,A21,A30,RFUNCT_2:44;
        then
A32:    0 < fm - f.x0 by XREAL_1:52;
        set R = min(fm - f.x0,f.x0 - fp);
        fp < f.x0 by A13,A19,A21,A30,RFUNCT_2:44;
        then 0 < f.x0 - fp by XREAL_1:52;
        then 0 < R by A32,XXREAL_0:15;
        then reconsider N1 = ].r1 - R, r1 + R.[ as Neighbourhood of r1 by
RCOMP_1:def 7;
        take N1;
        thus N1 c= rng f
        proof
          let x;
          assume x in N1;
          then consider r2 such that
A33:      r2 = x & f.x0 - R < r2 & r2 < f.x0 + R by A3;
A34:      R <= fm - f.x0 & R <= f.x0 - fp by XXREAL_0:17;
          then f.x0 - (f.x0 - fp) <= f.x0 - R by XREAL_1:15;
          then
A35:      fp < r2 by A33,XXREAL_0:2;
          f.x0 + R <= f.x0 + (fm - f.x0) by A34,XREAL_1:9;
          then r2 < fm by A33,XXREAL_0:2;
          then
A36:      r2 in ].fp,fm.[ by A35;
X:        [.x0 - r/2, x0 + r/2.] c= dom f by A0,XBOOLE_1:1;
          ].fp,fm.[ c= [.fp,fm.] by XXREAL_1:25;
          then consider s such that
A37:      s in [.x0 - r/2, x0 + r/2.] & x = f.s by A16,A17,A31,A33,A36,X,
FCONT_2:16;
          s in N by A4,A15,A37;
          hence thesis by A18,A37,FUNCT_1:def 5;
        end;
      end;
    end;
    hence ex N be Neighbourhood of r1 st N c= rng f;
  end;
  hence thesis by RCOMP_1:41;
end;

